<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Harvard FAS CAMLab</title>
    <meta name="robots" content="max-image-preview:large" />
    <script type="text/javascript">
      window._wpemojiSettings = {
        baseUrl: "https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/72x72\/",
        ext: ".png",
        svgUrl: "https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/svg\/",
        svgExt: ".svg",
        source: {
          concatemoji:
            "https:\/\/camlab.fas.harvard.edu\/wp-includes\/js\/wp-emoji-release.min.js?ver=6.1.1",
        },
      };
      /*! This file is auto-generated */
      !(function (e, a, t) {
        var n,
          r,
          o,
          i = a.createElement("canvas"),
          p = i.getContext && i.getContext("2d");
        function s(e, t) {
          var a = String.fromCharCode,
            e =
              (p.clearRect(0, 0, i.width, i.height),
              p.fillText(a.apply(this, e), 0, 0),
              i.toDataURL());
          return (
            p.clearRect(0, 0, i.width, i.height),
            p.fillText(a.apply(this, t), 0, 0),
            e === i.toDataURL()
          );
        }
        function c(e) {
          var t = a.createElement("script");
          (t.src = e),
            (t.defer = t.type = "text/javascript"),
            a.getElementsByTagName("head")[0].appendChild(t);
        }
        for (
          o = Array("flag", "emoji"),
            t.supports = { everything: !0, everythingExceptFlag: !0 },
            r = 0;
          r < o.length;
          r++
        )
          (t.supports[o[r]] = (function (e) {
            if (p && p.fillText)
              switch (
                ((p.textBaseline = "top"), (p.font = "600 32px Arial"), e)
              ) {
                case "flag":
                  return s(
                    [127987, 65039, 8205, 9895, 65039],
                    [127987, 65039, 8203, 9895, 65039]
                  )
                    ? !1
                    : !s(
                        [55356, 56826, 55356, 56819],
                        [55356, 56826, 8203, 55356, 56819]
                      ) &&
                        !s(
                          [
                            55356, 57332, 56128, 56423, 56128, 56418, 56128,
                            56421, 56128, 56430, 56128, 56423, 56128, 56447,
                          ],
                          [
                            55356, 57332, 8203, 56128, 56423, 8203, 56128,
                            56418, 8203, 56128, 56421, 8203, 56128, 56430, 8203,
                            56128, 56423, 8203, 56128, 56447,
                          ]
                        );
                case "emoji":
                  return !s(
                    [129777, 127995, 8205, 129778, 127999],
                    [129777, 127995, 8203, 129778, 127999]
                  );
              }
            return !1;
          })(o[r])),
            (t.supports.everything = t.supports.everything && t.supports[o[r]]),
            "flag" !== o[r] &&
              (t.supports.everythingExceptFlag =
                t.supports.everythingExceptFlag && t.supports[o[r]]);
        (t.supports.everythingExceptFlag =
          t.supports.everythingExceptFlag && !t.supports.flag),
          (t.DOMReady = !1),
          (t.readyCallback = function () {
            t.DOMReady = !0;
          }),
          t.supports.everything ||
            ((n = function () {
              t.readyCallback();
            }),
            a.addEventListener
              ? (a.addEventListener("DOMContentLoaded", n, !1),
                e.addEventListener("load", n, !1))
              : (e.attachEvent("onload", n),
                a.attachEvent("onreadystatechange", function () {
                  "complete" === a.readyState && t.readyCallback();
                })),
            (e = t.source || {}).concatemoji
              ? c(e.concatemoji)
              : e.wpemoji && e.twemoji && (c(e.twemoji), c(e.wpemoji)));
      })(window, document, window._wpemojiSettings);
    </script>
    <style type="text/css">
      img.wp-smiley,
      img.emoji {
        display: inline !important;
        border: none !important;
        box-shadow: none !important;
        height: 1em !important;
        width: 1em !important;
        margin: 0 0.07em !important;
        vertical-align: -0.1em !important;
        background: none !important;
        padding: 0 !important;
      }
    </style>
    <link
      rel="stylesheet"
      id="wp-block-library-css"
      href="https://camlab.fas.harvard.edu/wp-includes/css/dist/block-library/style.min.css?ver=6.1.1"
      type="text/css"
      media="all"
    />
    <link
      rel="stylesheet"
      id="classic-theme-styles-css"
      href="https://camlab.fas.harvard.edu/wp-includes/css/classic-themes.min.css?ver=1"
      type="text/css"
      media="all"
    />
    <style id="global-styles-inline-css" type="text/css">
      body {
        --wp--preset--color--black: #000000;
        --wp--preset--color--cyan-bluish-gray: #abb8c3;
        --wp--preset--color--white: #ffffff;
        --wp--preset--color--pale-pink: #f78da7;
        --wp--preset--color--vivid-red: #cf2e2e;
        --wp--preset--color--luminous-vivid-orange: #ff6900;
        --wp--preset--color--luminous-vivid-amber: #fcb900;
        --wp--preset--color--light-green-cyan: #7bdcb5;
        --wp--preset--color--vivid-green-cyan: #00d084;
        --wp--preset--color--pale-cyan-blue: #8ed1fc;
        --wp--preset--color--vivid-cyan-blue: #0693e3;
        --wp--preset--color--vivid-purple: #9b51e0;
        --wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(
          135deg,
          rgba(6, 147, 227, 1) 0%,
          rgb(155, 81, 224) 100%
        );
        --wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(
          135deg,
          rgb(122, 220, 180) 0%,
          rgb(0, 208, 130) 100%
        );
        --wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(
          135deg,
          rgba(252, 185, 0, 1) 0%,
          rgba(255, 105, 0, 1) 100%
        );
        --wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(
          135deg,
          rgba(255, 105, 0, 1) 0%,
          rgb(207, 46, 46) 100%
        );
        --wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(
          135deg,
          rgb(238, 238, 238) 0%,
          rgb(169, 184, 195) 100%
        );
        --wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(
          135deg,
          rgb(74, 234, 220) 0%,
          rgb(151, 120, 209) 20%,
          rgb(207, 42, 186) 40%,
          rgb(238, 44, 130) 60%,
          rgb(251, 105, 98) 80%,
          rgb(254, 248, 76) 100%
        );
        --wp--preset--gradient--blush-light-purple: linear-gradient(
          135deg,
          rgb(255, 206, 236) 0%,
          rgb(152, 150, 240) 100%
        );
        --wp--preset--gradient--blush-bordeaux: linear-gradient(
          135deg,
          rgb(254, 205, 165) 0%,
          rgb(254, 45, 45) 50%,
          rgb(107, 0, 62) 100%
        );
        --wp--preset--gradient--luminous-dusk: linear-gradient(
          135deg,
          rgb(255, 203, 112) 0%,
          rgb(199, 81, 192) 50%,
          rgb(65, 88, 208) 100%
        );
        --wp--preset--gradient--pale-ocean: linear-gradient(
          135deg,
          rgb(255, 245, 203) 0%,
          rgb(182, 227, 212) 50%,
          rgb(51, 167, 181) 100%
        );
        --wp--preset--gradient--electric-grass: linear-gradient(
          135deg,
          rgb(202, 248, 128) 0%,
          rgb(113, 206, 126) 100%
        );
        --wp--preset--gradient--midnight: linear-gradient(
          135deg,
          rgb(2, 3, 129) 0%,
          rgb(40, 116, 252) 100%
        );
        --wp--preset--duotone--dark-grayscale: url("#wp-duotone-dark-grayscale");
        --wp--preset--duotone--grayscale: url("#wp-duotone-grayscale");
        --wp--preset--duotone--purple-yellow: url("#wp-duotone-purple-yellow");
        --wp--preset--duotone--blue-red: url("#wp-duotone-blue-red");
        --wp--preset--duotone--midnight: url("#wp-duotone-midnight");
        --wp--preset--duotone--magenta-yellow: url("#wp-duotone-magenta-yellow");
        --wp--preset--duotone--purple-green: url("#wp-duotone-purple-green");
        --wp--preset--duotone--blue-orange: url("#wp-duotone-blue-orange");
        --wp--preset--font-size--small: 13px;
        --wp--preset--font-size--medium: 20px;
        --wp--preset--font-size--large: 36px;
        --wp--preset--font-size--x-large: 42px;
        --wp--preset--spacing--20: 0.44rem;
        --wp--preset--spacing--30: 0.67rem;
        --wp--preset--spacing--40: 1rem;
        --wp--preset--spacing--50: 1.5rem;
        --wp--preset--spacing--60: 2.25rem;
        --wp--preset--spacing--70: 3.38rem;
        --wp--preset--spacing--80: 5.06rem;
      }
      :where(.is-layout-flex) {
        gap: 0.5em;
      }
      body .is-layout-flow > .alignleft {
        float: left;
        margin-inline-start: 0;
        margin-inline-end: 2em;
      }
      body .is-layout-flow > .alignright {
        float: right;
        margin-inline-start: 2em;
        margin-inline-end: 0;
      }
      body .is-layout-flow > .aligncenter {
        margin-left: auto !important;
        margin-right: auto !important;
      }
      body .is-layout-constrained > .alignleft {
        float: left;
        margin-inline-start: 0;
        margin-inline-end: 2em;
      }
      body .is-layout-constrained > .alignright {
        float: right;
        margin-inline-start: 2em;
        margin-inline-end: 0;
      }
      body .is-layout-constrained > .aligncenter {
        margin-left: auto !important;
        margin-right: auto !important;
      }
      body
        .is-layout-constrained
        > :where(:not(.alignleft):not(.alignright):not(.alignfull)) {
        max-width: var(--wp--style--global--content-size);
        margin-left: auto !important;
        margin-right: auto !important;
      }
      body .is-layout-constrained > .alignwide {
        max-width: var(--wp--style--global--wide-size);
      }
      body .is-layout-flex {
        display: flex;
      }
      body .is-layout-flex {
        flex-wrap: wrap;
        align-items: center;
      }
      body .is-layout-flex > * {
        margin: 0;
      }
      :where(.wp-block-columns.is-layout-flex) {
        gap: 2em;
      }
      .has-black-color {
        color: var(--wp--preset--color--black) !important;
      }
      .has-cyan-bluish-gray-color {
        color: var(--wp--preset--color--cyan-bluish-gray) !important;
      }
      .has-white-color {
        color: var(--wp--preset--color--white) !important;
      }
      .has-pale-pink-color {
        color: var(--wp--preset--color--pale-pink) !important;
      }
      .has-vivid-red-color {
        color: var(--wp--preset--color--vivid-red) !important;
      }
      .has-luminous-vivid-orange-color {
        color: var(--wp--preset--color--luminous-vivid-orange) !important;
      }
      .has-luminous-vivid-amber-color {
        color: var(--wp--preset--color--luminous-vivid-amber) !important;
      }
      .has-light-green-cyan-color {
        color: var(--wp--preset--color--light-green-cyan) !important;
      }
      .has-vivid-green-cyan-color {
        color: var(--wp--preset--color--vivid-green-cyan) !important;
      }
      .has-pale-cyan-blue-color {
        color: var(--wp--preset--color--pale-cyan-blue) !important;
      }
      .has-vivid-cyan-blue-color {
        color: var(--wp--preset--color--vivid-cyan-blue) !important;
      }
      .has-vivid-purple-color {
        color: var(--wp--preset--color--vivid-purple) !important;
      }
      .has-black-background-color {
        background-color: var(--wp--preset--color--black) !important;
      }
      .has-cyan-bluish-gray-background-color {
        background-color: var(--wp--preset--color--cyan-bluish-gray) !important;
      }
      .has-white-background-color {
        background-color: var(--wp--preset--color--white) !important;
      }
      .has-pale-pink-background-color {
        background-color: var(--wp--preset--color--pale-pink) !important;
      }
      .has-vivid-red-background-color {
        background-color: var(--wp--preset--color--vivid-red) !important;
      }
      .has-luminous-vivid-orange-background-color {
        background-color: var(
          --wp--preset--color--luminous-vivid-orange
        ) !important;
      }
      .has-luminous-vivid-amber-background-color {
        background-color: var(
          --wp--preset--color--luminous-vivid-amber
        ) !important;
      }
      .has-light-green-cyan-background-color {
        background-color: var(--wp--preset--color--light-green-cyan) !important;
      }
      .has-vivid-green-cyan-background-color {
        background-color: var(--wp--preset--color--vivid-green-cyan) !important;
      }
      .has-pale-cyan-blue-background-color {
        background-color: var(--wp--preset--color--pale-cyan-blue) !important;
      }
      .has-vivid-cyan-blue-background-color {
        background-color: var(--wp--preset--color--vivid-cyan-blue) !important;
      }
      .has-vivid-purple-background-color {
        background-color: var(--wp--preset--color--vivid-purple) !important;
      }
      .has-black-border-color {
        border-color: var(--wp--preset--color--black) !important;
      }
      .has-cyan-bluish-gray-border-color {
        border-color: var(--wp--preset--color--cyan-bluish-gray) !important;
      }
      .has-white-border-color {
        border-color: var(--wp--preset--color--white) !important;
      }
      .has-pale-pink-border-color {
        border-color: var(--wp--preset--color--pale-pink) !important;
      }
      .has-vivid-red-border-color {
        border-color: var(--wp--preset--color--vivid-red) !important;
      }
      .has-luminous-vivid-orange-border-color {
        border-color: var(
          --wp--preset--color--luminous-vivid-orange
        ) !important;
      }
      .has-luminous-vivid-amber-border-color {
        border-color: var(--wp--preset--color--luminous-vivid-amber) !important;
      }
      .has-light-green-cyan-border-color {
        border-color: var(--wp--preset--color--light-green-cyan) !important;
      }
      .has-vivid-green-cyan-border-color {
        border-color: var(--wp--preset--color--vivid-green-cyan) !important;
      }
      .has-pale-cyan-blue-border-color {
        border-color: var(--wp--preset--color--pale-cyan-blue) !important;
      }
      .has-vivid-cyan-blue-border-color {
        border-color: var(--wp--preset--color--vivid-cyan-blue) !important;
      }
      .has-vivid-purple-border-color {
        border-color: var(--wp--preset--color--vivid-purple) !important;
      }
      .has-vivid-cyan-blue-to-vivid-purple-gradient-background {
        background: var(
          --wp--preset--gradient--vivid-cyan-blue-to-vivid-purple
        ) !important;
      }
      .has-light-green-cyan-to-vivid-green-cyan-gradient-background {
        background: var(
          --wp--preset--gradient--light-green-cyan-to-vivid-green-cyan
        ) !important;
      }
      .has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background {
        background: var(
          --wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange
        ) !important;
      }
      .has-luminous-vivid-orange-to-vivid-red-gradient-background {
        background: var(
          --wp--preset--gradient--luminous-vivid-orange-to-vivid-red
        ) !important;
      }
      .has-very-light-gray-to-cyan-bluish-gray-gradient-background {
        background: var(
          --wp--preset--gradient--very-light-gray-to-cyan-bluish-gray
        ) !important;
      }
      .has-cool-to-warm-spectrum-gradient-background {
        background: var(
          --wp--preset--gradient--cool-to-warm-spectrum
        ) !important;
      }
      .has-blush-light-purple-gradient-background {
        background: var(--wp--preset--gradient--blush-light-purple) !important;
      }
      .has-blush-bordeaux-gradient-background {
        background: var(--wp--preset--gradient--blush-bordeaux) !important;
      }
      .has-luminous-dusk-gradient-background {
        background: var(--wp--preset--gradient--luminous-dusk) !important;
      }
      .has-pale-ocean-gradient-background {
        background: var(--wp--preset--gradient--pale-ocean) !important;
      }
      .has-electric-grass-gradient-background {
        background: var(--wp--preset--gradient--electric-grass) !important;
      }
      .has-midnight-gradient-background {
        background: var(--wp--preset--gradient--midnight) !important;
      }
      .has-small-font-size {
        font-size: var(--wp--preset--font-size--small) !important;
      }
      .has-medium-font-size {
        font-size: var(--wp--preset--font-size--medium) !important;
      }
      .has-large-font-size {
        font-size: var(--wp--preset--font-size--large) !important;
      }
      .has-x-large-font-size {
        font-size: var(--wp--preset--font-size--x-large) !important;
      }
      .wp-block-navigation a:where(:not(.wp-element-button)) {
        color: inherit;
      }
      :where(.wp-block-columns.is-layout-flex) {
        gap: 2em;
      }
      .wp-block-pullquote {
        font-size: 1.5em;
        line-height: 1.6;
      }
    </style>
    <link
      rel="stylesheet"
      id="gt-css-swiper-css"
      href="https://camlab.fas.harvard.edu/wp-content/plugins/gt_css_js/swiper/swiper-bundle.min.css?ver=8.3.2"
      type="text/css"
      media="all"
    />
    <link
      rel="stylesheet"
      id="gt-font-BentonSansRegular-css"
      href="https://camlab.fas.harvard.edu/wp-content/plugins/gt_css_js/fonts/BentonSansRegular/BentonSansRegular.css?ver=0.16"
      type="text/css"
      media="all"
    />
    <link
      rel="stylesheet"
      id="gt-font-BentonSansLight-css"
      href="https://camlab.fas.harvard.edu/wp-content/plugins/gt_css_js/fonts/BentonSansLight/BentonSansLight.css?ver=0.16"
      type="text/css"
      media="all"
    />
    <link
      rel="stylesheet"
      id="gt-font-BentonSansBook-css"
      href="https://camlab.fas.harvard.edu/wp-content/plugins/gt_css_js/fonts/BentonSansBook/BentonSansBook.css?ver=0.16"
      type="text/css"
      media="all"
    />
    <link
      rel="stylesheet"
      id="gt-common-css"
      href="https://camlab.fas.harvard.edu/wp-content/plugins/gt_css_js/css/gt_common.css?ver=0.16"
      type="text/css"
      media="all"
    />
    <link
      rel="stylesheet"
      id="gt-css-css"
      href="https://camlab.fas.harvard.edu/wp-content/plugins/gt_css_js/css/gt_css.css?ver=0.16"
      type="text/css"
      media="all"
    />
    <link
      rel="stylesheet"
      id="gt-res-css"
      href="https://camlab.fas.harvard.edu/wp-content/plugins/gt_css_js/css/gt_res.css?ver=0.16"
      type="text/css"
      media="all"
    />
    <script
      type="text/javascript"
      src="https://camlab.fas.harvard.edu/wp-includes/js/jquery/jquery.min.js?ver=3.6.1"
      id="jquery-core-js"
    ></script>
    <script
      type="text/javascript"
      src="https://camlab.fas.harvard.edu/wp-includes/js/jquery/jquery-migrate.min.js?ver=3.3.2"
      id="jquery-migrate-js"
    ></script>
    <script
      type="text/javascript"
      src="https://camlab.fas.harvard.edu/wp-content/plugins/gt_css_js/js/gt_js.js?ver=0.16"
      id="gt-js-js"
    ></script>
    <script
      type="text/javascript"
      src="https://camlab.fas.harvard.edu/wp-content/plugins/gt_css_js/swiper/swiper-bundle.min.js?ver=8.3.2"
      id="gt-js-swiper-js"
    ></script>
    <link
      rel="https://api.w.org/"
      href="https://camlab.fas.harvard.edu/wp-json/"
    />
    <link
      rel="alternate"
      type="application/json"
      href="https://camlab.fas.harvard.edu/wp-json/wp/v2/pages/61"
    />
    <link
      rel="EditURI"
      type="application/rsd+xml"
      title="RSD"
      href="https://camlab.fas.harvard.edu/xmlrpc.php?rsd"
    />
    <link
      rel="wlwmanifest"
      type="application/wlwmanifest+xml"
      href="https://camlab.fas.harvard.edu/wp-includes/wlwmanifest.xml"
    />
    <meta name="generator" content="WordPress 6.1.1" />
    <link rel="canonical" href="https://camlab.fas.harvard.edu/" />
    <link rel="shortlink" href="https://camlab.fas.harvard.edu/" />
    <link
      rel="alternate"
      type="application/json+oembed"
      href="https://camlab.fas.harvard.edu/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fcamlab.fas.harvard.edu%2F"
    />
    <link
      rel="alternate"
      type="text/xml+oembed"
      href="https://camlab.fas.harvard.edu/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fcamlab.fas.harvard.edu%2F&#038;format=xml"
    />

    <!--BEGIN: TRACKING CODE MANAGER (v2.0.16) BY INTELLYWP.COM IN HEAD//-->
    <script>
      var _hmt = _hmt || [];
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?4c0ca676f932f870ed8899d3bf32cc0c";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-HKP3EQ17QR"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-HKP3EQ17QR");
    </script>
    <!--END: https://wordpress.org/plugins/tracking-code-manager IN HEAD//-->
    <meta
      name="generator"
      content="Powered by WPBakery Page Builder - drag and drop page builder for WordPress."
    />
    <link
      rel="icon"
      href="https://camlab.fas.harvard.edu/wp-content/uploads/2022/10/cropped-camlab-logo2-min-copy-32x32.png"
      sizes="32x32"
    />
    <link
      rel="icon"
      href="https://camlab.fas.harvard.edu/wp-content/uploads/2022/10/cropped-camlab-logo2-min-copy-192x192.png"
      sizes="192x192"
    />
    <link
      rel="apple-touch-icon"
      href="https://camlab.fas.harvard.edu/wp-content/uploads/2022/10/cropped-camlab-logo2-min-copy-180x180.png"
    />
    <meta
      name="msapplication-TileImage"
      content="https://camlab.fas.harvard.edu/wp-content/uploads/2022/10/cropped-camlab-logo2-min-copy-270x270.png"
    />
    <noscript
      ><style>
        .wpb_animate_when_almost_visible {
          opacity: 1;
        }
      </style></noscript
    >
  </head>

  <body
    data-rsssl="1"
    class="home page-template-default page page-id-61 wpb-js-composer js-comp-ver-6.7.0 vc_responsive"
  >
    <div id="page" class="site">
      <div class="site_nav whited9 font_16">
        <div class="top_logo">
          <a href="https://camlab.fas.harvard.edu/home/#theme"
            ><img
              width="800"
              height="274"
              src="https://camlab.fas.harvard.edu/wp-content/uploads/2022/10/camlab-logo2-copy.png"
              class="image wp-image-862 attachment-full size-full"
              alt=""
              decoding="async"
              loading="lazy"
              style="max-width: 100%; height: auto"
          /></a>
          <div class="button_nav">
            <div></div>
            <div></div>
            <div></div>
          </div>
        </div>
        <div class="meau_top">
          <div class="menu-menu-top-container">
            <ul id="menu-menu-top" class="menu-top">
              <li
                id="menu-item-882"
                class="mob_show menu-item menu-item-type-custom menu-item-object-custom current-menu-ancestor current-menu-parent menu-item-has-children menu-item-882"
              >
                <a href="#">Work</a>
                <ul class="sub-menu">
                  <li
                    id="menu-item-883"
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-883"
                  >
                    <a href="https://camlab.fas.harvard.edu/home/#theme"
                      >Theme</a
                    >
                  </li>
                  <li
                    id="menu-item-1310"
                    class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-home menu-item-1310"
                  >
                    <a
                      href="https://camlab.fas.harvard.edu/#timeline"
                      aria-current="page"
                      >Timeline</a
                    >
                  </li>
                  <li
                    id="menu-item-1273"
                    class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-home menu-item-1273"
                  >
                    <a
                      href="https://camlab.fas.harvard.edu/#space"
                      aria-current="page"
                      >Space</a
                    >
                  </li>
                  <li
                    id="menu-item-886"
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-886"
                  >
                    <a href="https://camlab.fas.harvard.edu/media/">Media</a>
                  </li>
                  <li
                    id="menu-item-887"
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-887"
                  >
                    <a href="https://camlab.fas.harvard.edu/highlight/"
                      >Highlight</a
                    >
                  </li>
                  <li
                    id="menu-item-888"
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-888"
                  >
                    <a href="https://camlab.fas.harvard.edu/project-index/"
                      >Index</a
                    >
                  </li>
                </ul>
              </li>
              <li
                id="menu-item-212"
                class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-212"
              >
                <a href="https://camlab.fas.harvard.edu/about/">About</a>
                <ul class="sub-menu">
                  <li
                    id="menu-item-214"
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-214"
                  >
                    <a
                      href="https://camlab.fas.harvard.edu/about/#founder_story"
                      >Founder Story</a
                    >
                  </li>
                  <li
                    id="menu-item-859"
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-859"
                  >
                    <a href="https://camlab.fas.harvard.edu/about/#camlab_cave"
                      >CAMLab Cave</a
                    >
                  </li>
                  <li
                    id="menu-item-215"
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-215"
                  >
                    <a href="https://camlab.fas.harvard.edu/about/#core_team"
                      >Team</a
                    >
                  </li>
                </ul>
              </li>
              <li
                id="menu-item-48"
                class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-48"
              >
                <a href="https://camlab.fas.harvard.edu/connect/">Connect</a>
                <ul class="sub-menu">
                  <li
                    id="menu-item-52"
                    class="menu-item menu-item-type-post_type menu-item-object-page menu-item-52"
                  >
                    <a href="https://camlab.fas.harvard.edu/connect/news/"
                      >News</a
                    >
                  </li>
                  <li
                    id="menu-item-51"
                    class="menu-item menu-item-type-post_type menu-item-object-page menu-item-51"
                  >
                    <a href="https://camlab.fas.harvard.edu/connect/events/"
                      >Events</a
                    >
                  </li>
                  <li
                    id="menu-item-50"
                    class="menu-item menu-item-type-post_type menu-item-object-page menu-item-50"
                  >
                    <a href="https://camlab.fas.harvard.edu/connect/join-us/"
                      >Join us</a
                    >
                  </li>
                  <li
                    id="menu-item-29"
                    class="menu-item menu-item-type-post_type menu-item-object-page menu-item-29"
                  >
                    <a href="https://camlab.fas.harvard.edu/connect/support-us/"
                      >Support us</a
                    >
                  </li>
                  <li
                    id="menu-item-53"
                    class="menu-item menu-item-type-post_type menu-item-object-page menu-item-53"
                  >
                    <a href="https://camlab.fas.harvard.edu/connect/contact-us/"
                      >Contact us</a
                    >
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div id="content" class="site-content">
        <div id="primary" class="content-area">
          <main id="main" class="site-main" role="main">
            <div class="loading">
              <div class="loading_text">loading...</div>
              <div class="loading_ring">
                <div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                </div>
              </div>
            </div>
            <style>
              .site-footer {
                display: none;
              }

              html,
              body {
                background-color: #0d0d0d;
              }

              .site_nav {
                z-index: 9999;
              }

              #theme_box {
                opacity: 0;
                transition: all 1s ease-in-out;
                position: absolute;
                top: 0;
                left: 0;
                z-index: 0;
              }

              #theme_box.show {
                opacity: 1;
              }

              .home_image.hide {
                display: none;
              }

              .home_box .home_image {
                z-index: 1;
              }

              .meau_top {
                transform: translateY(-100%);
                transition: all 0.5s ease-in-out;
              }

              .meau_top.show {
                transform: translateY(0);
              }

              #camlab-webgl-root {
                position: absolute;
                width: 100vw;
                height: 100vh;
                overflow: hidden;
                padding: 0px;
                margin: 0px;
                background-color: #ccc;
                left: 0;
                top: 0;
                opacity: 0;
                transform: translateY(-5%) rotate(0deg);
              }

              #camlab-webgl-root.show {
                opacity: 1;
                transform: translateY(0%) rotate(0deg);
                transition: all 0.5s ease-in-out;
              }

              .button_up {
                display: none;
              }

              .home_box.hide {
                display: none;
              }
            </style>

            <script>
              function show() {
                jQuery(".home_box").addClass("hide");

                jQuery(".home_menu").addClass("show");
                jQuery(".meau_top").addClass("show");
                jQuery(".home_menu_mob").addClass("show");
                jQuery("#camlab-webgl-root").addClass("show");
              }

              /*
        var count = 0;
        var timer = window.setInterval(function() {

            jQuery('.loading_ring>div>div ').eq(count).addClass("show");

            count++;
            if (count >= jQuery(' .loading_ring>div>div ').length) {
                window.clearInterval(timer);

                jQuery('.loading').addClass('hide');
                play_video();

            }

        }, 50);
    */

              function play_video() {
                if (jQuery("video")[0].paused) {
                  jQuery("video")[0].play();
                }
              }

              function loading3d(Preload) {
                //console.log(Preload);
                jQuery(" .loading_ring>div>div ").each(function (
                  index,
                  element
                ) {
                  if (index <= Preload) {
                    jQuery(element).addClass("show");
                  }
                });

                if (Preload >= 100) {
                  jQuery(".loading").addClass("hide");
                  play_video();
                }
              }

              var timer_show = window.setTimeout(function () {
                if (jQuery(".loading").hasClass("hide")) {
                  //已经隐藏了。
                  //
                } else {
                  jQuery(".loading").addClass("hide");
                }

                show();
              }, 30 * 1000);

              jQuery(document).ready(function () {
                jQuery(".loading_ring>div>div ").each(function (
                  index,
                  element
                ) {
                  jQuery(element).css(
                    "transform",
                    "rotate(  " + index * 3.6 + "deg)"
                  );
                });

                jQuery(".home_box .home_image .text ").addClass("hide");

                var home_video = document.getElementById("home_video");

                home_video.addEventListener(
                  "ended",
                  function () {
                    //结束
                    //console.log("播放结束");
                    window.clearTimeout(timer_show);
                    show();
                  },
                  false
                );

                jQuery(".button_play").click(function () {
                  play_video();
                });

                if ("#theme" == window.location.hash) {
                  show();
                }

                //
              });

              //
            </script>

            <div class="home_box">
              <div class="home_image">
                <video
                  id="home_video"
                  class="video"
                  muted
                  preload="auto"
                  playsinline
                  webkit-playsinline
                >
                  <source
                    src="https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/水滴-09.25_1.mp4"
                    type="video/mp4"
                  />
                </video>
              </div>
            </div>
            <style>
              @media (max-width: 700px) {
                .home_menu {
                  display: none;
                }
              }

              .home_menu_mob {
                position: fixed;
                bottom: 0;
                width: 100%;
                z-index: 1000;
                text-align: center;
                text-transform: uppercase;
                transform: translateY(100%);
              }

              .home_menu_mob.mob_show.show {
                transform: translateY(0);
              }

              .home_menu_mob .swiper {
                padding-top: 0;
              }

              .home_menu_mob .swiper-slide {
                padding-top: 20px;
                padding-bottom: 20px;
              }

              .home_menu_mob .swiper-button-prev {
                width: 10vw;
              }

              .home_menu_mob .swiper-button-prev::after {
                border: 1px solid #e8e8e8;
                width: 2vw;
                height: 2vw;
                transform: rotate(45deg);
                border-right: none;
                border-top: none;
              }

              .home_menu_mob .swiper-button-next {
                width: 10vw;
              }

              .home_menu_mob .swiper-button-next::after {
                border: 1px solid #e8e8e8;
                width: 2vw;
                height: 2vw;
                transform: rotate(45deg);

                border-left: none;
                border-bottom: none;
              }

              .button_up {
                display: none;
              }

              .highlight_main {
                width: 100vw;
                height: 100vh;
                top: 0;
                left: 0;
                transform: translateX(100vw);
                position: fixed;
                transition: transform 0.8s ease-in-out;
              }

              .highlight_main.show {
                transform: translateX(0vw);
              }
            </style>

            <div class="home_menu">
              <div class="bottom_menu font_14 whiteb2">
                <a
                  class="item active"
                  id="bottom_menu_theme"
                  href="https://camlab.fas.harvard.edu/home/#theme"
                  >THEME</a
                >
                <a
                  class="item"
                  id="bottom_menu_space"
                  href="https://camlab.fas.harvard.edu/home/#space"
                  >Space</a
                >
                <a
                  class="item"
                  id="bottom_menu_timeline"
                  href="https://camlab.fas.harvard.edu/home/#timeline"
                  >TIMELINE</a
                >
                <a
                  class="item"
                  id="bottom_menu_media"
                  href="https://camlab.fas.harvard.edu/media/"
                  >MEDIA</a
                >
                <a
                  class="item"
                  id="bottom_menu_highlight"
                  href="https://camlab.fas.harvard.edu/highlight/"
                  >Highlight</a
                >
                <a
                  class="item"
                  id="bottom_menu_index"
                  href="https://camlab.fas.harvard.edu/project-index/"
                  >Index</a
                >
              </div>
            </div>
            <script>
              var mob_bottom_menu_clicked = false;

              jQuery(function () {
                /*
            jQuery('#bottom_menu_highlight').click(function(e) {

                e.preventDefault();
                
                var $href = "https://camlab.fas.harvard.edu/home/#highlight";

                jQuery.get(
                    'https://camlab.fas.harvard.edu/wp-admin/admin-ajax.php', {
                        action: 'get_hightligt',
                        url: $href
                    },

                    function(data, status, xhr) {

                        //site-main
                        jQuery('.highlight_main').html(
                            jQuery(data).find('.site-main').html()
                        );

                        window.history.pushState(
                            jQuery(data).find('title').text(),
                            jQuery(data).find('title').text(),
                            $href);

                        jQuery('.highlight_main').addClass('show');

                    });

            });
            */
              });

              var uniqid = "640df15763d56";
              var index = 0;

              if (window.location.hash == "#space") {
                index = 1;

                jQuery(".bottom_menu .item").removeClass("active");
                jQuery("#bottom_menu_space").addClass("active");
              } else if (window.location.hash == "#timeline") {
                index = 2;
                jQuery(".bottom_menu .item").removeClass("active");
                jQuery("#bottom_menu_timeline").addClass("active");
              } else if (
                window.location.href == "https://camlab.fas.harvard.edu/media/"
              ) {
                index = 3;
                jQuery(".bottom_menu .item").removeClass("active");
                jQuery("#bottom_menu_timeline").addClass("active");
              } else if (
                window.location.href ==
                "https://camlab.fas.harvard.edu/highlight/"
              ) {
                index = 4;
                jQuery(".bottom_menu .item").removeClass("active");
                jQuery("#bottom_menu_timeline").addClass("active");
              } else {
                index = 0;
                jQuery(".bottom_menu .item").removeClass("active");
                jQuery("#bottom_menu_theme").addClass("active");
              }

              jQuery(function () {
                jQuery(".swiper-button-prev640df15763d56").click(function () {
                  mob_bottom_menu_clicked = true;
                });
                jQuery(".swiper-button-next640df15763d56").click(function () {
                  mob_bottom_menu_clicked = true;
                });

                const home_menu_mob_swiper = new Swiper(".swiper" + uniqid, {
                  // Optional parameters
                  slidesPerView: 1,
                  loop: true,

                  // Navigation arrows
                  navigation: {
                    nextEl: ".swiper-button-next" + uniqid,
                    prevEl: ".swiper-button-prev" + uniqid,
                  },

                  on: {
                    init: function (swiper) {
                      swiper.slideToLoop(index);
                    },

                    activeIndexChange: function (swiper) {
                      var activeIndex = swiper.activeIndex;
                      var activeslide = jQuery(swiper.slides).eq(activeIndex);

                      //window.location = href;
                      var href = jQuery(activeslide).children("a").attr("href");

                      if (href != undefined) {
                        //console.log(href);
                        if (
                          window.location.href != href &&
                          mob_bottom_menu_clicked
                        ) {
                          //console.log(href);

                          window.location = href;

                          /*

                                if (window.location.hash == "#space") {
                                    show();
                                    window.initCamLabWebGL('SPACE');
                                } else
                                if (window.location.hash == "#timeline") {
                                    show();
                                    window.initCamLabWebGL('TIME');
                                } else if (window.location.hash == "#theme") {
                                    window.initCamLabWebGL('THEME');
                                } else {

                                   
                                }
*/
                        }
                      }
                    },
                  },
                });
              });
            </script>

            <div class="home_menu_mob mob_show">
              <div class="swiper swiper640df15763d56">
                <div class="swiper-wrapper">
                  <div class="swiper-slide">
                    <a href="https://camlab.fas.harvard.edu/home/#theme">
                      THEME</a
                    >
                  </div>
                  <div class="swiper-slide">
                    <a href="https://camlab.fas.harvard.edu/home/#space">
                      Space</a
                    >
                  </div>
                  <div class="swiper-slide">
                    <a href="https://camlab.fas.harvard.edu/home/#timeline">
                      TIMELINE</a
                    >
                  </div>
                  <div class="swiper-slide">
                    <a href="https://camlab.fas.harvard.edu/media/"> MEDIA</a>
                  </div>
                  <div class="swiper-slide">
                    <a href="https://camlab.fas.harvard.edu/highlight/">
                      Highlight</a
                    >
                  </div>
                  <div class="swiper-slide">
                    <a href="https://camlab.fas.harvard.edu/project-index/">
                      Index</a
                    >
                  </div>
                </div>
                <div
                  class="swiper-button-prev swiper-button-prev640df15763d56"
                ></div>
                <div
                  class="swiper-button-next swiper-button-next640df15763d56"
                ></div>
              </div>
            </div>
            <div class="highlight_main"></div>

            <div id="camlab-webgl-root"></div>

            <script>
              window.addEventListener("load", () => {
                //window.initCamLabWebGL();
              });

              jQuery(function () {
                if (window.location.hash == "#space") {
                  show();
                  window.initCamLabWebGL("SPACE");
                } else if (window.location.hash == "#timeline") {
                  show();
                  window.initCamLabWebGL("TIME");
                } else {
                  window.initCamLabWebGL();
                }
              });

              jQuery(function () {
                jQuery("video").prop("muted", true);

                document
                  .getElementById("home_video")
                  .addEventListener("canplay", (event) => {
                    //play_video();
                    window.clearTimeout(timer_show);
                  });

                jQuery("#home_video").click(function () {
                  if (jQuery(window).width() < 700) {
                    if (!jQuery("video")[0].paused) {
                      show();
                    }
                  } else {
                    show();
                  }

                  play_video();

                  // console.log('Video play');
                });
              });
            </script>
          </main>
          <!-- #main -->
        </div>
        <!-- #primary -->
      </div>
      <!-- #content -->

      <footer id="colophon" class="site-footer" role="contentinfo">
        <div class="footer_list_mob">
          <div class="gt-mob whited8 font_32 phone_column mob_show">
            <div>
              <div class="textwidget">
                <p>
                  <a class="text_link" href="http://camlab.gt.link/subscribe/"
                    >Subscribe to our newsletter</a
                  >
                </p>
              </div>
            </div>
          </div>
        </div>

        <div class="footer_list1 phone_column">
          <div class="gt-footer1">
            <div>
              <img
                width="800"
                height="274"
                src="https://camlab.fas.harvard.edu/wp-content/uploads/2022/10/camlab-logo2-copy.png"
                class="image wp-image-862 attachment-full size-full"
                alt=""
                decoding="async"
                loading="lazy"
                style="max-width: 100%; height: auto"
              />
            </div>
          </div>
          <div class="gt-footer2 whited9 font_16">
            <div>
              <div class="menu-menu-bottom-container">
                <ul id="menu-menu-bottom" class="menu">
                  <li
                    id="menu-item-1245"
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1245"
                  >
                    <a href="https://camlab.fas.harvard.edu/home/#theme"
                      >Theme</a
                    >
                  </li>
                  <li
                    id="menu-item-1309"
                    class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-home menu-item-1309"
                  >
                    <a
                      href="https://camlab.fas.harvard.edu/#timeline"
                      aria-current="page"
                      >Timeline</a
                    >
                  </li>
                  <li
                    id="menu-item-1274"
                    class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-home menu-item-1274"
                  >
                    <a
                      href="https://camlab.fas.harvard.edu/#space"
                      aria-current="page"
                      >Space</a
                    >
                  </li>
                  <li
                    id="menu-item-57"
                    class="menu-item menu-item-type-post_type menu-item-object-page menu-item-57"
                  >
                    <a href="https://camlab.fas.harvard.edu/media/">Media</a>
                  </li>
                  <li
                    id="menu-item-56"
                    class="menu-item menu-item-type-post_type menu-item-object-page menu-item-56"
                  >
                    <a href="https://camlab.fas.harvard.edu/highlight/"
                      >Highlight</a
                    >
                  </li>
                  <li
                    id="menu-item-55"
                    class="menu-item menu-item-type-post_type menu-item-object-page menu-item-55"
                  >
                    <a href="https://camlab.fas.harvard.edu/project-index/"
                      >Index</a
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="gt-footer3 whited9 font_16">
            <div>
              <div class="menu-menu-top-container">
                <ul id="menu-menu-top-1" class="menu">
                  <li
                    class="mob_show menu-item menu-item-type-custom menu-item-object-custom current-menu-ancestor current-menu-parent menu-item-has-children menu-item-882"
                  >
                    <a href="#">Work</a>
                    <ul class="sub-menu">
                      <li
                        class="menu-item menu-item-type-custom menu-item-object-custom menu-item-883"
                      >
                        <a href="https://camlab.fas.harvard.edu/home/#theme"
                          >Theme</a
                        >
                      </li>
                      <li
                        class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-home menu-item-1310"
                      >
                        <a
                          href="https://camlab.fas.harvard.edu/#timeline"
                          aria-current="page"
                          >Timeline</a
                        >
                      </li>
                      <li
                        class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-home menu-item-1273"
                      >
                        <a
                          href="https://camlab.fas.harvard.edu/#space"
                          aria-current="page"
                          >Space</a
                        >
                      </li>
                      <li
                        class="menu-item menu-item-type-custom menu-item-object-custom menu-item-886"
                      >
                        <a href="https://camlab.fas.harvard.edu/media/"
                          >Media</a
                        >
                      </li>
                      <li
                        class="menu-item menu-item-type-custom menu-item-object-custom menu-item-887"
                      >
                        <a href="https://camlab.fas.harvard.edu/highlight/"
                          >Highlight</a
                        >
                      </li>
                      <li
                        class="menu-item menu-item-type-custom menu-item-object-custom menu-item-888"
                      >
                        <a href="https://camlab.fas.harvard.edu/project-index/"
                          >Index</a
                        >
                      </li>
                    </ul>
                  </li>
                  <li
                    class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-212"
                  >
                    <a href="https://camlab.fas.harvard.edu/about/">About</a>
                    <ul class="sub-menu">
                      <li
                        class="menu-item menu-item-type-custom menu-item-object-custom menu-item-214"
                      >
                        <a
                          href="https://camlab.fas.harvard.edu/about/#founder_story"
                          >Founder Story</a
                        >
                      </li>
                      <li
                        class="menu-item menu-item-type-custom menu-item-object-custom menu-item-859"
                      >
                        <a
                          href="https://camlab.fas.harvard.edu/about/#camlab_cave"
                          >CAMLab Cave</a
                        >
                      </li>
                      <li
                        class="menu-item menu-item-type-custom menu-item-object-custom menu-item-215"
                      >
                        <a
                          href="https://camlab.fas.harvard.edu/about/#core_team"
                          >Team</a
                        >
                      </li>
                    </ul>
                  </li>
                  <li
                    class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-48"
                  >
                    <a href="https://camlab.fas.harvard.edu/connect/"
                      >Connect</a
                    >
                    <ul class="sub-menu">
                      <li
                        class="menu-item menu-item-type-post_type menu-item-object-page menu-item-52"
                      >
                        <a href="https://camlab.fas.harvard.edu/connect/news/"
                          >News</a
                        >
                      </li>
                      <li
                        class="menu-item menu-item-type-post_type menu-item-object-page menu-item-51"
                      >
                        <a href="https://camlab.fas.harvard.edu/connect/events/"
                          >Events</a
                        >
                      </li>
                      <li
                        class="menu-item menu-item-type-post_type menu-item-object-page menu-item-50"
                      >
                        <a
                          href="https://camlab.fas.harvard.edu/connect/join-us/"
                          >Join us</a
                        >
                      </li>
                      <li
                        class="menu-item menu-item-type-post_type menu-item-object-page menu-item-29"
                      >
                        <a
                          href="https://camlab.fas.harvard.edu/connect/support-us/"
                          >Support us</a
                        >
                      </li>
                      <li
                        class="menu-item menu-item-type-post_type menu-item-object-page menu-item-53"
                      >
                        <a
                          href="https://camlab.fas.harvard.edu/connect/contact-us/"
                          >Contact us</a
                        >
                      </li>
                    </ul>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="gt-footer4 whitee8 font_32 phone_width100">
            <div>
              <div class="textwidget">
                <p>
                  <a class="show_pc" href="http://camlab.gt.link/subscribe/"
                    >Subscribe to our newsletter</a
                  >
                </p>
              </div>
            </div>
            <div>
              <div class="textwidget"><p>Follow us on social media</p></div>
            </div>
            <div>
              <div class="textwidget custom-html-widget">
                <div class="contact_way">
                  <div class="container">
                    <a
                      href="https://www.facebook.com/profile.php?id=100076799137562"
                      target="_blank"
                      rel="noopener"
                      >Facebook</a
                    >

                    <a
                      href="https://www.instagram.com/harvardcamlab/"
                      target="_blank"
                      rel="noopener"
                      >Instagram</a
                    >

                    <a href="#wechat">WeChat</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="footer_list2">
          <div class="gt-footer5 whited9 font_14 phone_column">
            <div>
              <div class="textwidget">
                <p>
                  Harvard FAS CAMLab<br />
                  <a
                    href="https://goo.gl/maps/BrqtoiqcajUpe9Pn8"
                    target="_blank"
                    rel="noopener"
                    >485 Broadway, RM 515,<br />
                    Cambridge, MA 02138</a
                  >
                </p>
                <p>©2022 The President and</p>
                <p>Fellows of Harvard College</p>
              </div>
            </div>
            <div>
              <div class="textwidget custom-html-widget">
                <div class="bottom_corner">
                  <div class="Privacy">
                    <a>Privacy policy</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </footer>
      <!-- #colophon -->
    </div>
    <!-- #page -->

    <div class="popup_wechat">
      <img
        width="860"
        height="860"
        src="https://camlab.fas.harvard.edu/wp-content/uploads/2022/10/CAMLab-微信公众号二维码-logo.jpg"
        class="image wp-image-1084 attachment-full size-full"
        alt=""
        decoding="async"
        loading="lazy"
        style="max-width: 100%; height: auto"
      />
    </div>

    <div class="button_up"></div>
    <script type="module">
      function uw(n) {
        return n &&
          n.__esModule &&
          Object.prototype.hasOwnProperty.call(n, "default")
          ? n.default
          : n;
      }
      (function () {
        const n = document.createElement("link").relList;
        if (!(n && n.supports && n.supports("modulepreload"))) {
          for (const t of document.querySelectorAll(
            'link[rel="modulepreload"]'
          ))
            e(t);
          new MutationObserver((t) => {
            for (const r of t)
              if (r.type === "childList")
                for (const i of r.addedNodes)
                  i.tagName === "LINK" && i.rel === "modulepreload" && e(i);
          }).observe(document, { childList: !0, subtree: !0 });
        }
        function e(t) {
          if (t.ep) return;
          t.ep = !0;
          const r = (function (i) {
            const a = {};
            return (
              i.integrity && (a.integrity = i.integrity),
              i.referrerpolicy && (a.referrerPolicy = i.referrerpolicy),
              i.crossorigin === "use-credentials"
                ? (a.credentials = "include")
                : i.crossorigin === "anonymous"
                ? (a.credentials = "omit")
                : (a.credentials = "same-origin"),
              a
            );
          })(t);
          fetch(t.href, r);
        }
      })();
      var Af = {},
        py = { exports: {} },
        Fn = {},
        rt = { exports: {} },
        Ne = {},
        pl = Symbol.for("react.element"),
        cw = Symbol.for("react.portal"),
        hw = Symbol.for("react.fragment"),
        dw = Symbol.for("react.strict_mode"),
        fw = Symbol.for("react.profiler"),
        pw = Symbol.for("react.provider"),
        mw = Symbol.for("react.context"),
        gw = Symbol.for("react.forward_ref"),
        vw = Symbol.for("react.suspense"),
        yw = Symbol.for("react.memo"),
        xw = Symbol.for("react.lazy"),
        Dg = Symbol.iterator,
        my = {
          isMounted: function () {
            return !1;
          },
          enqueueForceUpdate: function () {},
          enqueueReplaceState: function () {},
          enqueueSetState: function () {},
        },
        gy = Object.assign,
        vy = {};
      function Ss(n, e, t) {
        (this.props = n),
          (this.context = e),
          (this.refs = vy),
          (this.updater = t || my);
      }
      function yy() {}
      function am(n, e, t) {
        (this.props = n),
          (this.context = e),
          (this.refs = vy),
          (this.updater = t || my);
      }
      (Ss.prototype.isReactComponent = {}),
        (Ss.prototype.setState = function (n, e) {
          if (typeof n != "object" && typeof n != "function" && n != null)
            throw Error(
              "setState(...): takes an object of state variables to update or a function which returns an object of state variables."
            );
          this.updater.enqueueSetState(this, n, e, "setState");
        }),
        (Ss.prototype.forceUpdate = function (n) {
          this.updater.enqueueForceUpdate(this, n, "forceUpdate");
        }),
        (yy.prototype = Ss.prototype);
      var Kh = (am.prototype = new yy());
      (Kh.constructor = am),
        gy(Kh, Ss.prototype),
        (Kh.isPureReactComponent = !0);
      var kg = Array.isArray,
        xy = Object.prototype.hasOwnProperty,
        sm = { current: null },
        _y = { key: !0, ref: !0, __self: !0, __source: !0 };
      function Ig(n, e, t) {
        var r,
          i = {},
          a = null,
          s = null;
        if (e != null)
          for (r in (e.ref !== void 0 && (s = e.ref),
          e.key !== void 0 && (a = "" + e.key),
          e))
            xy.call(e, r) && !_y.hasOwnProperty(r) && (i[r] = e[r]);
        var o = arguments.length - 2;
        if (o === 1) i.children = t;
        else if (1 < o) {
          for (var l = Array(o), u = 0; u < o; u++) l[u] = arguments[u + 2];
          i.children = l;
        }
        if (n && n.defaultProps)
          for (r in (o = n.defaultProps)) i[r] === void 0 && (i[r] = o[r]);
        return {
          $$typeof: pl,
          type: n,
          key: a,
          ref: s,
          props: i,
          _owner: sm.current,
        };
      }
      function Rf(n) {
        return typeof n == "object" && n !== null && n.$$typeof === pl;
      }
      var Ug = /\/+/g;
      function Jh(n, e) {
        return typeof n == "object" && n !== null && n.key != null
          ? (function (t) {
              var r = { "=": "=0", ":": "=2" };
              return (
                "$" +
                t.replace(/[=:]/g, function (i) {
                  return r[i];
                })
              );
            })("" + n.key)
          : e.toString(36);
      }
      function lc(n, e, t, r, i) {
        var a = typeof n;
        (a !== "undefined" && a !== "boolean") || (n = null);
        var s = !1;
        if (n === null) s = !0;
        else
          switch (a) {
            case "string":
            case "number":
              s = !0;
              break;
            case "object":
              switch (n.$$typeof) {
                case pl:
                case cw:
                  s = !0;
              }
          }
        if (s)
          return (
            (i = i((s = n))),
            (n = r === "" ? "." + Jh(s, 0) : r),
            kg(i)
              ? ((t = ""),
                n != null && (t = n.replace(Ug, "$&/") + "/"),
                lc(i, e, t, "", function (u) {
                  return u;
                }))
              : i != null &&
                (Rf(i) &&
                  (i = (function (u, c) {
                    return {
                      $$typeof: pl,
                      type: u.type,
                      key: c,
                      ref: u.ref,
                      props: u.props,
                      _owner: u._owner,
                    };
                  })(
                    i,
                    t +
                      (!i.key || (s && s.key === i.key)
                        ? ""
                        : ("" + i.key).replace(Ug, "$&/") + "/") +
                      n
                  )),
                e.push(i)),
            1
          );
        if (((s = 0), (r = r === "" ? "." : r + ":"), kg(n)))
          for (var o = 0; o < n.length; o++) {
            var l = r + Jh((a = n[o]), o);
            s += lc(a, e, t, l, i);
          }
        else if (
          ((l = (function (u) {
            return u === null || typeof u != "object"
              ? null
              : typeof (u = (Dg && u[Dg]) || u["@@iterator"]) == "function"
              ? u
              : null;
          })(n)),
          typeof l == "function")
        )
          for (n = l.call(n), o = 0; !(a = n.next()).done; )
            s += lc((a = a.value), e, t, (l = r + Jh(a, o++)), i);
        else if (a === "object")
          throw (
            ((e = String(n)),
            Error(
              "Objects are not valid as a React child (found: " +
                (e === "[object Object]"
                  ? "object with keys {" + Object.keys(n).join(", ") + "}"
                  : e) +
                "). If you meant to render a collection of children, use an array instead."
            ))
          );
        return s;
      }
      function ou(n, e, t) {
        if (n == null) return n;
        var r = [],
          i = 0;
        return (
          lc(n, r, "", "", function (a) {
            return e.call(t, a, i++);
          }),
          r
        );
      }
      function _w(n) {
        if (n._status === -1) {
          var e = n._result;
          (e = e()).then(
            function (t) {
              (n._status !== 0 && n._status !== -1) ||
                ((n._status = 1), (n._result = t));
            },
            function (t) {
              (n._status !== 0 && n._status !== -1) ||
                ((n._status = 2), (n._result = t));
            }
          ),
            n._status === -1 && ((n._status = 0), (n._result = e));
        }
        if (n._status === 1) return n._result.default;
        throw n._result;
      }
      var mn = { current: null },
        uc = { transition: null },
        bw = {
          ReactCurrentDispatcher: mn,
          ReactCurrentBatchConfig: uc,
          ReactCurrentOwner: sm,
        };
      (Ne.Children = {
        map: ou,
        forEach: function (n, e, t) {
          ou(
            n,
            function () {
              e.apply(this, arguments);
            },
            t
          );
        },
        count: function (n) {
          var e = 0;
          return (
            ou(n, function () {
              e++;
            }),
            e
          );
        },
        toArray: function (n) {
          return (
            ou(n, function (e) {
              return e;
            }) || []
          );
        },
        only: function (n) {
          if (!Rf(n))
            throw Error(
              "React.Children.only expected to receive a single React element child."
            );
          return n;
        },
      }),
        (Ne.Component = Ss),
        (Ne.Fragment = hw),
        (Ne.Profiler = fw),
        (Ne.PureComponent = am),
        (Ne.StrictMode = dw),
        (Ne.Suspense = vw),
        (Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = bw),
        (Ne.cloneElement = function (n, e, t) {
          if (n == null)
            throw Error(
              "React.cloneElement(...): The argument must be a React element, but you passed " +
                n +
                "."
            );
          var r = gy({}, n.props),
            i = n.key,
            a = n.ref,
            s = n._owner;
          if (e != null) {
            if (
              (e.ref !== void 0 && ((a = e.ref), (s = sm.current)),
              e.key !== void 0 && (i = "" + e.key),
              n.type && n.type.defaultProps)
            )
              var o = n.type.defaultProps;
            for (l in e)
              xy.call(e, l) &&
                !_y.hasOwnProperty(l) &&
                (r[l] = e[l] === void 0 && o !== void 0 ? o[l] : e[l]);
          }
          var l = arguments.length - 2;
          if (l === 1) r.children = t;
          else if (1 < l) {
            o = Array(l);
            for (var u = 0; u < l; u++) o[u] = arguments[u + 2];
            r.children = o;
          }
          return {
            $$typeof: pl,
            type: n.type,
            key: i,
            ref: a,
            props: r,
            _owner: s,
          };
        }),
        (Ne.createContext = function (n) {
          return (
            ((n = {
              $$typeof: mw,
              _currentValue: n,
              _currentValue2: n,
              _threadCount: 0,
              Provider: null,
              Consumer: null,
              _defaultValue: null,
              _globalName: null,
            }).Provider = { $$typeof: pw, _context: n }),
            (n.Consumer = n)
          );
        }),
        (Ne.createElement = Ig),
        (Ne.createFactory = function (n) {
          var e = Ig.bind(null, n);
          return (e.type = n), e;
        }),
        (Ne.createRef = function () {
          return { current: null };
        }),
        (Ne.forwardRef = function (n) {
          return { $$typeof: gw, render: n };
        }),
        (Ne.isValidElement = Rf),
        (Ne.lazy = function (n) {
          return {
            $$typeof: xw,
            _payload: { _status: -1, _result: n },
            _init: _w,
          };
        }),
        (Ne.memo = function (n, e) {
          return { $$typeof: yw, type: n, compare: e === void 0 ? null : e };
        }),
        (Ne.startTransition = function (n) {
          var e = uc.transition;
          uc.transition = {};
          try {
            n();
          } finally {
            uc.transition = e;
          }
        }),
        (Ne.unstable_act = function () {
          throw Error(
            "act(...) is not supported in production builds of React."
          );
        }),
        (Ne.useCallback = function (n, e) {
          return mn.current.useCallback(n, e);
        }),
        (Ne.useContext = function (n) {
          return mn.current.useContext(n);
        }),
        (Ne.useDebugValue = function () {}),
        (Ne.useDeferredValue = function (n) {
          return mn.current.useDeferredValue(n);
        }),
        (Ne.useEffect = function (n, e) {
          return mn.current.useEffect(n, e);
        }),
        (Ne.useId = function () {
          return mn.current.useId();
        }),
        (Ne.useImperativeHandle = function (n, e, t) {
          return mn.current.useImperativeHandle(n, e, t);
        }),
        (Ne.useInsertionEffect = function (n, e) {
          return mn.current.useInsertionEffect(n, e);
        }),
        (Ne.useLayoutEffect = function (n, e) {
          return mn.current.useLayoutEffect(n, e);
        }),
        (Ne.useMemo = function (n, e) {
          return mn.current.useMemo(n, e);
        }),
        (Ne.useReducer = function (n, e, t) {
          return mn.current.useReducer(n, e, t);
        }),
        (Ne.useRef = function (n) {
          return mn.current.useRef(n);
        }),
        (Ne.useState = function (n) {
          return mn.current.useState(n);
        }),
        (Ne.useSyncExternalStore = function (n, e, t) {
          return mn.current.useSyncExternalStore(n, e, t);
        }),
        (Ne.useTransition = function () {
          return mn.current.useTransition();
        }),
        (Ne.version = "18.2.0"),
        (rt.exports = Ne);
      const Wl = uw(rt.exports);
      var by = { exports: {} },
        Og = {};
      /**
       * @license React
       * scheduler.production.min.js
       *
       * Copyright (c) Facebook, Inc. and its affiliates.
       *
       * This source code is licensed under the MIT license found in the
       * LICENSE file in the root directory of this source tree.
       */ (function (n) {
        function e(E, z) {
          var A = E.length;
          E.push(z);
          e: for (; 0 < A; ) {
            var D = (A - 1) >>> 1,
              V = E[D];
            if (!(0 < i(V, z))) break e;
            (E[D] = z), (E[A] = V), (A = D);
          }
        }
        function t(E) {
          return E.length === 0 ? null : E[0];
        }
        function r(E) {
          if (E.length === 0) return null;
          var z = E[0],
            A = E.pop();
          if (A !== z) {
            E[0] = A;
            e: for (var D = 0, V = E.length, K = V >>> 1; D < K; ) {
              var B = 2 * (D + 1) - 1,
                Y = E[B],
                R = B + 1,
                L = E[R];
              if (0 > i(Y, A))
                R < V && 0 > i(L, Y)
                  ? ((E[D] = L), (E[R] = A), (D = R))
                  : ((E[D] = Y), (E[B] = A), (D = B));
              else {
                if (!(R < V && 0 > i(L, A))) break e;
                (E[D] = L), (E[R] = A), (D = R);
              }
            }
          }
          return z;
        }
        function i(E, z) {
          var A = E.sortIndex - z.sortIndex;
          return A !== 0 ? A : E.id - z.id;
        }
        if (
          typeof performance == "object" &&
          typeof performance.now == "function"
        ) {
          var a = performance;
          n.unstable_now = function () {
            return a.now();
          };
        } else {
          var s = Date,
            o = s.now();
          n.unstable_now = function () {
            return s.now() - o;
          };
        }
        var l = [],
          u = [],
          c = 1,
          h = null,
          d = 3,
          f = !1,
          g = !1,
          p = !1,
          y = typeof setTimeout == "function" ? setTimeout : null,
          v = typeof clearTimeout == "function" ? clearTimeout : null,
          m = typeof setImmediate < "u" ? setImmediate : null;
        function x(E) {
          for (var z = t(u); z !== null; ) {
            if (z.callback === null) r(u);
            else {
              if (!(z.startTime <= E)) break;
              r(u), (z.sortIndex = z.expirationTime), e(l, z);
            }
            z = t(u);
          }
        }
        function _(E) {
          if (((p = !1), x(E), !g))
            if (t(l) !== null) (g = !0), k(b);
            else {
              var z = t(u);
              z !== null && P(_, z.startTime - E);
            }
        }
        function b(E, z) {
          (g = !1), p && ((p = !1), v(N), (N = -1)), (f = !0);
          var A = d;
          try {
            for (
              x(z), h = t(l);
              h !== null && (!(h.expirationTime > z) || (E && !I()));

            ) {
              var D = h.callback;
              if (typeof D == "function") {
                (h.callback = null), (d = h.priorityLevel);
                var V = D(h.expirationTime <= z);
                (z = n.unstable_now()),
                  typeof V == "function"
                    ? (h.callback = V)
                    : h === t(l) && r(l),
                  x(z);
              } else r(l);
              h = t(l);
            }
            if (h !== null) var K = !0;
            else {
              var B = t(u);
              B !== null && P(_, B.startTime - z), (K = !1);
            }
            return K;
          } finally {
            (h = null), (d = A), (f = !1);
          }
        }
        typeof navigator < "u" &&
          navigator.scheduling !== void 0 &&
          navigator.scheduling.isInputPending !== void 0 &&
          navigator.scheduling.isInputPending.bind(navigator.scheduling);
        var w,
          M = !1,
          C = null,
          N = -1,
          G = 5,
          U = -1;
        function I() {
          return !(n.unstable_now() - U < G);
        }
        function F() {
          if (C !== null) {
            var E = n.unstable_now();
            U = E;
            var z = !0;
            try {
              z = C(!0, E);
            } finally {
              z ? w() : ((M = !1), (C = null));
            }
          } else M = !1;
        }
        if (typeof m == "function")
          w = function () {
            m(F);
          };
        else if (typeof MessageChannel < "u") {
          var T = new MessageChannel(),
            O = T.port2;
          (T.port1.onmessage = F),
            (w = function () {
              O.postMessage(null);
            });
        } else
          w = function () {
            y(F, 0);
          };
        function k(E) {
          (C = E), M || ((M = !0), w());
        }
        function P(E, z) {
          N = y(function () {
            E(n.unstable_now());
          }, z);
        }
        (n.unstable_IdlePriority = 5),
          (n.unstable_ImmediatePriority = 1),
          (n.unstable_LowPriority = 4),
          (n.unstable_NormalPriority = 3),
          (n.unstable_Profiling = null),
          (n.unstable_UserBlockingPriority = 2),
          (n.unstable_cancelCallback = function (E) {
            E.callback = null;
          }),
          (n.unstable_continueExecution = function () {
            g || f || ((g = !0), k(b));
          }),
          (n.unstable_forceFrameRate = function (E) {
            0 > E || 125 < E
              ? console.error(
                  "forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"
                )
              : (G = 0 < E ? Math.floor(1e3 / E) : 5);
          }),
          (n.unstable_getCurrentPriorityLevel = function () {
            return d;
          }),
          (n.unstable_getFirstCallbackNode = function () {
            return t(l);
          }),
          (n.unstable_next = function (E) {
            switch (d) {
              case 1:
              case 2:
              case 3:
                var z = 3;
                break;
              default:
                z = d;
            }
            var A = d;
            d = z;
            try {
              return E();
            } finally {
              d = A;
            }
          }),
          (n.unstable_pauseExecution = function () {}),
          (n.unstable_requestPaint = function () {}),
          (n.unstable_runWithPriority = function (E, z) {
            switch (E) {
              case 1:
              case 2:
              case 3:
              case 4:
              case 5:
                break;
              default:
                E = 3;
            }
            var A = d;
            d = E;
            try {
              return z();
            } finally {
              d = A;
            }
          }),
          (n.unstable_scheduleCallback = function (E, z, A) {
            var D = n.unstable_now();
            switch (
              (typeof A == "object" && A !== null
                ? (A = typeof (A = A.delay) == "number" && 0 < A ? D + A : D)
                : (A = D),
              E)
            ) {
              case 1:
                var V = -1;
                break;
              case 2:
                V = 250;
                break;
              case 5:
                V = 1073741823;
                break;
              case 4:
                V = 1e4;
                break;
              default:
                V = 5e3;
            }
            return (
              (E = {
                id: c++,
                callback: z,
                priorityLevel: E,
                startTime: A,
                expirationTime: (V = A + V),
                sortIndex: -1,
              }),
              A > D
                ? ((E.sortIndex = A),
                  e(u, E),
                  t(l) === null &&
                    E === t(u) &&
                    (p ? (v(N), (N = -1)) : (p = !0), P(_, A - D)))
                : ((E.sortIndex = V), e(l, E), g || f || ((g = !0), k(b))),
              E
            );
          }),
          (n.unstable_shouldYield = I),
          (n.unstable_wrapCallback = function (E) {
            var z = d;
            return function () {
              var A = d;
              d = z;
              try {
                return E.apply(this, arguments);
              } finally {
                d = A;
              }
            };
          });
      })(Og),
        (by.exports = Og);
      /**
       * @license React
       * react-dom.production.min.js
       *
       * Copyright (c) Facebook, Inc. and its affiliates.
       *
       * This source code is licensed under the MIT license found in the
       * LICENSE file in the root directory of this source tree.
       */ var wy = rt.exports,
        $n = by.exports;
      function pe(n) {
        for (
          var e = "https://reactjs.org/docs/error-decoder.html?invariant=" + n,
            t = 1;
          t < arguments.length;
          t++
        )
          e += "&args[]=" + encodeURIComponent(arguments[t]);
        return (
          "Minified React error #" +
          n +
          "; visit " +
          e +
          " for the full message or use the non-minified dev environment for full errors and additional helpful warnings."
        );
      }
      var Sy = new Set(),
        ml = {};
      function ba(n, e) {
        Ms(n, e), Ms(n + "Capture", e);
      }
      function Ms(n, e) {
        for (ml[n] = e, n = 0; n < e.length; n++) Sy.add(e[n]);
      }
      var vi = !(
          typeof window > "u" ||
          window.document === void 0 ||
          window.document.createElement === void 0
        ),
        Pf = Object.prototype.hasOwnProperty,
        ww =
          /^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
        zg = {},
        Ng = {};
      function vn(n, e, t, r, i, a, s) {
        (this.acceptsBooleans = e === 2 || e === 3 || e === 4),
          (this.attributeName = r),
          (this.attributeNamespace = i),
          (this.mustUseProperty = t),
          (this.propertyName = n),
          (this.type = e),
          (this.sanitizeURL = a),
          (this.removeEmptyString = s);
      }
      var Zt = {};
      "children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style"
        .split(" ")
        .forEach(function (n) {
          Zt[n] = new vn(n, 0, !1, n, null, !1, !1);
        }),
        [
          ["acceptCharset", "accept-charset"],
          ["className", "class"],
          ["htmlFor", "for"],
          ["httpEquiv", "http-equiv"],
        ].forEach(function (n) {
          var e = n[0];
          Zt[e] = new vn(e, 1, !1, n[1], null, !1, !1);
        }),
        ["contentEditable", "draggable", "spellCheck", "value"].forEach(
          function (n) {
            Zt[n] = new vn(n, 2, !1, n.toLowerCase(), null, !1, !1);
          }
        ),
        [
          "autoReverse",
          "externalResourcesRequired",
          "focusable",
          "preserveAlpha",
        ].forEach(function (n) {
          Zt[n] = new vn(n, 2, !1, n, null, !1, !1);
        }),
        "allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope"
          .split(" ")
          .forEach(function (n) {
            Zt[n] = new vn(n, 3, !1, n.toLowerCase(), null, !1, !1);
          }),
        ["checked", "multiple", "muted", "selected"].forEach(function (n) {
          Zt[n] = new vn(n, 3, !0, n, null, !1, !1);
        }),
        ["capture", "download"].forEach(function (n) {
          Zt[n] = new vn(n, 4, !1, n, null, !1, !1);
        }),
        ["cols", "rows", "size", "span"].forEach(function (n) {
          Zt[n] = new vn(n, 6, !1, n, null, !1, !1);
        }),
        ["rowSpan", "start"].forEach(function (n) {
          Zt[n] = new vn(n, 5, !1, n.toLowerCase(), null, !1, !1);
        });
      var Qh = /[\-:]([a-z])/g;
      function ed(n) {
        return n[1].toUpperCase();
      }
      function om(n, e, t, r) {
        var i = Zt.hasOwnProperty(e) ? Zt[e] : null;
        (i !== null
          ? i.type !== 0
          : r ||
            !(2 < e.length) ||
            (e[0] !== "o" && e[0] !== "O") ||
            (e[1] !== "n" && e[1] !== "N")) &&
          ((function (a, s, o, l) {
            if (
              s == null ||
              (function (u, c, h, d) {
                if (h !== null && h.type === 0) return !1;
                switch (typeof c) {
                  case "function":
                  case "symbol":
                    return !0;
                  case "boolean":
                    return (
                      !d &&
                      (h !== null
                        ? !h.acceptsBooleans
                        : (u = u.toLowerCase().slice(0, 5)) !== "data-" &&
                          u !== "aria-")
                    );
                  default:
                    return !1;
                }
              })(a, s, o, l)
            )
              return !0;
            if (l) return !1;
            if (o !== null)
              switch (o.type) {
                case 3:
                  return !s;
                case 4:
                  return s === !1;
                case 5:
                  return isNaN(s);
                case 6:
                  return isNaN(s) || 1 > s;
              }
            return !1;
          })(e, t, i, r) && (t = null),
          r || i === null
            ? (function (a) {
                return (
                  !!Pf.call(Ng, a) ||
                  (!Pf.call(zg, a) &&
                    (ww.test(a) ? (Ng[a] = !0) : ((zg[a] = !0), !1)))
                );
              })(e) &&
              (t === null ? n.removeAttribute(e) : n.setAttribute(e, "" + t))
            : i.mustUseProperty
            ? (n[i.propertyName] = t === null ? i.type !== 3 && "" : t)
            : ((e = i.attributeName),
              (r = i.attributeNamespace),
              t === null
                ? n.removeAttribute(e)
                : ((t =
                    (i = i.type) === 3 || (i === 4 && t === !0) ? "" : "" + t),
                  r ? n.setAttributeNS(r, e, t) : n.setAttribute(e, t))));
      }
      "accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height"
        .split(" ")
        .forEach(function (n) {
          var e = n.replace(Qh, ed);
          Zt[e] = new vn(e, 1, !1, n, null, !1, !1);
        }),
        "xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type"
          .split(" ")
          .forEach(function (n) {
            var e = n.replace(Qh, ed);
            Zt[e] = new vn(e, 1, !1, n, "http://www.w3.org/1999/xlink", !1, !1);
          }),
        ["xml:base", "xml:lang", "xml:space"].forEach(function (n) {
          var e = n.replace(Qh, ed);
          Zt[e] = new vn(
            e,
            1,
            !1,
            n,
            "http://www.w3.org/XML/1998/namespace",
            !1,
            !1
          );
        }),
        ["tabIndex", "crossOrigin"].forEach(function (n) {
          Zt[n] = new vn(n, 1, !1, n.toLowerCase(), null, !1, !1);
        }),
        (Zt.xlinkHref = new vn(
          "xlinkHref",
          1,
          !1,
          "xlink:href",
          "http://www.w3.org/1999/xlink",
          !0,
          !1
        )),
        ["src", "href", "action", "formAction"].forEach(function (n) {
          Zt[n] = new vn(n, 1, !1, n.toLowerCase(), null, !0, !0);
        });
      var bi = wy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,
        lu = Symbol.for("react.element"),
        Ts = Symbol.for("react.portal"),
        Es = Symbol.for("react.fragment"),
        lm = Symbol.for("react.strict_mode"),
        Lf = Symbol.for("react.profiler"),
        My = Symbol.for("react.provider"),
        Ty = Symbol.for("react.context"),
        um = Symbol.for("react.forward_ref"),
        Df = Symbol.for("react.suspense"),
        kf = Symbol.for("react.suspense_list"),
        cm = Symbol.for("react.memo"),
        Ii = Symbol.for("react.lazy"),
        Ey = Symbol.for("react.offscreen"),
        Fg = Symbol.iterator;
      function Po(n) {
        return n === null || typeof n != "object"
          ? null
          : typeof (n = (Fg && n[Fg]) || n["@@iterator"]) == "function"
          ? n
          : null;
      }
      var td,
        pt = Object.assign;
      function qo(n) {
        if (td === void 0)
          try {
            throw Error();
          } catch (t) {
            var e = t.stack.trim().match(/\n( *(at )?)/);
            td = (e && e[1]) || "";
          }
        return (
          `
` +
          td +
          n
        );
      }
      var nd = !1;
      function rd(n, e) {
        if (!n || nd) return "";
        nd = !0;
        var t = Error.prepareStackTrace;
        Error.prepareStackTrace = void 0;
        try {
          if (e)
            if (
              ((e = function () {
                throw Error();
              }),
              Object.defineProperty(e.prototype, "props", {
                set: function () {
                  throw Error();
                },
              }),
              typeof Reflect == "object" && Reflect.construct)
            ) {
              try {
                Reflect.construct(e, []);
              } catch (u) {
                var r = u;
              }
              Reflect.construct(n, [], e);
            } else {
              try {
                e.call();
              } catch (u) {
                r = u;
              }
              n.call(e.prototype);
            }
          else {
            try {
              throw Error();
            } catch (u) {
              r = u;
            }
            n();
          }
        } catch (u) {
          if (u && r && typeof u.stack == "string") {
            for (
              var i = u.stack.split(`
`),
                a = r.stack.split(`
`),
                s = i.length - 1,
                o = a.length - 1;
              1 <= s && 0 <= o && i[s] !== a[o];

            )
              o--;
            for (; 1 <= s && 0 <= o; s--, o--)
              if (i[s] !== a[o]) {
                if (s !== 1 || o !== 1)
                  do
                    if ((s--, 0 > --o || i[s] !== a[o])) {
                      var l =
                        `
` + i[s].replace(" at new ", " at ");
                      return (
                        n.displayName &&
                          l.includes("<anonymous>") &&
                          (l = l.replace("<anonymous>", n.displayName)),
                        l
                      );
                    }
                  while (1 <= s && 0 <= o);
                break;
              }
          }
        } finally {
          (nd = !1), (Error.prepareStackTrace = t);
        }
        return (n = n ? n.displayName || n.name : "") ? qo(n) : "";
      }
      function Sw(n) {
        switch (n.tag) {
          case 5:
            return qo(n.type);
          case 16:
            return qo("Lazy");
          case 13:
            return qo("Suspense");
          case 19:
            return qo("SuspenseList");
          case 0:
          case 2:
          case 15:
            return (n = rd(n.type, !1));
          case 11:
            return (n = rd(n.type.render, !1));
          case 1:
            return (n = rd(n.type, !0));
          default:
            return "";
        }
      }
      function If(n) {
        if (n == null) return null;
        if (typeof n == "function") return n.displayName || n.name || null;
        if (typeof n == "string") return n;
        switch (n) {
          case Es:
            return "Fragment";
          case Ts:
            return "Portal";
          case Lf:
            return "Profiler";
          case lm:
            return "StrictMode";
          case Df:
            return "Suspense";
          case kf:
            return "SuspenseList";
        }
        if (typeof n == "object")
          switch (n.$$typeof) {
            case Ty:
              return (n.displayName || "Context") + ".Consumer";
            case My:
              return (n._context.displayName || "Context") + ".Provider";
            case um:
              var e = n.render;
              return (
                (n = n.displayName) ||
                  (n =
                    (n = e.displayName || e.name || "") !== ""
                      ? "ForwardRef(" + n + ")"
                      : "ForwardRef"),
                n
              );
            case cm:
              return (e = n.displayName || null) !== null
                ? e
                : If(n.type) || "Memo";
            case Ii:
              (e = n._payload), (n = n._init);
              try {
                return If(n(e));
              } catch {}
          }
        return null;
      }
      function Mw(n) {
        var e = n.type;
        switch (n.tag) {
          case 24:
            return "Cache";
          case 9:
            return (e.displayName || "Context") + ".Consumer";
          case 10:
            return (e._context.displayName || "Context") + ".Provider";
          case 18:
            return "DehydratedFragment";
          case 11:
            return (
              (n = (n = e.render).displayName || n.name || ""),
              e.displayName ||
                (n !== "" ? "ForwardRef(" + n + ")" : "ForwardRef")
            );
          case 7:
            return "Fragment";
          case 5:
            return e;
          case 4:
            return "Portal";
          case 3:
            return "Root";
          case 6:
            return "Text";
          case 16:
            return If(e);
          case 8:
            return e === lm ? "StrictMode" : "Mode";
          case 22:
            return "Offscreen";
          case 12:
            return "Profiler";
          case 21:
            return "Scope";
          case 13:
            return "Suspense";
          case 19:
            return "SuspenseList";
          case 25:
            return "TracingMarker";
          case 1:
          case 0:
          case 17:
          case 2:
          case 14:
          case 15:
            if (typeof e == "function") return e.displayName || e.name || null;
            if (typeof e == "string") return e;
        }
        return null;
      }
      function Ji(n) {
        switch (typeof n) {
          case "boolean":
          case "number":
          case "string":
          case "undefined":
          case "object":
            return n;
          default:
            return "";
        }
      }
      function Cy(n) {
        var e = n.type;
        return (
          (n = n.nodeName) &&
          n.toLowerCase() === "input" &&
          (e === "checkbox" || e === "radio")
        );
      }
      function uu(n) {
        n._valueTracker ||
          (n._valueTracker = (function (e) {
            var t = Cy(e) ? "checked" : "value",
              r = Object.getOwnPropertyDescriptor(e.constructor.prototype, t),
              i = "" + e[t];
            if (
              !e.hasOwnProperty(t) &&
              r !== void 0 &&
              typeof r.get == "function" &&
              typeof r.set == "function"
            ) {
              var a = r.get,
                s = r.set;
              return (
                Object.defineProperty(e, t, {
                  configurable: !0,
                  get: function () {
                    return a.call(this);
                  },
                  set: function (o) {
                    (i = "" + o), s.call(this, o);
                  },
                }),
                Object.defineProperty(e, t, { enumerable: r.enumerable }),
                {
                  getValue: function () {
                    return i;
                  },
                  setValue: function (o) {
                    i = "" + o;
                  },
                  stopTracking: function () {
                    (e._valueTracker = null), delete e[t];
                  },
                }
              );
            }
          })(n));
      }
      function Ay(n) {
        if (!n) return !1;
        var e = n._valueTracker;
        if (!e) return !0;
        var t = e.getValue(),
          r = "";
        return (
          n && (r = Cy(n) ? (n.checked ? "true" : "false") : n.value),
          (n = r) !== t && (e.setValue(n), !0)
        );
      }
      function Hc(n) {
        if ((n = n || (typeof document < "u" ? document : void 0)) === void 0)
          return null;
        try {
          return n.activeElement || n.body;
        } catch {
          return n.body;
        }
      }
      function Uf(n, e) {
        var t = e.checked;
        return pt({}, e, {
          defaultChecked: void 0,
          defaultValue: void 0,
          value: void 0,
          checked: t != null ? t : n._wrapperState.initialChecked,
        });
      }
      function Bg(n, e) {
        var t = e.defaultValue == null ? "" : e.defaultValue,
          r = e.checked != null ? e.checked : e.defaultChecked;
        (t = Ji(e.value != null ? e.value : t)),
          (n._wrapperState = {
            initialChecked: r,
            initialValue: t,
            controlled:
              e.type === "checkbox" || e.type === "radio"
                ? e.checked != null
                : e.value != null,
          });
      }
      function Ry(n, e) {
        (e = e.checked) != null && om(n, "checked", e, !1);
      }
      function Of(n, e) {
        Ry(n, e);
        var t = Ji(e.value),
          r = e.type;
        if (t != null)
          r === "number"
            ? ((t === 0 && n.value === "") || n.value != t) &&
              (n.value = "" + t)
            : n.value !== "" + t && (n.value = "" + t);
        else if (r === "submit" || r === "reset")
          return void n.removeAttribute("value");
        e.hasOwnProperty("value")
          ? zf(n, e.type, t)
          : e.hasOwnProperty("defaultValue") &&
            zf(n, e.type, Ji(e.defaultValue)),
          e.checked == null &&
            e.defaultChecked != null &&
            (n.defaultChecked = !!e.defaultChecked);
      }
      function Gg(n, e, t) {
        if (e.hasOwnProperty("value") || e.hasOwnProperty("defaultValue")) {
          var r = e.type;
          if (
            !(
              (r !== "submit" && r !== "reset") ||
              (e.value !== void 0 && e.value !== null)
            )
          )
            return;
          (e = "" + n._wrapperState.initialValue),
            t || e === n.value || (n.value = e),
            (n.defaultValue = e);
        }
        (t = n.name) !== "" && (n.name = ""),
          (n.defaultChecked = !!n._wrapperState.initialChecked),
          t !== "" && (n.name = t);
      }
      function zf(n, e, t) {
        (e === "number" && Hc(n.ownerDocument) === n) ||
          (t == null
            ? (n.defaultValue = "" + n._wrapperState.initialValue)
            : n.defaultValue !== "" + t && (n.defaultValue = "" + t));
      }
      var $o = Array.isArray;
      function Hs(n, e, t, r) {
        if (((n = n.options), e)) {
          e = {};
          for (var i = 0; i < t.length; i++) e["$" + t[i]] = !0;
          for (t = 0; t < n.length; t++)
            (i = e.hasOwnProperty("$" + n[t].value)),
              n[t].selected !== i && (n[t].selected = i),
              i && r && (n[t].defaultSelected = !0);
        } else {
          for (t = "" + Ji(t), e = null, i = 0; i < n.length; i++) {
            if (n[i].value === t)
              return (
                (n[i].selected = !0), void (r && (n[i].defaultSelected = !0))
              );
            e !== null || n[i].disabled || (e = n[i]);
          }
          e !== null && (e.selected = !0);
        }
      }
      function Nf(n, e) {
        if (e.dangerouslySetInnerHTML != null) throw Error(pe(91));
        return pt({}, e, {
          value: void 0,
          defaultValue: void 0,
          children: "" + n._wrapperState.initialValue,
        });
      }
      function Hg(n, e) {
        var t = e.value;
        if (t == null) {
          if (((t = e.children), (e = e.defaultValue), t != null)) {
            if (e != null) throw Error(pe(92));
            if ($o(t)) {
              if (1 < t.length) throw Error(pe(93));
              t = t[0];
            }
            e = t;
          }
          e == null && (e = ""), (t = e);
        }
        n._wrapperState = { initialValue: Ji(t) };
      }
      function Py(n, e) {
        var t = Ji(e.value),
          r = Ji(e.defaultValue);
        t != null &&
          ((t = "" + t) !== n.value && (n.value = t),
          e.defaultValue == null &&
            n.defaultValue !== t &&
            (n.defaultValue = t)),
          r != null && (n.defaultValue = "" + r);
      }
      function Vg(n) {
        var e = n.textContent;
        e === n._wrapperState.initialValue &&
          e !== "" &&
          e !== null &&
          (n.value = e);
      }
      function Ly(n) {
        switch (n) {
          case "svg":
            return "http://www.w3.org/2000/svg";
          case "math":
            return "http://www.w3.org/1998/Math/MathML";
          default:
            return "http://www.w3.org/1999/xhtml";
        }
      }
      function Ff(n, e) {
        return n == null || n === "http://www.w3.org/1999/xhtml"
          ? Ly(e)
          : n === "http://www.w3.org/2000/svg" && e === "foreignObject"
          ? "http://www.w3.org/1999/xhtml"
          : n;
      }
      var id,
        ad,
        Dy =
          ((ad = function (n, e) {
            if (
              n.namespaceURI !== "http://www.w3.org/2000/svg" ||
              "innerHTML" in n
            )
              n.innerHTML = e;
            else {
              for (
                (id = id || document.createElement("div")).innerHTML =
                  "<svg>" + e.valueOf().toString() + "</svg>",
                  e = id.firstChild;
                n.firstChild;

              )
                n.removeChild(n.firstChild);
              for (; e.firstChild; ) n.appendChild(e.firstChild);
            }
          }),
          typeof MSApp < "u" && MSApp.execUnsafeLocalFunction
            ? function (n, e, t, r) {
                MSApp.execUnsafeLocalFunction(function () {
                  return ad(n, e);
                });
              }
            : ad);
      function gl(n, e) {
        if (e) {
          var t = n.firstChild;
          if (t && t === n.lastChild && t.nodeType === 3)
            return void (t.nodeValue = e);
        }
        n.textContent = e;
      }
      var Ko = {
          animationIterationCount: !0,
          aspectRatio: !0,
          borderImageOutset: !0,
          borderImageSlice: !0,
          borderImageWidth: !0,
          boxFlex: !0,
          boxFlexGroup: !0,
          boxOrdinalGroup: !0,
          columnCount: !0,
          columns: !0,
          flex: !0,
          flexGrow: !0,
          flexPositive: !0,
          flexShrink: !0,
          flexNegative: !0,
          flexOrder: !0,
          gridArea: !0,
          gridRow: !0,
          gridRowEnd: !0,
          gridRowSpan: !0,
          gridRowStart: !0,
          gridColumn: !0,
          gridColumnEnd: !0,
          gridColumnSpan: !0,
          gridColumnStart: !0,
          fontWeight: !0,
          lineClamp: !0,
          lineHeight: !0,
          opacity: !0,
          order: !0,
          orphans: !0,
          tabSize: !0,
          widows: !0,
          zIndex: !0,
          zoom: !0,
          fillOpacity: !0,
          floodOpacity: !0,
          stopOpacity: !0,
          strokeDasharray: !0,
          strokeDashoffset: !0,
          strokeMiterlimit: !0,
          strokeOpacity: !0,
          strokeWidth: !0,
        },
        Tw = ["Webkit", "ms", "Moz", "O"];
      function ky(n, e, t) {
        return e == null || typeof e == "boolean" || e === ""
          ? ""
          : t ||
            typeof e != "number" ||
            e === 0 ||
            (Ko.hasOwnProperty(n) && Ko[n])
          ? ("" + e).trim()
          : e + "px";
      }
      function Iy(n, e) {
        for (var t in ((n = n.style), e))
          if (e.hasOwnProperty(t)) {
            var r = t.indexOf("--") === 0,
              i = ky(t, e[t], r);
            t === "float" && (t = "cssFloat"),
              r ? n.setProperty(t, i) : (n[t] = i);
          }
      }
      Object.keys(Ko).forEach(function (n) {
        Tw.forEach(function (e) {
          (e = e + n.charAt(0).toUpperCase() + n.substring(1)), (Ko[e] = Ko[n]);
        });
      });
      var Ew = pt(
        { menuitem: !0 },
        {
          area: !0,
          base: !0,
          br: !0,
          col: !0,
          embed: !0,
          hr: !0,
          img: !0,
          input: !0,
          keygen: !0,
          link: !0,
          meta: !0,
          param: !0,
          source: !0,
          track: !0,
          wbr: !0,
        }
      );
      function Bf(n, e) {
        if (e) {
          if (
            Ew[n] &&
            (e.children != null || e.dangerouslySetInnerHTML != null)
          )
            throw Error(pe(137, n));
          if (e.dangerouslySetInnerHTML != null) {
            if (e.children != null) throw Error(pe(60));
            if (
              typeof e.dangerouslySetInnerHTML != "object" ||
              !("__html" in e.dangerouslySetInnerHTML)
            )
              throw Error(pe(61));
          }
          if (e.style != null && typeof e.style != "object")
            throw Error(pe(62));
        }
      }
      function Gf(n, e) {
        if (n.indexOf("-") === -1) return typeof e.is == "string";
        switch (n) {
          case "annotation-xml":
          case "color-profile":
          case "font-face":
          case "font-face-src":
          case "font-face-uri":
          case "font-face-format":
          case "font-face-name":
          case "missing-glyph":
            return !1;
          default:
            return !0;
        }
      }
      var Hf = null;
      function hm(n) {
        return (
          (n = n.target || n.srcElement || window).correspondingUseElement &&
            (n = n.correspondingUseElement),
          n.nodeType === 3 ? n.parentNode : n
        );
      }
      var Vf = null,
        Vs = null,
        Ws = null;
      function Wg(n) {
        if ((n = ql(n))) {
          if (typeof Vf != "function") throw Error(pe(280));
          var e = n.stateNode;
          e && ((e = Ah(e)), Vf(n.stateNode, n.type, e));
        }
      }
      function Uy(n) {
        Vs ? (Ws ? Ws.push(n) : (Ws = [n])) : (Vs = n);
      }
      function Oy() {
        if (Vs) {
          var n = Vs,
            e = Ws;
          if (((Ws = Vs = null), Wg(n), e))
            for (n = 0; n < e.length; n++) Wg(e[n]);
        }
      }
      function zy(n, e) {
        return n(e);
      }
      function Ny() {}
      var sd = !1;
      function Fy(n, e, t) {
        if (sd) return n(e, t);
        sd = !0;
        try {
          return zy(n, e, t);
        } finally {
          (sd = !1), (Vs !== null || Ws !== null) && (Ny(), Oy());
        }
      }
      function vl(n, e) {
        var t = n.stateNode;
        if (t === null) return null;
        var r = Ah(t);
        if (r === null) return null;
        t = r[e];
        e: switch (e) {
          case "onClick":
          case "onClickCapture":
          case "onDoubleClick":
          case "onDoubleClickCapture":
          case "onMouseDown":
          case "onMouseDownCapture":
          case "onMouseMove":
          case "onMouseMoveCapture":
          case "onMouseUp":
          case "onMouseUpCapture":
          case "onMouseEnter":
            (r = !r.disabled) ||
              (r = !(
                (n = n.type) === "button" ||
                n === "input" ||
                n === "select" ||
                n === "textarea"
              )),
              (n = !r);
            break e;
          default:
            n = !1;
        }
        if (n) return null;
        if (t && typeof t != "function") throw Error(pe(231, e, typeof t));
        return t;
      }
      var Wf = !1;
      if (vi)
        try {
          var Lo = {};
          Object.defineProperty(Lo, "passive", {
            get: function () {
              Wf = !0;
            },
          }),
            window.addEventListener("test", Lo, Lo),
            window.removeEventListener("test", Lo, Lo);
        } catch {
          Wf = !1;
        }
      function Cw(n, e, t, r, i, a, s, o, l) {
        var u = Array.prototype.slice.call(arguments, 3);
        try {
          e.apply(t, u);
        } catch (c) {
          this.onError(c);
        }
      }
      var Jo = !1,
        Vc = null,
        Wc = !1,
        jf = null,
        Aw = {
          onError: function (n) {
            (Jo = !0), (Vc = n);
          },
        };
      function Rw(n, e, t, r, i, a, s, o, l) {
        (Jo = !1), (Vc = null), Cw.apply(Aw, arguments);
      }
      function Ha(n) {
        var e = n,
          t = n;
        if (n.alternate) for (; e.return; ) e = e.return;
        else {
          n = e;
          do (4098 & (e = n).flags) != 0 && (t = e.return), (n = e.return);
          while (n);
        }
        return e.tag === 3 ? t : null;
      }
      function By(n) {
        if (n.tag === 13) {
          var e = n.memoizedState;
          if (
            (e === null && (n = n.alternate) !== null && (e = n.memoizedState),
            e !== null)
          )
            return e.dehydrated;
        }
        return null;
      }
      function jg(n) {
        if (Ha(n) !== n) throw Error(pe(188));
      }
      function Gy(n) {
        return (
          (n = (function (e) {
            var t = e.alternate;
            if (!t) {
              if ((t = Ha(e)) === null) throw Error(pe(188));
              return t !== e ? null : e;
            }
            for (var r = e, i = t; ; ) {
              var a = r.return;
              if (a === null) break;
              var s = a.alternate;
              if (s === null) {
                if ((i = a.return) !== null) {
                  r = i;
                  continue;
                }
                break;
              }
              if (a.child === s.child) {
                for (s = a.child; s; ) {
                  if (s === r) return jg(a), e;
                  if (s === i) return jg(a), t;
                  s = s.sibling;
                }
                throw Error(pe(188));
              }
              if (r.return !== i.return) (r = a), (i = s);
              else {
                for (var o = !1, l = a.child; l; ) {
                  if (l === r) {
                    (o = !0), (r = a), (i = s);
                    break;
                  }
                  if (l === i) {
                    (o = !0), (i = a), (r = s);
                    break;
                  }
                  l = l.sibling;
                }
                if (!o) {
                  for (l = s.child; l; ) {
                    if (l === r) {
                      (o = !0), (r = s), (i = a);
                      break;
                    }
                    if (l === i) {
                      (o = !0), (i = s), (r = a);
                      break;
                    }
                    l = l.sibling;
                  }
                  if (!o) throw Error(pe(189));
                }
              }
              if (r.alternate !== i) throw Error(pe(190));
            }
            if (r.tag !== 3) throw Error(pe(188));
            return r.stateNode.current === r ? e : t;
          })(n)),
          n !== null ? Hy(n) : null
        );
      }
      function Hy(n) {
        if (n.tag === 5 || n.tag === 6) return n;
        for (n = n.child; n !== null; ) {
          var e = Hy(n);
          if (e !== null) return e;
          n = n.sibling;
        }
        return null;
      }
      var Vy = $n.unstable_scheduleCallback,
        Xg = $n.unstable_cancelCallback,
        Pw = $n.unstable_shouldYield,
        Lw = $n.unstable_requestPaint,
        Tt = $n.unstable_now,
        Dw = $n.unstable_getCurrentPriorityLevel,
        dm = $n.unstable_ImmediatePriority,
        Wy = $n.unstable_UserBlockingPriority,
        fm = $n.unstable_NormalPriority,
        kw = $n.unstable_LowPriority,
        jy = $n.unstable_IdlePriority,
        Mh = null,
        Wr = null,
        wr = Math.clz32
          ? Math.clz32
          : function (n) {
              return (n >>>= 0) === 0 ? 32 : (31 - ((Iw(n) / Uw) | 0)) | 0;
            },
        Iw = Math.log,
        Uw = Math.LN2,
        od = 64,
        ld = 4194304;
      function Yo(n) {
        switch (n & -n) {
          case 1:
            return 1;
          case 2:
            return 2;
          case 4:
            return 4;
          case 8:
            return 8;
          case 16:
            return 16;
          case 32:
            return 32;
          case 64:
          case 128:
          case 256:
          case 512:
          case 1024:
          case 2048:
          case 4096:
          case 8192:
          case 16384:
          case 32768:
          case 65536:
          case 131072:
          case 262144:
          case 524288:
          case 1048576:
          case 2097152:
            return 4194240 & n;
          case 4194304:
          case 8388608:
          case 16777216:
          case 33554432:
          case 67108864:
            return 130023424 & n;
          case 134217728:
            return 134217728;
          case 268435456:
            return 268435456;
          case 536870912:
            return 536870912;
          case 1073741824:
            return 1073741824;
          default:
            return n;
        }
      }
      function jc(n, e) {
        var t = n.pendingLanes;
        if (t === 0) return 0;
        var r = 0,
          i = n.suspendedLanes,
          a = n.pingedLanes,
          s = 268435455 & t;
        if (s !== 0) {
          var o = s & ~i;
          o !== 0 ? (r = Yo(o)) : (a &= s) !== 0 && (r = Yo(a));
        } else (s = t & ~i) !== 0 ? (r = Yo(s)) : a !== 0 && (r = Yo(a));
        if (r === 0) return 0;
        if (
          e !== 0 &&
          e !== r &&
          (e & i) == 0 &&
          ((i = r & -r) >= (a = e & -e) || (i === 16 && (4194240 & a) != 0))
        )
          return e;
        if (((4 & r) != 0 && (r |= 16 & t), (e = n.entangledLanes) !== 0))
          for (n = n.entanglements, e &= r; 0 < e; )
            (i = 1 << (t = 31 - wr(e))), (r |= n[t]), (e &= ~i);
        return r;
      }
      function Ow(n, e) {
        switch (n) {
          case 1:
          case 2:
          case 4:
            return e + 250;
          case 8:
          case 16:
          case 32:
          case 64:
          case 128:
          case 256:
          case 512:
          case 1024:
          case 2048:
          case 4096:
          case 8192:
          case 16384:
          case 32768:
          case 65536:
          case 131072:
          case 262144:
          case 524288:
          case 1048576:
          case 2097152:
            return e + 5e3;
          default:
            return -1;
        }
      }
      function Xf(n) {
        return (n = -1073741825 & n.pendingLanes) !== 0
          ? n
          : 1073741824 & n
          ? 1073741824
          : 0;
      }
      function Xy() {
        var n = od;
        return (4194240 & (od <<= 1)) == 0 && (od = 64), n;
      }
      function ud(n) {
        for (var e = [], t = 0; 31 > t; t++) e.push(n);
        return e;
      }
      function jl(n, e, t) {
        (n.pendingLanes |= e),
          e !== 536870912 && ((n.suspendedLanes = 0), (n.pingedLanes = 0)),
          ((n = n.eventTimes)[(e = 31 - wr(e))] = t);
      }
      function pm(n, e) {
        var t = (n.entangledLanes |= e);
        for (n = n.entanglements; t; ) {
          var r = 31 - wr(t),
            i = 1 << r;
          (i & e) | (n[r] & e) && (n[r] |= e), (t &= ~i);
        }
      }
      var Ze = 0;
      function qy(n) {
        return 1 < (n &= -n)
          ? 4 < n
            ? (268435455 & n) != 0
              ? 16
              : 536870912
            : 4
          : 1;
      }
      var $y,
        mm,
        Yy,
        qg,
        Zy,
        qf = !1,
        cu = [],
        Hi = null,
        Vi = null,
        Wi = null,
        yl = new Map(),
        xl = new Map(),
        zi = [],
        zw =
          "mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(
            " "
          );
      function $g(n, e) {
        switch (n) {
          case "focusin":
          case "focusout":
            Hi = null;
            break;
          case "dragenter":
          case "dragleave":
            Vi = null;
            break;
          case "mouseover":
          case "mouseout":
            Wi = null;
            break;
          case "pointerover":
          case "pointerout":
            yl.delete(e.pointerId);
            break;
          case "gotpointercapture":
          case "lostpointercapture":
            xl.delete(e.pointerId);
        }
      }
      function Do(n, e, t, r, i, a) {
        return n === null || n.nativeEvent !== a
          ? ((n = {
              blockedOn: e,
              domEventName: t,
              eventSystemFlags: r,
              nativeEvent: a,
              targetContainers: [i],
            }),
            e !== null && (e = ql(e)) !== null && mm(e),
            n)
          : ((n.eventSystemFlags |= r),
            (e = n.targetContainers),
            i !== null && e.indexOf(i) === -1 && e.push(i),
            n);
      }
      function Ky(n) {
        var e = Ca(n.target);
        if (e !== null) {
          var t = Ha(e);
          if (t !== null) {
            if ((e = t.tag) === 13) {
              if ((e = By(t)) !== null)
                return (
                  (n.blockedOn = e),
                  void Zy(n.priority, function () {
                    Yy(t);
                  })
                );
            } else if (
              e === 3 &&
              t.stateNode.current.memoizedState.isDehydrated
            )
              return void (n.blockedOn =
                t.tag === 3 ? t.stateNode.containerInfo : null);
          }
        }
        n.blockedOn = null;
      }
      function cc(n) {
        if (n.blockedOn !== null) return !1;
        for (var e = n.targetContainers; 0 < e.length; ) {
          var t = $f(n.domEventName, n.eventSystemFlags, e[0], n.nativeEvent);
          if (t !== null)
            return (e = ql(t)) !== null && mm(e), (n.blockedOn = t), !1;
          var r = new (t = n.nativeEvent).constructor(t.type, t);
          (Hf = r), t.target.dispatchEvent(r), (Hf = null), e.shift();
        }
        return !0;
      }
      function Yg(n, e, t) {
        cc(n) && t.delete(e);
      }
      function Nw() {
        (qf = !1),
          Hi !== null && cc(Hi) && (Hi = null),
          Vi !== null && cc(Vi) && (Vi = null),
          Wi !== null && cc(Wi) && (Wi = null),
          yl.forEach(Yg),
          xl.forEach(Yg);
      }
      function ko(n, e) {
        n.blockedOn === e &&
          ((n.blockedOn = null),
          qf ||
            ((qf = !0),
            $n.unstable_scheduleCallback($n.unstable_NormalPriority, Nw)));
      }
      function _l(n) {
        function e(i) {
          return ko(i, n);
        }
        if (0 < cu.length) {
          ko(cu[0], n);
          for (var t = 1; t < cu.length; t++) {
            var r = cu[t];
            r.blockedOn === n && (r.blockedOn = null);
          }
        }
        for (
          Hi !== null && ko(Hi, n),
            Vi !== null && ko(Vi, n),
            Wi !== null && ko(Wi, n),
            yl.forEach(e),
            xl.forEach(e),
            t = 0;
          t < zi.length;
          t++
        )
          (r = zi[t]).blockedOn === n && (r.blockedOn = null);
        for (; 0 < zi.length && (t = zi[0]).blockedOn === null; )
          Ky(t), t.blockedOn === null && zi.shift();
      }
      var js = bi.ReactCurrentBatchConfig,
        hc = !0;
      function Fw(n, e, t, r) {
        var i = Ze,
          a = js.transition;
        js.transition = null;
        try {
          (Ze = 1), gm(n, e, t, r);
        } finally {
          (Ze = i), (js.transition = a);
        }
      }
      function Bw(n, e, t, r) {
        var i = Ze,
          a = js.transition;
        js.transition = null;
        try {
          (Ze = 4), gm(n, e, t, r);
        } finally {
          (Ze = i), (js.transition = a);
        }
      }
      function gm(n, e, t, r) {
        if (hc) {
          var i = $f(n, e, t, r);
          if (i === null) xd(n, e, r, Xc, t), $g(n, r);
          else if (
            (function (s, o, l, u, c) {
              switch (o) {
                case "focusin":
                  return (Hi = Do(Hi, s, o, l, u, c)), !0;
                case "dragenter":
                  return (Vi = Do(Vi, s, o, l, u, c)), !0;
                case "mouseover":
                  return (Wi = Do(Wi, s, o, l, u, c)), !0;
                case "pointerover":
                  var h = c.pointerId;
                  return yl.set(h, Do(yl.get(h) || null, s, o, l, u, c)), !0;
                case "gotpointercapture":
                  return (
                    (h = c.pointerId),
                    xl.set(h, Do(xl.get(h) || null, s, o, l, u, c)),
                    !0
                  );
              }
              return !1;
            })(i, n, e, t, r)
          )
            r.stopPropagation();
          else if (($g(n, r), 4 & e && -1 < zw.indexOf(n))) {
            for (; i !== null; ) {
              var a = ql(i);
              if (
                (a !== null && $y(a),
                (a = $f(n, e, t, r)) === null && xd(n, e, r, Xc, t),
                a === i)
              )
                break;
              i = a;
            }
            i !== null && r.stopPropagation();
          } else xd(n, e, r, null, t);
        }
      }
      var Xc = null;
      function $f(n, e, t, r) {
        if (((Xc = null), (n = Ca((n = hm(r)))) !== null))
          if ((e = Ha(n)) === null) n = null;
          else if ((t = e.tag) === 13) {
            if ((n = By(e)) !== null) return n;
            n = null;
          } else if (t === 3) {
            if (e.stateNode.current.memoizedState.isDehydrated)
              return e.tag === 3 ? e.stateNode.containerInfo : null;
            n = null;
          } else e !== n && (n = null);
        return (Xc = n), null;
      }
      function Jy(n) {
        switch (n) {
          case "cancel":
          case "click":
          case "close":
          case "contextmenu":
          case "copy":
          case "cut":
          case "auxclick":
          case "dblclick":
          case "dragend":
          case "dragstart":
          case "drop":
          case "focusin":
          case "focusout":
          case "input":
          case "invalid":
          case "keydown":
          case "keypress":
          case "keyup":
          case "mousedown":
          case "mouseup":
          case "paste":
          case "pause":
          case "play":
          case "pointercancel":
          case "pointerdown":
          case "pointerup":
          case "ratechange":
          case "reset":
          case "resize":
          case "seeked":
          case "submit":
          case "touchcancel":
          case "touchend":
          case "touchstart":
          case "volumechange":
          case "change":
          case "selectionchange":
          case "textInput":
          case "compositionstart":
          case "compositionend":
          case "compositionupdate":
          case "beforeblur":
          case "afterblur":
          case "beforeinput":
          case "blur":
          case "fullscreenchange":
          case "focus":
          case "hashchange":
          case "popstate":
          case "select":
          case "selectstart":
            return 1;
          case "drag":
          case "dragenter":
          case "dragexit":
          case "dragleave":
          case "dragover":
          case "mousemove":
          case "mouseout":
          case "mouseover":
          case "pointermove":
          case "pointerout":
          case "pointerover":
          case "scroll":
          case "toggle":
          case "touchmove":
          case "wheel":
          case "mouseenter":
          case "mouseleave":
          case "pointerenter":
          case "pointerleave":
            return 4;
          case "message":
            switch (Dw()) {
              case dm:
                return 1;
              case Wy:
                return 4;
              case fm:
              case kw:
                return 16;
              case jy:
                return 536870912;
              default:
                return 16;
            }
          default:
            return 16;
        }
      }
      var Ea = null,
        Yf = null,
        dc = null;
      function Zg() {
        if (dc) return dc;
        var n,
          e,
          t = Yf,
          r = t.length,
          i = "value" in Ea ? Ea.value : Ea.textContent,
          a = i.length;
        for (n = 0; n < r && t[n] === i[n]; n++);
        var s = r - n;
        for (e = 1; e <= s && t[r - e] === i[a - e]; e++);
        return (dc = i.slice(n, 1 < e ? 1 - e : void 0));
      }
      function fc(n) {
        var e = n.keyCode;
        return (
          "charCode" in n
            ? (n = n.charCode) === 0 && e === 13 && (n = 13)
            : (n = e),
          n === 10 && (n = 13),
          32 <= n || n === 13 ? n : 0
        );
      }
      function hu() {
        return !0;
      }
      function Kg() {
        return !1;
      }
      function Yn(n) {
        function e(t, r, i, a, s) {
          for (var o in ((this._reactName = t),
          (this._targetInst = i),
          (this.type = r),
          (this.nativeEvent = a),
          (this.target = s),
          (this.currentTarget = null),
          n))
            n.hasOwnProperty(o) && ((t = n[o]), (this[o] = t ? t(a) : a[o]));
          return (
            (this.isDefaultPrevented = (
              a.defaultPrevented != null
                ? a.defaultPrevented
                : a.returnValue === !1
            )
              ? hu
              : Kg),
            (this.isPropagationStopped = Kg),
            this
          );
        }
        return (
          pt(e.prototype, {
            preventDefault: function () {
              this.defaultPrevented = !0;
              var t = this.nativeEvent;
              t &&
                (t.preventDefault
                  ? t.preventDefault()
                  : typeof t.returnValue != "unknown" && (t.returnValue = !1),
                (this.isDefaultPrevented = hu));
            },
            stopPropagation: function () {
              var t = this.nativeEvent;
              t &&
                (t.stopPropagation
                  ? t.stopPropagation()
                  : typeof t.cancelBubble != "unknown" && (t.cancelBubble = !0),
                (this.isPropagationStopped = hu));
            },
            persist: function () {},
            isPersistent: hu,
          }),
          e
        );
      }
      var cd,
        hd,
        Io,
        ao = {
          eventPhase: 0,
          bubbles: 0,
          cancelable: 0,
          timeStamp: function (n) {
            return n.timeStamp || Date.now();
          },
          defaultPrevented: 0,
          isTrusted: 0,
        },
        vm = Yn(ao),
        Xl = pt({}, ao, { view: 0, detail: 0 }),
        Gw = Yn(Xl),
        Th = pt({}, Xl, {
          screenX: 0,
          screenY: 0,
          clientX: 0,
          clientY: 0,
          pageX: 0,
          pageY: 0,
          ctrlKey: 0,
          shiftKey: 0,
          altKey: 0,
          metaKey: 0,
          getModifierState: ym,
          button: 0,
          buttons: 0,
          relatedTarget: function (n) {
            return n.relatedTarget === void 0
              ? n.fromElement === n.srcElement
                ? n.toElement
                : n.fromElement
              : n.relatedTarget;
          },
          movementX: function (n) {
            return "movementX" in n
              ? n.movementX
              : (n !== Io &&
                  (Io && n.type === "mousemove"
                    ? ((cd = n.screenX - Io.screenX),
                      (hd = n.screenY - Io.screenY))
                    : (hd = cd = 0),
                  (Io = n)),
                cd);
          },
          movementY: function (n) {
            return "movementY" in n ? n.movementY : hd;
          },
        }),
        Jg = Yn(Th),
        Hw = Yn(pt({}, Th, { dataTransfer: 0 })),
        dd = Yn(pt({}, Xl, { relatedTarget: 0 })),
        Vw = Yn(
          pt({}, ao, { animationName: 0, elapsedTime: 0, pseudoElement: 0 })
        ),
        Ww = pt({}, ao, {
          clipboardData: function (n) {
            return "clipboardData" in n
              ? n.clipboardData
              : window.clipboardData;
          },
        }),
        jw = Yn(Ww),
        Qg = Yn(pt({}, ao, { data: 0 })),
        Xw = {
          Esc: "Escape",
          Spacebar: " ",
          Left: "ArrowLeft",
          Up: "ArrowUp",
          Right: "ArrowRight",
          Down: "ArrowDown",
          Del: "Delete",
          Win: "OS",
          Menu: "ContextMenu",
          Apps: "ContextMenu",
          Scroll: "ScrollLock",
          MozPrintableKey: "Unidentified",
        },
        qw = {
          8: "Backspace",
          9: "Tab",
          12: "Clear",
          13: "Enter",
          16: "Shift",
          17: "Control",
          18: "Alt",
          19: "Pause",
          20: "CapsLock",
          27: "Escape",
          32: " ",
          33: "PageUp",
          34: "PageDown",
          35: "End",
          36: "Home",
          37: "ArrowLeft",
          38: "ArrowUp",
          39: "ArrowRight",
          40: "ArrowDown",
          45: "Insert",
          46: "Delete",
          112: "F1",
          113: "F2",
          114: "F3",
          115: "F4",
          116: "F5",
          117: "F6",
          118: "F7",
          119: "F8",
          120: "F9",
          121: "F10",
          122: "F11",
          123: "F12",
          144: "NumLock",
          145: "ScrollLock",
          224: "Meta",
        },
        $w = {
          Alt: "altKey",
          Control: "ctrlKey",
          Meta: "metaKey",
          Shift: "shiftKey",
        };
      function Yw(n) {
        var e = this.nativeEvent;
        return e.getModifierState
          ? e.getModifierState(n)
          : !!(n = $w[n]) && !!e[n];
      }
      function ym() {
        return Yw;
      }
      var Zw = pt({}, Xl, {
          key: function (n) {
            if (n.key) {
              var e = Xw[n.key] || n.key;
              if (e !== "Unidentified") return e;
            }
            return n.type === "keypress"
              ? (n = fc(n)) === 13
                ? "Enter"
                : String.fromCharCode(n)
              : n.type === "keydown" || n.type === "keyup"
              ? qw[n.keyCode] || "Unidentified"
              : "";
          },
          code: 0,
          location: 0,
          ctrlKey: 0,
          shiftKey: 0,
          altKey: 0,
          metaKey: 0,
          repeat: 0,
          locale: 0,
          getModifierState: ym,
          charCode: function (n) {
            return n.type === "keypress" ? fc(n) : 0;
          },
          keyCode: function (n) {
            return n.type === "keydown" || n.type === "keyup" ? n.keyCode : 0;
          },
          which: function (n) {
            return n.type === "keypress"
              ? fc(n)
              : n.type === "keydown" || n.type === "keyup"
              ? n.keyCode
              : 0;
          },
        }),
        Kw = Yn(Zw),
        e0 = Yn(
          pt({}, Th, {
            pointerId: 0,
            width: 0,
            height: 0,
            pressure: 0,
            tangentialPressure: 0,
            tiltX: 0,
            tiltY: 0,
            twist: 0,
            pointerType: 0,
            isPrimary: 0,
          })
        ),
        Jw = Yn(
          pt({}, Xl, {
            touches: 0,
            targetTouches: 0,
            changedTouches: 0,
            altKey: 0,
            metaKey: 0,
            ctrlKey: 0,
            shiftKey: 0,
            getModifierState: ym,
          })
        ),
        Qw = Yn(
          pt({}, ao, { propertyName: 0, elapsedTime: 0, pseudoElement: 0 })
        ),
        e2 = pt({}, Th, {
          deltaX: function (n) {
            return "deltaX" in n
              ? n.deltaX
              : "wheelDeltaX" in n
              ? -n.wheelDeltaX
              : 0;
          },
          deltaY: function (n) {
            return "deltaY" in n
              ? n.deltaY
              : "wheelDeltaY" in n
              ? -n.wheelDeltaY
              : "wheelDelta" in n
              ? -n.wheelDelta
              : 0;
          },
          deltaZ: 0,
          deltaMode: 0,
        }),
        t2 = Yn(e2),
        n2 = [9, 13, 27, 32],
        Zf = vi && "CompositionEvent" in window,
        Qo = null;
      vi && "documentMode" in document && (Qo = document.documentMode);
      var r2 = vi && "TextEvent" in window && !Qo,
        t0 = vi && (!Zf || (Qo && 8 < Qo && 11 >= Qo)),
        n0 = String.fromCharCode(32),
        r0 = !1;
      function i0(n, e) {
        switch (n) {
          case "keyup":
            return n2.indexOf(e.keyCode) !== -1;
          case "keydown":
            return e.keyCode !== 229;
          case "keypress":
          case "mousedown":
          case "focusout":
            return !0;
          default:
            return !1;
        }
      }
      function a0(n) {
        return typeof (n = n.detail) == "object" && "data" in n ? n.data : null;
      }
      var Ka = !1,
        i2 = {
          color: !0,
          date: !0,
          datetime: !0,
          "datetime-local": !0,
          email: !0,
          month: !0,
          number: !0,
          password: !0,
          range: !0,
          search: !0,
          tel: !0,
          text: !0,
          time: !0,
          url: !0,
          week: !0,
        };
      function s0(n) {
        var e = n && n.nodeName && n.nodeName.toLowerCase();
        return e === "input" ? !!i2[n.type] : e === "textarea";
      }
      function Qy(n, e, t, r) {
        Uy(r),
          0 < (e = qc(e, "onChange")).length &&
            ((t = new vm("onChange", "change", null, t, r)),
            n.push({ event: t, listeners: e }));
      }
      var pc = null,
        bl = null;
      function a2(n) {
        cx(n, 0);
      }
      function Eh(n) {
        if (Ay(Rs(n))) return n;
      }
      function s2(n, e) {
        if (n === "change") return e;
      }
      var ex = !1;
      if (vi) {
        var fd;
        if (vi) {
          var pd = "oninput" in document;
          if (!pd) {
            var o0 = document.createElement("div");
            o0.setAttribute("oninput", "return;"),
              (pd = typeof o0.oninput == "function");
          }
          fd = pd;
        } else fd = !1;
        ex = fd && (!document.documentMode || 9 < document.documentMode);
      }
      function l0() {
        pc && (pc.detachEvent("onpropertychange", tx), (bl = pc = null));
      }
      function tx(n) {
        if (n.propertyName === "value" && Eh(bl)) {
          var e = [];
          Qy(e, bl, n, hm(n)), Fy(a2, e);
        }
      }
      function o2(n, e, t) {
        n === "focusin"
          ? (l0(), (bl = t), (pc = e).attachEvent("onpropertychange", tx))
          : n === "focusout" && l0();
      }
      function l2(n) {
        if (n === "selectionchange" || n === "keyup" || n === "keydown")
          return Eh(bl);
      }
      function u2(n, e) {
        if (n === "click") return Eh(e);
      }
      function c2(n, e) {
        if (n === "input" || n === "change") return Eh(e);
      }
      var Tr =
        typeof Object.is == "function"
          ? Object.is
          : function (n, e) {
              return (
                (n === e && (n !== 0 || 1 / n == 1 / e)) || (n != n && e != e)
              );
            };
      function wl(n, e) {
        if (Tr(n, e)) return !0;
        if (
          typeof n != "object" ||
          n === null ||
          typeof e != "object" ||
          e === null
        )
          return !1;
        var t = Object.keys(n),
          r = Object.keys(e);
        if (t.length !== r.length) return !1;
        for (r = 0; r < t.length; r++) {
          var i = t[r];
          if (!Pf.call(e, i) || !Tr(n[i], e[i])) return !1;
        }
        return !0;
      }
      function u0(n) {
        for (; n && n.firstChild; ) n = n.firstChild;
        return n;
      }
      function c0(n, e) {
        var t,
          r = u0(n);
        for (n = 0; r; ) {
          if (r.nodeType === 3) {
            if (((t = n + r.textContent.length), n <= e && t >= e))
              return { node: r, offset: e - n };
            n = t;
          }
          e: {
            for (; r; ) {
              if (r.nextSibling) {
                r = r.nextSibling;
                break e;
              }
              r = r.parentNode;
            }
            r = void 0;
          }
          r = u0(r);
        }
      }
      function nx(n, e) {
        return (
          !(!n || !e) &&
          (n === e ||
            ((!n || n.nodeType !== 3) &&
              (e && e.nodeType === 3
                ? nx(n, e.parentNode)
                : "contains" in n
                ? n.contains(e)
                : !!n.compareDocumentPosition &&
                  !!(16 & n.compareDocumentPosition(e)))))
        );
      }
      function rx() {
        for (var n = window, e = Hc(); e instanceof n.HTMLIFrameElement; ) {
          try {
            var t = typeof e.contentWindow.location.href == "string";
          } catch {
            t = !1;
          }
          if (!t) break;
          e = Hc((n = e.contentWindow).document);
        }
        return e;
      }
      function xm(n) {
        var e = n && n.nodeName && n.nodeName.toLowerCase();
        return (
          e &&
          ((e === "input" &&
            (n.type === "text" ||
              n.type === "search" ||
              n.type === "tel" ||
              n.type === "url" ||
              n.type === "password")) ||
            e === "textarea" ||
            n.contentEditable === "true")
        );
      }
      function h2(n) {
        var e = rx(),
          t = n.focusedElem,
          r = n.selectionRange;
        if (
          e !== t &&
          t &&
          t.ownerDocument &&
          nx(t.ownerDocument.documentElement, t)
        ) {
          if (r !== null && xm(t)) {
            if (
              ((e = r.start),
              (n = r.end) === void 0 && (n = e),
              "selectionStart" in t)
            )
              (t.selectionStart = e),
                (t.selectionEnd = Math.min(n, t.value.length));
            else if (
              (n =
                ((e = t.ownerDocument || document) && e.defaultView) || window)
                .getSelection
            ) {
              n = n.getSelection();
              var i = t.textContent.length,
                a = Math.min(r.start, i);
              (r = r.end === void 0 ? a : Math.min(r.end, i)),
                !n.extend && a > r && ((i = r), (r = a), (a = i)),
                (i = c0(t, a));
              var s = c0(t, r);
              i &&
                s &&
                (n.rangeCount !== 1 ||
                  n.anchorNode !== i.node ||
                  n.anchorOffset !== i.offset ||
                  n.focusNode !== s.node ||
                  n.focusOffset !== s.offset) &&
                ((e = e.createRange()).setStart(i.node, i.offset),
                n.removeAllRanges(),
                a > r
                  ? (n.addRange(e), n.extend(s.node, s.offset))
                  : (e.setEnd(s.node, s.offset), n.addRange(e)));
            }
          }
          for (e = [], n = t; (n = n.parentNode); )
            n.nodeType === 1 &&
              e.push({ element: n, left: n.scrollLeft, top: n.scrollTop });
          for (
            typeof t.focus == "function" && t.focus(), t = 0;
            t < e.length;
            t++
          )
            ((n = e[t]).element.scrollLeft = n.left),
              (n.element.scrollTop = n.top);
        }
      }
      var d2 = vi && "documentMode" in document && 11 >= document.documentMode,
        Cs = null,
        Kf = null,
        el = null,
        Jf = !1;
      function h0(n, e, t) {
        var r =
          t.window === t ? t.document : t.nodeType === 9 ? t : t.ownerDocument;
        Jf ||
          Cs == null ||
          Cs !== Hc(r) ||
          ("selectionStart" in (r = Cs) && xm(r)
            ? (r = { start: r.selectionStart, end: r.selectionEnd })
            : (r = {
                anchorNode: (r = (
                  (r.ownerDocument && r.ownerDocument.defaultView) ||
                  window
                ).getSelection()).anchorNode,
                anchorOffset: r.anchorOffset,
                focusNode: r.focusNode,
                focusOffset: r.focusOffset,
              }),
          (el && wl(el, r)) ||
            ((el = r),
            0 < (r = qc(Kf, "onSelect")).length &&
              ((e = new vm("onSelect", "select", null, e, t)),
              n.push({ event: e, listeners: r }),
              (e.target = Cs))));
      }
      function du(n, e) {
        var t = {};
        return (
          (t[n.toLowerCase()] = e.toLowerCase()),
          (t["Webkit" + n] = "webkit" + e),
          (t["Moz" + n] = "moz" + e),
          t
        );
      }
      var As = {
          animationend: du("Animation", "AnimationEnd"),
          animationiteration: du("Animation", "AnimationIteration"),
          animationstart: du("Animation", "AnimationStart"),
          transitionend: du("Transition", "TransitionEnd"),
        },
        md = {},
        ix = {};
      function Ch(n) {
        if (md[n]) return md[n];
        if (!As[n]) return n;
        var e,
          t = As[n];
        for (e in t) if (t.hasOwnProperty(e) && e in ix) return (md[n] = t[e]);
        return n;
      }
      vi &&
        ((ix = document.createElement("div").style),
        "AnimationEvent" in window ||
          (delete As.animationend.animation,
          delete As.animationiteration.animation,
          delete As.animationstart.animation),
        "TransitionEvent" in window || delete As.transitionend.transition);
      var ax = Ch("animationend"),
        sx = Ch("animationiteration"),
        ox = Ch("animationstart"),
        lx = Ch("transitionend"),
        ux = new Map(),
        d0 =
          "abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(
            " "
          );
      function ki(n, e) {
        ux.set(n, e), ba(e, [n]);
      }
      for (var gd = 0; gd < d0.length; gd++) {
        var vd = d0[gd];
        ki(vd.toLowerCase(), "on" + (vd[0].toUpperCase() + vd.slice(1)));
      }
      ki(ax, "onAnimationEnd"),
        ki(sx, "onAnimationIteration"),
        ki(ox, "onAnimationStart"),
        ki("dblclick", "onDoubleClick"),
        ki("focusin", "onFocus"),
        ki("focusout", "onBlur"),
        ki(lx, "onTransitionEnd"),
        Ms("onMouseEnter", ["mouseout", "mouseover"]),
        Ms("onMouseLeave", ["mouseout", "mouseover"]),
        Ms("onPointerEnter", ["pointerout", "pointerover"]),
        Ms("onPointerLeave", ["pointerout", "pointerover"]),
        ba(
          "onChange",
          "change click focusin focusout input keydown keyup selectionchange".split(
            " "
          )
        ),
        ba(
          "onSelect",
          "focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(
            " "
          )
        ),
        ba("onBeforeInput", [
          "compositionend",
          "keypress",
          "textInput",
          "paste",
        ]),
        ba(
          "onCompositionEnd",
          "compositionend focusout keydown keypress keyup mousedown".split(" ")
        ),
        ba(
          "onCompositionStart",
          "compositionstart focusout keydown keypress keyup mousedown".split(
            " "
          )
        ),
        ba(
          "onCompositionUpdate",
          "compositionupdate focusout keydown keypress keyup mousedown".split(
            " "
          )
        );
      var Zo =
          "abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(
            " "
          ),
        f2 = new Set(
          "cancel close invalid load scroll toggle".split(" ").concat(Zo)
        );
      function f0(n, e, t) {
        var r = n.type || "unknown-event";
        (n.currentTarget = t),
          (function (i, a, s, o, l, u, c, h, d) {
            if ((Rw.apply(this, arguments), Jo)) {
              if (!Jo) throw Error(pe(198));
              var f = Vc;
              (Jo = !1), (Vc = null), Wc || ((Wc = !0), (jf = f));
            }
          })(r, e, void 0, n),
          (n.currentTarget = null);
      }
      function cx(n, e) {
        e = (4 & e) != 0;
        for (var t = 0; t < n.length; t++) {
          var r = n[t],
            i = r.event;
          r = r.listeners;
          e: {
            var a = void 0;
            if (e)
              for (var s = r.length - 1; 0 <= s; s--) {
                var o = r[s],
                  l = o.instance,
                  u = o.currentTarget;
                if (((o = o.listener), l !== a && i.isPropagationStopped()))
                  break e;
                f0(i, o, u), (a = l);
              }
            else
              for (s = 0; s < r.length; s++) {
                if (
                  ((l = (o = r[s]).instance),
                  (u = o.currentTarget),
                  (o = o.listener),
                  l !== a && i.isPropagationStopped())
                )
                  break e;
                f0(i, o, u), (a = l);
              }
          }
        }
        if (Wc) throw ((n = jf), (Wc = !1), (jf = null), n);
      }
      function at(n, e) {
        var t = e[tp];
        t === void 0 && (t = e[tp] = new Set());
        var r = n + "__bubble";
        t.has(r) || (hx(e, n, 2, !1), t.add(r));
      }
      function yd(n, e, t) {
        var r = 0;
        e && (r |= 4), hx(t, n, r, e);
      }
      var fu = "_reactListening" + Math.random().toString(36).slice(2);
      function Sl(n) {
        if (!n[fu]) {
          (n[fu] = !0),
            Sy.forEach(function (t) {
              t !== "selectionchange" &&
                (f2.has(t) || yd(t, !1, n), yd(t, !0, n));
            });
          var e = n.nodeType === 9 ? n : n.ownerDocument;
          e === null || e[fu] || ((e[fu] = !0), yd("selectionchange", !1, e));
        }
      }
      function hx(n, e, t, r) {
        switch (Jy(e)) {
          case 1:
            var i = Fw;
            break;
          case 4:
            i = Bw;
            break;
          default:
            i = gm;
        }
        (t = i.bind(null, e, t, n)),
          (i = void 0),
          !Wf ||
            (e !== "touchstart" && e !== "touchmove" && e !== "wheel") ||
            (i = !0),
          r
            ? i !== void 0
              ? n.addEventListener(e, t, { capture: !0, passive: i })
              : n.addEventListener(e, t, !0)
            : i !== void 0
            ? n.addEventListener(e, t, { passive: i })
            : n.addEventListener(e, t, !1);
      }
      function xd(n, e, t, r, i) {
        var a = r;
        if ((1 & e) == 0 && (2 & e) == 0 && r !== null)
          e: for (;;) {
            if (r === null) return;
            var s = r.tag;
            if (s === 3 || s === 4) {
              var o = r.stateNode.containerInfo;
              if (o === i || (o.nodeType === 8 && o.parentNode === i)) break;
              if (s === 4)
                for (s = r.return; s !== null; ) {
                  var l = s.tag;
                  if (
                    (l === 3 || l === 4) &&
                    ((l = s.stateNode.containerInfo) === i ||
                      (l.nodeType === 8 && l.parentNode === i))
                  )
                    return;
                  s = s.return;
                }
              for (; o !== null; ) {
                if ((s = Ca(o)) === null) return;
                if ((l = s.tag) === 5 || l === 6) {
                  r = a = s;
                  continue e;
                }
                o = o.parentNode;
              }
            }
            r = r.return;
          }
        Fy(function () {
          var u = a,
            c = hm(t),
            h = [];
          e: {
            var d = ux.get(n);
            if (d !== void 0) {
              var f = vm,
                g = n;
              switch (n) {
                case "keypress":
                  if (fc(t) === 0) break e;
                case "keydown":
                case "keyup":
                  f = Kw;
                  break;
                case "focusin":
                  (g = "focus"), (f = dd);
                  break;
                case "focusout":
                  (g = "blur"), (f = dd);
                  break;
                case "beforeblur":
                case "afterblur":
                  f = dd;
                  break;
                case "click":
                  if (t.button === 2) break e;
                case "auxclick":
                case "dblclick":
                case "mousedown":
                case "mousemove":
                case "mouseup":
                case "mouseout":
                case "mouseover":
                case "contextmenu":
                  f = Jg;
                  break;
                case "drag":
                case "dragend":
                case "dragenter":
                case "dragexit":
                case "dragleave":
                case "dragover":
                case "dragstart":
                case "drop":
                  f = Hw;
                  break;
                case "touchcancel":
                case "touchend":
                case "touchmove":
                case "touchstart":
                  f = Jw;
                  break;
                case ax:
                case sx:
                case ox:
                  f = Vw;
                  break;
                case lx:
                  f = Qw;
                  break;
                case "scroll":
                  f = Gw;
                  break;
                case "wheel":
                  f = t2;
                  break;
                case "copy":
                case "cut":
                case "paste":
                  f = jw;
                  break;
                case "gotpointercapture":
                case "lostpointercapture":
                case "pointercancel":
                case "pointerdown":
                case "pointermove":
                case "pointerout":
                case "pointerover":
                case "pointerup":
                  f = e0;
              }
              var p = (4 & e) != 0,
                y = !p && n === "scroll",
                v = p ? (d !== null ? d + "Capture" : null) : d;
              p = [];
              for (var m, x = u; x !== null; ) {
                var _ = (m = x).stateNode;
                if (
                  (m.tag === 5 &&
                    _ !== null &&
                    ((m = _),
                    v !== null &&
                      (_ = vl(x, v)) != null &&
                      p.push(Ml(x, _, m))),
                  y)
                )
                  break;
                x = x.return;
              }
              0 < p.length &&
                ((d = new f(d, g, null, t, c)),
                h.push({ event: d, listeners: p }));
            }
          }
          if ((7 & e) == 0) {
            if (
              ((f = n === "mouseout" || n === "pointerout"),
              (!(d = n === "mouseover" || n === "pointerover") ||
                t === Hf ||
                !(g = t.relatedTarget || t.fromElement) ||
                (!Ca(g) && !g[fi])) &&
                (f || d) &&
                ((d =
                  c.window === c
                    ? c
                    : (d = c.ownerDocument)
                    ? d.defaultView || d.parentWindow
                    : window),
                f
                  ? ((f = u),
                    (g = (g = t.relatedTarget || t.toElement)
                      ? Ca(g)
                      : null) !== null &&
                      (g !== (y = Ha(g)) || (g.tag !== 5 && g.tag !== 6)) &&
                      (g = null))
                  : ((f = null), (g = u)),
                f !== g))
            ) {
              if (
                ((p = Jg),
                (_ = "onMouseLeave"),
                (v = "onMouseEnter"),
                (x = "mouse"),
                (n !== "pointerout" && n !== "pointerover") ||
                  ((p = e0),
                  (_ = "onPointerLeave"),
                  (v = "onPointerEnter"),
                  (x = "pointer")),
                (y = f == null ? d : Rs(f)),
                (m = g == null ? d : Rs(g)),
                ((d = new p(_, x + "leave", f, t, c)).target = y),
                (d.relatedTarget = m),
                (_ = null),
                Ca(c) === u &&
                  (((p = new p(v, x + "enter", g, t, c)).target = m),
                  (p.relatedTarget = y),
                  (_ = p)),
                (y = _),
                f && g)
              )
                e: {
                  for (v = g, x = 0, m = p = f; m; m = Ja(m)) x++;
                  for (m = 0, _ = v; _; _ = Ja(_)) m++;
                  for (; 0 < x - m; ) (p = Ja(p)), x--;
                  for (; 0 < m - x; ) (v = Ja(v)), m--;
                  for (; x--; ) {
                    if (p === v || (v !== null && p === v.alternate)) break e;
                    (p = Ja(p)), (v = Ja(v));
                  }
                  p = null;
                }
              else p = null;
              f !== null && p0(h, d, f, p, !1),
                g !== null && y !== null && p0(h, y, g, p, !0);
            }
            if (
              (f =
                (d = u ? Rs(u) : window).nodeName &&
                d.nodeName.toLowerCase()) === "select" ||
              (f === "input" && d.type === "file")
            )
              var b = s2;
            else if (s0(d))
              if (ex) b = c2;
              else {
                b = l2;
                var w = o2;
              }
            else
              (f = d.nodeName) &&
                f.toLowerCase() === "input" &&
                (d.type === "checkbox" || d.type === "radio") &&
                (b = u2);
            switch (
              (b && (b = b(n, u))
                ? Qy(h, b, t, c)
                : (w && w(n, d, u),
                  n === "focusout" &&
                    (w = d._wrapperState) &&
                    w.controlled &&
                    d.type === "number" &&
                    zf(d, "number", d.value)),
              (w = u ? Rs(u) : window),
              n)
            ) {
              case "focusin":
                (s0(w) || w.contentEditable === "true") &&
                  ((Cs = w), (Kf = u), (el = null));
                break;
              case "focusout":
                el = Kf = Cs = null;
                break;
              case "mousedown":
                Jf = !0;
                break;
              case "contextmenu":
              case "mouseup":
              case "dragend":
                (Jf = !1), h0(h, t, c);
                break;
              case "selectionchange":
                if (d2) break;
              case "keydown":
              case "keyup":
                h0(h, t, c);
            }
            var M;
            if (Zf)
              e: {
                switch (n) {
                  case "compositionstart":
                    var C = "onCompositionStart";
                    break e;
                  case "compositionend":
                    C = "onCompositionEnd";
                    break e;
                  case "compositionupdate":
                    C = "onCompositionUpdate";
                    break e;
                }
                C = void 0;
              }
            else
              Ka
                ? i0(n, t) && (C = "onCompositionEnd")
                : n === "keydown" &&
                  t.keyCode === 229 &&
                  (C = "onCompositionStart");
            C &&
              (t0 &&
                t.locale !== "ko" &&
                (Ka || C !== "onCompositionStart"
                  ? C === "onCompositionEnd" && Ka && (M = Zg())
                  : ((Yf = "value" in (Ea = c) ? Ea.value : Ea.textContent),
                    (Ka = !0))),
              0 < (w = qc(u, C)).length &&
                ((C = new Qg(C, n, null, t, c)),
                h.push({ event: C, listeners: w }),
                (M || (M = a0(t)) !== null) && (C.data = M))),
              (M = r2
                ? (function (N, G) {
                    switch (N) {
                      case "compositionend":
                        return a0(G);
                      case "keypress":
                        return G.which !== 32 ? null : ((r0 = !0), n0);
                      case "textInput":
                        return (N = G.data) === n0 && r0 ? null : N;
                      default:
                        return null;
                    }
                  })(n, t)
                : (function (N, G) {
                    if (Ka)
                      return N === "compositionend" || (!Zf && i0(N, G))
                        ? ((N = Zg()), (dc = Yf = Ea = null), (Ka = !1), N)
                        : null;
                    switch (N) {
                      case "paste":
                      default:
                        return null;
                      case "keypress":
                        if (
                          !(G.ctrlKey || G.altKey || G.metaKey) ||
                          (G.ctrlKey && G.altKey)
                        ) {
                          if (G.char && 1 < G.char.length) return G.char;
                          if (G.which) return String.fromCharCode(G.which);
                        }
                        return null;
                      case "compositionend":
                        return t0 && G.locale !== "ko" ? null : G.data;
                    }
                  })(n, t)) &&
                0 < (u = qc(u, "onBeforeInput")).length &&
                ((c = new Qg("onBeforeInput", "beforeinput", null, t, c)),
                h.push({ event: c, listeners: u }),
                (c.data = M));
          }
          cx(h, e);
        });
      }
      function Ml(n, e, t) {
        return { instance: n, listener: e, currentTarget: t };
      }
      function qc(n, e) {
        for (var t = e + "Capture", r = []; n !== null; ) {
          var i = n,
            a = i.stateNode;
          i.tag === 5 &&
            a !== null &&
            ((i = a),
            (a = vl(n, t)) != null && r.unshift(Ml(n, a, i)),
            (a = vl(n, e)) != null && r.push(Ml(n, a, i))),
            (n = n.return);
        }
        return r;
      }
      function Ja(n) {
        if (n === null) return null;
        do n = n.return;
        while (n && n.tag !== 5);
        return n || null;
      }
      function p0(n, e, t, r, i) {
        for (var a = e._reactName, s = []; t !== null && t !== r; ) {
          var o = t,
            l = o.alternate,
            u = o.stateNode;
          if (l !== null && l === r) break;
          o.tag === 5 &&
            u !== null &&
            ((o = u),
            i
              ? (l = vl(t, a)) != null && s.unshift(Ml(t, l, o))
              : i || ((l = vl(t, a)) != null && s.push(Ml(t, l, o)))),
            (t = t.return);
        }
        s.length !== 0 && n.push({ event: e, listeners: s });
      }
      var p2 = /\r\n?/g,
        m2 = /\u0000|\uFFFD/g;
      function m0(n) {
        return (typeof n == "string" ? n : "" + n)
          .replace(
            p2,
            `
`
          )
          .replace(m2, "");
      }
      function pu(n, e, t) {
        if (((e = m0(e)), m0(n) !== e && t)) throw Error(pe(425));
      }
      function $c() {}
      var _d = null,
        bd = null;
      function Qf(n, e) {
        return (
          n === "textarea" ||
          n === "noscript" ||
          typeof e.children == "string" ||
          typeof e.children == "number" ||
          (typeof e.dangerouslySetInnerHTML == "object" &&
            e.dangerouslySetInnerHTML !== null &&
            e.dangerouslySetInnerHTML.__html != null)
        );
      }
      var ep = typeof setTimeout == "function" ? setTimeout : void 0,
        g2 = typeof clearTimeout == "function" ? clearTimeout : void 0,
        g0 = typeof Promise == "function" ? Promise : void 0,
        v2 =
          typeof queueMicrotask == "function"
            ? queueMicrotask
            : g0 !== void 0
            ? function (n) {
                return g0.resolve(null).then(n).catch(y2);
              }
            : ep;
      function y2(n) {
        setTimeout(function () {
          throw n;
        });
      }
      function wd(n, e) {
        var t = e,
          r = 0;
        do {
          var i = t.nextSibling;
          if ((n.removeChild(t), i && i.nodeType === 8))
            if ((t = i.data) === "/$") {
              if (r === 0) return n.removeChild(i), void _l(e);
              r--;
            } else (t !== "$" && t !== "$?" && t !== "$!") || r++;
          t = i;
        } while (t);
        _l(e);
      }
      function ji(n) {
        for (; n != null; n = n.nextSibling) {
          var e = n.nodeType;
          if (e === 1 || e === 3) break;
          if (e === 8) {
            if ((e = n.data) === "$" || e === "$!" || e === "$?") break;
            if (e === "/$") return null;
          }
        }
        return n;
      }
      function v0(n) {
        n = n.previousSibling;
        for (var e = 0; n; ) {
          if (n.nodeType === 8) {
            var t = n.data;
            if (t === "$" || t === "$!" || t === "$?") {
              if (e === 0) return n;
              e--;
            } else t === "/$" && e++;
          }
          n = n.previousSibling;
        }
        return null;
      }
      var so = Math.random().toString(36).slice(2),
        zr = "__reactFiber$" + so,
        Tl = "__reactProps$" + so,
        fi = "__reactContainer$" + so,
        tp = "__reactEvents$" + so,
        x2 = "__reactListeners$" + so,
        _2 = "__reactHandles$" + so;
      function Ca(n) {
        var e = n[zr];
        if (e) return e;
        for (var t = n.parentNode; t; ) {
          if ((e = t[fi] || t[zr])) {
            if (
              ((t = e.alternate),
              e.child !== null || (t !== null && t.child !== null))
            )
              for (n = v0(n); n !== null; ) {
                if ((t = n[zr])) return t;
                n = v0(n);
              }
            return e;
          }
          t = (n = t).parentNode;
        }
        return null;
      }
      function ql(n) {
        return !(n = n[zr] || n[fi]) ||
          (n.tag !== 5 && n.tag !== 6 && n.tag !== 13 && n.tag !== 3)
          ? null
          : n;
      }
      function Rs(n) {
        if (n.tag === 5 || n.tag === 6) return n.stateNode;
        throw Error(pe(33));
      }
      function Ah(n) {
        return n[Tl] || null;
      }
      var np = [],
        Ps = -1;
      function ta(n) {
        return { current: n };
      }
      function ht(n) {
        0 > Ps || ((n.current = np[Ps]), (np[Ps] = null), Ps--);
      }
      function it(n, e) {
        Ps++, (np[Ps] = n.current), (n.current = e);
      }
      var Qi = {},
        cn = ta(Qi),
        Dn = ta(!1),
        Ua = Qi;
      function Ys(n, e) {
        var t = n.type.contextTypes;
        if (!t) return Qi;
        var r = n.stateNode;
        if (r && r.__reactInternalMemoizedUnmaskedChildContext === e)
          return r.__reactInternalMemoizedMaskedChildContext;
        var i,
          a = {};
        for (i in t) a[i] = e[i];
        return (
          r &&
            (((n = n.stateNode).__reactInternalMemoizedUnmaskedChildContext =
              e),
            (n.__reactInternalMemoizedMaskedChildContext = a)),
          a
        );
      }
      function Xn(n) {
        return (n = n.childContextTypes) != null;
      }
      function _m() {
        ht(Dn), ht(cn);
      }
      function y0(n, e, t) {
        if (cn.current !== Qi) throw Error(pe(168));
        it(cn, e), it(Dn, t);
      }
      function dx(n, e, t) {
        var r = n.stateNode;
        if (((e = e.childContextTypes), typeof r.getChildContext != "function"))
          return t;
        for (var i in (r = r.getChildContext()))
          if (!(i in e)) throw Error(pe(108, Mw(n) || "Unknown", i));
        return pt({}, t, r);
      }
      function mc(n) {
        return (
          (n =
            ((n = n.stateNode) &&
              n.__reactInternalMemoizedMergedChildContext) ||
            Qi),
          (Ua = cn.current),
          it(cn, n),
          it(Dn, Dn.current),
          !0
        );
      }
      function x0(n, e, t) {
        var r = n.stateNode;
        if (!r) throw Error(pe(169));
        t
          ? ((n = dx(n, e, Ua)),
            (r.__reactInternalMemoizedMergedChildContext = n),
            ht(Dn),
            ht(cn),
            it(cn, n))
          : ht(Dn),
          it(Dn, t);
      }
      var si = null,
        Rh = !1,
        Sd = !1;
      function _0(n) {
        si === null ? (si = [n]) : si.push(n);
      }
      function na() {
        if (!Sd && si !== null) {
          Sd = !0;
          var n = 0,
            e = Ze;
          try {
            var t = si;
            for (Ze = 1; n < t.length; n++) {
              var r = t[n];
              do r = r(!0);
              while (r !== null);
            }
            (si = null), (Rh = !1);
          } catch (i) {
            throw (si !== null && (si = si.slice(n + 1)), Vy(dm, na), i);
          } finally {
            (Ze = e), (Sd = !1);
          }
        }
        return null;
      }
      var Ls = [],
        Ds = 0,
        Yc = null,
        Zc = 0,
        tr = [],
        nr = 0,
        Oa = null,
        Br = 1,
        oi = "";
      function wa(n, e) {
        (Ls[Ds++] = Zc), (Ls[Ds++] = Yc), (Yc = n), (Zc = e);
      }
      function fx(n, e, t) {
        (tr[nr++] = Br), (tr[nr++] = oi), (tr[nr++] = Oa), (Oa = n);
        var r = Br;
        n = oi;
        var i = 32 - wr(r) - 1;
        (r &= ~(1 << i)), (t += 1);
        var a = 32 - wr(e) + i;
        if (30 < a) {
          var s = i - (i % 5);
          (a = (r & ((1 << s) - 1)).toString(32)),
            (r >>= s),
            (i -= s),
            (Br = (1 << (32 - wr(e) + i)) | (t << i) | r),
            (oi = a + n);
        } else (Br = (1 << a) | (t << i) | r), (oi = n);
      }
      function bm(n) {
        n.return !== null && (wa(n, 1), fx(n, 1, 0));
      }
      function wm(n) {
        for (; n === Yc; )
          (Yc = Ls[--Ds]), (Ls[Ds] = null), (Zc = Ls[--Ds]), (Ls[Ds] = null);
        for (; n === Oa; )
          (Oa = tr[--nr]),
            (tr[nr] = null),
            (oi = tr[--nr]),
            (tr[nr] = null),
            (Br = tr[--nr]),
            (tr[nr] = null);
      }
      var qn = null,
        jn = null,
        ut = !1,
        br = null;
      function px(n, e) {
        var t = ir(5, null, null, 0);
        (t.elementType = "DELETED"),
          (t.stateNode = e),
          (t.return = n),
          (e = n.deletions) === null
            ? ((n.deletions = [t]), (n.flags |= 16))
            : e.push(t);
      }
      function b0(n, e) {
        switch (n.tag) {
          case 5:
            var t = n.type;
            return (
              (e =
                e.nodeType !== 1 || t.toLowerCase() !== e.nodeName.toLowerCase()
                  ? null
                  : e) !== null &&
              ((n.stateNode = e), (qn = n), (jn = ji(e.firstChild)), !0)
            );
          case 6:
            return (
              (e = n.pendingProps === "" || e.nodeType !== 3 ? null : e) !==
                null && ((n.stateNode = e), (qn = n), (jn = null), !0)
            );
          case 13:
            return (
              (e = e.nodeType !== 8 ? null : e) !== null &&
              ((t = Oa !== null ? { id: Br, overflow: oi } : null),
              (n.memoizedState = {
                dehydrated: e,
                treeContext: t,
                retryLane: 1073741824,
              }),
              ((t = ir(18, null, null, 0)).stateNode = e),
              (t.return = n),
              (n.child = t),
              (qn = n),
              (jn = null),
              !0)
            );
          default:
            return !1;
        }
      }
      function rp(n) {
        return (1 & n.mode) != 0 && (128 & n.flags) == 0;
      }
      function ip(n) {
        if (ut) {
          var e = jn;
          if (e) {
            var t = e;
            if (!b0(n, e)) {
              if (rp(n)) throw Error(pe(418));
              e = ji(t.nextSibling);
              var r = qn;
              e && b0(n, e)
                ? px(r, t)
                : ((n.flags = (-4097 & n.flags) | 2), (ut = !1), (qn = n));
            }
          } else {
            if (rp(n)) throw Error(pe(418));
            (n.flags = (-4097 & n.flags) | 2), (ut = !1), (qn = n);
          }
        }
      }
      function w0(n) {
        for (
          n = n.return;
          n !== null && n.tag !== 5 && n.tag !== 3 && n.tag !== 13;

        )
          n = n.return;
        qn = n;
      }
      function mu(n) {
        if (n !== qn) return !1;
        if (!ut) return w0(n), (ut = !0), !1;
        var e;
        if (
          ((e = n.tag !== 3) &&
            !(e = n.tag !== 5) &&
            (e =
              (e = n.type) !== "head" &&
              e !== "body" &&
              !Qf(n.type, n.memoizedProps)),
          e && (e = jn))
        ) {
          if (rp(n)) throw (mx(), Error(pe(418)));
          for (; e; ) px(n, e), (e = ji(e.nextSibling));
        }
        if ((w0(n), n.tag === 13)) {
          if (!(n = (n = n.memoizedState) !== null ? n.dehydrated : null))
            throw Error(pe(317));
          e: {
            for (n = n.nextSibling, e = 0; n; ) {
              if (n.nodeType === 8) {
                var t = n.data;
                if (t === "/$") {
                  if (e === 0) {
                    jn = ji(n.nextSibling);
                    break e;
                  }
                  e--;
                } else (t !== "$" && t !== "$!" && t !== "$?") || e++;
              }
              n = n.nextSibling;
            }
            jn = null;
          }
        } else jn = qn ? ji(n.stateNode.nextSibling) : null;
        return !0;
      }
      function mx() {
        for (var n = jn; n; ) n = ji(n.nextSibling);
      }
      function Zs() {
        (jn = qn = null), (ut = !1);
      }
      function Sm(n) {
        br === null ? (br = [n]) : br.push(n);
      }
      var b2 = bi.ReactCurrentBatchConfig;
      function _r(n, e) {
        if (n && n.defaultProps) {
          for (var t in ((e = pt({}, e)), (n = n.defaultProps)))
            e[t] === void 0 && (e[t] = n[t]);
          return e;
        }
        return e;
      }
      var Kc = ta(null),
        Jc = null,
        ks = null,
        Mm = null;
      function Tm() {
        Mm = ks = Jc = null;
      }
      function Em(n) {
        var e = Kc.current;
        ht(Kc), (n._currentValue = e);
      }
      function ap(n, e, t) {
        for (; n !== null; ) {
          var r = n.alternate;
          if (
            ((n.childLanes & e) !== e
              ? ((n.childLanes |= e), r !== null && (r.childLanes |= e))
              : r !== null && (r.childLanes & e) !== e && (r.childLanes |= e),
            n === t)
          )
            break;
          n = n.return;
        }
      }
      function Xs(n, e) {
        (Jc = n),
          (Mm = ks = null),
          (n = n.dependencies) !== null &&
            n.firstContext !== null &&
            ((n.lanes & e) != 0 && (Rn = !0), (n.firstContext = null));
      }
      function ur(n) {
        var e = n._currentValue;
        if (Mm !== n)
          if (
            ((n = { context: n, memoizedValue: e, next: null }), ks === null)
          ) {
            if (Jc === null) throw Error(pe(308));
            (ks = n), (Jc.dependencies = { lanes: 0, firstContext: n });
          } else ks = ks.next = n;
        return e;
      }
      var Aa = null;
      function Cm(n) {
        Aa === null ? (Aa = [n]) : Aa.push(n);
      }
      function gx(n, e, t, r) {
        var i = e.interleaved;
        return (
          i === null
            ? ((t.next = t), Cm(e))
            : ((t.next = i.next), (i.next = t)),
          (e.interleaved = t),
          pi(n, r)
        );
      }
      function pi(n, e) {
        n.lanes |= e;
        var t = n.alternate;
        for (t !== null && (t.lanes |= e), t = n, n = n.return; n !== null; )
          (n.childLanes |= e),
            (t = n.alternate) !== null && (t.childLanes |= e),
            (t = n),
            (n = n.return);
        return t.tag === 3 ? t.stateNode : null;
      }
      var Ui = !1;
      function Am(n) {
        n.updateQueue = {
          baseState: n.memoizedState,
          firstBaseUpdate: null,
          lastBaseUpdate: null,
          shared: { pending: null, interleaved: null, lanes: 0 },
          effects: null,
        };
      }
      function vx(n, e) {
        (n = n.updateQueue),
          e.updateQueue === n &&
            (e.updateQueue = {
              baseState: n.baseState,
              firstBaseUpdate: n.firstBaseUpdate,
              lastBaseUpdate: n.lastBaseUpdate,
              shared: n.shared,
              effects: n.effects,
            });
      }
      function mi(n, e) {
        return {
          eventTime: n,
          lane: e,
          tag: 0,
          payload: null,
          callback: null,
          next: null,
        };
      }
      function Xi(n, e, t) {
        var r = n.updateQueue;
        if (r === null) return null;
        if (((r = r.shared), (2 & je) != 0)) {
          var i = r.pending;
          return (
            i === null ? (e.next = e) : ((e.next = i.next), (i.next = e)),
            (r.pending = e),
            pi(n, t)
          );
        }
        return (
          (i = r.interleaved) === null
            ? ((e.next = e), Cm(r))
            : ((e.next = i.next), (i.next = e)),
          (r.interleaved = e),
          pi(n, t)
        );
      }
      function gc(n, e, t) {
        if (
          (e = e.updateQueue) !== null &&
          ((e = e.shared), (4194240 & t) != 0)
        ) {
          var r = e.lanes;
          (t |= r &= n.pendingLanes), (e.lanes = t), pm(n, t);
        }
      }
      function S0(n, e) {
        var t = n.updateQueue,
          r = n.alternate;
        if (r !== null && t === (r = r.updateQueue)) {
          var i = null,
            a = null;
          if ((t = t.firstBaseUpdate) !== null) {
            do {
              var s = {
                eventTime: t.eventTime,
                lane: t.lane,
                tag: t.tag,
                payload: t.payload,
                callback: t.callback,
                next: null,
              };
              a === null ? (i = a = s) : (a = a.next = s), (t = t.next);
            } while (t !== null);
            a === null ? (i = a = e) : (a = a.next = e);
          } else i = a = e;
          return (
            (t = {
              baseState: r.baseState,
              firstBaseUpdate: i,
              lastBaseUpdate: a,
              shared: r.shared,
              effects: r.effects,
            }),
            void (n.updateQueue = t)
          );
        }
        (n = t.lastBaseUpdate) === null
          ? (t.firstBaseUpdate = e)
          : (n.next = e),
          (t.lastBaseUpdate = e);
      }
      function Qc(n, e, t, r) {
        var i = n.updateQueue;
        Ui = !1;
        var a = i.firstBaseUpdate,
          s = i.lastBaseUpdate,
          o = i.shared.pending;
        if (o !== null) {
          i.shared.pending = null;
          var l = o,
            u = l.next;
          (l.next = null), s === null ? (a = u) : (s.next = u), (s = l);
          var c = n.alternate;
          c !== null &&
            (o = (c = c.updateQueue).lastBaseUpdate) !== s &&
            (o === null ? (c.firstBaseUpdate = u) : (o.next = u),
            (c.lastBaseUpdate = l));
        }
        if (a !== null) {
          var h = i.baseState;
          for (s = 0, c = u = l = null, o = a; ; ) {
            var d = o.lane,
              f = o.eventTime;
            if ((r & d) === d) {
              c !== null &&
                (c = c.next =
                  {
                    eventTime: f,
                    lane: 0,
                    tag: o.tag,
                    payload: o.payload,
                    callback: o.callback,
                    next: null,
                  });
              e: {
                var g = n,
                  p = o;
                switch (((d = e), (f = t), p.tag)) {
                  case 1:
                    if (typeof (g = p.payload) == "function") {
                      h = g.call(f, h, d);
                      break e;
                    }
                    h = g;
                    break e;
                  case 3:
                    g.flags = (-65537 & g.flags) | 128;
                  case 0:
                    if (
                      (d =
                        typeof (g = p.payload) == "function"
                          ? g.call(f, h, d)
                          : g) == null
                    )
                      break e;
                    h = pt({}, h, d);
                    break e;
                  case 2:
                    Ui = !0;
                }
              }
              o.callback !== null &&
                o.lane !== 0 &&
                ((n.flags |= 64),
                (d = i.effects) === null ? (i.effects = [o]) : d.push(o));
            } else
              (f = {
                eventTime: f,
                lane: d,
                tag: o.tag,
                payload: o.payload,
                callback: o.callback,
                next: null,
              }),
                c === null ? ((u = c = f), (l = h)) : (c = c.next = f),
                (s |= d);
            if ((o = o.next) === null) {
              if ((o = i.shared.pending) === null) break;
              (o = (d = o).next),
                (d.next = null),
                (i.lastBaseUpdate = d),
                (i.shared.pending = null);
            }
          }
          if (
            (c === null && (l = h),
            (i.baseState = l),
            (i.firstBaseUpdate = u),
            (i.lastBaseUpdate = c),
            (e = i.shared.interleaved) !== null)
          ) {
            i = e;
            do (s |= i.lane), (i = i.next);
            while (i !== e);
          } else a === null && (i.shared.lanes = 0);
          (Na |= s), (n.lanes = s), (n.memoizedState = h);
        }
      }
      function M0(n, e, t) {
        if (((n = e.effects), (e.effects = null), n !== null))
          for (e = 0; e < n.length; e++) {
            var r = n[e],
              i = r.callback;
            if (i !== null) {
              if (((r.callback = null), (r = t), typeof i != "function"))
                throw Error(pe(191, i));
              i.call(r);
            }
          }
      }
      var yx = new wy.Component().refs;
      function sp(n, e, t, r) {
        (t = (t = t(r, (e = n.memoizedState))) == null ? e : pt({}, e, t)),
          (n.memoizedState = t),
          n.lanes === 0 && (n.updateQueue.baseState = t);
      }
      var Ph = {
        isMounted: function (n) {
          return !!(n = n._reactInternals) && Ha(n) === n;
        },
        enqueueSetState: function (n, e, t) {
          n = n._reactInternals;
          var r = _n(),
            i = $i(n),
            a = mi(r, i);
          (a.payload = e),
            t != null && (a.callback = t),
            (e = Xi(n, a, i)) !== null && (Sr(e, n, i, r), gc(e, n, i));
        },
        enqueueReplaceState: function (n, e, t) {
          n = n._reactInternals;
          var r = _n(),
            i = $i(n),
            a = mi(r, i);
          (a.tag = 1),
            (a.payload = e),
            t != null && (a.callback = t),
            (e = Xi(n, a, i)) !== null && (Sr(e, n, i, r), gc(e, n, i));
        },
        enqueueForceUpdate: function (n, e) {
          n = n._reactInternals;
          var t = _n(),
            r = $i(n),
            i = mi(t, r);
          (i.tag = 2),
            e != null && (i.callback = e),
            (e = Xi(n, i, r)) !== null && (Sr(e, n, r, t), gc(e, n, r));
        },
      };
      function T0(n, e, t, r, i, a, s) {
        return typeof (n = n.stateNode).shouldComponentUpdate == "function"
          ? n.shouldComponentUpdate(r, a, s)
          : !e.prototype ||
              !e.prototype.isPureReactComponent ||
              !wl(t, r) ||
              !wl(i, a);
      }
      function xx(n, e, t) {
        var r = !1,
          i = Qi,
          a = e.contextType;
        return (
          typeof a == "object" && a !== null
            ? (a = ur(a))
            : ((i = Xn(e) ? Ua : cn.current),
              (a = (r = (r = e.contextTypes) != null) ? Ys(n, i) : Qi)),
          (e = new e(t, a)),
          (n.memoizedState =
            e.state !== null && e.state !== void 0 ? e.state : null),
          (e.updater = Ph),
          (n.stateNode = e),
          (e._reactInternals = n),
          r &&
            (((n = n.stateNode).__reactInternalMemoizedUnmaskedChildContext =
              i),
            (n.__reactInternalMemoizedMaskedChildContext = a)),
          e
        );
      }
      function E0(n, e, t, r) {
        (n = e.state),
          typeof e.componentWillReceiveProps == "function" &&
            e.componentWillReceiveProps(t, r),
          typeof e.UNSAFE_componentWillReceiveProps == "function" &&
            e.UNSAFE_componentWillReceiveProps(t, r),
          e.state !== n && Ph.enqueueReplaceState(e, e.state, null);
      }
      function op(n, e, t, r) {
        var i = n.stateNode;
        (i.props = t), (i.state = n.memoizedState), (i.refs = yx), Am(n);
        var a = e.contextType;
        typeof a == "object" && a !== null
          ? (i.context = ur(a))
          : ((a = Xn(e) ? Ua : cn.current), (i.context = Ys(n, a))),
          (i.state = n.memoizedState),
          typeof (a = e.getDerivedStateFromProps) == "function" &&
            (sp(n, e, a, t), (i.state = n.memoizedState)),
          typeof e.getDerivedStateFromProps == "function" ||
            typeof i.getSnapshotBeforeUpdate == "function" ||
            (typeof i.UNSAFE_componentWillMount != "function" &&
              typeof i.componentWillMount != "function") ||
            ((e = i.state),
            typeof i.componentWillMount == "function" && i.componentWillMount(),
            typeof i.UNSAFE_componentWillMount == "function" &&
              i.UNSAFE_componentWillMount(),
            e !== i.state && Ph.enqueueReplaceState(i, i.state, null),
            Qc(n, t, i, r),
            (i.state = n.memoizedState)),
          typeof i.componentDidMount == "function" && (n.flags |= 4194308);
      }
      function Uo(n, e, t) {
        if (
          (n = t.ref) !== null &&
          typeof n != "function" &&
          typeof n != "object"
        ) {
          if (t._owner) {
            if ((t = t._owner)) {
              if (t.tag !== 1) throw Error(pe(309));
              var r = t.stateNode;
            }
            if (!r) throw Error(pe(147, n));
            var i = r,
              a = "" + n;
            return e !== null &&
              e.ref !== null &&
              typeof e.ref == "function" &&
              e.ref._stringRef === a
              ? e.ref
              : ((e = function (s) {
                  var o = i.refs;
                  o === yx && (o = i.refs = {}),
                    s === null ? delete o[a] : (o[a] = s);
                }),
                (e._stringRef = a),
                e);
          }
          if (typeof n != "string") throw Error(pe(284));
          if (!t._owner) throw Error(pe(290, n));
        }
        return n;
      }
      function gu(n, e) {
        throw (
          ((n = Object.prototype.toString.call(e)),
          Error(
            pe(
              31,
              n === "[object Object]"
                ? "object with keys {" + Object.keys(e).join(", ") + "}"
                : n
            )
          ))
        );
      }
      function C0(n) {
        return (0, n._init)(n._payload);
      }
      function _x(n) {
        function e(y, v) {
          if (n) {
            var m = y.deletions;
            m === null ? ((y.deletions = [v]), (y.flags |= 16)) : m.push(v);
          }
        }
        function t(y, v) {
          if (!n) return null;
          for (; v !== null; ) e(y, v), (v = v.sibling);
          return null;
        }
        function r(y, v) {
          for (y = new Map(); v !== null; )
            v.key !== null ? y.set(v.key, v) : y.set(v.index, v),
              (v = v.sibling);
          return y;
        }
        function i(y, v) {
          return ((y = Yi(y, v)).index = 0), (y.sibling = null), y;
        }
        function a(y, v, m) {
          return (
            (y.index = m),
            n
              ? (m = y.alternate) !== null
                ? (m = m.index) < v
                  ? ((y.flags |= 2), v)
                  : m
                : ((y.flags |= 2), v)
              : ((y.flags |= 1048576), v)
          );
        }
        function s(y) {
          return n && y.alternate === null && (y.flags |= 2), y;
        }
        function o(y, v, m, x) {
          return v === null || v.tag !== 6
            ? (((v = Dd(m, y.mode, x)).return = y), v)
            : (((v = i(v, m)).return = y), v);
        }
        function l(y, v, m, x) {
          var _ = m.type;
          return _ === Es
            ? c(y, v, m.props.children, x, m.key)
            : v !== null &&
              (v.elementType === _ ||
                (typeof _ == "object" &&
                  _ !== null &&
                  _.$$typeof === Ii &&
                  C0(_) === v.type))
            ? (((x = i(v, m.props)).ref = Uo(y, v, m)), (x.return = y), x)
            : (((x = wc(m.type, m.key, m.props, null, y.mode, x)).ref = Uo(
                y,
                v,
                m
              )),
              (x.return = y),
              x);
        }
        function u(y, v, m, x) {
          return v === null ||
            v.tag !== 4 ||
            v.stateNode.containerInfo !== m.containerInfo ||
            v.stateNode.implementation !== m.implementation
            ? (((v = kd(m, y.mode, x)).return = y), v)
            : (((v = i(v, m.children || [])).return = y), v);
        }
        function c(y, v, m, x, _) {
          return v === null || v.tag !== 7
            ? (((v = ka(m, y.mode, x, _)).return = y), v)
            : (((v = i(v, m)).return = y), v);
        }
        function h(y, v, m) {
          if ((typeof v == "string" && v !== "") || typeof v == "number")
            return ((v = Dd("" + v, y.mode, m)).return = y), v;
          if (typeof v == "object" && v !== null) {
            switch (v.$$typeof) {
              case lu:
                return (
                  ((m = wc(v.type, v.key, v.props, null, y.mode, m)).ref = Uo(
                    y,
                    null,
                    v
                  )),
                  (m.return = y),
                  m
                );
              case Ts:
                return ((v = kd(v, y.mode, m)).return = y), v;
              case Ii:
                return h(y, (0, v._init)(v._payload), m);
            }
            if ($o(v) || Po(v))
              return ((v = ka(v, y.mode, m, null)).return = y), v;
            gu(y, v);
          }
          return null;
        }
        function d(y, v, m, x) {
          var _ = v !== null ? v.key : null;
          if ((typeof m == "string" && m !== "") || typeof m == "number")
            return _ !== null ? null : o(y, v, "" + m, x);
          if (typeof m == "object" && m !== null) {
            switch (m.$$typeof) {
              case lu:
                return m.key === _ ? l(y, v, m, x) : null;
              case Ts:
                return m.key === _ ? u(y, v, m, x) : null;
              case Ii:
                return d(y, v, (_ = m._init)(m._payload), x);
            }
            if ($o(m) || Po(m)) return _ !== null ? null : c(y, v, m, x, null);
            gu(y, m);
          }
          return null;
        }
        function f(y, v, m, x, _) {
          if ((typeof x == "string" && x !== "") || typeof x == "number")
            return o(v, (y = y.get(m) || null), "" + x, _);
          if (typeof x == "object" && x !== null) {
            switch (x.$$typeof) {
              case lu:
                return l(
                  v,
                  (y = y.get(x.key === null ? m : x.key) || null),
                  x,
                  _
                );
              case Ts:
                return u(
                  v,
                  (y = y.get(x.key === null ? m : x.key) || null),
                  x,
                  _
                );
              case Ii:
                return f(y, v, m, (0, x._init)(x._payload), _);
            }
            if ($o(x) || Po(x)) return c(v, (y = y.get(m) || null), x, _, null);
            gu(v, x);
          }
          return null;
        }
        function g(y, v, m, x) {
          for (
            var _ = null, b = null, w = v, M = (v = 0), C = null;
            w !== null && M < m.length;
            M++
          ) {
            w.index > M ? ((C = w), (w = null)) : (C = w.sibling);
            var N = d(y, w, m[M], x);
            if (N === null) {
              w === null && (w = C);
              break;
            }
            n && w && N.alternate === null && e(y, w),
              (v = a(N, v, M)),
              b === null ? (_ = N) : (b.sibling = N),
              (b = N),
              (w = C);
          }
          if (M === m.length) return t(y, w), ut && wa(y, M), _;
          if (w === null) {
            for (; M < m.length; M++)
              (w = h(y, m[M], x)) !== null &&
                ((v = a(w, v, M)),
                b === null ? (_ = w) : (b.sibling = w),
                (b = w));
            return ut && wa(y, M), _;
          }
          for (w = r(y, w); M < m.length; M++)
            (C = f(w, y, M, m[M], x)) !== null &&
              (n &&
                C.alternate !== null &&
                w.delete(C.key === null ? M : C.key),
              (v = a(C, v, M)),
              b === null ? (_ = C) : (b.sibling = C),
              (b = C));
          return (
            n &&
              w.forEach(function (G) {
                return e(y, G);
              }),
            ut && wa(y, M),
            _
          );
        }
        function p(y, v, m, x) {
          var _ = Po(m);
          if (typeof _ != "function") throw Error(pe(150));
          if ((m = _.call(m)) == null) throw Error(pe(151));
          for (
            var b = (_ = null), w = v, M = (v = 0), C = null, N = m.next();
            w !== null && !N.done;
            M++, N = m.next()
          ) {
            w.index > M ? ((C = w), (w = null)) : (C = w.sibling);
            var G = d(y, w, N.value, x);
            if (G === null) {
              w === null && (w = C);
              break;
            }
            n && w && G.alternate === null && e(y, w),
              (v = a(G, v, M)),
              b === null ? (_ = G) : (b.sibling = G),
              (b = G),
              (w = C);
          }
          if (N.done) return t(y, w), ut && wa(y, M), _;
          if (w === null) {
            for (; !N.done; M++, N = m.next())
              (N = h(y, N.value, x)) !== null &&
                ((v = a(N, v, M)),
                b === null ? (_ = N) : (b.sibling = N),
                (b = N));
            return ut && wa(y, M), _;
          }
          for (w = r(y, w); !N.done; M++, N = m.next())
            (N = f(w, y, M, N.value, x)) !== null &&
              (n &&
                N.alternate !== null &&
                w.delete(N.key === null ? M : N.key),
              (v = a(N, v, M)),
              b === null ? (_ = N) : (b.sibling = N),
              (b = N));
          return (
            n &&
              w.forEach(function (U) {
                return e(y, U);
              }),
            ut && wa(y, M),
            _
          );
        }
        return function y(v, m, x, _) {
          if (
            (typeof x == "object" &&
              x !== null &&
              x.type === Es &&
              x.key === null &&
              (x = x.props.children),
            typeof x == "object" && x !== null)
          ) {
            switch (x.$$typeof) {
              case lu:
                e: {
                  for (var b = x.key, w = m; w !== null; ) {
                    if (w.key === b) {
                      if ((b = x.type) === Es) {
                        if (w.tag === 7) {
                          t(v, w.sibling),
                            ((m = i(w, x.props.children)).return = v),
                            (v = m);
                          break e;
                        }
                      } else if (
                        w.elementType === b ||
                        (typeof b == "object" &&
                          b !== null &&
                          b.$$typeof === Ii &&
                          C0(b) === w.type)
                      ) {
                        t(v, w.sibling),
                          ((m = i(w, x.props)).ref = Uo(v, w, x)),
                          (m.return = v),
                          (v = m);
                        break e;
                      }
                      t(v, w);
                      break;
                    }
                    e(v, w), (w = w.sibling);
                  }
                  x.type === Es
                    ? (((m = ka(x.props.children, v.mode, _, x.key)).return =
                        v),
                      (v = m))
                    : (((_ = wc(x.type, x.key, x.props, null, v.mode, _)).ref =
                        Uo(v, m, x)),
                      (_.return = v),
                      (v = _));
                }
                return s(v);
              case Ts:
                e: {
                  for (w = x.key; m !== null; ) {
                    if (m.key === w) {
                      if (
                        m.tag === 4 &&
                        m.stateNode.containerInfo === x.containerInfo &&
                        m.stateNode.implementation === x.implementation
                      ) {
                        t(v, m.sibling),
                          ((m = i(m, x.children || [])).return = v),
                          (v = m);
                        break e;
                      }
                      t(v, m);
                      break;
                    }
                    e(v, m), (m = m.sibling);
                  }
                  ((m = kd(x, v.mode, _)).return = v), (v = m);
                }
                return s(v);
              case Ii:
                return y(v, m, (w = x._init)(x._payload), _);
            }
            if ($o(x)) return g(v, m, x, _);
            if (Po(x)) return p(v, m, x, _);
            gu(v, x);
          }
          return (typeof x == "string" && x !== "") || typeof x == "number"
            ? ((x = "" + x),
              m !== null && m.tag === 6
                ? (t(v, m.sibling), ((m = i(m, x)).return = v), (v = m))
                : (t(v, m), ((m = Dd(x, v.mode, _)).return = v), (v = m)),
              s(v))
            : t(v, m);
        };
      }
      var Ks = _x(!0),
        bx = _x(!1),
        $l = {},
        jr = ta($l),
        El = ta($l),
        Cl = ta($l);
      function Ra(n) {
        if (n === $l) throw Error(pe(174));
        return n;
      }
      function lp(n, e) {
        switch ((it(Cl, e), it(El, n), it(jr, $l), (n = e.nodeType))) {
          case 9:
          case 11:
            e = (e = e.documentElement) ? e.namespaceURI : Ff(null, "");
            break;
          default:
            e = Ff(
              (e = (n = n === 8 ? e.parentNode : e).namespaceURI || null),
              (n = n.tagName)
            );
        }
        ht(jr), it(jr, e);
      }
      function Js() {
        ht(jr), ht(El), ht(Cl);
      }
      function A0(n) {
        Ra(Cl.current);
        var e = Ra(jr.current),
          t = Ff(e, n.type);
        e !== t && (it(El, n), it(jr, t));
      }
      function Rm(n) {
        El.current === n && (ht(jr), ht(El));
      }
      var vt = ta(0);
      function eh(n) {
        for (var e = n; e !== null; ) {
          if (e.tag === 13) {
            var t = e.memoizedState;
            if (
              t !== null &&
              ((t = t.dehydrated) === null ||
                t.data === "$?" ||
                t.data === "$!")
            )
              return e;
          } else if (e.tag === 19 && e.memoizedProps.revealOrder !== void 0) {
            if ((128 & e.flags) != 0) return e;
          } else if (e.child !== null) {
            (e.child.return = e), (e = e.child);
            continue;
          }
          if (e === n) break;
          for (; e.sibling === null; ) {
            if (e.return === null || e.return === n) return null;
            e = e.return;
          }
          (e.sibling.return = e.return), (e = e.sibling);
        }
        return null;
      }
      var Md = [];
      function Pm() {
        for (var n = 0; n < Md.length; n++)
          Md[n]._workInProgressVersionPrimary = null;
        Md.length = 0;
      }
      var vc = bi.ReactCurrentDispatcher,
        Td = bi.ReactCurrentBatchConfig,
        za = 0,
        ft = null,
        Bt = null,
        Ft = null,
        th = !1,
        tl = !1,
        Al = 0,
        w2 = 0;
      function rn() {
        throw Error(pe(321));
      }
      function Lm(n, e) {
        if (e === null) return !1;
        for (var t = 0; t < e.length && t < n.length; t++)
          if (!Tr(n[t], e[t])) return !1;
        return !0;
      }
      function Dm(n, e, t, r, i, a) {
        if (
          ((za = a),
          (ft = e),
          (e.memoizedState = null),
          (e.updateQueue = null),
          (e.lanes = 0),
          (vc.current = n === null || n.memoizedState === null ? E2 : C2),
          (n = t(r, i)),
          tl)
        ) {
          a = 0;
          do {
            if (((tl = !1), (Al = 0), 25 <= a)) throw Error(pe(301));
            (a += 1),
              (Ft = Bt = null),
              (e.updateQueue = null),
              (vc.current = A2),
              (n = t(r, i));
          } while (tl);
        }
        if (
          ((vc.current = nh),
          (e = Bt !== null && Bt.next !== null),
          (za = 0),
          (Ft = Bt = ft = null),
          (th = !1),
          e)
        )
          throw Error(pe(300));
        return n;
      }
      function km() {
        var n = Al !== 0;
        return (Al = 0), n;
      }
      function Ir() {
        var n = {
          memoizedState: null,
          baseState: null,
          baseQueue: null,
          queue: null,
          next: null,
        };
        return (
          Ft === null ? (ft.memoizedState = Ft = n) : (Ft = Ft.next = n), Ft
        );
      }
      function cr() {
        if (Bt === null) {
          var n = ft.alternate;
          n = n !== null ? n.memoizedState : null;
        } else n = Bt.next;
        var e = Ft === null ? ft.memoizedState : Ft.next;
        if (e !== null) (Ft = e), (Bt = n);
        else {
          if (n === null) throw Error(pe(310));
          (n = {
            memoizedState: (Bt = n).memoizedState,
            baseState: Bt.baseState,
            baseQueue: Bt.baseQueue,
            queue: Bt.queue,
            next: null,
          }),
            Ft === null ? (ft.memoizedState = Ft = n) : (Ft = Ft.next = n);
        }
        return Ft;
      }
      function Rl(n, e) {
        return typeof e == "function" ? e(n) : e;
      }
      function Ed(n) {
        var e = cr(),
          t = e.queue;
        if (t === null) throw Error(pe(311));
        t.lastRenderedReducer = n;
        var r = Bt,
          i = r.baseQueue,
          a = t.pending;
        if (a !== null) {
          if (i !== null) {
            var s = i.next;
            (i.next = a.next), (a.next = s);
          }
          (r.baseQueue = i = a), (t.pending = null);
        }
        if (i !== null) {
          (a = i.next), (r = r.baseState);
          var o = (s = null),
            l = null,
            u = a;
          do {
            var c = u.lane;
            if ((za & c) === c)
              l !== null &&
                (l = l.next =
                  {
                    lane: 0,
                    action: u.action,
                    hasEagerState: u.hasEagerState,
                    eagerState: u.eagerState,
                    next: null,
                  }),
                (r = u.hasEagerState ? u.eagerState : n(r, u.action));
            else {
              var h = {
                lane: c,
                action: u.action,
                hasEagerState: u.hasEagerState,
                eagerState: u.eagerState,
                next: null,
              };
              l === null ? ((o = l = h), (s = r)) : (l = l.next = h),
                (ft.lanes |= c),
                (Na |= c);
            }
            u = u.next;
          } while (u !== null && u !== a);
          l === null ? (s = r) : (l.next = o),
            Tr(r, e.memoizedState) || (Rn = !0),
            (e.memoizedState = r),
            (e.baseState = s),
            (e.baseQueue = l),
            (t.lastRenderedState = r);
        }
        if ((n = t.interleaved) !== null) {
          i = n;
          do (a = i.lane), (ft.lanes |= a), (Na |= a), (i = i.next);
          while (i !== n);
        } else i === null && (t.lanes = 0);
        return [e.memoizedState, t.dispatch];
      }
      function Cd(n) {
        var e = cr(),
          t = e.queue;
        if (t === null) throw Error(pe(311));
        t.lastRenderedReducer = n;
        var r = t.dispatch,
          i = t.pending,
          a = e.memoizedState;
        if (i !== null) {
          t.pending = null;
          var s = (i = i.next);
          do (a = n(a, s.action)), (s = s.next);
          while (s !== i);
          Tr(a, e.memoizedState) || (Rn = !0),
            (e.memoizedState = a),
            e.baseQueue === null && (e.baseState = a),
            (t.lastRenderedState = a);
        }
        return [a, r];
      }
      function wx() {}
      function Sx(n, e) {
        var t = ft,
          r = cr(),
          i = e(),
          a = !Tr(r.memoizedState, i);
        if (
          (a && ((r.memoizedState = i), (Rn = !0)),
          (r = r.queue),
          Im(Ex.bind(null, t, r, n), [n]),
          r.getSnapshot !== e || a || (Ft !== null && 1 & Ft.memoizedState.tag))
        ) {
          if (
            ((t.flags |= 2048),
            Pl(9, Tx.bind(null, t, r, i, e), void 0, null),
            Wt === null)
          )
            throw Error(pe(349));
          (30 & za) != 0 || Mx(t, e, i);
        }
        return i;
      }
      function Mx(n, e, t) {
        (n.flags |= 16384),
          (n = { getSnapshot: e, value: t }),
          (e = ft.updateQueue) === null
            ? ((e = { lastEffect: null, stores: null }),
              (ft.updateQueue = e),
              (e.stores = [n]))
            : (t = e.stores) === null
            ? (e.stores = [n])
            : t.push(n);
      }
      function Tx(n, e, t, r) {
        (e.value = t), (e.getSnapshot = r), Cx(e) && Ax(n);
      }
      function Ex(n, e, t) {
        return t(function () {
          Cx(e) && Ax(n);
        });
      }
      function Cx(n) {
        var e = n.getSnapshot;
        n = n.value;
        try {
          var t = e();
          return !Tr(n, t);
        } catch {
          return !0;
        }
      }
      function Ax(n) {
        var e = pi(n, 1);
        e !== null && Sr(e, n, 1, -1);
      }
      function R0(n) {
        var e = Ir();
        return (
          typeof n == "function" && (n = n()),
          (e.memoizedState = e.baseState = n),
          (n = {
            pending: null,
            interleaved: null,
            lanes: 0,
            dispatch: null,
            lastRenderedReducer: Rl,
            lastRenderedState: n,
          }),
          (e.queue = n),
          (n = n.dispatch = T2.bind(null, ft, n)),
          [e.memoizedState, n]
        );
      }
      function Pl(n, e, t, r) {
        return (
          (n = { tag: n, create: e, destroy: t, deps: r, next: null }),
          (e = ft.updateQueue) === null
            ? ((e = { lastEffect: null, stores: null }),
              (ft.updateQueue = e),
              (e.lastEffect = n.next = n))
            : (t = e.lastEffect) === null
            ? (e.lastEffect = n.next = n)
            : ((r = t.next), (t.next = n), (n.next = r), (e.lastEffect = n)),
          n
        );
      }
      function Rx() {
        return cr().memoizedState;
      }
      function yc(n, e, t, r) {
        var i = Ir();
        (ft.flags |= n),
          (i.memoizedState = Pl(1 | e, t, void 0, r === void 0 ? null : r));
      }
      function Lh(n, e, t, r) {
        var i = cr();
        r = r === void 0 ? null : r;
        var a = void 0;
        if (Bt !== null) {
          var s = Bt.memoizedState;
          if (((a = s.destroy), r !== null && Lm(r, s.deps)))
            return void (i.memoizedState = Pl(e, t, a, r));
        }
        (ft.flags |= n), (i.memoizedState = Pl(1 | e, t, a, r));
      }
      function P0(n, e) {
        return yc(8390656, 8, n, e);
      }
      function Im(n, e) {
        return Lh(2048, 8, n, e);
      }
      function Px(n, e) {
        return Lh(4, 2, n, e);
      }
      function Lx(n, e) {
        return Lh(4, 4, n, e);
      }
      function Dx(n, e) {
        return typeof e == "function"
          ? ((n = n()),
            e(n),
            function () {
              e(null);
            })
          : e != null
          ? ((n = n()),
            (e.current = n),
            function () {
              e.current = null;
            })
          : void 0;
      }
      function kx(n, e, t) {
        return (
          (t = t != null ? t.concat([n]) : null),
          Lh(4, 4, Dx.bind(null, e, n), t)
        );
      }
      function Um() {}
      function Ix(n, e) {
        var t = cr();
        e = e === void 0 ? null : e;
        var r = t.memoizedState;
        return r !== null && e !== null && Lm(e, r[1])
          ? r[0]
          : ((t.memoizedState = [n, e]), n);
      }
      function Ux(n, e) {
        var t = cr();
        e = e === void 0 ? null : e;
        var r = t.memoizedState;
        return r !== null && e !== null && Lm(e, r[1])
          ? r[0]
          : ((n = n()), (t.memoizedState = [n, e]), n);
      }
      function Ox(n, e, t) {
        return (21 & za) == 0
          ? (n.baseState && ((n.baseState = !1), (Rn = !0)),
            (n.memoizedState = t))
          : (Tr(t, e) ||
              ((t = Xy()), (ft.lanes |= t), (Na |= t), (n.baseState = !0)),
            e);
      }
      function S2(n, e) {
        var t = Ze;
        (Ze = t !== 0 && 4 > t ? t : 4), n(!0);
        var r = Td.transition;
        Td.transition = {};
        try {
          n(!1), e();
        } finally {
          (Ze = t), (Td.transition = r);
        }
      }
      function zx() {
        return cr().memoizedState;
      }
      function M2(n, e, t) {
        var r = $i(n);
        (t = {
          lane: r,
          action: t,
          hasEagerState: !1,
          eagerState: null,
          next: null,
        }),
          Nx(n)
            ? Fx(e, t)
            : (t = gx(n, e, t, r)) !== null && (Sr(t, n, r, _n()), Bx(t, e, r));
      }
      function T2(n, e, t) {
        var r = $i(n),
          i = {
            lane: r,
            action: t,
            hasEagerState: !1,
            eagerState: null,
            next: null,
          };
        if (Nx(n)) Fx(e, i);
        else {
          var a = n.alternate;
          if (
            n.lanes === 0 &&
            (a === null || a.lanes === 0) &&
            (a = e.lastRenderedReducer) !== null
          )
            try {
              var s = e.lastRenderedState,
                o = a(s, t);
              if (((i.hasEagerState = !0), (i.eagerState = o), Tr(o, s))) {
                var l = e.interleaved;
                return (
                  l === null
                    ? ((i.next = i), Cm(e))
                    : ((i.next = l.next), (l.next = i)),
                  void (e.interleaved = i)
                );
              }
            } catch {}
          (t = gx(n, e, i, r)) !== null &&
            (Sr(t, n, r, (i = _n())), Bx(t, e, r));
        }
      }
      function Nx(n) {
        var e = n.alternate;
        return n === ft || (e !== null && e === ft);
      }
      function Fx(n, e) {
        tl = th = !0;
        var t = n.pending;
        t === null ? (e.next = e) : ((e.next = t.next), (t.next = e)),
          (n.pending = e);
      }
      function Bx(n, e, t) {
        if ((4194240 & t) != 0) {
          var r = e.lanes;
          (t |= r &= n.pendingLanes), (e.lanes = t), pm(n, t);
        }
      }
      var nh = {
          readContext: ur,
          useCallback: rn,
          useContext: rn,
          useEffect: rn,
          useImperativeHandle: rn,
          useInsertionEffect: rn,
          useLayoutEffect: rn,
          useMemo: rn,
          useReducer: rn,
          useRef: rn,
          useState: rn,
          useDebugValue: rn,
          useDeferredValue: rn,
          useTransition: rn,
          useMutableSource: rn,
          useSyncExternalStore: rn,
          useId: rn,
          unstable_isNewReconciler: !1,
        },
        E2 = {
          readContext: ur,
          useCallback: function (n, e) {
            return (Ir().memoizedState = [n, e === void 0 ? null : e]), n;
          },
          useContext: ur,
          useEffect: P0,
          useImperativeHandle: function (n, e, t) {
            return (
              (t = t != null ? t.concat([n]) : null),
              yc(4194308, 4, Dx.bind(null, e, n), t)
            );
          },
          useLayoutEffect: function (n, e) {
            return yc(4194308, 4, n, e);
          },
          useInsertionEffect: function (n, e) {
            return yc(4, 2, n, e);
          },
          useMemo: function (n, e) {
            var t = Ir();
            return (
              (e = e === void 0 ? null : e),
              (n = n()),
              (t.memoizedState = [n, e]),
              n
            );
          },
          useReducer: function (n, e, t) {
            var r = Ir();
            return (
              (e = t !== void 0 ? t(e) : e),
              (r.memoizedState = r.baseState = e),
              (n = {
                pending: null,
                interleaved: null,
                lanes: 0,
                dispatch: null,
                lastRenderedReducer: n,
                lastRenderedState: e,
              }),
              (r.queue = n),
              (n = n.dispatch = M2.bind(null, ft, n)),
              [r.memoizedState, n]
            );
          },
          useRef: function (n) {
            return (n = { current: n }), (Ir().memoizedState = n);
          },
          useState: R0,
          useDebugValue: Um,
          useDeferredValue: function (n) {
            return (Ir().memoizedState = n);
          },
          useTransition: function () {
            var n = R0(!1),
              e = n[0];
            return (n = S2.bind(null, n[1])), (Ir().memoizedState = n), [e, n];
          },
          useMutableSource: function () {},
          useSyncExternalStore: function (n, e, t) {
            var r = ft,
              i = Ir();
            if (ut) {
              if (t === void 0) throw Error(pe(407));
              t = t();
            } else {
              if (((t = e()), Wt === null)) throw Error(pe(349));
              (30 & za) != 0 || Mx(r, e, t);
            }
            i.memoizedState = t;
            var a = { value: t, getSnapshot: e };
            return (
              (i.queue = a),
              P0(Ex.bind(null, r, a, n), [n]),
              (r.flags |= 2048),
              Pl(9, Tx.bind(null, r, a, t, e), void 0, null),
              t
            );
          },
          useId: function () {
            var n = Ir(),
              e = Wt.identifierPrefix;
            if (ut) {
              var t = oi;
              (e =
                ":" +
                e +
                "R" +
                (t = (Br & ~(1 << (32 - wr(Br) - 1))).toString(32) + t)),
                0 < (t = Al++) && (e += "H" + t.toString(32)),
                (e += ":");
            } else e = ":" + e + "r" + (t = w2++).toString(32) + ":";
            return (n.memoizedState = e);
          },
          unstable_isNewReconciler: !1,
        },
        C2 = {
          readContext: ur,
          useCallback: Ix,
          useContext: ur,
          useEffect: Im,
          useImperativeHandle: kx,
          useInsertionEffect: Px,
          useLayoutEffect: Lx,
          useMemo: Ux,
          useReducer: Ed,
          useRef: Rx,
          useState: function () {
            return Ed(Rl);
          },
          useDebugValue: Um,
          useDeferredValue: function (n) {
            return Ox(cr(), Bt.memoizedState, n);
          },
          useTransition: function () {
            return [Ed(Rl)[0], cr().memoizedState];
          },
          useMutableSource: wx,
          useSyncExternalStore: Sx,
          useId: zx,
          unstable_isNewReconciler: !1,
        },
        A2 = {
          readContext: ur,
          useCallback: Ix,
          useContext: ur,
          useEffect: Im,
          useImperativeHandle: kx,
          useInsertionEffect: Px,
          useLayoutEffect: Lx,
          useMemo: Ux,
          useReducer: Cd,
          useRef: Rx,
          useState: function () {
            return Cd(Rl);
          },
          useDebugValue: Um,
          useDeferredValue: function (n) {
            var e = cr();
            return Bt === null
              ? (e.memoizedState = n)
              : Ox(e, Bt.memoizedState, n);
          },
          useTransition: function () {
            return [Cd(Rl)[0], cr().memoizedState];
          },
          useMutableSource: wx,
          useSyncExternalStore: Sx,
          useId: zx,
          unstable_isNewReconciler: !1,
        };
      function Qs(n, e) {
        try {
          var t = "",
            r = e;
          do (t += Sw(r)), (r = r.return);
          while (r);
          var i = t;
        } catch (a) {
          i =
            `
Error generating stack: ` +
            a.message +
            `
` +
            a.stack;
        }
        return { value: n, source: e, stack: i, digest: null };
      }
      function Ad(n, e, t) {
        return {
          value: n,
          source: null,
          stack: t != null ? t : null,
          digest: e != null ? e : null,
        };
      }
      function up(n, e) {
        try {
          console.error(e.value);
        } catch (t) {
          setTimeout(function () {
            throw t;
          });
        }
      }
      var R2 = typeof WeakMap == "function" ? WeakMap : Map;
      function Gx(n, e, t) {
        ((t = mi(-1, t)).tag = 3), (t.payload = { element: null });
        var r = e.value;
        return (
          (t.callback = function () {
            ih || ((ih = !0), (gp = r)), up(0, e);
          }),
          t
        );
      }
      function Hx(n, e, t) {
        (t = mi(-1, t)).tag = 3;
        var r = n.type.getDerivedStateFromError;
        if (typeof r == "function") {
          var i = e.value;
          (t.payload = function () {
            return r(i);
          }),
            (t.callback = function () {
              up(0, e);
            });
        }
        var a = n.stateNode;
        return (
          a !== null &&
            typeof a.componentDidCatch == "function" &&
            (t.callback = function () {
              up(0, e),
                typeof r != "function" &&
                  (qi === null ? (qi = new Set([this])) : qi.add(this));
              var s = e.stack;
              this.componentDidCatch(e.value, {
                componentStack: s !== null ? s : "",
              });
            }),
          t
        );
      }
      function L0(n, e, t) {
        var r = n.pingCache;
        if (r === null) {
          r = n.pingCache = new R2();
          var i = new Set();
          r.set(e, i);
        } else (i = r.get(e)) === void 0 && ((i = new Set()), r.set(e, i));
        i.has(t) || (i.add(t), (n = N2.bind(null, n, e, t)), e.then(n, n));
      }
      function D0(n) {
        do {
          var e;
          if (
            ((e = n.tag === 13) &&
              (e = (e = n.memoizedState) === null || e.dehydrated !== null),
            e)
          )
            return n;
          n = n.return;
        } while (n !== null);
        return null;
      }
      function k0(n, e, t, r, i) {
        return (1 & n.mode) == 0
          ? (n === e
              ? (n.flags |= 65536)
              : ((n.flags |= 128),
                (t.flags |= 131072),
                (t.flags &= -52805),
                t.tag === 1 &&
                  (t.alternate === null
                    ? (t.tag = 17)
                    : (((e = mi(-1, 1)).tag = 2), Xi(t, e, 1))),
                (t.lanes |= 1)),
            n)
          : ((n.flags |= 65536), (n.lanes = i), n);
      }
      var P2 = bi.ReactCurrentOwner,
        Rn = !1;
      function Cn(n, e, t, r) {
        e.child = n === null ? bx(e, null, t, r) : Ks(e, n.child, t, r);
      }
      function I0(n, e, t, r, i) {
        t = t.render;
        var a = e.ref;
        return (
          Xs(e, i),
          (r = Dm(n, e, t, r, a, i)),
          (t = km()),
          n === null || Rn
            ? (ut && t && bm(e), (e.flags |= 1), Cn(n, e, r, i), e.child)
            : ((e.updateQueue = n.updateQueue),
              (e.flags &= -2053),
              (n.lanes &= ~i),
              li(n, e, i))
        );
      }
      function U0(n, e, t, r, i) {
        if (n === null) {
          var a = t.type;
          return typeof a != "function" ||
            Hm(a) ||
            a.defaultProps !== void 0 ||
            t.compare !== null ||
            t.defaultProps !== void 0
            ? (((n = wc(t.type, null, r, e, e.mode, i)).ref = e.ref),
              (n.return = e),
              (e.child = n))
            : ((e.tag = 15), (e.type = a), Vx(n, e, a, r, i));
        }
        if (((a = n.child), (n.lanes & i) == 0)) {
          var s = a.memoizedProps;
          if ((t = (t = t.compare) !== null ? t : wl)(s, r) && n.ref === e.ref)
            return li(n, e, i);
        }
        return (
          (e.flags |= 1),
          ((n = Yi(a, r)).ref = e.ref),
          (n.return = e),
          (e.child = n)
        );
      }
      function Vx(n, e, t, r, i) {
        if (n !== null) {
          var a = n.memoizedProps;
          if (wl(a, r) && n.ref === e.ref) {
            if (((Rn = !1), (e.pendingProps = r = a), (n.lanes & i) == 0))
              return (e.lanes = n.lanes), li(n, e, i);
            (131072 & n.flags) != 0 && (Rn = !0);
          }
        }
        return cp(n, e, t, r, i);
      }
      function O0(n, e, t) {
        var r = e.pendingProps,
          i = r.children,
          a = n !== null ? n.memoizedState : null;
        if (r.mode === "hidden")
          if ((1 & e.mode) == 0)
            (e.memoizedState = {
              baseLanes: 0,
              cachePool: null,
              transitions: null,
            }),
              it(Us, Vn),
              (Vn |= t);
          else {
            if ((1073741824 & t) == 0)
              return (
                (n = a !== null ? a.baseLanes | t : t),
                (e.lanes = e.childLanes = 1073741824),
                (e.memoizedState = {
                  baseLanes: n,
                  cachePool: null,
                  transitions: null,
                }),
                (e.updateQueue = null),
                it(Us, Vn),
                (Vn |= n),
                null
              );
            (e.memoizedState = {
              baseLanes: 0,
              cachePool: null,
              transitions: null,
            }),
              (r = a !== null ? a.baseLanes : t),
              it(Us, Vn),
              (Vn |= r);
          }
        else
          a !== null
            ? ((r = a.baseLanes | t), (e.memoizedState = null))
            : (r = t),
            it(Us, Vn),
            (Vn |= r);
        return Cn(n, e, i, t), e.child;
      }
      function Wx(n, e) {
        var t = e.ref;
        ((n === null && t !== null) || (n !== null && n.ref !== t)) &&
          ((e.flags |= 512), (e.flags |= 2097152));
      }
      function cp(n, e, t, r, i) {
        var a = Xn(t) ? Ua : cn.current;
        return (
          (a = Ys(e, a)),
          Xs(e, i),
          (t = Dm(n, e, t, r, a, i)),
          (r = km()),
          n === null || Rn
            ? (ut && r && bm(e), (e.flags |= 1), Cn(n, e, t, i), e.child)
            : ((e.updateQueue = n.updateQueue),
              (e.flags &= -2053),
              (n.lanes &= ~i),
              li(n, e, i))
        );
      }
      function z0(n, e, t, r, i) {
        if (Xn(t)) {
          var a = !0;
          mc(e);
        } else a = !1;
        if ((Xs(e, i), e.stateNode === null))
          xc(n, e), xx(e, t, r), op(e, t, r, i), (r = !0);
        else if (n === null) {
          var s = e.stateNode,
            o = e.memoizedProps;
          s.props = o;
          var l = s.context,
            u = t.contextType;
          typeof u == "object" && u !== null
            ? (u = ur(u))
            : (u = Ys(e, (u = Xn(t) ? Ua : cn.current)));
          var c = t.getDerivedStateFromProps,
            h =
              typeof c == "function" ||
              typeof s.getSnapshotBeforeUpdate == "function";
          h ||
            (typeof s.UNSAFE_componentWillReceiveProps != "function" &&
              typeof s.componentWillReceiveProps != "function") ||
            ((o !== r || l !== u) && E0(e, s, r, u)),
            (Ui = !1);
          var d = e.memoizedState;
          (s.state = d),
            Qc(e, r, s, i),
            (l = e.memoizedState),
            o !== r || d !== l || Dn.current || Ui
              ? (typeof c == "function" &&
                  (sp(e, t, c, r), (l = e.memoizedState)),
                (o = Ui || T0(e, t, o, r, d, l, u))
                  ? (h ||
                      (typeof s.UNSAFE_componentWillMount != "function" &&
                        typeof s.componentWillMount != "function") ||
                      (typeof s.componentWillMount == "function" &&
                        s.componentWillMount(),
                      typeof s.UNSAFE_componentWillMount == "function" &&
                        s.UNSAFE_componentWillMount()),
                    typeof s.componentDidMount == "function" &&
                      (e.flags |= 4194308))
                  : (typeof s.componentDidMount == "function" &&
                      (e.flags |= 4194308),
                    (e.memoizedProps = r),
                    (e.memoizedState = l)),
                (s.props = r),
                (s.state = l),
                (s.context = u),
                (r = o))
              : (typeof s.componentDidMount == "function" &&
                  (e.flags |= 4194308),
                (r = !1));
        } else {
          (s = e.stateNode),
            vx(n, e),
            (o = e.memoizedProps),
            (u = e.type === e.elementType ? o : _r(e.type, o)),
            (s.props = u),
            (h = e.pendingProps),
            (d = s.context),
            typeof (l = t.contextType) == "object" && l !== null
              ? (l = ur(l))
              : (l = Ys(e, (l = Xn(t) ? Ua : cn.current)));
          var f = t.getDerivedStateFromProps;
          (c =
            typeof f == "function" ||
            typeof s.getSnapshotBeforeUpdate == "function") ||
            (typeof s.UNSAFE_componentWillReceiveProps != "function" &&
              typeof s.componentWillReceiveProps != "function") ||
            ((o !== h || d !== l) && E0(e, s, r, l)),
            (Ui = !1),
            (d = e.memoizedState),
            (s.state = d),
            Qc(e, r, s, i);
          var g = e.memoizedState;
          o !== h || d !== g || Dn.current || Ui
            ? (typeof f == "function" &&
                (sp(e, t, f, r), (g = e.memoizedState)),
              (u = Ui || T0(e, t, u, r, d, g, l) || !1)
                ? (c ||
                    (typeof s.UNSAFE_componentWillUpdate != "function" &&
                      typeof s.componentWillUpdate != "function") ||
                    (typeof s.componentWillUpdate == "function" &&
                      s.componentWillUpdate(r, g, l),
                    typeof s.UNSAFE_componentWillUpdate == "function" &&
                      s.UNSAFE_componentWillUpdate(r, g, l)),
                  typeof s.componentDidUpdate == "function" && (e.flags |= 4),
                  typeof s.getSnapshotBeforeUpdate == "function" &&
                    (e.flags |= 1024))
                : (typeof s.componentDidUpdate != "function" ||
                    (o === n.memoizedProps && d === n.memoizedState) ||
                    (e.flags |= 4),
                  typeof s.getSnapshotBeforeUpdate != "function" ||
                    (o === n.memoizedProps && d === n.memoizedState) ||
                    (e.flags |= 1024),
                  (e.memoizedProps = r),
                  (e.memoizedState = g)),
              (s.props = r),
              (s.state = g),
              (s.context = l),
              (r = u))
            : (typeof s.componentDidUpdate != "function" ||
                (o === n.memoizedProps && d === n.memoizedState) ||
                (e.flags |= 4),
              typeof s.getSnapshotBeforeUpdate != "function" ||
                (o === n.memoizedProps && d === n.memoizedState) ||
                (e.flags |= 1024),
              (r = !1));
        }
        return hp(n, e, t, r, a, i);
      }
      function hp(n, e, t, r, i, a) {
        Wx(n, e);
        var s = (128 & e.flags) != 0;
        if (!r && !s) return i && x0(e, t, !1), li(n, e, a);
        (r = e.stateNode), (P2.current = e);
        var o =
          s && typeof t.getDerivedStateFromError != "function"
            ? null
            : r.render();
        return (
          (e.flags |= 1),
          n !== null && s
            ? ((e.child = Ks(e, n.child, null, a)),
              (e.child = Ks(e, null, o, a)))
            : Cn(n, e, o, a),
          (e.memoizedState = r.state),
          i && x0(e, t, !0),
          e.child
        );
      }
      function N0(n) {
        var e = n.stateNode;
        e.pendingContext
          ? y0(0, e.pendingContext, e.pendingContext !== e.context)
          : e.context && y0(0, e.context, !1),
          lp(n, e.containerInfo);
      }
      function F0(n, e, t, r, i) {
        return Zs(), Sm(i), (e.flags |= 256), Cn(n, e, t, r), e.child;
      }
      var jx,
        Xx,
        qx,
        Rd = { dehydrated: null, treeContext: null, retryLane: 0 };
      function Pd(n) {
        return { baseLanes: n, cachePool: null, transitions: null };
      }
      function B0(n, e, t) {
        var r,
          i = e.pendingProps,
          a = vt.current,
          s = !1,
          o = (128 & e.flags) != 0;
        if (
          ((r = o) ||
            (r = (n === null || n.memoizedState !== null) && (2 & a) != 0),
          r
            ? ((s = !0), (e.flags &= -129))
            : (n !== null && n.memoizedState === null) || (a |= 1),
          it(vt, 1 & a),
          n === null)
        )
          return (
            ip(e),
            (n = e.memoizedState) !== null && (n = n.dehydrated) !== null
              ? ((1 & e.mode) == 0
                  ? (e.lanes = 1)
                  : n.data === "$!"
                  ? (e.lanes = 8)
                  : (e.lanes = 1073741824),
                null)
              : ((o = i.children),
                (n = i.fallback),
                s
                  ? ((i = e.mode),
                    (s = e.child),
                    (o = { mode: "hidden", children: o }),
                    (1 & i) == 0 && s !== null
                      ? ((s.childLanes = 0), (s.pendingProps = o))
                      : (s = oh(o, i, 0, null)),
                    (n = ka(n, i, t, null)),
                    (s.return = e),
                    (n.return = e),
                    (s.sibling = n),
                    (e.child = s),
                    (e.child.memoizedState = Pd(t)),
                    (e.memoizedState = Rd),
                    n)
                  : dp(e, o))
          );
        if ((a = n.memoizedState) !== null && (r = a.dehydrated) !== null)
          return (function (u, c, h, d, f, g, p) {
            if (h)
              return 256 & c.flags
                ? ((c.flags &= -257), vu(u, c, p, (d = Ad(Error(pe(422))))))
                : c.memoizedState !== null
                ? ((c.child = u.child), (c.flags |= 128), null)
                : ((g = d.fallback),
                  (f = c.mode),
                  (d = oh(
                    { mode: "visible", children: d.children },
                    f,
                    0,
                    null
                  )),
                  ((g = ka(g, f, p, null)).flags |= 2),
                  (d.return = c),
                  (g.return = c),
                  (d.sibling = g),
                  (c.child = d),
                  (1 & c.mode) != 0 && Ks(c, u.child, null, p),
                  (c.child.memoizedState = Pd(p)),
                  (c.memoizedState = Rd),
                  g);
            if ((1 & c.mode) == 0) return vu(u, c, p, null);
            if (f.data === "$!") {
              if ((d = f.nextSibling && f.nextSibling.dataset)) var y = d.dgst;
              return (
                (d = y), vu(u, c, p, (d = Ad((g = Error(pe(419))), d, void 0)))
              );
            }
            if (((y = (p & u.childLanes) != 0), Rn || y)) {
              if ((d = Wt) !== null) {
                switch (p & -p) {
                  case 4:
                    f = 2;
                    break;
                  case 16:
                    f = 8;
                    break;
                  case 64:
                  case 128:
                  case 256:
                  case 512:
                  case 1024:
                  case 2048:
                  case 4096:
                  case 8192:
                  case 16384:
                  case 32768:
                  case 65536:
                  case 131072:
                  case 262144:
                  case 524288:
                  case 1048576:
                  case 2097152:
                  case 4194304:
                  case 8388608:
                  case 16777216:
                  case 33554432:
                  case 67108864:
                    f = 32;
                    break;
                  case 536870912:
                    f = 268435456;
                    break;
                  default:
                    f = 0;
                }
                (f = (f & (d.suspendedLanes | p)) != 0 ? 0 : f) !== 0 &&
                  f !== g.retryLane &&
                  ((g.retryLane = f), pi(u, f), Sr(d, u, f, -1));
              }
              return Gm(), vu(u, c, p, (d = Ad(Error(pe(421)))));
            }
            return f.data === "$?"
              ? ((c.flags |= 128),
                (c.child = u.child),
                (c = F2.bind(null, u)),
                (f._reactRetry = c),
                null)
              : ((u = g.treeContext),
                (jn = ji(f.nextSibling)),
                (qn = c),
                (ut = !0),
                (br = null),
                u !== null &&
                  ((tr[nr++] = Br),
                  (tr[nr++] = oi),
                  (tr[nr++] = Oa),
                  (Br = u.id),
                  (oi = u.overflow),
                  (Oa = c)),
                ((c = dp(c, d.children)).flags |= 4096),
                c);
          })(n, e, o, i, r, a, t);
        if (s) {
          (s = i.fallback), (o = e.mode), (r = (a = n.child).sibling);
          var l = { mode: "hidden", children: i.children };
          return (
            (1 & o) == 0 && e.child !== a
              ? (((i = e.child).childLanes = 0),
                (i.pendingProps = l),
                (e.deletions = null))
              : ((i = Yi(a, l)).subtreeFlags = 14680064 & a.subtreeFlags),
            r !== null ? (s = Yi(r, s)) : ((s = ka(s, o, t, null)).flags |= 2),
            (s.return = e),
            (i.return = e),
            (i.sibling = s),
            (e.child = i),
            (i = s),
            (s = e.child),
            (o =
              (o = n.child.memoizedState) === null
                ? Pd(t)
                : {
                    baseLanes: o.baseLanes | t,
                    cachePool: null,
                    transitions: o.transitions,
                  }),
            (s.memoizedState = o),
            (s.childLanes = n.childLanes & ~t),
            (e.memoizedState = Rd),
            i
          );
        }
        return (
          (n = (s = n.child).sibling),
          (i = Yi(s, { mode: "visible", children: i.children })),
          (1 & e.mode) == 0 && (i.lanes = t),
          (i.return = e),
          (i.sibling = null),
          n !== null &&
            ((t = e.deletions) === null
              ? ((e.deletions = [n]), (e.flags |= 16))
              : t.push(n)),
          (e.child = i),
          (e.memoizedState = null),
          i
        );
      }
      function dp(n, e) {
        return (
          ((e = oh({ mode: "visible", children: e }, n.mode, 0, null)).return =
            n),
          (n.child = e)
        );
      }
      function vu(n, e, t, r) {
        return (
          r !== null && Sm(r),
          Ks(e, n.child, null, t),
          ((n = dp(e, e.pendingProps.children)).flags |= 2),
          (e.memoizedState = null),
          n
        );
      }
      function G0(n, e, t) {
        n.lanes |= e;
        var r = n.alternate;
        r !== null && (r.lanes |= e), ap(n.return, e, t);
      }
      function Ld(n, e, t, r, i) {
        var a = n.memoizedState;
        a === null
          ? (n.memoizedState = {
              isBackwards: e,
              rendering: null,
              renderingStartTime: 0,
              last: r,
              tail: t,
              tailMode: i,
            })
          : ((a.isBackwards = e),
            (a.rendering = null),
            (a.renderingStartTime = 0),
            (a.last = r),
            (a.tail = t),
            (a.tailMode = i));
      }
      function H0(n, e, t) {
        var r = e.pendingProps,
          i = r.revealOrder,
          a = r.tail;
        if ((Cn(n, e, r.children, t), (2 & (r = vt.current)) != 0))
          (r = (1 & r) | 2), (e.flags |= 128);
        else {
          if (n !== null && (128 & n.flags) != 0)
            e: for (n = e.child; n !== null; ) {
              if (n.tag === 13) n.memoizedState !== null && G0(n, t, e);
              else if (n.tag === 19) G0(n, t, e);
              else if (n.child !== null) {
                (n.child.return = n), (n = n.child);
                continue;
              }
              if (n === e) break e;
              for (; n.sibling === null; ) {
                if (n.return === null || n.return === e) break e;
                n = n.return;
              }
              (n.sibling.return = n.return), (n = n.sibling);
            }
          r &= 1;
        }
        if ((it(vt, r), (1 & e.mode) == 0)) e.memoizedState = null;
        else
          switch (i) {
            case "forwards":
              for (t = e.child, i = null; t !== null; )
                (n = t.alternate) !== null && eh(n) === null && (i = t),
                  (t = t.sibling);
              (t = i) === null
                ? ((i = e.child), (e.child = null))
                : ((i = t.sibling), (t.sibling = null)),
                Ld(e, !1, i, t, a);
              break;
            case "backwards":
              for (t = null, i = e.child, e.child = null; i !== null; ) {
                if ((n = i.alternate) !== null && eh(n) === null) {
                  e.child = i;
                  break;
                }
                (n = i.sibling), (i.sibling = t), (t = i), (i = n);
              }
              Ld(e, !0, t, null, a);
              break;
            case "together":
              Ld(e, !1, null, null, void 0);
              break;
            default:
              e.memoizedState = null;
          }
        return e.child;
      }
      function xc(n, e) {
        (1 & e.mode) == 0 &&
          n !== null &&
          ((n.alternate = null), (e.alternate = null), (e.flags |= 2));
      }
      function li(n, e, t) {
        if (
          (n !== null && (e.dependencies = n.dependencies),
          (Na |= e.lanes),
          (t & e.childLanes) == 0)
        )
          return null;
        if (n !== null && e.child !== n.child) throw Error(pe(153));
        if (e.child !== null) {
          for (
            t = Yi((n = e.child), n.pendingProps), e.child = t, t.return = e;
            n.sibling !== null;

          )
            (n = n.sibling),
              ((t = t.sibling = Yi(n, n.pendingProps)).return = e);
          t.sibling = null;
        }
        return e.child;
      }
      function Oo(n, e) {
        if (!ut)
          switch (n.tailMode) {
            case "hidden":
              e = n.tail;
              for (var t = null; e !== null; )
                e.alternate !== null && (t = e), (e = e.sibling);
              t === null ? (n.tail = null) : (t.sibling = null);
              break;
            case "collapsed":
              t = n.tail;
              for (var r = null; t !== null; )
                t.alternate !== null && (r = t), (t = t.sibling);
              r === null
                ? e || n.tail === null
                  ? (n.tail = null)
                  : (n.tail.sibling = null)
                : (r.sibling = null);
          }
      }
      function fn(n) {
        var e = n.alternate !== null && n.alternate.child === n.child,
          t = 0,
          r = 0;
        if (e)
          for (var i = n.child; i !== null; )
            (t |= i.lanes | i.childLanes),
              (r |= 14680064 & i.subtreeFlags),
              (r |= 14680064 & i.flags),
              (i.return = n),
              (i = i.sibling);
        else
          for (i = n.child; i !== null; )
            (t |= i.lanes | i.childLanes),
              (r |= i.subtreeFlags),
              (r |= i.flags),
              (i.return = n),
              (i = i.sibling);
        return (n.subtreeFlags |= r), (n.childLanes = t), e;
      }
      function L2(n, e, t) {
        var r = e.pendingProps;
        switch ((wm(e), e.tag)) {
          case 2:
          case 16:
          case 15:
          case 0:
          case 11:
          case 7:
          case 8:
          case 12:
          case 9:
          case 14:
            return fn(e), null;
          case 1:
          case 17:
            return Xn(e.type) && _m(), fn(e), null;
          case 3:
            return (
              (r = e.stateNode),
              Js(),
              ht(Dn),
              ht(cn),
              Pm(),
              r.pendingContext &&
                ((r.context = r.pendingContext), (r.pendingContext = null)),
              (n !== null && n.child !== null) ||
                (mu(e)
                  ? (e.flags |= 4)
                  : n === null ||
                    (n.memoizedState.isDehydrated && (256 & e.flags) == 0) ||
                    ((e.flags |= 1024), br !== null && (xp(br), (br = null)))),
              fn(e),
              null
            );
          case 5:
            Rm(e);
            var i = Ra(Cl.current);
            if (((t = e.type), n !== null && e.stateNode != null))
              Xx(n, e, t, r),
                n.ref !== e.ref && ((e.flags |= 512), (e.flags |= 2097152));
            else {
              if (!r) {
                if (e.stateNode === null) throw Error(pe(166));
                return fn(e), null;
              }
              if (((n = Ra(jr.current)), mu(e))) {
                (r = e.stateNode), (t = e.type);
                var a = e.memoizedProps;
                switch (
                  ((r[zr] = e), (r[Tl] = a), (n = (1 & e.mode) != 0), t)
                ) {
                  case "dialog":
                    at("cancel", r), at("close", r);
                    break;
                  case "iframe":
                  case "object":
                  case "embed":
                    at("load", r);
                    break;
                  case "video":
                  case "audio":
                    for (i = 0; i < Zo.length; i++) at(Zo[i], r);
                    break;
                  case "source":
                    at("error", r);
                    break;
                  case "img":
                  case "image":
                  case "link":
                    at("error", r), at("load", r);
                    break;
                  case "details":
                    at("toggle", r);
                    break;
                  case "input":
                    Bg(r, a), at("invalid", r);
                    break;
                  case "select":
                    (r._wrapperState = { wasMultiple: !!a.multiple }),
                      at("invalid", r);
                    break;
                  case "textarea":
                    Hg(r, a), at("invalid", r);
                }
                for (var s in (Bf(t, a), (i = null), a))
                  if (a.hasOwnProperty(s)) {
                    var o = a[s];
                    s === "children"
                      ? typeof o == "string"
                        ? r.textContent !== o &&
                          (a.suppressHydrationWarning !== !0 &&
                            pu(r.textContent, o, n),
                          (i = ["children", o]))
                        : typeof o == "number" &&
                          r.textContent !== "" + o &&
                          (a.suppressHydrationWarning !== !0 &&
                            pu(r.textContent, o, n),
                          (i = ["children", "" + o]))
                      : ml.hasOwnProperty(s) &&
                        o != null &&
                        s === "onScroll" &&
                        at("scroll", r);
                  }
                switch (t) {
                  case "input":
                    uu(r), Gg(r, a, !0);
                    break;
                  case "textarea":
                    uu(r), Vg(r);
                    break;
                  case "select":
                  case "option":
                    break;
                  default:
                    typeof a.onClick == "function" && (r.onclick = $c);
                }
                (r = i), (e.updateQueue = r), r !== null && (e.flags |= 4);
              } else {
                (s = i.nodeType === 9 ? i : i.ownerDocument),
                  n === "http://www.w3.org/1999/xhtml" && (n = Ly(t)),
                  n === "http://www.w3.org/1999/xhtml"
                    ? t === "script"
                      ? (((n = s.createElement("div")).innerHTML =
                          "<script><\/script>"),
                        (n = n.removeChild(n.firstChild)))
                      : typeof r.is == "string"
                      ? (n = s.createElement(t, { is: r.is }))
                      : ((n = s.createElement(t)),
                        t === "select" &&
                          ((s = n),
                          r.multiple
                            ? (s.multiple = !0)
                            : r.size && (s.size = r.size)))
                    : (n = s.createElementNS(n, t)),
                  (n[zr] = e),
                  (n[Tl] = r),
                  jx(n, e),
                  (e.stateNode = n);
                e: {
                  switch (((s = Gf(t, r)), t)) {
                    case "dialog":
                      at("cancel", n), at("close", n), (i = r);
                      break;
                    case "iframe":
                    case "object":
                    case "embed":
                      at("load", n), (i = r);
                      break;
                    case "video":
                    case "audio":
                      for (i = 0; i < Zo.length; i++) at(Zo[i], n);
                      i = r;
                      break;
                    case "source":
                      at("error", n), (i = r);
                      break;
                    case "img":
                    case "image":
                    case "link":
                      at("error", n), at("load", n), (i = r);
                      break;
                    case "details":
                      at("toggle", n), (i = r);
                      break;
                    case "input":
                      Bg(n, r), (i = Uf(n, r)), at("invalid", n);
                      break;
                    case "option":
                    default:
                      i = r;
                      break;
                    case "select":
                      (n._wrapperState = { wasMultiple: !!r.multiple }),
                        (i = pt({}, r, { value: void 0 })),
                        at("invalid", n);
                      break;
                    case "textarea":
                      Hg(n, r), (i = Nf(n, r)), at("invalid", n);
                  }
                  for (a in (Bf(t, i), (o = i)))
                    if (o.hasOwnProperty(a)) {
                      var l = o[a];
                      a === "style"
                        ? Iy(n, l)
                        : a === "dangerouslySetInnerHTML"
                        ? (l = l ? l.__html : void 0) != null && Dy(n, l)
                        : a === "children"
                        ? typeof l == "string"
                          ? (t !== "textarea" || l !== "") && gl(n, l)
                          : typeof l == "number" && gl(n, "" + l)
                        : a !== "suppressContentEditableWarning" &&
                          a !== "suppressHydrationWarning" &&
                          a !== "autoFocus" &&
                          (ml.hasOwnProperty(a)
                            ? l != null && a === "onScroll" && at("scroll", n)
                            : l != null && om(n, a, l, s));
                    }
                  switch (t) {
                    case "input":
                      uu(n), Gg(n, r, !1);
                      break;
                    case "textarea":
                      uu(n), Vg(n);
                      break;
                    case "option":
                      r.value != null &&
                        n.setAttribute("value", "" + Ji(r.value));
                      break;
                    case "select":
                      (n.multiple = !!r.multiple),
                        (a = r.value) != null
                          ? Hs(n, !!r.multiple, a, !1)
                          : r.defaultValue != null &&
                            Hs(n, !!r.multiple, r.defaultValue, !0);
                      break;
                    default:
                      typeof i.onClick == "function" && (n.onclick = $c);
                  }
                  switch (t) {
                    case "button":
                    case "input":
                    case "select":
                    case "textarea":
                      r = !!r.autoFocus;
                      break e;
                    case "img":
                      r = !0;
                      break e;
                    default:
                      r = !1;
                  }
                }
                r && (e.flags |= 4);
              }
              e.ref !== null && ((e.flags |= 512), (e.flags |= 2097152));
            }
            return fn(e), null;
          case 6:
            if (n && e.stateNode != null) qx(0, e, n.memoizedProps, r);
            else {
              if (typeof r != "string" && e.stateNode === null)
                throw Error(pe(166));
              if (((t = Ra(Cl.current)), Ra(jr.current), mu(e))) {
                if (
                  ((r = e.stateNode),
                  (t = e.memoizedProps),
                  (r[zr] = e),
                  (a = r.nodeValue !== t) && (n = qn) !== null)
                )
                  switch (n.tag) {
                    case 3:
                      pu(r.nodeValue, t, (1 & n.mode) != 0);
                      break;
                    case 5:
                      n.memoizedProps.suppressHydrationWarning !== !0 &&
                        pu(r.nodeValue, t, (1 & n.mode) != 0);
                  }
                a && (e.flags |= 4);
              } else
                ((r = (t.nodeType === 9 ? t : t.ownerDocument).createTextNode(
                  r
                ))[zr] = e),
                  (e.stateNode = r);
            }
            return fn(e), null;
          case 13:
            if (
              (ht(vt),
              (r = e.memoizedState),
              n === null ||
                (n.memoizedState !== null &&
                  n.memoizedState.dehydrated !== null))
            ) {
              if (
                ut &&
                jn !== null &&
                (1 & e.mode) != 0 &&
                (128 & e.flags) == 0
              )
                mx(), Zs(), (e.flags |= 98560), (a = !1);
              else if (((a = mu(e)), r !== null && r.dehydrated !== null)) {
                if (n === null) {
                  if (!a) throw Error(pe(318));
                  if (
                    !(a = (a = e.memoizedState) !== null ? a.dehydrated : null)
                  )
                    throw Error(pe(317));
                  a[zr] = e;
                } else
                  Zs(),
                    (128 & e.flags) == 0 && (e.memoizedState = null),
                    (e.flags |= 4);
                fn(e), (a = !1);
              } else br !== null && (xp(br), (br = null)), (a = !0);
              if (!a) return 65536 & e.flags ? e : null;
            }
            return (128 & e.flags) != 0
              ? ((e.lanes = t), e)
              : ((r = r !== null) != (n !== null && n.memoizedState !== null) &&
                  r &&
                  ((e.child.flags |= 8192),
                  (1 & e.mode) != 0 &&
                    (n === null || (1 & vt.current) != 0
                      ? Ut === 0 && (Ut = 3)
                      : Gm())),
                e.updateQueue !== null && (e.flags |= 4),
                fn(e),
                null);
          case 4:
            return (
              Js(), n === null && Sl(e.stateNode.containerInfo), fn(e), null
            );
          case 10:
            return Em(e.type._context), fn(e), null;
          case 19:
            if ((ht(vt), (a = e.memoizedState) === null)) return fn(e), null;
            if (((r = (128 & e.flags) != 0), (s = a.rendering) === null))
              if (r) Oo(a, !1);
              else {
                if (Ut !== 0 || (n !== null && (128 & n.flags) != 0))
                  for (n = e.child; n !== null; ) {
                    if ((s = eh(n)) !== null) {
                      for (
                        e.flags |= 128,
                          Oo(a, !1),
                          (r = s.updateQueue) !== null &&
                            ((e.updateQueue = r), (e.flags |= 4)),
                          e.subtreeFlags = 0,
                          r = t,
                          t = e.child;
                        t !== null;

                      )
                        (n = r),
                          ((a = t).flags &= 14680066),
                          (s = a.alternate) === null
                            ? ((a.childLanes = 0),
                              (a.lanes = n),
                              (a.child = null),
                              (a.subtreeFlags = 0),
                              (a.memoizedProps = null),
                              (a.memoizedState = null),
                              (a.updateQueue = null),
                              (a.dependencies = null),
                              (a.stateNode = null))
                            : ((a.childLanes = s.childLanes),
                              (a.lanes = s.lanes),
                              (a.child = s.child),
                              (a.subtreeFlags = 0),
                              (a.deletions = null),
                              (a.memoizedProps = s.memoizedProps),
                              (a.memoizedState = s.memoizedState),
                              (a.updateQueue = s.updateQueue),
                              (a.type = s.type),
                              (n = s.dependencies),
                              (a.dependencies =
                                n === null
                                  ? null
                                  : {
                                      lanes: n.lanes,
                                      firstContext: n.firstContext,
                                    })),
                          (t = t.sibling);
                      return it(vt, (1 & vt.current) | 2), e.child;
                    }
                    n = n.sibling;
                  }
                a.tail !== null &&
                  Tt() > eo &&
                  ((e.flags |= 128), (r = !0), Oo(a, !1), (e.lanes = 4194304));
              }
            else {
              if (!r)
                if ((n = eh(s)) !== null) {
                  if (
                    ((e.flags |= 128),
                    (r = !0),
                    (t = n.updateQueue) !== null &&
                      ((e.updateQueue = t), (e.flags |= 4)),
                    Oo(a, !0),
                    a.tail === null &&
                      a.tailMode === "hidden" &&
                      !s.alternate &&
                      !ut)
                  )
                    return fn(e), null;
                } else
                  2 * Tt() - a.renderingStartTime > eo &&
                    t !== 1073741824 &&
                    ((e.flags |= 128),
                    (r = !0),
                    Oo(a, !1),
                    (e.lanes = 4194304));
              a.isBackwards
                ? ((s.sibling = e.child), (e.child = s))
                : ((t = a.last) !== null ? (t.sibling = s) : (e.child = s),
                  (a.last = s));
            }
            return a.tail !== null
              ? ((e = a.tail),
                (a.rendering = e),
                (a.tail = e.sibling),
                (a.renderingStartTime = Tt()),
                (e.sibling = null),
                (t = vt.current),
                it(vt, r ? (1 & t) | 2 : 1 & t),
                e)
              : (fn(e), null);
          case 22:
          case 23:
            return (
              Bm(),
              (r = e.memoizedState !== null),
              n !== null &&
                (n.memoizedState !== null) !== r &&
                (e.flags |= 8192),
              r && (1 & e.mode) != 0
                ? (1073741824 & Vn) != 0 &&
                  (fn(e), 6 & e.subtreeFlags && (e.flags |= 8192))
                : fn(e),
              null
            );
          case 24:
          case 25:
            return null;
        }
        throw Error(pe(156, e.tag));
      }
      function D2(n, e) {
        switch ((wm(e), e.tag)) {
          case 1:
            return (
              Xn(e.type) && _m(),
              65536 & (n = e.flags) ? ((e.flags = (-65537 & n) | 128), e) : null
            );
          case 3:
            return (
              Js(),
              ht(Dn),
              ht(cn),
              Pm(),
              (65536 & (n = e.flags)) != 0 && (128 & n) == 0
                ? ((e.flags = (-65537 & n) | 128), e)
                : null
            );
          case 5:
            return Rm(e), null;
          case 13:
            if (
              (ht(vt), (n = e.memoizedState) !== null && n.dehydrated !== null)
            ) {
              if (e.alternate === null) throw Error(pe(340));
              Zs();
            }
            return 65536 & (n = e.flags)
              ? ((e.flags = (-65537 & n) | 128), e)
              : null;
          case 19:
            return ht(vt), null;
          case 4:
            return Js(), null;
          case 10:
            return Em(e.type._context), null;
          case 22:
          case 23:
            return Bm(), null;
          default:
            return null;
        }
      }
      (jx = function (n, e) {
        for (var t = e.child; t !== null; ) {
          if (t.tag === 5 || t.tag === 6) n.appendChild(t.stateNode);
          else if (t.tag !== 4 && t.child !== null) {
            (t.child.return = t), (t = t.child);
            continue;
          }
          if (t === e) break;
          for (; t.sibling === null; ) {
            if (t.return === null || t.return === e) return;
            t = t.return;
          }
          (t.sibling.return = t.return), (t = t.sibling);
        }
      }),
        (Xx = function (n, e, t, r) {
          var i = n.memoizedProps;
          if (i !== r) {
            (n = e.stateNode), Ra(jr.current);
            var a,
              s = null;
            switch (t) {
              case "input":
                (i = Uf(n, i)), (r = Uf(n, r)), (s = []);
                break;
              case "select":
                (i = pt({}, i, { value: void 0 })),
                  (r = pt({}, r, { value: void 0 })),
                  (s = []);
                break;
              case "textarea":
                (i = Nf(n, i)), (r = Nf(n, r)), (s = []);
                break;
              default:
                typeof i.onClick != "function" &&
                  typeof r.onClick == "function" &&
                  (n.onclick = $c);
            }
            for (u in (Bf(t, r), (t = null), i))
              if (!r.hasOwnProperty(u) && i.hasOwnProperty(u) && i[u] != null)
                if (u === "style") {
                  var o = i[u];
                  for (a in o)
                    o.hasOwnProperty(a) && (t || (t = {}), (t[a] = ""));
                } else
                  u !== "dangerouslySetInnerHTML" &&
                    u !== "children" &&
                    u !== "suppressContentEditableWarning" &&
                    u !== "suppressHydrationWarning" &&
                    u !== "autoFocus" &&
                    (ml.hasOwnProperty(u)
                      ? s || (s = [])
                      : (s = s || []).push(u, null));
            for (u in r) {
              var l = r[u];
              if (
                ((o = i != null ? i[u] : void 0),
                r.hasOwnProperty(u) && l !== o && (l != null || o != null))
              )
                if (u === "style")
                  if (o) {
                    for (a in o)
                      !o.hasOwnProperty(a) ||
                        (l && l.hasOwnProperty(a)) ||
                        (t || (t = {}), (t[a] = ""));
                    for (a in l)
                      l.hasOwnProperty(a) &&
                        o[a] !== l[a] &&
                        (t || (t = {}), (t[a] = l[a]));
                  } else t || (s || (s = []), s.push(u, t)), (t = l);
                else
                  u === "dangerouslySetInnerHTML"
                    ? ((l = l ? l.__html : void 0),
                      (o = o ? o.__html : void 0),
                      l != null && o !== l && (s = s || []).push(u, l))
                    : u === "children"
                    ? (typeof l != "string" && typeof l != "number") ||
                      (s = s || []).push(u, "" + l)
                    : u !== "suppressContentEditableWarning" &&
                      u !== "suppressHydrationWarning" &&
                      (ml.hasOwnProperty(u)
                        ? (l != null && u === "onScroll" && at("scroll", n),
                          s || o === l || (s = []))
                        : (s = s || []).push(u, l));
            }
            t && (s = s || []).push("style", t);
            var u = s;
            (e.updateQueue = u) && (e.flags |= 4);
          }
        }),
        (qx = function (n, e, t, r) {
          t !== r && (e.flags |= 4);
        });
      var yu = !1,
        on = !1,
        k2 = typeof WeakSet == "function" ? WeakSet : Set,
        be = null;
      function Is(n, e) {
        var t = n.ref;
        if (t !== null)
          if (typeof t == "function")
            try {
              t(null);
            } catch (r) {
              gt(n, e, r);
            }
          else t.current = null;
      }
      function $x(n, e, t) {
        try {
          t();
        } catch (r) {
          gt(n, e, r);
        }
      }
      var V0 = !1;
      function nl(n, e, t) {
        var r = e.updateQueue;
        if ((r = r !== null ? r.lastEffect : null) !== null) {
          var i = (r = r.next);
          do {
            if ((i.tag & n) === n) {
              var a = i.destroy;
              (i.destroy = void 0), a !== void 0 && $x(e, t, a);
            }
            i = i.next;
          } while (i !== r);
        }
      }
      function Dh(n, e) {
        if ((e = (e = e.updateQueue) !== null ? e.lastEffect : null) !== null) {
          var t = (e = e.next);
          do {
            if ((t.tag & n) === n) {
              var r = t.create;
              t.destroy = r();
            }
            t = t.next;
          } while (t !== e);
        }
      }
      function fp(n) {
        var e = n.ref;
        if (e !== null) {
          var t = n.stateNode;
          n.tag, (n = t), typeof e == "function" ? e(n) : (e.current = n);
        }
      }
      function Yx(n) {
        var e = n.alternate;
        e !== null && ((n.alternate = null), Yx(e)),
          (n.child = null),
          (n.deletions = null),
          (n.sibling = null),
          n.tag === 5 &&
            (e = n.stateNode) !== null &&
            (delete e[zr],
            delete e[Tl],
            delete e[tp],
            delete e[x2],
            delete e[_2]),
          (n.stateNode = null),
          (n.return = null),
          (n.dependencies = null),
          (n.memoizedProps = null),
          (n.memoizedState = null),
          (n.pendingProps = null),
          (n.stateNode = null),
          (n.updateQueue = null);
      }
      function Zx(n) {
        return n.tag === 5 || n.tag === 3 || n.tag === 4;
      }
      function W0(n) {
        e: for (;;) {
          for (; n.sibling === null; ) {
            if (n.return === null || Zx(n.return)) return null;
            n = n.return;
          }
          for (
            n.sibling.return = n.return, n = n.sibling;
            n.tag !== 5 && n.tag !== 6 && n.tag !== 18;

          ) {
            if (2 & n.flags || n.child === null || n.tag === 4) continue e;
            (n.child.return = n), (n = n.child);
          }
          if (!(2 & n.flags)) return n.stateNode;
        }
      }
      function pp(n, e, t) {
        var r = n.tag;
        if (r === 5 || r === 6)
          (n = n.stateNode),
            e
              ? t.nodeType === 8
                ? t.parentNode.insertBefore(n, e)
                : t.insertBefore(n, e)
              : (t.nodeType === 8
                  ? (e = t.parentNode).insertBefore(n, t)
                  : (e = t).appendChild(n),
                (t = t._reactRootContainer) != null ||
                  e.onclick !== null ||
                  (e.onclick = $c));
        else if (r !== 4 && (n = n.child) !== null)
          for (pp(n, e, t), n = n.sibling; n !== null; )
            pp(n, e, t), (n = n.sibling);
      }
      function mp(n, e, t) {
        var r = n.tag;
        if (r === 5 || r === 6)
          (n = n.stateNode), e ? t.insertBefore(n, e) : t.appendChild(n);
        else if (r !== 4 && (n = n.child) !== null)
          for (mp(n, e, t), n = n.sibling; n !== null; )
            mp(n, e, t), (n = n.sibling);
      }
      var gn = null,
        Ur = !1;
      function Mi(n, e, t) {
        for (t = t.child; t !== null; ) Kx(n, e, t), (t = t.sibling);
      }
      function Kx(n, e, t) {
        if (Wr && typeof Wr.onCommitFiberUnmount == "function")
          try {
            Wr.onCommitFiberUnmount(Mh, t);
          } catch {}
        switch (t.tag) {
          case 5:
            on || Is(t, e);
          case 6:
            var r = gn,
              i = Ur;
            (gn = null),
              Mi(n, e, t),
              (Ur = i),
              (gn = r) !== null &&
                (Ur
                  ? ((n = gn),
                    (t = t.stateNode),
                    n.nodeType === 8
                      ? n.parentNode.removeChild(t)
                      : n.removeChild(t))
                  : gn.removeChild(t.stateNode));
            break;
          case 18:
            gn !== null &&
              (Ur
                ? ((n = gn),
                  (t = t.stateNode),
                  n.nodeType === 8
                    ? wd(n.parentNode, t)
                    : n.nodeType === 1 && wd(n, t),
                  _l(n))
                : wd(gn, t.stateNode));
            break;
          case 4:
            (r = gn),
              (i = Ur),
              (gn = t.stateNode.containerInfo),
              (Ur = !0),
              Mi(n, e, t),
              (gn = r),
              (Ur = i);
            break;
          case 0:
          case 11:
          case 14:
          case 15:
            if (
              !on &&
              (r = t.updateQueue) !== null &&
              (r = r.lastEffect) !== null
            ) {
              i = r = r.next;
              do {
                var a = i,
                  s = a.destroy;
                (a = a.tag),
                  s !== void 0 && ((2 & a) != 0 || (4 & a) != 0) && $x(t, e, s),
                  (i = i.next);
              } while (i !== r);
            }
            Mi(n, e, t);
            break;
          case 1:
            if (
              !on &&
              (Is(t, e),
              typeof (r = t.stateNode).componentWillUnmount == "function")
            )
              try {
                (r.props = t.memoizedProps),
                  (r.state = t.memoizedState),
                  r.componentWillUnmount();
              } catch (o) {
                gt(t, e, o);
              }
            Mi(n, e, t);
            break;
          case 21:
            Mi(n, e, t);
            break;
          case 22:
            1 & t.mode
              ? ((on = (r = on) || t.memoizedState !== null),
                Mi(n, e, t),
                (on = r))
              : Mi(n, e, t);
            break;
          default:
            Mi(n, e, t);
        }
      }
      function j0(n) {
        var e = n.updateQueue;
        if (e !== null) {
          n.updateQueue = null;
          var t = n.stateNode;
          t === null && (t = n.stateNode = new k2()),
            e.forEach(function (r) {
              var i = B2.bind(null, n, r);
              t.has(r) || (t.add(r), r.then(i, i));
            });
        }
      }
      function Dr(n, e) {
        var t = e.deletions;
        if (t !== null)
          for (var r = 0; r < t.length; r++) {
            var i = t[r];
            try {
              var a = n,
                s = e,
                o = s;
              e: for (; o !== null; ) {
                switch (o.tag) {
                  case 5:
                    (gn = o.stateNode), (Ur = !1);
                    break e;
                  case 3:
                  case 4:
                    (gn = o.stateNode.containerInfo), (Ur = !0);
                    break e;
                }
                o = o.return;
              }
              if (gn === null) throw Error(pe(160));
              Kx(a, s, i), (gn = null), (Ur = !1);
              var l = i.alternate;
              l !== null && (l.return = null), (i.return = null);
            } catch (u) {
              gt(i, e, u);
            }
          }
        if (12854 & e.subtreeFlags)
          for (e = e.child; e !== null; ) Jx(e, n), (e = e.sibling);
      }
      function Jx(n, e) {
        var t = n.alternate,
          r = n.flags;
        switch (n.tag) {
          case 0:
          case 11:
          case 14:
          case 15:
            if ((Dr(e, n), Jr(n), 4 & r)) {
              try {
                nl(3, n, n.return), Dh(3, n);
              } catch (p) {
                gt(n, n.return, p);
              }
              try {
                nl(5, n, n.return);
              } catch (p) {
                gt(n, n.return, p);
              }
            }
            break;
          case 1:
            Dr(e, n), Jr(n), 512 & r && t !== null && Is(t, t.return);
            break;
          case 5:
            if (
              (Dr(e, n),
              Jr(n),
              512 & r && t !== null && Is(t, t.return),
              32 & n.flags)
            ) {
              var i = n.stateNode;
              try {
                gl(i, "");
              } catch (p) {
                gt(n, n.return, p);
              }
            }
            if (4 & r && (i = n.stateNode) != null) {
              var a = n.memoizedProps,
                s = t !== null ? t.memoizedProps : a,
                o = n.type,
                l = n.updateQueue;
              if (((n.updateQueue = null), l !== null))
                try {
                  o === "input" &&
                    a.type === "radio" &&
                    a.name != null &&
                    Ry(i, a),
                    Gf(o, s);
                  var u = Gf(o, a);
                  for (s = 0; s < l.length; s += 2) {
                    var c = l[s],
                      h = l[s + 1];
                    c === "style"
                      ? Iy(i, h)
                      : c === "dangerouslySetInnerHTML"
                      ? Dy(i, h)
                      : c === "children"
                      ? gl(i, h)
                      : om(i, c, h, u);
                  }
                  switch (o) {
                    case "input":
                      Of(i, a);
                      break;
                    case "textarea":
                      Py(i, a);
                      break;
                    case "select":
                      var d = i._wrapperState.wasMultiple;
                      i._wrapperState.wasMultiple = !!a.multiple;
                      var f = a.value;
                      f != null
                        ? Hs(i, !!a.multiple, f, !1)
                        : d !== !!a.multiple &&
                          (a.defaultValue != null
                            ? Hs(i, !!a.multiple, a.defaultValue, !0)
                            : Hs(i, !!a.multiple, a.multiple ? [] : "", !1));
                  }
                  i[Tl] = a;
                } catch (p) {
                  gt(n, n.return, p);
                }
            }
            break;
          case 6:
            if ((Dr(e, n), Jr(n), 4 & r)) {
              if (n.stateNode === null) throw Error(pe(162));
              (i = n.stateNode), (a = n.memoizedProps);
              try {
                i.nodeValue = a;
              } catch (p) {
                gt(n, n.return, p);
              }
            }
            break;
          case 3:
            if (
              (Dr(e, n),
              Jr(n),
              4 & r && t !== null && t.memoizedState.isDehydrated)
            )
              try {
                _l(e.containerInfo);
              } catch (p) {
                gt(n, n.return, p);
              }
            break;
          case 4:
          default:
            Dr(e, n), Jr(n);
            break;
          case 13:
            Dr(e, n),
              Jr(n),
              8192 & (i = n.child).flags &&
                ((a = i.memoizedState !== null),
                (i.stateNode.isHidden = a),
                !a ||
                  (i.alternate !== null &&
                    i.alternate.memoizedState !== null) ||
                  (Nm = Tt())),
              4 & r && j0(n);
            break;
          case 22:
            if (
              ((c = t !== null && t.memoizedState !== null),
              1 & n.mode
                ? ((on = (u = on) || c), Dr(e, n), (on = u))
                : Dr(e, n),
              Jr(n),
              8192 & r)
            ) {
              if (
                ((u = n.memoizedState !== null),
                (n.stateNode.isHidden = u) && !c && (1 & n.mode) != 0)
              )
                for (be = n, c = n.child; c !== null; ) {
                  for (h = be = c; be !== null; ) {
                    switch (((f = (d = be).child), d.tag)) {
                      case 0:
                      case 11:
                      case 14:
                      case 15:
                        nl(4, d, d.return);
                        break;
                      case 1:
                        Is(d, d.return);
                        var g = d.stateNode;
                        if (typeof g.componentWillUnmount == "function") {
                          (r = d), (t = d.return);
                          try {
                            (e = r),
                              (g.props = e.memoizedProps),
                              (g.state = e.memoizedState),
                              g.componentWillUnmount();
                          } catch (p) {
                            gt(r, t, p);
                          }
                        }
                        break;
                      case 5:
                        Is(d, d.return);
                        break;
                      case 22:
                        if (d.memoizedState !== null) {
                          q0(h);
                          continue;
                        }
                    }
                    f !== null ? ((f.return = d), (be = f)) : q0(h);
                  }
                  c = c.sibling;
                }
              e: for (c = null, h = n; ; ) {
                if (h.tag === 5) {
                  if (c === null) {
                    c = h;
                    try {
                      (i = h.stateNode),
                        u
                          ? typeof (a = i.style).setProperty == "function"
                            ? a.setProperty("display", "none", "important")
                            : (a.display = "none")
                          : ((o = h.stateNode),
                            (s =
                              (l = h.memoizedProps.style) != null &&
                              l.hasOwnProperty("display")
                                ? l.display
                                : null),
                            (o.style.display = ky("display", s)));
                    } catch (p) {
                      gt(n, n.return, p);
                    }
                  }
                } else if (h.tag === 6) {
                  if (c === null)
                    try {
                      h.stateNode.nodeValue = u ? "" : h.memoizedProps;
                    } catch (p) {
                      gt(n, n.return, p);
                    }
                } else if (
                  ((h.tag !== 22 && h.tag !== 23) ||
                    h.memoizedState === null ||
                    h === n) &&
                  h.child !== null
                ) {
                  (h.child.return = h), (h = h.child);
                  continue;
                }
                if (h === n) break e;
                for (; h.sibling === null; ) {
                  if (h.return === null || h.return === n) break e;
                  c === h && (c = null), (h = h.return);
                }
                c === h && (c = null),
                  (h.sibling.return = h.return),
                  (h = h.sibling);
              }
            }
            break;
          case 19:
            Dr(e, n), Jr(n), 4 & r && j0(n);
          case 21:
        }
      }
      function Jr(n) {
        var e = n.flags;
        if (2 & e) {
          try {
            e: {
              for (var t = n.return; t !== null; ) {
                if (Zx(t)) {
                  var r = t;
                  break e;
                }
                t = t.return;
              }
              throw Error(pe(160));
            }
            switch (r.tag) {
              case 5:
                var i = r.stateNode;
                32 & r.flags && (gl(i, ""), (r.flags &= -33)), mp(n, W0(n), i);
                break;
              case 3:
              case 4:
                var a = r.stateNode.containerInfo;
                pp(n, W0(n), a);
                break;
              default:
                throw Error(pe(161));
            }
          } catch (s) {
            gt(n, n.return, s);
          }
          n.flags &= -3;
        }
        4096 & e && (n.flags &= -4097);
      }
      function I2(n, e, t) {
        (be = n), Qx(n);
      }
      function Qx(n, e, t) {
        for (var r = (1 & n.mode) != 0; be !== null; ) {
          var i = be,
            a = i.child;
          if (i.tag === 22 && r) {
            var s = i.memoizedState !== null || yu;
            if (!s) {
              var o = i.alternate,
                l = (o !== null && o.memoizedState !== null) || on;
              o = yu;
              var u = on;
              if (((yu = s), (on = l) && !u))
                for (be = i; be !== null; )
                  (l = (s = be).child),
                    s.tag === 22 && s.memoizedState !== null
                      ? $0(i)
                      : l !== null
                      ? ((l.return = s), (be = l))
                      : $0(i);
              for (; a !== null; ) (be = a), Qx(a), (a = a.sibling);
              (be = i), (yu = o), (on = u);
            }
            X0(n);
          } else
            (8772 & i.subtreeFlags) != 0 && a !== null
              ? ((a.return = i), (be = a))
              : X0(n);
        }
      }
      function X0(n) {
        for (; be !== null; ) {
          var e = be;
          if ((8772 & e.flags) != 0) {
            var t = e.alternate;
            try {
              if ((8772 & e.flags) != 0)
                switch (e.tag) {
                  case 0:
                  case 11:
                  case 15:
                    on || Dh(5, e);
                    break;
                  case 1:
                    var r = e.stateNode;
                    if (4 & e.flags && !on)
                      if (t === null) r.componentDidMount();
                      else {
                        var i =
                          e.elementType === e.type
                            ? t.memoizedProps
                            : _r(e.type, t.memoizedProps);
                        r.componentDidUpdate(
                          i,
                          t.memoizedState,
                          r.__reactInternalSnapshotBeforeUpdate
                        );
                      }
                    var a = e.updateQueue;
                    a !== null && M0(e, a, r);
                    break;
                  case 3:
                    var s = e.updateQueue;
                    if (s !== null) {
                      if (((t = null), e.child !== null))
                        switch (e.child.tag) {
                          case 5:
                          case 1:
                            t = e.child.stateNode;
                        }
                      M0(e, s, t);
                    }
                    break;
                  case 5:
                    var o = e.stateNode;
                    if (t === null && 4 & e.flags) {
                      t = o;
                      var l = e.memoizedProps;
                      switch (e.type) {
                        case "button":
                        case "input":
                        case "select":
                        case "textarea":
                          l.autoFocus && t.focus();
                          break;
                        case "img":
                          l.src && (t.src = l.src);
                      }
                    }
                    break;
                  case 6:
                  case 4:
                  case 12:
                  case 19:
                  case 17:
                  case 21:
                  case 22:
                  case 23:
                  case 25:
                    break;
                  case 13:
                    if (e.memoizedState === null) {
                      var u = e.alternate;
                      if (u !== null) {
                        var c = u.memoizedState;
                        if (c !== null) {
                          var h = c.dehydrated;
                          h !== null && _l(h);
                        }
                      }
                    }
                    break;
                  default:
                    throw Error(pe(163));
                }
              on || (512 & e.flags && fp(e));
            } catch (d) {
              gt(e, e.return, d);
            }
          }
          if (e === n) {
            be = null;
            break;
          }
          if ((t = e.sibling) !== null) {
            (t.return = e.return), (be = t);
            break;
          }
          be = e.return;
        }
      }
      function q0(n) {
        for (; be !== null; ) {
          var e = be;
          if (e === n) {
            be = null;
            break;
          }
          var t = e.sibling;
          if (t !== null) {
            (t.return = e.return), (be = t);
            break;
          }
          be = e.return;
        }
      }
      function $0(n) {
        for (; be !== null; ) {
          var e = be;
          try {
            switch (e.tag) {
              case 0:
              case 11:
              case 15:
                var t = e.return;
                try {
                  Dh(4, e);
                } catch (l) {
                  gt(e, t, l);
                }
                break;
              case 1:
                var r = e.stateNode;
                if (typeof r.componentDidMount == "function") {
                  var i = e.return;
                  try {
                    r.componentDidMount();
                  } catch (l) {
                    gt(e, i, l);
                  }
                }
                var a = e.return;
                try {
                  fp(e);
                } catch (l) {
                  gt(e, a, l);
                }
                break;
              case 5:
                var s = e.return;
                try {
                  fp(e);
                } catch (l) {
                  gt(e, s, l);
                }
            }
          } catch (l) {
            gt(e, e.return, l);
          }
          if (e === n) {
            be = null;
            break;
          }
          var o = e.sibling;
          if (o !== null) {
            (o.return = e.return), (be = o);
            break;
          }
          be = e.return;
        }
      }
      var e_,
        U2 = Math.ceil,
        rh = bi.ReactCurrentDispatcher,
        Om = bi.ReactCurrentOwner,
        rr = bi.ReactCurrentBatchConfig,
        je = 0,
        Wt = null,
        Pt = null,
        Kt = 0,
        Vn = 0,
        Us = ta(0),
        Ut = 0,
        Ll = null,
        Na = 0,
        kh = 0,
        zm = 0,
        rl = null,
        Wn = null,
        Nm = 0,
        eo = 1 / 0,
        Oi = null,
        ih = !1,
        gp = null,
        qi = null,
        xu = !1,
        Bi = null,
        ah = 0,
        il = 0,
        vp = null,
        _c = -1,
        bc = 0;
      function _n() {
        return (6 & je) != 0 ? Tt() : _c !== -1 ? _c : (_c = Tt());
      }
      function $i(n) {
        return (1 & n.mode) == 0
          ? 1
          : (2 & je) != 0 && Kt !== 0
          ? Kt & -Kt
          : b2.transition !== null
          ? (bc === 0 && (bc = Xy()), bc)
          : (n = Ze) !== 0
          ? n
          : (n = (n = window.event) === void 0 ? 16 : Jy(n.type));
      }
      function Sr(n, e, t, r) {
        if (50 < il) throw ((il = 0), (vp = null), Error(pe(185)));
        jl(n, t, r),
          ((2 & je) != 0 && n === Wt) ||
            (n === Wt && ((2 & je) == 0 && (kh |= t), Ut === 4 && Ni(n, Kt)),
            kn(n, r),
            t === 1 &&
              je === 0 &&
              (1 & e.mode) == 0 &&
              ((eo = Tt() + 500), Rh && na()));
      }
      function kn(n, e) {
        var t = n.callbackNode;
        (function (i, a) {
          for (
            var s = i.suspendedLanes,
              o = i.pingedLanes,
              l = i.expirationTimes,
              u = i.pendingLanes;
            0 < u;

          ) {
            var c = 31 - wr(u),
              h = 1 << c,
              d = l[c];
            d === -1
              ? ((h & s) != 0 && (h & o) == 0) || (l[c] = Ow(h, a))
              : d <= a && (i.expiredLanes |= h),
              (u &= ~h);
          }
        })(n, e);
        var r = jc(n, n === Wt ? Kt : 0);
        if (r === 0)
          t !== null && Xg(t),
            (n.callbackNode = null),
            (n.callbackPriority = 0);
        else if (((e = r & -r), n.callbackPriority !== e)) {
          if ((t != null && Xg(t), e === 1))
            n.tag === 0
              ? (function (i) {
                  (Rh = !0), _0(i);
                })(Y0.bind(null, n))
              : _0(Y0.bind(null, n)),
              v2(function () {
                (6 & je) == 0 && na();
              }),
              (t = null);
          else {
            switch (qy(r)) {
              case 1:
                t = dm;
                break;
              case 4:
                t = Wy;
                break;
              case 16:
              default:
                t = fm;
                break;
              case 536870912:
                t = jy;
            }
            t = o_(t, t_.bind(null, n));
          }
          (n.callbackPriority = e), (n.callbackNode = t);
        }
      }
      function t_(n, e) {
        if (((_c = -1), (bc = 0), (6 & je) != 0)) throw Error(pe(327));
        var t = n.callbackNode;
        if (qs() && n.callbackNode !== t) return null;
        var r = jc(n, n === Wt ? Kt : 0);
        if (r === 0) return null;
        if ((30 & r) != 0 || (r & n.expiredLanes) != 0 || e) e = sh(n, r);
        else {
          e = r;
          var i = je;
          je |= 2;
          var a = r_();
          for (
            (Wt === n && Kt === e) ||
            ((Oi = null), (eo = Tt() + 500), Da(n, e));
            ;

          )
            try {
              z2();
              break;
            } catch (o) {
              n_(n, o);
            }
          Tm(),
            (rh.current = a),
            (je = i),
            Pt !== null ? (e = 0) : ((Wt = null), (Kt = 0), (e = Ut));
        }
        if (e !== 0) {
          if (
            (e === 2 && (i = Xf(n)) !== 0 && ((r = i), (e = yp(n, i))), e === 1)
          )
            throw ((t = Ll), Da(n, 0), Ni(n, r), kn(n, Tt()), t);
          if (e === 6) Ni(n, r);
          else {
            if (
              ((i = n.current.alternate),
              (30 & r) == 0 &&
                !(function (o) {
                  for (var l = o; ; ) {
                    if (16384 & l.flags) {
                      var u = l.updateQueue;
                      if (u !== null && (u = u.stores) !== null)
                        for (var c = 0; c < u.length; c++) {
                          var h = u[c],
                            d = h.getSnapshot;
                          h = h.value;
                          try {
                            if (!Tr(d(), h)) return !1;
                          } catch {
                            return !1;
                          }
                        }
                    }
                    if (((u = l.child), 16384 & l.subtreeFlags && u !== null))
                      (u.return = l), (l = u);
                    else {
                      if (l === o) break;
                      for (; l.sibling === null; ) {
                        if (l.return === null || l.return === o) return !0;
                        l = l.return;
                      }
                      (l.sibling.return = l.return), (l = l.sibling);
                    }
                  }
                  return !0;
                })(i) &&
                ((e = sh(n, r)) === 2 &&
                  (a = Xf(n)) !== 0 &&
                  ((r = a), (e = yp(n, a))),
                e === 1))
            )
              throw ((t = Ll), Da(n, 0), Ni(n, r), kn(n, Tt()), t);
            switch (((n.finishedWork = i), (n.finishedLanes = r), e)) {
              case 0:
              case 1:
                throw Error(pe(345));
              case 2:
              case 5:
                vs(n, Wn, Oi);
                break;
              case 3:
                if (
                  (Ni(n, r),
                  (130023424 & r) === r && 10 < (e = Nm + 500 - Tt()))
                ) {
                  if (jc(n, 0) !== 0) break;
                  if (((i = n.suspendedLanes) & r) !== r) {
                    _n(), (n.pingedLanes |= n.suspendedLanes & i);
                    break;
                  }
                  n.timeoutHandle = ep(vs.bind(null, n, Wn, Oi), e);
                  break;
                }
                vs(n, Wn, Oi);
                break;
              case 4:
                if ((Ni(n, r), (4194240 & r) === r)) break;
                for (e = n.eventTimes, i = -1; 0 < r; ) {
                  var s = 31 - wr(r);
                  (a = 1 << s), (s = e[s]) > i && (i = s), (r &= ~a);
                }
                if (
                  ((r = i),
                  10 <
                    (r =
                      (120 > (r = Tt() - r)
                        ? 120
                        : 480 > r
                        ? 480
                        : 1080 > r
                        ? 1080
                        : 1920 > r
                        ? 1920
                        : 3e3 > r
                        ? 3e3
                        : 4320 > r
                        ? 4320
                        : 1960 * U2(r / 1960)) - r))
                ) {
                  n.timeoutHandle = ep(vs.bind(null, n, Wn, Oi), r);
                  break;
                }
                vs(n, Wn, Oi);
                break;
              default:
                throw Error(pe(329));
            }
          }
        }
        return kn(n, Tt()), n.callbackNode === t ? t_.bind(null, n) : null;
      }
      function yp(n, e) {
        var t = rl;
        return (
          n.current.memoizedState.isDehydrated && (Da(n, e).flags |= 256),
          (n = sh(n, e)) !== 2 && ((e = Wn), (Wn = t), e !== null && xp(e)),
          n
        );
      }
      function xp(n) {
        Wn === null ? (Wn = n) : Wn.push.apply(Wn, n);
      }
      function Ni(n, e) {
        for (
          e &= ~zm,
            e &= ~kh,
            n.suspendedLanes |= e,
            n.pingedLanes &= ~e,
            n = n.expirationTimes;
          0 < e;

        ) {
          var t = 31 - wr(e),
            r = 1 << t;
          (n[t] = -1), (e &= ~r);
        }
      }
      function Y0(n) {
        if ((6 & je) != 0) throw Error(pe(327));
        qs();
        var e = jc(n, 0);
        if ((1 & e) == 0) return kn(n, Tt()), null;
        var t = sh(n, e);
        if (n.tag !== 0 && t === 2) {
          var r = Xf(n);
          r !== 0 && ((e = r), (t = yp(n, r)));
        }
        if (t === 1) throw ((t = Ll), Da(n, 0), Ni(n, e), kn(n, Tt()), t);
        if (t === 6) throw Error(pe(345));
        return (
          (n.finishedWork = n.current.alternate),
          (n.finishedLanes = e),
          vs(n, Wn, Oi),
          kn(n, Tt()),
          null
        );
      }
      function Fm(n, e) {
        var t = je;
        je |= 1;
        try {
          return n(e);
        } finally {
          (je = t) === 0 && ((eo = Tt() + 500), Rh && na());
        }
      }
      function La(n) {
        Bi !== null && Bi.tag === 0 && (6 & je) == 0 && qs();
        var e = je;
        je |= 1;
        var t = rr.transition,
          r = Ze;
        try {
          if (((rr.transition = null), (Ze = 1), n)) return n();
        } finally {
          (Ze = r), (rr.transition = t), (6 & (je = e)) == 0 && na();
        }
      }
      function Bm() {
        (Vn = Us.current), ht(Us);
      }
      function Da(n, e) {
        (n.finishedWork = null), (n.finishedLanes = 0);
        var t = n.timeoutHandle;
        if ((t !== -1 && ((n.timeoutHandle = -1), g2(t)), Pt !== null))
          for (t = Pt.return; t !== null; ) {
            var r = t;
            switch ((wm(r), r.tag)) {
              case 1:
                (r = r.type.childContextTypes) != null && _m();
                break;
              case 3:
                Js(), ht(Dn), ht(cn), Pm();
                break;
              case 5:
                Rm(r);
                break;
              case 4:
                Js();
                break;
              case 13:
              case 19:
                ht(vt);
                break;
              case 10:
                Em(r.type._context);
                break;
              case 22:
              case 23:
                Bm();
            }
            t = t.return;
          }
        if (
          ((Wt = n),
          (Pt = n = Yi(n.current, null)),
          (Kt = Vn = e),
          (Ut = 0),
          (Ll = null),
          (zm = kh = Na = 0),
          (Wn = rl = null),
          Aa !== null)
        ) {
          for (e = 0; e < Aa.length; e++)
            if ((r = (t = Aa[e]).interleaved) !== null) {
              t.interleaved = null;
              var i = r.next,
                a = t.pending;
              if (a !== null) {
                var s = a.next;
                (a.next = i), (r.next = s);
              }
              t.pending = r;
            }
          Aa = null;
        }
        return n;
      }
      function n_(n, e) {
        for (;;) {
          var t = Pt;
          try {
            if ((Tm(), (vc.current = nh), th)) {
              for (var r = ft.memoizedState; r !== null; ) {
                var i = r.queue;
                i !== null && (i.pending = null), (r = r.next);
              }
              th = !1;
            }
            if (
              ((za = 0),
              (Ft = Bt = ft = null),
              (tl = !1),
              (Al = 0),
              (Om.current = null),
              t === null || t.return === null)
            ) {
              (Ut = 1), (Ll = e), (Pt = null);
              break;
            }
            e: {
              var a = n,
                s = t.return,
                o = t,
                l = e;
              if (
                ((e = Kt),
                (o.flags |= 32768),
                l !== null &&
                  typeof l == "object" &&
                  typeof l.then == "function")
              ) {
                var u = l,
                  c = o,
                  h = c.tag;
                if ((1 & c.mode) == 0 && (h === 0 || h === 11 || h === 15)) {
                  var d = c.alternate;
                  d
                    ? ((c.updateQueue = d.updateQueue),
                      (c.memoizedState = d.memoizedState),
                      (c.lanes = d.lanes))
                    : ((c.updateQueue = null), (c.memoizedState = null));
                }
                var f = D0(s);
                if (f !== null) {
                  (f.flags &= -257),
                    k0(f, s, o, 0, e),
                    1 & f.mode && L0(a, u, e),
                    (l = u);
                  var g = (e = f).updateQueue;
                  if (g === null) {
                    var p = new Set();
                    p.add(l), (e.updateQueue = p);
                  } else g.add(l);
                  break e;
                }
                if ((1 & e) == 0) {
                  L0(a, u, e), Gm();
                  break e;
                }
                l = Error(pe(426));
              } else if (ut && 1 & o.mode) {
                var y = D0(s);
                if (y !== null) {
                  (65536 & y.flags) == 0 && (y.flags |= 256),
                    k0(y, s, o, 0, e),
                    Sm(Qs(l, o));
                  break e;
                }
              }
              (a = l = Qs(l, o)),
                Ut !== 4 && (Ut = 2),
                rl === null ? (rl = [a]) : rl.push(a),
                (a = s);
              do {
                switch (a.tag) {
                  case 3:
                    (a.flags |= 65536),
                      (e &= -e),
                      (a.lanes |= e),
                      S0(a, Gx(0, l, e));
                    break e;
                  case 1:
                    o = l;
                    var v = a.type,
                      m = a.stateNode;
                    if (
                      (128 & a.flags) == 0 &&
                      (typeof v.getDerivedStateFromError == "function" ||
                        (m !== null &&
                          typeof m.componentDidCatch == "function" &&
                          (qi === null || !qi.has(m))))
                    ) {
                      (a.flags |= 65536),
                        (e &= -e),
                        (a.lanes |= e),
                        S0(a, Hx(a, o, e));
                      break e;
                    }
                }
                a = a.return;
              } while (a !== null);
            }
            a_(t);
          } catch (x) {
            (e = x), Pt === t && t !== null && (Pt = t = t.return);
            continue;
          }
          break;
        }
      }
      function r_() {
        var n = rh.current;
        return (rh.current = nh), n === null ? nh : n;
      }
      function Gm() {
        (Ut !== 0 && Ut !== 3 && Ut !== 2) || (Ut = 4),
          Wt === null ||
            ((268435455 & Na) == 0 && (268435455 & kh) == 0) ||
            Ni(Wt, Kt);
      }
      function sh(n, e) {
        var t = je;
        je |= 2;
        var r = r_();
        for ((Wt === n && Kt === e) || ((Oi = null), Da(n, e)); ; )
          try {
            O2();
            break;
          } catch (i) {
            n_(n, i);
          }
        if ((Tm(), (je = t), (rh.current = r), Pt !== null))
          throw Error(pe(261));
        return (Wt = null), (Kt = 0), Ut;
      }
      function O2() {
        for (; Pt !== null; ) i_(Pt);
      }
      function z2() {
        for (; Pt !== null && !Pw(); ) i_(Pt);
      }
      function i_(n) {
        var e = e_(n.alternate, n, Vn);
        (n.memoizedProps = n.pendingProps),
          e === null ? a_(n) : (Pt = e),
          (Om.current = null);
      }
      function a_(n) {
        var e = n;
        do {
          var t = e.alternate;
          if (((n = e.return), (32768 & e.flags) == 0)) {
            if ((t = L2(t, e, Vn)) !== null) return void (Pt = t);
          } else {
            if ((t = D2(t, e)) !== null)
              return (t.flags &= 32767), void (Pt = t);
            if (n === null) return (Ut = 6), void (Pt = null);
            (n.flags |= 32768), (n.subtreeFlags = 0), (n.deletions = null);
          }
          if ((e = e.sibling) !== null) return void (Pt = e);
          Pt = e = n;
        } while (e !== null);
        Ut === 0 && (Ut = 5);
      }
      function vs(n, e, t) {
        var r = Ze,
          i = rr.transition;
        try {
          (rr.transition = null),
            (Ze = 1),
            (function (a, s, o, l) {
              do qs();
              while (Bi !== null);
              if ((6 & je) != 0) throw Error(pe(327));
              o = a.finishedWork;
              var u = a.finishedLanes;
              if (o === null) return null;
              if (
                ((a.finishedWork = null),
                (a.finishedLanes = 0),
                o === a.current)
              )
                throw Error(pe(177));
              (a.callbackNode = null), (a.callbackPriority = 0);
              var c = o.lanes | o.childLanes;
              if (
                ((function (f, g) {
                  var p = f.pendingLanes & ~g;
                  (f.pendingLanes = g),
                    (f.suspendedLanes = 0),
                    (f.pingedLanes = 0),
                    (f.expiredLanes &= g),
                    (f.mutableReadLanes &= g),
                    (f.entangledLanes &= g),
                    (g = f.entanglements);
                  var y = f.eventTimes;
                  for (f = f.expirationTimes; 0 < p; ) {
                    var v = 31 - wr(p),
                      m = 1 << v;
                    (g[v] = 0), (y[v] = -1), (f[v] = -1), (p &= ~m);
                  }
                })(a, c),
                a === Wt && ((Pt = Wt = null), (Kt = 0)),
                ((2064 & o.subtreeFlags) == 0 && (2064 & o.flags) == 0) ||
                  xu ||
                  ((xu = !0),
                  o_(fm, function () {
                    return qs(), null;
                  })),
                (c = (15990 & o.flags) != 0),
                (15990 & o.subtreeFlags) != 0 || c)
              ) {
                (c = rr.transition), (rr.transition = null);
                var h = Ze;
                Ze = 1;
                var d = je;
                (je |= 4),
                  (Om.current = null),
                  (function (f, g) {
                    if (((_d = hc), xm((f = rx())))) {
                      if ("selectionStart" in f)
                        var p = {
                          start: f.selectionStart,
                          end: f.selectionEnd,
                        };
                      else
                        e: {
                          var y =
                            (p =
                              ((p = f.ownerDocument) && p.defaultView) ||
                              window).getSelection && p.getSelection();
                          if (y && y.rangeCount !== 0) {
                            p = y.anchorNode;
                            var v = y.anchorOffset,
                              m = y.focusNode;
                            y = y.focusOffset;
                            try {
                              p.nodeType, m.nodeType;
                            } catch {
                              p = null;
                              break e;
                            }
                            var x = 0,
                              _ = -1,
                              b = -1,
                              w = 0,
                              M = 0,
                              C = f,
                              N = null;
                            t: for (;;) {
                              for (
                                var G;
                                C !== p ||
                                  (v !== 0 && C.nodeType !== 3) ||
                                  (_ = x + v),
                                  C !== m ||
                                    (y !== 0 && C.nodeType !== 3) ||
                                    (b = x + y),
                                  C.nodeType === 3 && (x += C.nodeValue.length),
                                  (G = C.firstChild) !== null;

                              )
                                (N = C), (C = G);
                              for (;;) {
                                if (C === f) break t;
                                if (
                                  (N === p && ++w === v && (_ = x),
                                  N === m && ++M === y && (b = x),
                                  (G = C.nextSibling) !== null)
                                )
                                  break;
                                N = (C = N).parentNode;
                              }
                              C = G;
                            }
                            p =
                              _ === -1 || b === -1
                                ? null
                                : { start: _, end: b };
                          } else p = null;
                        }
                      p = p || { start: 0, end: 0 };
                    } else p = null;
                    for (
                      bd = { focusedElem: f, selectionRange: p },
                        hc = !1,
                        be = g;
                      be !== null;

                    )
                      if (
                        ((f = (g = be).child),
                        (1028 & g.subtreeFlags) != 0 && f !== null)
                      )
                        (f.return = g), (be = f);
                      else
                        for (; be !== null; ) {
                          g = be;
                          try {
                            var U = g.alternate;
                            if ((1024 & g.flags) != 0)
                              switch (g.tag) {
                                case 0:
                                case 11:
                                case 15:
                                case 5:
                                case 6:
                                case 4:
                                case 17:
                                  break;
                                case 1:
                                  if (U !== null) {
                                    var I = U.memoizedProps,
                                      F = U.memoizedState,
                                      T = g.stateNode,
                                      O = T.getSnapshotBeforeUpdate(
                                        g.elementType === g.type
                                          ? I
                                          : _r(g.type, I),
                                        F
                                      );
                                    T.__reactInternalSnapshotBeforeUpdate = O;
                                  }
                                  break;
                                case 3:
                                  var k = g.stateNode.containerInfo;
                                  k.nodeType === 1
                                    ? (k.textContent = "")
                                    : k.nodeType === 9 &&
                                      k.documentElement &&
                                      k.removeChild(k.documentElement);
                                  break;
                                default:
                                  throw Error(pe(163));
                              }
                          } catch (P) {
                            gt(g, g.return, P);
                          }
                          if ((f = g.sibling) !== null) {
                            (f.return = g.return), (be = f);
                            break;
                          }
                          be = g.return;
                        }
                    (U = V0), (V0 = !1);
                  })(a, o),
                  Jx(o, a),
                  h2(bd),
                  (hc = !!_d),
                  (bd = _d = null),
                  (a.current = o),
                  I2(o),
                  Lw(),
                  (je = d),
                  (Ze = h),
                  (rr.transition = c);
              } else a.current = o;
              if (
                (xu && ((xu = !1), (Bi = a), (ah = u)),
                (c = a.pendingLanes) === 0 && (qi = null),
                (function (f) {
                  if (Wr && typeof Wr.onCommitFiberRoot == "function")
                    try {
                      Wr.onCommitFiberRoot(
                        Mh,
                        f,
                        void 0,
                        (128 & f.current.flags) == 128
                      );
                    } catch {}
                })(o.stateNode),
                kn(a, Tt()),
                s !== null)
              )
                for (l = a.onRecoverableError, o = 0; o < s.length; o++)
                  (u = s[o]),
                    l(u.value, { componentStack: u.stack, digest: u.digest });
              if (ih) throw ((ih = !1), (a = gp), (gp = null), a);
              (1 & ah) != 0 && a.tag !== 0 && qs(),
                (1 & (c = a.pendingLanes)) != 0
                  ? a === vp
                    ? il++
                    : ((il = 0), (vp = a))
                  : (il = 0),
                na();
            })(n, e, t, r);
        } finally {
          (rr.transition = i), (Ze = r);
        }
        return null;
      }
      function qs() {
        if (Bi !== null) {
          var n = qy(ah),
            e = rr.transition,
            t = Ze;
          try {
            if (((rr.transition = null), (Ze = 16 > n ? 16 : n), Bi === null))
              var r = !1;
            else {
              if (((n = Bi), (Bi = null), (ah = 0), (6 & je) != 0))
                throw Error(pe(331));
              var i = je;
              for (je |= 4, be = n.current; be !== null; ) {
                var a = be,
                  s = a.child;
                if ((16 & be.flags) != 0) {
                  var o = a.deletions;
                  if (o !== null) {
                    for (var l = 0; l < o.length; l++) {
                      var u = o[l];
                      for (be = u; be !== null; ) {
                        var c = be;
                        switch (c.tag) {
                          case 0:
                          case 11:
                          case 15:
                            nl(8, c, a);
                        }
                        var h = c.child;
                        if (h !== null) (h.return = c), (be = h);
                        else
                          for (; be !== null; ) {
                            var d = (c = be).sibling,
                              f = c.return;
                            if ((Yx(c), c === u)) {
                              be = null;
                              break;
                            }
                            if (d !== null) {
                              (d.return = f), (be = d);
                              break;
                            }
                            be = f;
                          }
                      }
                    }
                    var g = a.alternate;
                    if (g !== null) {
                      var p = g.child;
                      if (p !== null) {
                        g.child = null;
                        do {
                          var y = p.sibling;
                          (p.sibling = null), (p = y);
                        } while (p !== null);
                      }
                    }
                    be = a;
                  }
                }
                if ((2064 & a.subtreeFlags) != 0 && s !== null)
                  (s.return = a), (be = s);
                else
                  e: for (; be !== null; ) {
                    if ((2048 & (a = be).flags) != 0)
                      switch (a.tag) {
                        case 0:
                        case 11:
                        case 15:
                          nl(9, a, a.return);
                      }
                    var v = a.sibling;
                    if (v !== null) {
                      (v.return = a.return), (be = v);
                      break e;
                    }
                    be = a.return;
                  }
              }
              var m = n.current;
              for (be = m; be !== null; ) {
                var x = (s = be).child;
                if ((2064 & s.subtreeFlags) != 0 && x !== null)
                  (x.return = s), (be = x);
                else
                  e: for (s = m; be !== null; ) {
                    if ((2048 & (o = be).flags) != 0)
                      try {
                        switch (o.tag) {
                          case 0:
                          case 11:
                          case 15:
                            Dh(9, o);
                        }
                      } catch (b) {
                        gt(o, o.return, b);
                      }
                    if (o === s) {
                      be = null;
                      break e;
                    }
                    var _ = o.sibling;
                    if (_ !== null) {
                      (_.return = o.return), (be = _);
                      break e;
                    }
                    be = o.return;
                  }
              }
              if (
                ((je = i),
                na(),
                Wr && typeof Wr.onPostCommitFiberRoot == "function")
              )
                try {
                  Wr.onPostCommitFiberRoot(Mh, n);
                } catch {}
              r = !0;
            }
            return r;
          } finally {
            (Ze = t), (rr.transition = e);
          }
        }
        return !1;
      }
      function Z0(n, e, t) {
        (n = Xi(n, (e = Gx(0, (e = Qs(t, e)), 1)), 1)),
          (e = _n()),
          n !== null && (jl(n, 1, e), kn(n, e));
      }
      function gt(n, e, t) {
        if (n.tag === 3) Z0(n, n, t);
        else
          for (; e !== null; ) {
            if (e.tag === 3) {
              Z0(e, n, t);
              break;
            }
            if (e.tag === 1) {
              var r = e.stateNode;
              if (
                typeof e.type.getDerivedStateFromError == "function" ||
                (typeof r.componentDidCatch == "function" &&
                  (qi === null || !qi.has(r)))
              ) {
                (e = Xi(e, (n = Hx(e, (n = Qs(t, n)), 1)), 1)),
                  (n = _n()),
                  e !== null && (jl(e, 1, n), kn(e, n));
                break;
              }
            }
            e = e.return;
          }
      }
      function N2(n, e, t) {
        var r = n.pingCache;
        r !== null && r.delete(e),
          (e = _n()),
          (n.pingedLanes |= n.suspendedLanes & t),
          Wt === n &&
            (Kt & t) === t &&
            (Ut === 4 ||
            (Ut === 3 && (130023424 & Kt) === Kt && 500 > Tt() - Nm)
              ? Da(n, 0)
              : (zm |= t)),
          kn(n, e);
      }
      function s_(n, e) {
        e === 0 &&
          ((1 & n.mode) == 0
            ? (e = 1)
            : ((e = ld), (130023424 & (ld <<= 1)) == 0 && (ld = 4194304)));
        var t = _n();
        (n = pi(n, e)) !== null && (jl(n, e, t), kn(n, t));
      }
      function F2(n) {
        var e = n.memoizedState,
          t = 0;
        e !== null && (t = e.retryLane), s_(n, t);
      }
      function B2(n, e) {
        var t = 0;
        switch (n.tag) {
          case 13:
            var r = n.stateNode,
              i = n.memoizedState;
            i !== null && (t = i.retryLane);
            break;
          case 19:
            r = n.stateNode;
            break;
          default:
            throw Error(pe(314));
        }
        r !== null && r.delete(e), s_(n, t);
      }
      function o_(n, e) {
        return Vy(n, e);
      }
      function G2(n, e, t, r) {
        (this.tag = n),
          (this.key = t),
          (this.sibling =
            this.child =
            this.return =
            this.stateNode =
            this.type =
            this.elementType =
              null),
          (this.index = 0),
          (this.ref = null),
          (this.pendingProps = e),
          (this.dependencies =
            this.memoizedState =
            this.updateQueue =
            this.memoizedProps =
              null),
          (this.mode = r),
          (this.subtreeFlags = this.flags = 0),
          (this.deletions = null),
          (this.childLanes = this.lanes = 0),
          (this.alternate = null);
      }
      function ir(n, e, t, r) {
        return new G2(n, e, t, r);
      }
      function Hm(n) {
        return !(!(n = n.prototype) || !n.isReactComponent);
      }
      function Yi(n, e) {
        var t = n.alternate;
        return (
          t === null
            ? (((t = ir(n.tag, e, n.key, n.mode)).elementType = n.elementType),
              (t.type = n.type),
              (t.stateNode = n.stateNode),
              (t.alternate = n),
              (n.alternate = t))
            : ((t.pendingProps = e),
              (t.type = n.type),
              (t.flags = 0),
              (t.subtreeFlags = 0),
              (t.deletions = null)),
          (t.flags = 14680064 & n.flags),
          (t.childLanes = n.childLanes),
          (t.lanes = n.lanes),
          (t.child = n.child),
          (t.memoizedProps = n.memoizedProps),
          (t.memoizedState = n.memoizedState),
          (t.updateQueue = n.updateQueue),
          (e = n.dependencies),
          (t.dependencies =
            e === null
              ? null
              : { lanes: e.lanes, firstContext: e.firstContext }),
          (t.sibling = n.sibling),
          (t.index = n.index),
          (t.ref = n.ref),
          t
        );
      }
      function wc(n, e, t, r, i, a) {
        var s = 2;
        if (((r = n), typeof n == "function")) Hm(n) && (s = 1);
        else if (typeof n == "string") s = 5;
        else
          e: switch (n) {
            case Es:
              return ka(t.children, i, a, e);
            case lm:
              (s = 8), (i |= 8);
              break;
            case Lf:
              return (
                ((n = ir(12, t, e, 2 | i)).elementType = Lf), (n.lanes = a), n
              );
            case Df:
              return ((n = ir(13, t, e, i)).elementType = Df), (n.lanes = a), n;
            case kf:
              return ((n = ir(19, t, e, i)).elementType = kf), (n.lanes = a), n;
            case Ey:
              return oh(t, i, a, e);
            default:
              if (typeof n == "object" && n !== null)
                switch (n.$$typeof) {
                  case My:
                    s = 10;
                    break e;
                  case Ty:
                    s = 9;
                    break e;
                  case um:
                    s = 11;
                    break e;
                  case cm:
                    s = 14;
                    break e;
                  case Ii:
                    (s = 16), (r = null);
                    break e;
                }
              throw Error(pe(130, n == null ? n : typeof n, ""));
          }
        return (
          ((e = ir(s, t, e, i)).elementType = n), (e.type = r), (e.lanes = a), e
        );
      }
      function ka(n, e, t, r) {
        return ((n = ir(7, n, r, e)).lanes = t), n;
      }
      function oh(n, e, t, r) {
        return (
          ((n = ir(22, n, r, e)).elementType = Ey),
          (n.lanes = t),
          (n.stateNode = { isHidden: !1 }),
          n
        );
      }
      function Dd(n, e, t) {
        return ((n = ir(6, n, null, e)).lanes = t), n;
      }
      function kd(n, e, t) {
        return (
          ((e = ir(4, n.children !== null ? n.children : [], n.key, e)).lanes =
            t),
          (e.stateNode = {
            containerInfo: n.containerInfo,
            pendingChildren: null,
            implementation: n.implementation,
          }),
          e
        );
      }
      function H2(n, e, t, r, i) {
        (this.tag = e),
          (this.containerInfo = n),
          (this.finishedWork =
            this.pingCache =
            this.current =
            this.pendingChildren =
              null),
          (this.timeoutHandle = -1),
          (this.callbackNode = this.pendingContext = this.context = null),
          (this.callbackPriority = 0),
          (this.eventTimes = ud(0)),
          (this.expirationTimes = ud(-1)),
          (this.entangledLanes =
            this.finishedLanes =
            this.mutableReadLanes =
            this.expiredLanes =
            this.pingedLanes =
            this.suspendedLanes =
            this.pendingLanes =
              0),
          (this.entanglements = ud(0)),
          (this.identifierPrefix = r),
          (this.onRecoverableError = i),
          (this.mutableSourceEagerHydrationData = null);
      }
      function Vm(n, e, t, r, i, a, s, o, l) {
        return (
          (n = new H2(n, e, t, o, l)),
          e === 1 ? ((e = 1), a === !0 && (e |= 8)) : (e = 0),
          (a = ir(3, null, null, e)),
          (n.current = a),
          (a.stateNode = n),
          (a.memoizedState = {
            element: r,
            isDehydrated: t,
            cache: null,
            transitions: null,
            pendingSuspenseBoundaries: null,
          }),
          Am(a),
          n
        );
      }
      function V2(n, e, t) {
        var r =
          3 < arguments.length && arguments[3] !== void 0 ? arguments[3] : null;
        return {
          $$typeof: Ts,
          key: r == null ? null : "" + r,
          children: n,
          containerInfo: e,
          implementation: t,
        };
      }
      function l_(n) {
        if (!n) return Qi;
        e: {
          if (Ha((n = n._reactInternals)) !== n || n.tag !== 1)
            throw Error(pe(170));
          var e = n;
          do {
            switch (e.tag) {
              case 3:
                e = e.stateNode.context;
                break e;
              case 1:
                if (Xn(e.type)) {
                  e = e.stateNode.__reactInternalMemoizedMergedChildContext;
                  break e;
                }
            }
            e = e.return;
          } while (e !== null);
          throw Error(pe(171));
        }
        if (n.tag === 1) {
          var t = n.type;
          if (Xn(t)) return dx(n, t, e);
        }
        return e;
      }
      function u_(n, e, t, r, i, a, s, o, l) {
        return (
          ((n = Vm(t, r, !0, n, 0, a, 0, o, l)).context = l_(null)),
          (t = n.current),
          ((a = mi((r = _n()), (i = $i(t)))).callback = e != null ? e : null),
          Xi(t, a, i),
          (n.current.lanes = i),
          jl(n, i, r),
          kn(n, r),
          n
        );
      }
      function lh(n, e, t, r) {
        var i = e.current,
          a = _n(),
          s = $i(i);
        return (
          (t = l_(t)),
          e.context === null ? (e.context = t) : (e.pendingContext = t),
          ((e = mi(a, s)).payload = { element: n }),
          (r = r === void 0 ? null : r) !== null && (e.callback = r),
          (n = Xi(i, e, s)) !== null && (Sr(n, i, s, a), gc(n, i, s)),
          s
        );
      }
      function _u(n) {
        return (n = n.current).child ? (n.child.tag, n.child.stateNode) : null;
      }
      function K0(n, e) {
        if ((n = n.memoizedState) !== null && n.dehydrated !== null) {
          var t = n.retryLane;
          n.retryLane = t !== 0 && t < e ? t : e;
        }
      }
      function Id(n, e) {
        K0(n, e), (n = n.alternate) && K0(n, e);
      }
      e_ = function (n, e, t) {
        if (n !== null)
          if (n.memoizedProps !== e.pendingProps || Dn.current) Rn = !0;
          else {
            if ((n.lanes & t) == 0 && (128 & e.flags) == 0)
              return (
                (Rn = !1),
                (function (h, d, f) {
                  switch (d.tag) {
                    case 3:
                      N0(d), Zs();
                      break;
                    case 5:
                      A0(d);
                      break;
                    case 1:
                      Xn(d.type) && mc(d);
                      break;
                    case 4:
                      lp(d, d.stateNode.containerInfo);
                      break;
                    case 10:
                      var g = d.type._context,
                        p = d.memoizedProps.value;
                      it(Kc, g._currentValue), (g._currentValue = p);
                      break;
                    case 13:
                      if ((g = d.memoizedState) !== null)
                        return g.dehydrated !== null
                          ? (it(vt, 1 & vt.current), (d.flags |= 128), null)
                          : (f & d.child.childLanes) != 0
                          ? B0(h, d, f)
                          : (it(vt, 1 & vt.current),
                            (h = li(h, d, f)) !== null ? h.sibling : null);
                      it(vt, 1 & vt.current);
                      break;
                    case 19:
                      if (
                        ((g = (f & d.childLanes) != 0), (128 & h.flags) != 0)
                      ) {
                        if (g) return H0(h, d, f);
                        d.flags |= 128;
                      }
                      if (
                        ((p = d.memoizedState) !== null &&
                          ((p.rendering = null),
                          (p.tail = null),
                          (p.lastEffect = null)),
                        it(vt, vt.current),
                        g)
                      )
                        break;
                      return null;
                    case 22:
                    case 23:
                      return (d.lanes = 0), O0(h, d, f);
                  }
                  return li(h, d, f);
                })(n, e, t)
              );
            Rn = (131072 & n.flags) != 0;
          }
        else (Rn = !1), ut && (1048576 & e.flags) != 0 && fx(e, Zc, e.index);
        switch (((e.lanes = 0), e.tag)) {
          case 2:
            var r = e.type;
            xc(n, e), (n = e.pendingProps);
            var i = Ys(e, cn.current);
            Xs(e, t), (i = Dm(null, e, r, n, i, t));
            var a = km();
            return (
              (e.flags |= 1),
              typeof i == "object" &&
              i !== null &&
              typeof i.render == "function" &&
              i.$$typeof === void 0
                ? ((e.tag = 1),
                  (e.memoizedState = null),
                  (e.updateQueue = null),
                  Xn(r) ? ((a = !0), mc(e)) : (a = !1),
                  (e.memoizedState =
                    i.state !== null && i.state !== void 0 ? i.state : null),
                  Am(e),
                  (i.updater = Ph),
                  (e.stateNode = i),
                  (i._reactInternals = e),
                  op(e, r, n, t),
                  (e = hp(null, e, r, !0, a, t)))
                : ((e.tag = 0),
                  ut && a && bm(e),
                  Cn(null, e, i, t),
                  (e = e.child)),
              e
            );
          case 16:
            r = e.elementType;
            e: {
              switch (
                (xc(n, e),
                (n = e.pendingProps),
                (r = (i = r._init)(r._payload)),
                (e.type = r),
                (i = e.tag =
                  (function (h) {
                    if (typeof h == "function") return Hm(h) ? 1 : 0;
                    if (h != null) {
                      if ((h = h.$$typeof) === um) return 11;
                      if (h === cm) return 14;
                    }
                    return 2;
                  })(r)),
                (n = _r(r, n)),
                i)
              ) {
                case 0:
                  e = cp(null, e, r, n, t);
                  break e;
                case 1:
                  e = z0(null, e, r, n, t);
                  break e;
                case 11:
                  e = I0(null, e, r, n, t);
                  break e;
                case 14:
                  e = U0(null, e, r, _r(r.type, n), t);
                  break e;
              }
              throw Error(pe(306, r, ""));
            }
            return e;
          case 0:
            return (
              (r = e.type),
              (i = e.pendingProps),
              cp(n, e, r, (i = e.elementType === r ? i : _r(r, i)), t)
            );
          case 1:
            return (
              (r = e.type),
              (i = e.pendingProps),
              z0(n, e, r, (i = e.elementType === r ? i : _r(r, i)), t)
            );
          case 3:
            e: {
              if ((N0(e), n === null)) throw Error(pe(387));
              (r = e.pendingProps),
                (i = (a = e.memoizedState).element),
                vx(n, e),
                Qc(e, r, null, t);
              var s = e.memoizedState;
              if (((r = s.element), a.isDehydrated)) {
                if (
                  ((a = {
                    element: r,
                    isDehydrated: !1,
                    cache: s.cache,
                    pendingSuspenseBoundaries: s.pendingSuspenseBoundaries,
                    transitions: s.transitions,
                  }),
                  (e.updateQueue.baseState = a),
                  (e.memoizedState = a),
                  256 & e.flags)
                ) {
                  e = F0(n, e, r, t, (i = Qs(Error(pe(423)), e)));
                  break e;
                }
                if (r !== i) {
                  e = F0(n, e, r, t, (i = Qs(Error(pe(424)), e)));
                  break e;
                }
                for (
                  jn = ji(e.stateNode.containerInfo.firstChild),
                    qn = e,
                    ut = !0,
                    br = null,
                    t = bx(e, null, r, t),
                    e.child = t;
                  t;

                )
                  (t.flags = (-3 & t.flags) | 4096), (t = t.sibling);
              } else {
                if ((Zs(), r === i)) {
                  e = li(n, e, t);
                  break e;
                }
                Cn(n, e, r, t);
              }
              e = e.child;
            }
            return e;
          case 5:
            return (
              A0(e),
              n === null && ip(e),
              (r = e.type),
              (i = e.pendingProps),
              (a = n !== null ? n.memoizedProps : null),
              (s = i.children),
              Qf(r, i) ? (s = null) : a !== null && Qf(r, a) && (e.flags |= 32),
              Wx(n, e),
              Cn(n, e, s, t),
              e.child
            );
          case 6:
            return n === null && ip(e), null;
          case 13:
            return B0(n, e, t);
          case 4:
            return (
              lp(e, e.stateNode.containerInfo),
              (r = e.pendingProps),
              n === null ? (e.child = Ks(e, null, r, t)) : Cn(n, e, r, t),
              e.child
            );
          case 11:
            return (
              (r = e.type),
              (i = e.pendingProps),
              I0(n, e, r, (i = e.elementType === r ? i : _r(r, i)), t)
            );
          case 7:
            return Cn(n, e, e.pendingProps, t), e.child;
          case 8:
          case 12:
            return Cn(n, e, e.pendingProps.children, t), e.child;
          case 10:
            e: {
              if (
                ((r = e.type._context),
                (i = e.pendingProps),
                (a = e.memoizedProps),
                (s = i.value),
                it(Kc, r._currentValue),
                (r._currentValue = s),
                a !== null)
              )
                if (Tr(a.value, s)) {
                  if (a.children === i.children && !Dn.current) {
                    e = li(n, e, t);
                    break e;
                  }
                } else
                  for ((a = e.child) !== null && (a.return = e); a !== null; ) {
                    var o = a.dependencies;
                    if (o !== null) {
                      s = a.child;
                      for (var l = o.firstContext; l !== null; ) {
                        if (l.context === r) {
                          if (a.tag === 1) {
                            (l = mi(-1, t & -t)).tag = 2;
                            var u = a.updateQueue;
                            if (u !== null) {
                              var c = (u = u.shared).pending;
                              c === null
                                ? (l.next = l)
                                : ((l.next = c.next), (c.next = l)),
                                (u.pending = l);
                            }
                          }
                          (a.lanes |= t),
                            (l = a.alternate) !== null && (l.lanes |= t),
                            ap(a.return, t, e),
                            (o.lanes |= t);
                          break;
                        }
                        l = l.next;
                      }
                    } else if (a.tag === 10)
                      s = a.type === e.type ? null : a.child;
                    else if (a.tag === 18) {
                      if ((s = a.return) === null) throw Error(pe(341));
                      (s.lanes |= t),
                        (o = s.alternate) !== null && (o.lanes |= t),
                        ap(s, t, e),
                        (s = a.sibling);
                    } else s = a.child;
                    if (s !== null) s.return = a;
                    else
                      for (s = a; s !== null; ) {
                        if (s === e) {
                          s = null;
                          break;
                        }
                        if ((a = s.sibling) !== null) {
                          (a.return = s.return), (s = a);
                          break;
                        }
                        s = s.return;
                      }
                    a = s;
                  }
              Cn(n, e, i.children, t), (e = e.child);
            }
            return e;
          case 9:
            return (
              (i = e.type),
              (r = e.pendingProps.children),
              Xs(e, t),
              (r = r((i = ur(i)))),
              (e.flags |= 1),
              Cn(n, e, r, t),
              e.child
            );
          case 14:
            return (
              (i = _r((r = e.type), e.pendingProps)),
              U0(n, e, r, (i = _r(r.type, i)), t)
            );
          case 15:
            return Vx(n, e, e.type, e.pendingProps, t);
          case 17:
            return (
              (r = e.type),
              (i = e.pendingProps),
              (i = e.elementType === r ? i : _r(r, i)),
              xc(n, e),
              (e.tag = 1),
              Xn(r) ? ((n = !0), mc(e)) : (n = !1),
              Xs(e, t),
              xx(e, r, i),
              op(e, r, i, t),
              hp(null, e, r, !0, n, t)
            );
          case 19:
            return H0(n, e, t);
          case 22:
            return O0(n, e, t);
        }
        throw Error(pe(156, e.tag));
      };
      var J0 =
        typeof reportError == "function"
          ? reportError
          : function (n) {
              console.error(n);
            };
      function _p(n) {
        this._internalRoot = n;
      }
      function Sc(n) {
        this._internalRoot = n;
      }
      function Ud(n) {
        return !(
          !n ||
          (n.nodeType !== 1 && n.nodeType !== 9 && n.nodeType !== 11)
        );
      }
      function bu(n) {
        return !(
          !n ||
          (n.nodeType !== 1 &&
            n.nodeType !== 9 &&
            n.nodeType !== 11 &&
            (n.nodeType !== 8 ||
              n.nodeValue !== " react-mount-point-unstable "))
        );
      }
      function Q0() {}
      function wu(n, e, t, r, i) {
        var a = t._reactRootContainer;
        if (a) {
          var s = a;
          if (typeof i == "function") {
            var o = i;
            i = function () {
              var l = _u(s);
              o.call(l);
            };
          }
          lh(e, s, n, i);
        } else
          s = (function (l, u, c, h, d) {
            if (d) {
              if (typeof h == "function") {
                var f = h;
                h = function () {
                  var v = _u(g);
                  f.call(v);
                };
              }
              var g = u_(u, h, l, 0, null, !1, 0, "", Q0);
              return (
                (l._reactRootContainer = g),
                (l[fi] = g.current),
                Sl(l.nodeType === 8 ? l.parentNode : l),
                La(),
                g
              );
            }
            for (; (d = l.lastChild); ) l.removeChild(d);
            if (typeof h == "function") {
              var p = h;
              h = function () {
                var v = _u(y);
                p.call(v);
              };
            }
            var y = Vm(l, 0, !1, null, 0, !1, 0, "", Q0);
            return (
              (l._reactRootContainer = y),
              (l[fi] = y.current),
              Sl(l.nodeType === 8 ? l.parentNode : l),
              La(function () {
                lh(u, y, c, h);
              }),
              y
            );
          })(t, e, n, i, r);
        return _u(s);
      }
      (Sc.prototype.render = _p.prototype.render =
        function (n) {
          var e = this._internalRoot;
          if (e === null) throw Error(pe(409));
          lh(n, e, null, null);
        }),
        (Sc.prototype.unmount = _p.prototype.unmount =
          function () {
            var n = this._internalRoot;
            if (n !== null) {
              this._internalRoot = null;
              var e = n.containerInfo;
              La(function () {
                lh(null, n, null, null);
              }),
                (e[fi] = null);
            }
          }),
        (Sc.prototype.unstable_scheduleHydration = function (n) {
          if (n) {
            var e = qg();
            n = { blockedOn: null, target: n, priority: e };
            for (
              var t = 0;
              t < zi.length && e !== 0 && e < zi[t].priority;
              t++
            );
            zi.splice(t, 0, n), t === 0 && Ky(n);
          }
        }),
        ($y = function (n) {
          switch (n.tag) {
            case 3:
              var e = n.stateNode;
              if (e.current.memoizedState.isDehydrated) {
                var t = Yo(e.pendingLanes);
                t !== 0 &&
                  (pm(e, 1 | t),
                  kn(e, Tt()),
                  (6 & je) == 0 && ((eo = Tt() + 500), na()));
              }
              break;
            case 13:
              La(function () {
                var r = pi(n, 1);
                if (r !== null) {
                  var i = _n();
                  Sr(r, n, 1, i);
                }
              }),
                Id(n, 1);
          }
        }),
        (mm = function (n) {
          if (n.tag === 13) {
            var e = pi(n, 134217728);
            e !== null && Sr(e, n, 134217728, _n()), Id(n, 134217728);
          }
        }),
        (Yy = function (n) {
          if (n.tag === 13) {
            var e = $i(n),
              t = pi(n, e);
            t !== null && Sr(t, n, e, _n()), Id(n, e);
          }
        }),
        (qg = function () {
          return Ze;
        }),
        (Zy = function (n, e) {
          var t = Ze;
          try {
            return (Ze = n), e();
          } finally {
            Ze = t;
          }
        }),
        (Vf = function (n, e, t) {
          switch (e) {
            case "input":
              if ((Of(n, t), (e = t.name), t.type === "radio" && e != null)) {
                for (t = n; t.parentNode; ) t = t.parentNode;
                for (
                  t = t.querySelectorAll(
                    "input[name=" + JSON.stringify("" + e) + '][type="radio"]'
                  ),
                    e = 0;
                  e < t.length;
                  e++
                ) {
                  var r = t[e];
                  if (r !== n && r.form === n.form) {
                    var i = Ah(r);
                    if (!i) throw Error(pe(90));
                    Ay(r), Of(r, i);
                  }
                }
              }
              break;
            case "textarea":
              Py(n, t);
              break;
            case "select":
              (e = t.value) != null && Hs(n, !!t.multiple, e, !1);
          }
        }),
        (zy = Fm),
        (Ny = La);
      var ev,
        W2 = { usingClientEntryPoint: !1, Events: [ql, Rs, Ah, Uy, Oy, Fm] },
        zo = {
          findFiberByHostInstance: Ca,
          bundleType: 0,
          version: "18.2.0",
          rendererPackageName: "react-dom",
        },
        j2 = {
          bundleType: zo.bundleType,
          version: zo.version,
          rendererPackageName: zo.rendererPackageName,
          rendererConfig: zo.rendererConfig,
          overrideHookState: null,
          overrideHookStateDeletePath: null,
          overrideHookStateRenamePath: null,
          overrideProps: null,
          overridePropsDeletePath: null,
          overridePropsRenamePath: null,
          setErrorHandler: null,
          setSuspenseHandler: null,
          scheduleUpdate: null,
          currentDispatcherRef: bi.ReactCurrentDispatcher,
          findHostInstanceByFiber: function (n) {
            return (n = Gy(n)) === null ? null : n.stateNode;
          },
          findFiberByHostInstance:
            zo.findFiberByHostInstance ||
            function () {
              return null;
            },
          findHostInstancesForRefresh: null,
          scheduleRefresh: null,
          scheduleRoot: null,
          setRefreshHandler: null,
          getCurrentFiber: null,
          reconcilerVersion: "18.2.0-next-9e3b772b8-20220608",
        };
      if (typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ < "u") {
        var Su = __REACT_DEVTOOLS_GLOBAL_HOOK__;
        if (!Su.isDisabled && Su.supportsFiber)
          try {
            (Mh = Su.inject(j2)), (Wr = Su);
          } catch {}
      }
      (Fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = W2),
        (Fn.createPortal = function (n, e) {
          var t =
            2 < arguments.length && arguments[2] !== void 0
              ? arguments[2]
              : null;
          if (!Ud(e)) throw Error(pe(200));
          return V2(n, e, null, t);
        }),
        (Fn.createRoot = function (n, e) {
          if (!Ud(n)) throw Error(pe(299));
          var t = !1,
            r = "",
            i = J0;
          return (
            e != null &&
              (e.unstable_strictMode === !0 && (t = !0),
              e.identifierPrefix !== void 0 && (r = e.identifierPrefix),
              e.onRecoverableError !== void 0 && (i = e.onRecoverableError)),
            (e = Vm(n, 1, !1, null, 0, t, 0, r, i)),
            (n[fi] = e.current),
            Sl(n.nodeType === 8 ? n.parentNode : n),
            new _p(e)
          );
        }),
        (Fn.findDOMNode = function (n) {
          if (n == null) return null;
          if (n.nodeType === 1) return n;
          var e = n._reactInternals;
          if (e === void 0)
            throw typeof n.render == "function"
              ? Error(pe(188))
              : ((n = Object.keys(n).join(",")), Error(pe(268, n)));
          return (n = (n = Gy(e)) === null ? null : n.stateNode);
        }),
        (Fn.flushSync = function (n) {
          return La(n);
        }),
        (Fn.hydrate = function (n, e, t) {
          if (!bu(e)) throw Error(pe(200));
          return wu(null, n, e, !0, t);
        }),
        (Fn.hydrateRoot = function (n, e, t) {
          if (!Ud(n)) throw Error(pe(405));
          var r = (t != null && t.hydratedSources) || null,
            i = !1,
            a = "",
            s = J0;
          if (
            (t != null &&
              (t.unstable_strictMode === !0 && (i = !0),
              t.identifierPrefix !== void 0 && (a = t.identifierPrefix),
              t.onRecoverableError !== void 0 && (s = t.onRecoverableError)),
            (e = u_(e, null, n, 1, t != null ? t : null, i, 0, a, s)),
            (n[fi] = e.current),
            Sl(n),
            r)
          )
            for (n = 0; n < r.length; n++)
              (i = (i = (t = r[n])._getVersion)(t._source)),
                e.mutableSourceEagerHydrationData == null
                  ? (e.mutableSourceEagerHydrationData = [t, i])
                  : e.mutableSourceEagerHydrationData.push(t, i);
          return new Sc(e);
        }),
        (Fn.render = function (n, e, t) {
          if (!bu(e)) throw Error(pe(200));
          return wu(null, n, e, !1, t);
        }),
        (Fn.unmountComponentAtNode = function (n) {
          if (!bu(n)) throw Error(pe(40));
          return (
            !!n._reactRootContainer &&
            (La(function () {
              wu(null, null, n, !1, function () {
                (n._reactRootContainer = null), (n[fi] = null);
              });
            }),
            !0)
          );
        }),
        (Fn.unstable_batchedUpdates = Fm),
        (Fn.unstable_renderSubtreeIntoContainer = function (n, e, t, r) {
          if (!bu(t)) throw Error(pe(200));
          if (n == null || n._reactInternals === void 0) throw Error(pe(38));
          return wu(n, e, t, !1, r);
        }),
        (Fn.version = "18.2.0-next-9e3b772b8-20220608"),
        (ev = py),
        (function n() {
          if (
            typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ < "u" &&
            typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE == "function"
          )
            try {
              __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n);
            } catch (e) {
              console.error(e);
            }
        })(),
        (ev.exports = Fn);
      var tv = py.exports;
      (Af.createRoot = tv.createRoot), (Af.hydrateRoot = tv.hydrateRoot);
      var Zn = { exports: {} };
      Zn.exports = Wm;
      var c_ = (Zn.exports.isMobile = Wm);
      Zn.exports.default = Wm;
      const X2 =
          /(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,
        q2 = /CrOS/,
        $2 = /android|ipad|playbook|silk/i;
      function Wm(n) {
        n || (n = {});
        let e = n.ua;
        if (
          (e || typeof navigator > "u" || (e = navigator.userAgent),
          e &&
            e.headers &&
            typeof e.headers["user-agent"] == "string" &&
            (e = e.headers["user-agent"]),
          typeof e != "string")
        )
          return !1;
        let t = (X2.test(e) && !q2.test(e)) || (!!n.tablet && $2.test(e));
        return (
          !t &&
            n.tablet &&
            n.featureDetect &&
            navigator &&
            navigator.maxTouchPoints > 1 &&
            e.indexOf("Macintosh") !== -1 &&
            e.indexOf("Safari") !== -1 &&
            (t = !0),
          t
        );
      }
      /**
       * @license
       * Copyright 2010-2022 Three.js Authors
       * SPDX-License-Identifier: MIT
       */ const nv = 0,
        rv = 1,
        iv = 2,
        av = 0,
        Y2 = 1,
        sv = 2,
        Z2 = 3;
      class Yr {
        addEventListener(e, t) {
          this._listeners === void 0 && (this._listeners = {});
          const r = this._listeners;
          r[e] === void 0 && (r[e] = []),
            r[e].indexOf(t) === -1 && r[e].push(t);
        }
        hasEventListener(e, t) {
          if (this._listeners === void 0) return !1;
          const r = this._listeners;
          return r[e] !== void 0 && r[e].indexOf(t) !== -1;
        }
        removeEventListener(e, t) {
          if (this._listeners === void 0) return;
          const r = this._listeners[e];
          if (r !== void 0) {
            const i = r.indexOf(t);
            i !== -1 && r.splice(i, 1);
          }
        }
        dispatchEvent(e) {
          if (this._listeners === void 0) return;
          const t = this._listeners[e.type];
          if (t !== void 0) {
            e.target = this;
            const r = t.slice(0);
            for (let i = 0, a = r.length; i < a; i++) r[i].call(this, e);
            e.target = null;
          }
        }
      }
      const an = [
        "00",
        "01",
        "02",
        "03",
        "04",
        "05",
        "06",
        "07",
        "08",
        "09",
        "0a",
        "0b",
        "0c",
        "0d",
        "0e",
        "0f",
        "10",
        "11",
        "12",
        "13",
        "14",
        "15",
        "16",
        "17",
        "18",
        "19",
        "1a",
        "1b",
        "1c",
        "1d",
        "1e",
        "1f",
        "20",
        "21",
        "22",
        "23",
        "24",
        "25",
        "26",
        "27",
        "28",
        "29",
        "2a",
        "2b",
        "2c",
        "2d",
        "2e",
        "2f",
        "30",
        "31",
        "32",
        "33",
        "34",
        "35",
        "36",
        "37",
        "38",
        "39",
        "3a",
        "3b",
        "3c",
        "3d",
        "3e",
        "3f",
        "40",
        "41",
        "42",
        "43",
        "44",
        "45",
        "46",
        "47",
        "48",
        "49",
        "4a",
        "4b",
        "4c",
        "4d",
        "4e",
        "4f",
        "50",
        "51",
        "52",
        "53",
        "54",
        "55",
        "56",
        "57",
        "58",
        "59",
        "5a",
        "5b",
        "5c",
        "5d",
        "5e",
        "5f",
        "60",
        "61",
        "62",
        "63",
        "64",
        "65",
        "66",
        "67",
        "68",
        "69",
        "6a",
        "6b",
        "6c",
        "6d",
        "6e",
        "6f",
        "70",
        "71",
        "72",
        "73",
        "74",
        "75",
        "76",
        "77",
        "78",
        "79",
        "7a",
        "7b",
        "7c",
        "7d",
        "7e",
        "7f",
        "80",
        "81",
        "82",
        "83",
        "84",
        "85",
        "86",
        "87",
        "88",
        "89",
        "8a",
        "8b",
        "8c",
        "8d",
        "8e",
        "8f",
        "90",
        "91",
        "92",
        "93",
        "94",
        "95",
        "96",
        "97",
        "98",
        "99",
        "9a",
        "9b",
        "9c",
        "9d",
        "9e",
        "9f",
        "a0",
        "a1",
        "a2",
        "a3",
        "a4",
        "a5",
        "a6",
        "a7",
        "a8",
        "a9",
        "aa",
        "ab",
        "ac",
        "ad",
        "ae",
        "af",
        "b0",
        "b1",
        "b2",
        "b3",
        "b4",
        "b5",
        "b6",
        "b7",
        "b8",
        "b9",
        "ba",
        "bb",
        "bc",
        "bd",
        "be",
        "bf",
        "c0",
        "c1",
        "c2",
        "c3",
        "c4",
        "c5",
        "c6",
        "c7",
        "c8",
        "c9",
        "ca",
        "cb",
        "cc",
        "cd",
        "ce",
        "cf",
        "d0",
        "d1",
        "d2",
        "d3",
        "d4",
        "d5",
        "d6",
        "d7",
        "d8",
        "d9",
        "da",
        "db",
        "dc",
        "dd",
        "de",
        "df",
        "e0",
        "e1",
        "e2",
        "e3",
        "e4",
        "e5",
        "e6",
        "e7",
        "e8",
        "e9",
        "ea",
        "eb",
        "ec",
        "ed",
        "ee",
        "ef",
        "f0",
        "f1",
        "f2",
        "f3",
        "f4",
        "f5",
        "f6",
        "f7",
        "f8",
        "f9",
        "fa",
        "fb",
        "fc",
        "fd",
        "fe",
        "ff",
      ];
      let ov = 1234567;
      const al = Math.PI / 180,
        Dl = 180 / Math.PI;
      function Mr() {
        const n = (4294967295 * Math.random()) | 0,
          e = (4294967295 * Math.random()) | 0,
          t = (4294967295 * Math.random()) | 0,
          r = (4294967295 * Math.random()) | 0;
        return (
          an[255 & n] +
          an[(n >> 8) & 255] +
          an[(n >> 16) & 255] +
          an[(n >> 24) & 255] +
          "-" +
          an[255 & e] +
          an[(e >> 8) & 255] +
          "-" +
          an[((e >> 16) & 15) | 64] +
          an[(e >> 24) & 255] +
          "-" +
          an[(63 & t) | 128] +
          an[(t >> 8) & 255] +
          "-" +
          an[(t >> 16) & 255] +
          an[(t >> 24) & 255] +
          an[255 & r] +
          an[(r >> 8) & 255] +
          an[(r >> 16) & 255] +
          an[(r >> 24) & 255]
        ).toLowerCase();
      }
      function Gt(n, e, t) {
        return Math.max(e, Math.min(t, n));
      }
      function bp(n, e) {
        return ((n % e) + e) % e;
      }
      function sl(n, e, t) {
        return (1 - t) * n + t * e;
      }
      function wp(n) {
        return (n & (n - 1)) == 0 && n !== 0;
      }
      function h_(n) {
        return Math.pow(2, Math.ceil(Math.log(n) / Math.LN2));
      }
      function uh(n) {
        return Math.pow(2, Math.floor(Math.log(n) / Math.LN2));
      }
      function ui(n, e) {
        switch (e.constructor) {
          case Float32Array:
            return n;
          case Uint16Array:
            return n / 65535;
          case Uint8Array:
            return n / 255;
          case Int16Array:
            return Math.max(n / 32767, -1);
          case Int8Array:
            return Math.max(n / 127, -1);
          default:
            throw new Error("Invalid component type.");
        }
      }
      function et(n, e) {
        switch (e.constructor) {
          case Float32Array:
            return n;
          case Uint16Array:
            return Math.round(65535 * n);
          case Uint8Array:
            return Math.round(255 * n);
          case Int16Array:
            return Math.round(32767 * n);
          case Int8Array:
            return Math.round(127 * n);
          default:
            throw new Error("Invalid component type.");
        }
      }
      var Nr = Object.freeze({
        __proto__: null,
        DEG2RAD: al,
        RAD2DEG: Dl,
        generateUUID: Mr,
        clamp: Gt,
        euclideanModulo: bp,
        mapLinear: function (n, e, t, r, i) {
          return r + ((n - e) * (i - r)) / (t - e);
        },
        inverseLerp: function (n, e, t) {
          return n !== e ? (t - n) / (e - n) : 0;
        },
        lerp: sl,
        damp: function (n, e, t, r) {
          return sl(n, e, 1 - Math.exp(-t * r));
        },
        pingpong: function (n, e = 1) {
          return e - Math.abs(bp(n, 2 * e) - e);
        },
        smoothstep: function (n, e, t) {
          return n <= e
            ? 0
            : n >= t
            ? 1
            : (n = (n - e) / (t - e)) * n * (3 - 2 * n);
        },
        smootherstep: function (n, e, t) {
          return n <= e
            ? 0
            : n >= t
            ? 1
            : (n = (n - e) / (t - e)) * n * n * (n * (6 * n - 15) + 10);
        },
        randInt: function (n, e) {
          return n + Math.floor(Math.random() * (e - n + 1));
        },
        randFloat: function (n, e) {
          return n + Math.random() * (e - n);
        },
        randFloatSpread: function (n) {
          return n * (0.5 - Math.random());
        },
        seededRandom: function (n) {
          n !== void 0 && (ov = n);
          let e = (ov += 1831565813);
          return (
            (e = Math.imul(e ^ (e >>> 15), 1 | e)),
            (e ^= e + Math.imul(e ^ (e >>> 7), 61 | e)),
            ((e ^ (e >>> 14)) >>> 0) / 4294967296
          );
        },
        degToRad: function (n) {
          return n * al;
        },
        radToDeg: function (n) {
          return n * Dl;
        },
        isPowerOfTwo: wp,
        ceilPowerOfTwo: h_,
        floorPowerOfTwo: uh,
        setQuaternionFromProperEuler: function (n, e, t, r, i) {
          const a = Math.cos,
            s = Math.sin,
            o = a(t / 2),
            l = s(t / 2),
            u = a((e + r) / 2),
            c = s((e + r) / 2),
            h = a((e - r) / 2),
            d = s((e - r) / 2),
            f = a((r - e) / 2),
            g = s((r - e) / 2);
          switch (i) {
            case "XYX":
              n.set(o * c, l * h, l * d, o * u);
              break;
            case "YZY":
              n.set(l * d, o * c, l * h, o * u);
              break;
            case "ZXZ":
              n.set(l * h, l * d, o * c, o * u);
              break;
            case "XZX":
              n.set(o * c, l * g, l * f, o * u);
              break;
            case "YXY":
              n.set(l * f, o * c, l * g, o * u);
              break;
            case "ZYZ":
              n.set(l * g, l * f, o * c, o * u);
              break;
            default:
              console.warn(
                "THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: " +
                  i
              );
          }
        },
        normalize: et,
        denormalize: ui,
      });
      class ge {
        constructor(e = 0, t = 0) {
          (ge.prototype.isVector2 = !0), (this.x = e), (this.y = t);
        }
        get width() {
          return this.x;
        }
        set width(e) {
          this.x = e;
        }
        get height() {
          return this.y;
        }
        set height(e) {
          this.y = e;
        }
        set(e, t) {
          return (this.x = e), (this.y = t), this;
        }
        setScalar(e) {
          return (this.x = e), (this.y = e), this;
        }
        setX(e) {
          return (this.x = e), this;
        }
        setY(e) {
          return (this.y = e), this;
        }
        setComponent(e, t) {
          switch (e) {
            case 0:
              this.x = t;
              break;
            case 1:
              this.y = t;
              break;
            default:
              throw new Error("index is out of range: " + e);
          }
          return this;
        }
        getComponent(e) {
          switch (e) {
            case 0:
              return this.x;
            case 1:
              return this.y;
            default:
              throw new Error("index is out of range: " + e);
          }
        }
        clone() {
          return new this.constructor(this.x, this.y);
        }
        copy(e) {
          return (this.x = e.x), (this.y = e.y), this;
        }
        add(e) {
          return (this.x += e.x), (this.y += e.y), this;
        }
        addScalar(e) {
          return (this.x += e), (this.y += e), this;
        }
        addVectors(e, t) {
          return (this.x = e.x + t.x), (this.y = e.y + t.y), this;
        }
        addScaledVector(e, t) {
          return (this.x += e.x * t), (this.y += e.y * t), this;
        }
        sub(e) {
          return (this.x -= e.x), (this.y -= e.y), this;
        }
        subScalar(e) {
          return (this.x -= e), (this.y -= e), this;
        }
        subVectors(e, t) {
          return (this.x = e.x - t.x), (this.y = e.y - t.y), this;
        }
        multiply(e) {
          return (this.x *= e.x), (this.y *= e.y), this;
        }
        multiplyScalar(e) {
          return (this.x *= e), (this.y *= e), this;
        }
        divide(e) {
          return (this.x /= e.x), (this.y /= e.y), this;
        }
        divideScalar(e) {
          return this.multiplyScalar(1 / e);
        }
        applyMatrix3(e) {
          const t = this.x,
            r = this.y,
            i = e.elements;
          return (
            (this.x = i[0] * t + i[3] * r + i[6]),
            (this.y = i[1] * t + i[4] * r + i[7]),
            this
          );
        }
        min(e) {
          return (
            (this.x = Math.min(this.x, e.x)),
            (this.y = Math.min(this.y, e.y)),
            this
          );
        }
        max(e) {
          return (
            (this.x = Math.max(this.x, e.x)),
            (this.y = Math.max(this.y, e.y)),
            this
          );
        }
        clamp(e, t) {
          return (
            (this.x = Math.max(e.x, Math.min(t.x, this.x))),
            (this.y = Math.max(e.y, Math.min(t.y, this.y))),
            this
          );
        }
        clampScalar(e, t) {
          return (
            (this.x = Math.max(e, Math.min(t, this.x))),
            (this.y = Math.max(e, Math.min(t, this.y))),
            this
          );
        }
        clampLength(e, t) {
          const r = this.length();
          return this.divideScalar(r || 1).multiplyScalar(
            Math.max(e, Math.min(t, r))
          );
        }
        floor() {
          return (
            (this.x = Math.floor(this.x)), (this.y = Math.floor(this.y)), this
          );
        }
        ceil() {
          return (
            (this.x = Math.ceil(this.x)), (this.y = Math.ceil(this.y)), this
          );
        }
        round() {
          return (
            (this.x = Math.round(this.x)), (this.y = Math.round(this.y)), this
          );
        }
        roundToZero() {
          return (
            (this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x)),
            (this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y)),
            this
          );
        }
        negate() {
          return (this.x = -this.x), (this.y = -this.y), this;
        }
        dot(e) {
          return this.x * e.x + this.y * e.y;
        }
        cross(e) {
          return this.x * e.y - this.y * e.x;
        }
        lengthSq() {
          return this.x * this.x + this.y * this.y;
        }
        length() {
          return Math.sqrt(this.x * this.x + this.y * this.y);
        }
        manhattanLength() {
          return Math.abs(this.x) + Math.abs(this.y);
        }
        normalize() {
          return this.divideScalar(this.length() || 1);
        }
        angle() {
          return Math.atan2(-this.y, -this.x) + Math.PI;
        }
        distanceTo(e) {
          return Math.sqrt(this.distanceToSquared(e));
        }
        distanceToSquared(e) {
          const t = this.x - e.x,
            r = this.y - e.y;
          return t * t + r * r;
        }
        manhattanDistanceTo(e) {
          return Math.abs(this.x - e.x) + Math.abs(this.y - e.y);
        }
        setLength(e) {
          return this.normalize().multiplyScalar(e);
        }
        lerp(e, t) {
          return (
            (this.x += (e.x - this.x) * t), (this.y += (e.y - this.y) * t), this
          );
        }
        lerpVectors(e, t, r) {
          return (
            (this.x = e.x + (t.x - e.x) * r),
            (this.y = e.y + (t.y - e.y) * r),
            this
          );
        }
        equals(e) {
          return e.x === this.x && e.y === this.y;
        }
        fromArray(e, t = 0) {
          return (this.x = e[t]), (this.y = e[t + 1]), this;
        }
        toArray(e = [], t = 0) {
          return (e[t] = this.x), (e[t + 1] = this.y), e;
        }
        fromBufferAttribute(e, t) {
          return (this.x = e.getX(t)), (this.y = e.getY(t)), this;
        }
        rotateAround(e, t) {
          const r = Math.cos(t),
            i = Math.sin(t),
            a = this.x - e.x,
            s = this.y - e.y;
          return (
            (this.x = a * r - s * i + e.x), (this.y = a * i + s * r + e.y), this
          );
        }
        random() {
          return (this.x = Math.random()), (this.y = Math.random()), this;
        }
        *[Symbol.iterator]() {
          yield this.x, yield this.y;
        }
      }
      class Pn {
        constructor() {
          (Pn.prototype.isMatrix3 = !0),
            (this.elements = [1, 0, 0, 0, 1, 0, 0, 0, 1]);
        }
        set(e, t, r, i, a, s, o, l, u) {
          const c = this.elements;
          return (
            (c[0] = e),
            (c[1] = i),
            (c[2] = o),
            (c[3] = t),
            (c[4] = a),
            (c[5] = l),
            (c[6] = r),
            (c[7] = s),
            (c[8] = u),
            this
          );
        }
        identity() {
          return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1), this;
        }
        copy(e) {
          const t = this.elements,
            r = e.elements;
          return (
            (t[0] = r[0]),
            (t[1] = r[1]),
            (t[2] = r[2]),
            (t[3] = r[3]),
            (t[4] = r[4]),
            (t[5] = r[5]),
            (t[6] = r[6]),
            (t[7] = r[7]),
            (t[8] = r[8]),
            this
          );
        }
        extractBasis(e, t, r) {
          return (
            e.setFromMatrix3Column(this, 0),
            t.setFromMatrix3Column(this, 1),
            r.setFromMatrix3Column(this, 2),
            this
          );
        }
        setFromMatrix4(e) {
          const t = e.elements;
          return (
            this.set(t[0], t[4], t[8], t[1], t[5], t[9], t[2], t[6], t[10]),
            this
          );
        }
        multiply(e) {
          return this.multiplyMatrices(this, e);
        }
        premultiply(e) {
          return this.multiplyMatrices(e, this);
        }
        multiplyMatrices(e, t) {
          const r = e.elements,
            i = t.elements,
            a = this.elements,
            s = r[0],
            o = r[3],
            l = r[6],
            u = r[1],
            c = r[4],
            h = r[7],
            d = r[2],
            f = r[5],
            g = r[8],
            p = i[0],
            y = i[3],
            v = i[6],
            m = i[1],
            x = i[4],
            _ = i[7],
            b = i[2],
            w = i[5],
            M = i[8];
          return (
            (a[0] = s * p + o * m + l * b),
            (a[3] = s * y + o * x + l * w),
            (a[6] = s * v + o * _ + l * M),
            (a[1] = u * p + c * m + h * b),
            (a[4] = u * y + c * x + h * w),
            (a[7] = u * v + c * _ + h * M),
            (a[2] = d * p + f * m + g * b),
            (a[5] = d * y + f * x + g * w),
            (a[8] = d * v + f * _ + g * M),
            this
          );
        }
        multiplyScalar(e) {
          const t = this.elements;
          return (
            (t[0] *= e),
            (t[3] *= e),
            (t[6] *= e),
            (t[1] *= e),
            (t[4] *= e),
            (t[7] *= e),
            (t[2] *= e),
            (t[5] *= e),
            (t[8] *= e),
            this
          );
        }
        determinant() {
          const e = this.elements,
            t = e[0],
            r = e[1],
            i = e[2],
            a = e[3],
            s = e[4],
            o = e[5],
            l = e[6],
            u = e[7],
            c = e[8];
          return (
            t * s * c -
            t * o * u -
            r * a * c +
            r * o * l +
            i * a * u -
            i * s * l
          );
        }
        invert() {
          const e = this.elements,
            t = e[0],
            r = e[1],
            i = e[2],
            a = e[3],
            s = e[4],
            o = e[5],
            l = e[6],
            u = e[7],
            c = e[8],
            h = c * s - o * u,
            d = o * l - c * a,
            f = u * a - s * l,
            g = t * h + r * d + i * f;
          if (g === 0) return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0);
          const p = 1 / g;
          return (
            (e[0] = h * p),
            (e[1] = (i * u - c * r) * p),
            (e[2] = (o * r - i * s) * p),
            (e[3] = d * p),
            (e[4] = (c * t - i * l) * p),
            (e[5] = (i * a - o * t) * p),
            (e[6] = f * p),
            (e[7] = (r * l - u * t) * p),
            (e[8] = (s * t - r * a) * p),
            this
          );
        }
        transpose() {
          let e;
          const t = this.elements;
          return (
            (e = t[1]),
            (t[1] = t[3]),
            (t[3] = e),
            (e = t[2]),
            (t[2] = t[6]),
            (t[6] = e),
            (e = t[5]),
            (t[5] = t[7]),
            (t[7] = e),
            this
          );
        }
        getNormalMatrix(e) {
          return this.setFromMatrix4(e).invert().transpose();
        }
        transposeIntoArray(e) {
          const t = this.elements;
          return (
            (e[0] = t[0]),
            (e[1] = t[3]),
            (e[2] = t[6]),
            (e[3] = t[1]),
            (e[4] = t[4]),
            (e[5] = t[7]),
            (e[6] = t[2]),
            (e[7] = t[5]),
            (e[8] = t[8]),
            this
          );
        }
        setUvTransform(e, t, r, i, a, s, o) {
          const l = Math.cos(a),
            u = Math.sin(a);
          return (
            this.set(
              r * l,
              r * u,
              -r * (l * s + u * o) + s + e,
              -i * u,
              i * l,
              -i * (-u * s + l * o) + o + t,
              0,
              0,
              1
            ),
            this
          );
        }
        scale(e, t) {
          const r = this.elements;
          return (
            (r[0] *= e),
            (r[3] *= e),
            (r[6] *= e),
            (r[1] *= t),
            (r[4] *= t),
            (r[7] *= t),
            this
          );
        }
        rotate(e) {
          const t = Math.cos(e),
            r = Math.sin(e),
            i = this.elements,
            a = i[0],
            s = i[3],
            o = i[6],
            l = i[1],
            u = i[4],
            c = i[7];
          return (
            (i[0] = t * a + r * l),
            (i[3] = t * s + r * u),
            (i[6] = t * o + r * c),
            (i[1] = -r * a + t * l),
            (i[4] = -r * s + t * u),
            (i[7] = -r * o + t * c),
            this
          );
        }
        translate(e, t) {
          const r = this.elements;
          return (
            (r[0] += e * r[2]),
            (r[3] += e * r[5]),
            (r[6] += e * r[8]),
            (r[1] += t * r[2]),
            (r[4] += t * r[5]),
            (r[7] += t * r[8]),
            this
          );
        }
        equals(e) {
          const t = this.elements,
            r = e.elements;
          for (let i = 0; i < 9; i++) if (t[i] !== r[i]) return !1;
          return !0;
        }
        fromArray(e, t = 0) {
          for (let r = 0; r < 9; r++) this.elements[r] = e[r + t];
          return this;
        }
        toArray(e = [], t = 0) {
          const r = this.elements;
          return (
            (e[t] = r[0]),
            (e[t + 1] = r[1]),
            (e[t + 2] = r[2]),
            (e[t + 3] = r[3]),
            (e[t + 4] = r[4]),
            (e[t + 5] = r[5]),
            (e[t + 6] = r[6]),
            (e[t + 7] = r[7]),
            (e[t + 8] = r[8]),
            e
          );
        }
        clone() {
          return new this.constructor().fromArray(this.elements);
        }
      }
      function d_(n) {
        for (let e = n.length - 1; e >= 0; --e) if (n[e] >= 65535) return !0;
        return !1;
      }
      function kl(n) {
        return document.createElementNS("http://www.w3.org/1999/xhtml", n);
      }
      function Ia(n) {
        return n < 0.04045
          ? 0.0773993808 * n
          : Math.pow(0.9478672986 * n + 0.0521327014, 2.4);
      }
      function Mc(n) {
        return n < 0.0031308 ? 12.92 * n : 1.055 * Math.pow(n, 0.41666) - 0.055;
      }
      const Od = { srgb: { "srgb-linear": Ia }, "srgb-linear": { srgb: Mc } },
        mr = {
          legacyMode: !0,
          get workingColorSpace() {
            return "srgb-linear";
          },
          set workingColorSpace(n) {
            console.warn(
              "THREE.ColorManagement: .workingColorSpace is readonly."
            );
          },
          convert: function (n, e, t) {
            if (this.legacyMode || e === t || !e || !t) return n;
            if (Od[e] && Od[e][t] !== void 0) {
              const r = Od[e][t];
              return (n.r = r(n.r)), (n.g = r(n.g)), (n.b = r(n.b)), n;
            }
            throw new Error("Unsupported color space conversion.");
          },
          fromWorkingColorSpace: function (n, e) {
            return this.convert(n, this.workingColorSpace, e);
          },
          toWorkingColorSpace: function (n, e) {
            return this.convert(n, e, this.workingColorSpace);
          },
        },
        f_ = {
          aliceblue: 15792383,
          antiquewhite: 16444375,
          aqua: 65535,
          aquamarine: 8388564,
          azure: 15794175,
          beige: 16119260,
          bisque: 16770244,
          black: 0,
          blanchedalmond: 16772045,
          blue: 255,
          blueviolet: 9055202,
          brown: 10824234,
          burlywood: 14596231,
          cadetblue: 6266528,
          chartreuse: 8388352,
          chocolate: 13789470,
          coral: 16744272,
          cornflowerblue: 6591981,
          cornsilk: 16775388,
          crimson: 14423100,
          cyan: 65535,
          darkblue: 139,
          darkcyan: 35723,
          darkgoldenrod: 12092939,
          darkgray: 11119017,
          darkgreen: 25600,
          darkgrey: 11119017,
          darkkhaki: 12433259,
          darkmagenta: 9109643,
          darkolivegreen: 5597999,
          darkorange: 16747520,
          darkorchid: 10040012,
          darkred: 9109504,
          darksalmon: 15308410,
          darkseagreen: 9419919,
          darkslateblue: 4734347,
          darkslategray: 3100495,
          darkslategrey: 3100495,
          darkturquoise: 52945,
          darkviolet: 9699539,
          deeppink: 16716947,
          deepskyblue: 49151,
          dimgray: 6908265,
          dimgrey: 6908265,
          dodgerblue: 2003199,
          firebrick: 11674146,
          floralwhite: 16775920,
          forestgreen: 2263842,
          fuchsia: 16711935,
          gainsboro: 14474460,
          ghostwhite: 16316671,
          gold: 16766720,
          goldenrod: 14329120,
          gray: 8421504,
          green: 32768,
          greenyellow: 11403055,
          grey: 8421504,
          honeydew: 15794160,
          hotpink: 16738740,
          indianred: 13458524,
          indigo: 4915330,
          ivory: 16777200,
          khaki: 15787660,
          lavender: 15132410,
          lavenderblush: 16773365,
          lawngreen: 8190976,
          lemonchiffon: 16775885,
          lightblue: 11393254,
          lightcoral: 15761536,
          lightcyan: 14745599,
          lightgoldenrodyellow: 16448210,
          lightgray: 13882323,
          lightgreen: 9498256,
          lightgrey: 13882323,
          lightpink: 16758465,
          lightsalmon: 16752762,
          lightseagreen: 2142890,
          lightskyblue: 8900346,
          lightslategray: 7833753,
          lightslategrey: 7833753,
          lightsteelblue: 11584734,
          lightyellow: 16777184,
          lime: 65280,
          limegreen: 3329330,
          linen: 16445670,
          magenta: 16711935,
          maroon: 8388608,
          mediumaquamarine: 6737322,
          mediumblue: 205,
          mediumorchid: 12211667,
          mediumpurple: 9662683,
          mediumseagreen: 3978097,
          mediumslateblue: 8087790,
          mediumspringgreen: 64154,
          mediumturquoise: 4772300,
          mediumvioletred: 13047173,
          midnightblue: 1644912,
          mintcream: 16121850,
          mistyrose: 16770273,
          moccasin: 16770229,
          navajowhite: 16768685,
          navy: 128,
          oldlace: 16643558,
          olive: 8421376,
          olivedrab: 7048739,
          orange: 16753920,
          orangered: 16729344,
          orchid: 14315734,
          palegoldenrod: 15657130,
          palegreen: 10025880,
          paleturquoise: 11529966,
          palevioletred: 14381203,
          papayawhip: 16773077,
          peachpuff: 16767673,
          peru: 13468991,
          pink: 16761035,
          plum: 14524637,
          powderblue: 11591910,
          purple: 8388736,
          rebeccapurple: 6697881,
          red: 16711680,
          rosybrown: 12357519,
          royalblue: 4286945,
          saddlebrown: 9127187,
          salmon: 16416882,
          sandybrown: 16032864,
          seagreen: 3050327,
          seashell: 16774638,
          sienna: 10506797,
          silver: 12632256,
          skyblue: 8900331,
          slateblue: 6970061,
          slategray: 7372944,
          slategrey: 7372944,
          snow: 16775930,
          springgreen: 65407,
          steelblue: 4620980,
          tan: 13808780,
          teal: 32896,
          thistle: 14204888,
          tomato: 16737095,
          turquoise: 4251856,
          violet: 15631086,
          wheat: 16113331,
          white: 16777215,
          whitesmoke: 16119285,
          yellow: 16776960,
          yellowgreen: 10145074,
        },
        It = { r: 0, g: 0, b: 0 },
        gr = { h: 0, s: 0, l: 0 },
        Mu = { h: 0, s: 0, l: 0 };
      function zd(n, e, t) {
        return (
          t < 0 && (t += 1),
          t > 1 && (t -= 1),
          t < 1 / 6
            ? n + 6 * (e - n) * t
            : t < 0.5
            ? e
            : t < 2 / 3
            ? n + 6 * (e - n) * (2 / 3 - t)
            : n
        );
      }
      function Tu(n, e) {
        return (e.r = n.r), (e.g = n.g), (e.b = n.b), e;
      }
      class Ce {
        constructor(e, t, r) {
          return (
            (this.isColor = !0),
            (this.r = 1),
            (this.g = 1),
            (this.b = 1),
            t === void 0 && r === void 0 ? this.set(e) : this.setRGB(e, t, r)
          );
        }
        set(e) {
          return (
            e && e.isColor
              ? this.copy(e)
              : typeof e == "number"
              ? this.setHex(e)
              : typeof e == "string" && this.setStyle(e),
            this
          );
        }
        setScalar(e) {
          return (this.r = e), (this.g = e), (this.b = e), this;
        }
        setHex(e, t = "srgb") {
          return (
            (e = Math.floor(e)),
            (this.r = ((e >> 16) & 255) / 255),
            (this.g = ((e >> 8) & 255) / 255),
            (this.b = (255 & e) / 255),
            mr.toWorkingColorSpace(this, t),
            this
          );
        }
        setRGB(e, t, r, i = "srgb-linear") {
          return (
            (this.r = e),
            (this.g = t),
            (this.b = r),
            mr.toWorkingColorSpace(this, i),
            this
          );
        }
        setHSL(e, t, r, i = "srgb-linear") {
          if (((e = bp(e, 1)), (t = Gt(t, 0, 1)), (r = Gt(r, 0, 1)), t === 0))
            this.r = this.g = this.b = r;
          else {
            const a = r <= 0.5 ? r * (1 + t) : r + t - r * t,
              s = 2 * r - a;
            (this.r = zd(s, a, e + 1 / 3)),
              (this.g = zd(s, a, e)),
              (this.b = zd(s, a, e - 1 / 3));
          }
          return mr.toWorkingColorSpace(this, i), this;
        }
        setStyle(e, t = "srgb") {
          function r(a) {
            a !== void 0 &&
              parseFloat(a) < 1 &&
              console.warn(
                "THREE.Color: Alpha component of " + e + " will be ignored."
              );
          }
          let i;
          if ((i = /^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e))) {
            let a;
            const s = i[1],
              o = i[2];
            switch (s) {
              case "rgb":
              case "rgba":
                if (
                  (a =
                    /^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(
                      o
                    ))
                )
                  return (
                    (this.r = Math.min(255, parseInt(a[1], 10)) / 255),
                    (this.g = Math.min(255, parseInt(a[2], 10)) / 255),
                    (this.b = Math.min(255, parseInt(a[3], 10)) / 255),
                    mr.toWorkingColorSpace(this, t),
                    r(a[4]),
                    this
                  );
                if (
                  (a =
                    /^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(
                      o
                    ))
                )
                  return (
                    (this.r = Math.min(100, parseInt(a[1], 10)) / 100),
                    (this.g = Math.min(100, parseInt(a[2], 10)) / 100),
                    (this.b = Math.min(100, parseInt(a[3], 10)) / 100),
                    mr.toWorkingColorSpace(this, t),
                    r(a[4]),
                    this
                  );
                break;
              case "hsl":
              case "hsla":
                if (
                  (a =
                    /^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(
                      o
                    ))
                ) {
                  const l = parseFloat(a[1]) / 360,
                    u = parseFloat(a[2]) / 100,
                    c = parseFloat(a[3]) / 100;
                  return r(a[4]), this.setHSL(l, u, c, t);
                }
            }
          } else if ((i = /^\#([A-Fa-f\d]+)$/.exec(e))) {
            const a = i[1],
              s = a.length;
            if (s === 3)
              return (
                (this.r = parseInt(a.charAt(0) + a.charAt(0), 16) / 255),
                (this.g = parseInt(a.charAt(1) + a.charAt(1), 16) / 255),
                (this.b = parseInt(a.charAt(2) + a.charAt(2), 16) / 255),
                mr.toWorkingColorSpace(this, t),
                this
              );
            if (s === 6)
              return (
                (this.r = parseInt(a.charAt(0) + a.charAt(1), 16) / 255),
                (this.g = parseInt(a.charAt(2) + a.charAt(3), 16) / 255),
                (this.b = parseInt(a.charAt(4) + a.charAt(5), 16) / 255),
                mr.toWorkingColorSpace(this, t),
                this
              );
          }
          return e && e.length > 0 ? this.setColorName(e, t) : this;
        }
        setColorName(e, t = "srgb") {
          const r = f_[e.toLowerCase()];
          return (
            r !== void 0
              ? this.setHex(r, t)
              : console.warn("THREE.Color: Unknown color " + e),
            this
          );
        }
        clone() {
          return new this.constructor(this.r, this.g, this.b);
        }
        copy(e) {
          return (this.r = e.r), (this.g = e.g), (this.b = e.b), this;
        }
        copySRGBToLinear(e) {
          return (
            (this.r = Ia(e.r)), (this.g = Ia(e.g)), (this.b = Ia(e.b)), this
          );
        }
        copyLinearToSRGB(e) {
          return (
            (this.r = Mc(e.r)), (this.g = Mc(e.g)), (this.b = Mc(e.b)), this
          );
        }
        convertSRGBToLinear() {
          return this.copySRGBToLinear(this), this;
        }
        convertLinearToSRGB() {
          return this.copyLinearToSRGB(this), this;
        }
        getHex(e = "srgb") {
          return (
            mr.fromWorkingColorSpace(Tu(this, It), e),
            (Gt(255 * It.r, 0, 255) << 16) ^
              (Gt(255 * It.g, 0, 255) << 8) ^
              (Gt(255 * It.b, 0, 255) << 0)
          );
        }
        getHexString(e = "srgb") {
          return ("000000" + this.getHex(e).toString(16)).slice(-6);
        }
        getHSL(e, t = "srgb-linear") {
          mr.fromWorkingColorSpace(Tu(this, It), t);
          const r = It.r,
            i = It.g,
            a = It.b,
            s = Math.max(r, i, a),
            o = Math.min(r, i, a);
          let l, u;
          const c = (o + s) / 2;
          if (o === s) (l = 0), (u = 0);
          else {
            const h = s - o;
            switch (((u = c <= 0.5 ? h / (s + o) : h / (2 - s - o)), s)) {
              case r:
                l = (i - a) / h + (i < a ? 6 : 0);
                break;
              case i:
                l = (a - r) / h + 2;
                break;
              case a:
                l = (r - i) / h + 4;
            }
            l /= 6;
          }
          return (e.h = l), (e.s = u), (e.l = c), e;
        }
        getRGB(e, t = "srgb-linear") {
          return (
            mr.fromWorkingColorSpace(Tu(this, It), t),
            (e.r = It.r),
            (e.g = It.g),
            (e.b = It.b),
            e
          );
        }
        getStyle(e = "srgb") {
          return (
            mr.fromWorkingColorSpace(Tu(this, It), e),
            e !== "srgb"
              ? `color(${e} ${It.r} ${It.g} ${It.b})`
              : `rgb(${(255 * It.r) | 0},${(255 * It.g) | 0},${
                  (255 * It.b) | 0
                })`
          );
        }
        offsetHSL(e, t, r) {
          return (
            this.getHSL(gr),
            (gr.h += e),
            (gr.s += t),
            (gr.l += r),
            this.setHSL(gr.h, gr.s, gr.l),
            this
          );
        }
        add(e) {
          return (this.r += e.r), (this.g += e.g), (this.b += e.b), this;
        }
        addColors(e, t) {
          return (
            (this.r = e.r + t.r),
            (this.g = e.g + t.g),
            (this.b = e.b + t.b),
            this
          );
        }
        addScalar(e) {
          return (this.r += e), (this.g += e), (this.b += e), this;
        }
        sub(e) {
          return (
            (this.r = Math.max(0, this.r - e.r)),
            (this.g = Math.max(0, this.g - e.g)),
            (this.b = Math.max(0, this.b - e.b)),
            this
          );
        }
        multiply(e) {
          return (this.r *= e.r), (this.g *= e.g), (this.b *= e.b), this;
        }
        multiplyScalar(e) {
          return (this.r *= e), (this.g *= e), (this.b *= e), this;
        }
        lerp(e, t) {
          return (
            (this.r += (e.r - this.r) * t),
            (this.g += (e.g - this.g) * t),
            (this.b += (e.b - this.b) * t),
            this
          );
        }
        lerpColors(e, t, r) {
          return (
            (this.r = e.r + (t.r - e.r) * r),
            (this.g = e.g + (t.g - e.g) * r),
            (this.b = e.b + (t.b - e.b) * r),
            this
          );
        }
        lerpHSL(e, t) {
          this.getHSL(gr), e.getHSL(Mu);
          const r = sl(gr.h, Mu.h, t),
            i = sl(gr.s, Mu.s, t),
            a = sl(gr.l, Mu.l, t);
          return this.setHSL(r, i, a), this;
        }
        equals(e) {
          return e.r === this.r && e.g === this.g && e.b === this.b;
        }
        fromArray(e, t = 0) {
          return (
            (this.r = e[t]), (this.g = e[t + 1]), (this.b = e[t + 2]), this
          );
        }
        toArray(e = [], t = 0) {
          return (e[t] = this.r), (e[t + 1] = this.g), (e[t + 2] = this.b), e;
        }
        fromBufferAttribute(e, t) {
          return (
            (this.r = e.getX(t)),
            (this.g = e.getY(t)),
            (this.b = e.getZ(t)),
            this
          );
        }
        toJSON() {
          return this.getHex();
        }
        *[Symbol.iterator]() {
          yield this.r, yield this.g, yield this.b;
        }
      }
      let Qa;
      Ce.NAMES = f_;
      class p_ {
        static getDataURL(e) {
          if (/^data:/i.test(e.src) || typeof HTMLCanvasElement > "u")
            return e.src;
          let t;
          if (e instanceof HTMLCanvasElement) t = e;
          else {
            Qa === void 0 && (Qa = kl("canvas")),
              (Qa.width = e.width),
              (Qa.height = e.height);
            const r = Qa.getContext("2d");
            e instanceof ImageData
              ? r.putImageData(e, 0, 0)
              : r.drawImage(e, 0, 0, e.width, e.height),
              (t = Qa);
          }
          return t.width > 2048 || t.height > 2048
            ? (console.warn(
                "THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",
                e
              ),
              t.toDataURL("image/jpeg", 0.6))
            : t.toDataURL("image/png");
        }
        static sRGBToLinear(e) {
          if (
            (typeof HTMLImageElement < "u" && e instanceof HTMLImageElement) ||
            (typeof HTMLCanvasElement < "u" &&
              e instanceof HTMLCanvasElement) ||
            (typeof ImageBitmap < "u" && e instanceof ImageBitmap)
          ) {
            const t = kl("canvas");
            (t.width = e.width), (t.height = e.height);
            const r = t.getContext("2d");
            r.drawImage(e, 0, 0, e.width, e.height);
            const i = r.getImageData(0, 0, e.width, e.height),
              a = i.data;
            for (let s = 0; s < a.length; s++) a[s] = 255 * Ia(a[s] / 255);
            return r.putImageData(i, 0, 0), t;
          }
          if (e.data) {
            const t = e.data.slice(0);
            for (let r = 0; r < t.length; r++)
              t instanceof Uint8Array || t instanceof Uint8ClampedArray
                ? (t[r] = Math.floor(255 * Ia(t[r] / 255)))
                : (t[r] = Ia(t[r]));
            return { data: t, width: e.width, height: e.height };
          }
          return (
            console.warn(
              "THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."
            ),
            e
          );
        }
      }
      class m_ {
        constructor(e = null) {
          (this.isSource = !0),
            (this.uuid = Mr()),
            (this.data = e),
            (this.version = 0);
        }
        set needsUpdate(e) {
          e === !0 && this.version++;
        }
        toJSON(e) {
          const t = e === void 0 || typeof e == "string";
          if (!t && e.images[this.uuid] !== void 0) return e.images[this.uuid];
          const r = { uuid: this.uuid, url: "" },
            i = this.data;
          if (i !== null) {
            let a;
            if (Array.isArray(i)) {
              a = [];
              for (let s = 0, o = i.length; s < o; s++)
                i[s].isDataTexture ? a.push(Nd(i[s].image)) : a.push(Nd(i[s]));
            } else a = Nd(i);
            r.url = a;
          }
          return t || (e.images[this.uuid] = r), r;
        }
      }
      function Nd(n) {
        return (typeof HTMLImageElement < "u" &&
          n instanceof HTMLImageElement) ||
          (typeof HTMLCanvasElement < "u" && n instanceof HTMLCanvasElement) ||
          (typeof ImageBitmap < "u" && n instanceof ImageBitmap)
          ? p_.getDataURL(n)
          : n.data
          ? {
              data: Array.from(n.data),
              width: n.width,
              height: n.height,
              type: n.data.constructor.name,
            }
          : (console.warn("THREE.Texture: Unable to serialize Texture."), {});
      }
      let K2 = 0;
      class jt extends Yr {
        constructor(
          e = jt.DEFAULT_IMAGE,
          t = jt.DEFAULT_MAPPING,
          r = 1001,
          i = 1001,
          a = 1006,
          s = 1008,
          o = 1023,
          l = 1009,
          u = 1,
          c = 3e3
        ) {
          super(),
            (this.isTexture = !0),
            Object.defineProperty(this, "id", { value: K2++ }),
            (this.uuid = Mr()),
            (this.name = ""),
            (this.source = new m_(e)),
            (this.mipmaps = []),
            (this.mapping = t),
            (this.wrapS = r),
            (this.wrapT = i),
            (this.magFilter = a),
            (this.minFilter = s),
            (this.anisotropy = u),
            (this.format = o),
            (this.internalFormat = null),
            (this.type = l),
            (this.offset = new ge(0, 0)),
            (this.repeat = new ge(1, 1)),
            (this.center = new ge(0, 0)),
            (this.rotation = 0),
            (this.matrixAutoUpdate = !0),
            (this.matrix = new Pn()),
            (this.generateMipmaps = !0),
            (this.premultiplyAlpha = !1),
            (this.flipY = !0),
            (this.unpackAlignment = 4),
            (this.encoding = c),
            (this.userData = {}),
            (this.version = 0),
            (this.onUpdate = null),
            (this.isRenderTargetTexture = !1),
            (this.needsPMREMUpdate = !1);
        }
        get image() {
          return this.source.data;
        }
        set image(e) {
          this.source.data = e;
        }
        updateMatrix() {
          this.matrix.setUvTransform(
            this.offset.x,
            this.offset.y,
            this.repeat.x,
            this.repeat.y,
            this.rotation,
            this.center.x,
            this.center.y
          );
        }
        clone() {
          return new this.constructor().copy(this);
        }
        copy(e) {
          return (
            (this.name = e.name),
            (this.source = e.source),
            (this.mipmaps = e.mipmaps.slice(0)),
            (this.mapping = e.mapping),
            (this.wrapS = e.wrapS),
            (this.wrapT = e.wrapT),
            (this.magFilter = e.magFilter),
            (this.minFilter = e.minFilter),
            (this.anisotropy = e.anisotropy),
            (this.format = e.format),
            (this.internalFormat = e.internalFormat),
            (this.type = e.type),
            this.offset.copy(e.offset),
            this.repeat.copy(e.repeat),
            this.center.copy(e.center),
            (this.rotation = e.rotation),
            (this.matrixAutoUpdate = e.matrixAutoUpdate),
            this.matrix.copy(e.matrix),
            (this.generateMipmaps = e.generateMipmaps),
            (this.premultiplyAlpha = e.premultiplyAlpha),
            (this.flipY = e.flipY),
            (this.unpackAlignment = e.unpackAlignment),
            (this.encoding = e.encoding),
            (this.userData = JSON.parse(JSON.stringify(e.userData))),
            (this.needsUpdate = !0),
            this
          );
        }
        toJSON(e) {
          const t = e === void 0 || typeof e == "string";
          if (!t && e.textures[this.uuid] !== void 0)
            return e.textures[this.uuid];
          const r = {
            metadata: {
              version: 4.5,
              type: "Texture",
              generator: "Texture.toJSON",
            },
            uuid: this.uuid,
            name: this.name,
            image: this.source.toJSON(e).uuid,
            mapping: this.mapping,
            repeat: [this.repeat.x, this.repeat.y],
            offset: [this.offset.x, this.offset.y],
            center: [this.center.x, this.center.y],
            rotation: this.rotation,
            wrap: [this.wrapS, this.wrapT],
            format: this.format,
            type: this.type,
            encoding: this.encoding,
            minFilter: this.minFilter,
            magFilter: this.magFilter,
            anisotropy: this.anisotropy,
            flipY: this.flipY,
            premultiplyAlpha: this.premultiplyAlpha,
            unpackAlignment: this.unpackAlignment,
          };
          return (
            JSON.stringify(this.userData) !== "{}" &&
              (r.userData = this.userData),
            t || (e.textures[this.uuid] = r),
            r
          );
        }
        dispose() {
          this.dispatchEvent({ type: "dispose" });
        }
        transformUv(e) {
          if (this.mapping !== 300) return e;
          if ((e.applyMatrix3(this.matrix), e.x < 0 || e.x > 1))
            switch (this.wrapS) {
              case 1e3:
                e.x = e.x - Math.floor(e.x);
                break;
              case 1001:
                e.x = e.x < 0 ? 0 : 1;
                break;
              case 1002:
                Math.abs(Math.floor(e.x) % 2) === 1
                  ? (e.x = Math.ceil(e.x) - e.x)
                  : (e.x = e.x - Math.floor(e.x));
            }
          if (e.y < 0 || e.y > 1)
            switch (this.wrapT) {
              case 1e3:
                e.y = e.y - Math.floor(e.y);
                break;
              case 1001:
                e.y = e.y < 0 ? 0 : 1;
                break;
              case 1002:
                Math.abs(Math.floor(e.y) % 2) === 1
                  ? (e.y = Math.ceil(e.y) - e.y)
                  : (e.y = e.y - Math.floor(e.y));
            }
          return this.flipY && (e.y = 1 - e.y), e;
        }
        set needsUpdate(e) {
          e === !0 && (this.version++, (this.source.needsUpdate = !0));
        }
      }
      (jt.DEFAULT_IMAGE = null), (jt.DEFAULT_MAPPING = 300);
      class Be {
        constructor(e = 0, t = 0, r = 0, i = 1) {
          (Be.prototype.isVector4 = !0),
            (this.x = e),
            (this.y = t),
            (this.z = r),
            (this.w = i);
        }
        get width() {
          return this.z;
        }
        set width(e) {
          this.z = e;
        }
        get height() {
          return this.w;
        }
        set height(e) {
          this.w = e;
        }
        set(e, t, r, i) {
          return (this.x = e), (this.y = t), (this.z = r), (this.w = i), this;
        }
        setScalar(e) {
          return (this.x = e), (this.y = e), (this.z = e), (this.w = e), this;
        }
        setX(e) {
          return (this.x = e), this;
        }
        setY(e) {
          return (this.y = e), this;
        }
        setZ(e) {
          return (this.z = e), this;
        }
        setW(e) {
          return (this.w = e), this;
        }
        setComponent(e, t) {
          switch (e) {
            case 0:
              this.x = t;
              break;
            case 1:
              this.y = t;
              break;
            case 2:
              this.z = t;
              break;
            case 3:
              this.w = t;
              break;
            default:
              throw new Error("index is out of range: " + e);
          }
          return this;
        }
        getComponent(e) {
          switch (e) {
            case 0:
              return this.x;
            case 1:
              return this.y;
            case 2:
              return this.z;
            case 3:
              return this.w;
            default:
              throw new Error("index is out of range: " + e);
          }
        }
        clone() {
          return new this.constructor(this.x, this.y, this.z, this.w);
        }
        copy(e) {
          return (
            (this.x = e.x),
            (this.y = e.y),
            (this.z = e.z),
            (this.w = e.w !== void 0 ? e.w : 1),
            this
          );
        }
        add(e) {
          return (
            (this.x += e.x),
            (this.y += e.y),
            (this.z += e.z),
            (this.w += e.w),
            this
          );
        }
        addScalar(e) {
          return (
            (this.x += e), (this.y += e), (this.z += e), (this.w += e), this
          );
        }
        addVectors(e, t) {
          return (
            (this.x = e.x + t.x),
            (this.y = e.y + t.y),
            (this.z = e.z + t.z),
            (this.w = e.w + t.w),
            this
          );
        }
        addScaledVector(e, t) {
          return (
            (this.x += e.x * t),
            (this.y += e.y * t),
            (this.z += e.z * t),
            (this.w += e.w * t),
            this
          );
        }
        sub(e) {
          return (
            (this.x -= e.x),
            (this.y -= e.y),
            (this.z -= e.z),
            (this.w -= e.w),
            this
          );
        }
        subScalar(e) {
          return (
            (this.x -= e), (this.y -= e), (this.z -= e), (this.w -= e), this
          );
        }
        subVectors(e, t) {
          return (
            (this.x = e.x - t.x),
            (this.y = e.y - t.y),
            (this.z = e.z - t.z),
            (this.w = e.w - t.w),
            this
          );
        }
        multiply(e) {
          return (
            (this.x *= e.x),
            (this.y *= e.y),
            (this.z *= e.z),
            (this.w *= e.w),
            this
          );
        }
        multiplyScalar(e) {
          return (
            (this.x *= e), (this.y *= e), (this.z *= e), (this.w *= e), this
          );
        }
        applyMatrix4(e) {
          const t = this.x,
            r = this.y,
            i = this.z,
            a = this.w,
            s = e.elements;
          return (
            (this.x = s[0] * t + s[4] * r + s[8] * i + s[12] * a),
            (this.y = s[1] * t + s[5] * r + s[9] * i + s[13] * a),
            (this.z = s[2] * t + s[6] * r + s[10] * i + s[14] * a),
            (this.w = s[3] * t + s[7] * r + s[11] * i + s[15] * a),
            this
          );
        }
        divideScalar(e) {
          return this.multiplyScalar(1 / e);
        }
        setAxisAngleFromQuaternion(e) {
          this.w = 2 * Math.acos(e.w);
          const t = Math.sqrt(1 - e.w * e.w);
          return (
            t < 1e-4
              ? ((this.x = 1), (this.y = 0), (this.z = 0))
              : ((this.x = e.x / t), (this.y = e.y / t), (this.z = e.z / t)),
            this
          );
        }
        setAxisAngleFromRotationMatrix(e) {
          let t, r, i, a;
          const l = e.elements,
            u = l[0],
            c = l[4],
            h = l[8],
            d = l[1],
            f = l[5],
            g = l[9],
            p = l[2],
            y = l[6],
            v = l[10];
          if (
            Math.abs(c - d) < 0.01 &&
            Math.abs(h - p) < 0.01 &&
            Math.abs(g - y) < 0.01
          ) {
            if (
              Math.abs(c + d) < 0.1 &&
              Math.abs(h + p) < 0.1 &&
              Math.abs(g + y) < 0.1 &&
              Math.abs(u + f + v - 3) < 0.1
            )
              return this.set(1, 0, 0, 0), this;
            t = Math.PI;
            const x = (u + 1) / 2,
              _ = (f + 1) / 2,
              b = (v + 1) / 2,
              w = (c + d) / 4,
              M = (h + p) / 4,
              C = (g + y) / 4;
            return (
              x > _ && x > b
                ? x < 0.01
                  ? ((r = 0), (i = 0.707106781), (a = 0.707106781))
                  : ((r = Math.sqrt(x)), (i = w / r), (a = M / r))
                : _ > b
                ? _ < 0.01
                  ? ((r = 0.707106781), (i = 0), (a = 0.707106781))
                  : ((i = Math.sqrt(_)), (r = w / i), (a = C / i))
                : b < 0.01
                ? ((r = 0.707106781), (i = 0.707106781), (a = 0))
                : ((a = Math.sqrt(b)), (r = M / a), (i = C / a)),
              this.set(r, i, a, t),
              this
            );
          }
          let m = Math.sqrt(
            (y - g) * (y - g) + (h - p) * (h - p) + (d - c) * (d - c)
          );
          return (
            Math.abs(m) < 0.001 && (m = 1),
            (this.x = (y - g) / m),
            (this.y = (h - p) / m),
            (this.z = (d - c) / m),
            (this.w = Math.acos((u + f + v - 1) / 2)),
            this
          );
        }
        min(e) {
          return (
            (this.x = Math.min(this.x, e.x)),
            (this.y = Math.min(this.y, e.y)),
            (this.z = Math.min(this.z, e.z)),
            (this.w = Math.min(this.w, e.w)),
            this
          );
        }
        max(e) {
          return (
            (this.x = Math.max(this.x, e.x)),
            (this.y = Math.max(this.y, e.y)),
            (this.z = Math.max(this.z, e.z)),
            (this.w = Math.max(this.w, e.w)),
            this
          );
        }
        clamp(e, t) {
          return (
            (this.x = Math.max(e.x, Math.min(t.x, this.x))),
            (this.y = Math.max(e.y, Math.min(t.y, this.y))),
            (this.z = Math.max(e.z, Math.min(t.z, this.z))),
            (this.w = Math.max(e.w, Math.min(t.w, this.w))),
            this
          );
        }
        clampScalar(e, t) {
          return (
            (this.x = Math.max(e, Math.min(t, this.x))),
            (this.y = Math.max(e, Math.min(t, this.y))),
            (this.z = Math.max(e, Math.min(t, this.z))),
            (this.w = Math.max(e, Math.min(t, this.w))),
            this
          );
        }
        clampLength(e, t) {
          const r = this.length();
          return this.divideScalar(r || 1).multiplyScalar(
            Math.max(e, Math.min(t, r))
          );
        }
        floor() {
          return (
            (this.x = Math.floor(this.x)),
            (this.y = Math.floor(this.y)),
            (this.z = Math.floor(this.z)),
            (this.w = Math.floor(this.w)),
            this
          );
        }
        ceil() {
          return (
            (this.x = Math.ceil(this.x)),
            (this.y = Math.ceil(this.y)),
            (this.z = Math.ceil(this.z)),
            (this.w = Math.ceil(this.w)),
            this
          );
        }
        round() {
          return (
            (this.x = Math.round(this.x)),
            (this.y = Math.round(this.y)),
            (this.z = Math.round(this.z)),
            (this.w = Math.round(this.w)),
            this
          );
        }
        roundToZero() {
          return (
            (this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x)),
            (this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y)),
            (this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z)),
            (this.w = this.w < 0 ? Math.ceil(this.w) : Math.floor(this.w)),
            this
          );
        }
        negate() {
          return (
            (this.x = -this.x),
            (this.y = -this.y),
            (this.z = -this.z),
            (this.w = -this.w),
            this
          );
        }
        dot(e) {
          return this.x * e.x + this.y * e.y + this.z * e.z + this.w * e.w;
        }
        lengthSq() {
          return (
            this.x * this.x +
            this.y * this.y +
            this.z * this.z +
            this.w * this.w
          );
        }
        length() {
          return Math.sqrt(
            this.x * this.x +
              this.y * this.y +
              this.z * this.z +
              this.w * this.w
          );
        }
        manhattanLength() {
          return (
            Math.abs(this.x) +
            Math.abs(this.y) +
            Math.abs(this.z) +
            Math.abs(this.w)
          );
        }
        normalize() {
          return this.divideScalar(this.length() || 1);
        }
        setLength(e) {
          return this.normalize().multiplyScalar(e);
        }
        lerp(e, t) {
          return (
            (this.x += (e.x - this.x) * t),
            (this.y += (e.y - this.y) * t),
            (this.z += (e.z - this.z) * t),
            (this.w += (e.w - this.w) * t),
            this
          );
        }
        lerpVectors(e, t, r) {
          return (
            (this.x = e.x + (t.x - e.x) * r),
            (this.y = e.y + (t.y - e.y) * r),
            (this.z = e.z + (t.z - e.z) * r),
            (this.w = e.w + (t.w - e.w) * r),
            this
          );
        }
        equals(e) {
          return (
            e.x === this.x && e.y === this.y && e.z === this.z && e.w === this.w
          );
        }
        fromArray(e, t = 0) {
          return (
            (this.x = e[t]),
            (this.y = e[t + 1]),
            (this.z = e[t + 2]),
            (this.w = e[t + 3]),
            this
          );
        }
        toArray(e = [], t = 0) {
          return (
            (e[t] = this.x),
            (e[t + 1] = this.y),
            (e[t + 2] = this.z),
            (e[t + 3] = this.w),
            e
          );
        }
        fromBufferAttribute(e, t) {
          return (
            (this.x = e.getX(t)),
            (this.y = e.getY(t)),
            (this.z = e.getZ(t)),
            (this.w = e.getW(t)),
            this
          );
        }
        random() {
          return (
            (this.x = Math.random()),
            (this.y = Math.random()),
            (this.z = Math.random()),
            (this.w = Math.random()),
            this
          );
        }
        *[Symbol.iterator]() {
          yield this.x, yield this.y, yield this.z, yield this.w;
        }
      }
      class Jt extends Yr {
        constructor(e, t, r = {}) {
          super(),
            (this.isWebGLRenderTarget = !0),
            (this.width = e),
            (this.height = t),
            (this.depth = 1),
            (this.scissor = new Be(0, 0, e, t)),
            (this.scissorTest = !1),
            (this.viewport = new Be(0, 0, e, t));
          const i = { width: e, height: t, depth: 1 };
          (this.texture = new jt(
            i,
            r.mapping,
            r.wrapS,
            r.wrapT,
            r.magFilter,
            r.minFilter,
            r.format,
            r.type,
            r.anisotropy,
            r.encoding
          )),
            (this.texture.isRenderTargetTexture = !0),
            (this.texture.flipY = !1),
            (this.texture.generateMipmaps =
              r.generateMipmaps !== void 0 && r.generateMipmaps),
            (this.texture.internalFormat =
              r.internalFormat !== void 0 ? r.internalFormat : null),
            (this.texture.minFilter =
              r.minFilter !== void 0 ? r.minFilter : 1006),
            (this.depthBuffer = r.depthBuffer === void 0 || r.depthBuffer),
            (this.stencilBuffer =
              r.stencilBuffer !== void 0 && r.stencilBuffer),
            (this.depthTexture =
              r.depthTexture !== void 0 ? r.depthTexture : null),
            (this.samples = r.samples !== void 0 ? r.samples : 0);
        }
        setSize(e, t, r = 1) {
          (this.width === e && this.height === t && this.depth === r) ||
            ((this.width = e),
            (this.height = t),
            (this.depth = r),
            (this.texture.image.width = e),
            (this.texture.image.height = t),
            (this.texture.image.depth = r),
            this.dispose()),
            this.viewport.set(0, 0, e, t),
            this.scissor.set(0, 0, e, t);
        }
        clone() {
          return new this.constructor().copy(this);
        }
        copy(e) {
          (this.width = e.width),
            (this.height = e.height),
            (this.depth = e.depth),
            this.viewport.copy(e.viewport),
            (this.texture = e.texture.clone()),
            (this.texture.isRenderTargetTexture = !0);
          const t = Object.assign({}, e.texture.image);
          return (
            (this.texture.source = new m_(t)),
            (this.depthBuffer = e.depthBuffer),
            (this.stencilBuffer = e.stencilBuffer),
            e.depthTexture !== null &&
              (this.depthTexture = e.depthTexture.clone()),
            (this.samples = e.samples),
            this
          );
        }
        dispose() {
          this.dispatchEvent({ type: "dispose" });
        }
      }
      class g_ extends jt {
        constructor(e = null, t = 1, r = 1, i = 1) {
          super(null),
            (this.isDataArrayTexture = !0),
            (this.image = { data: e, width: t, height: r, depth: i }),
            (this.magFilter = 1003),
            (this.minFilter = 1003),
            (this.wrapR = 1001),
            (this.generateMipmaps = !1),
            (this.flipY = !1),
            (this.unpackAlignment = 1);
        }
      }
      class J2 extends jt {
        constructor(e = null, t = 1, r = 1, i = 1) {
          super(null),
            (this.isData3DTexture = !0),
            (this.image = { data: e, width: t, height: r, depth: i }),
            (this.magFilter = 1003),
            (this.minFilter = 1003),
            (this.wrapR = 1001),
            (this.generateMipmaps = !1),
            (this.flipY = !1),
            (this.unpackAlignment = 1);
        }
      }
      class ar {
        constructor(e = 0, t = 0, r = 0, i = 1) {
          (this.isQuaternion = !0),
            (this._x = e),
            (this._y = t),
            (this._z = r),
            (this._w = i);
        }
        static slerpFlat(e, t, r, i, a, s, o) {
          let l = r[i + 0],
            u = r[i + 1],
            c = r[i + 2],
            h = r[i + 3];
          const d = a[s + 0],
            f = a[s + 1],
            g = a[s + 2],
            p = a[s + 3];
          if (o === 0)
            return (
              (e[t + 0] = l),
              (e[t + 1] = u),
              (e[t + 2] = c),
              void (e[t + 3] = h)
            );
          if (o === 1)
            return (
              (e[t + 0] = d),
              (e[t + 1] = f),
              (e[t + 2] = g),
              void (e[t + 3] = p)
            );
          if (h !== p || l !== d || u !== f || c !== g) {
            let y = 1 - o;
            const v = l * d + u * f + c * g + h * p,
              m = v >= 0 ? 1 : -1,
              x = 1 - v * v;
            if (x > Number.EPSILON) {
              const b = Math.sqrt(x),
                w = Math.atan2(b, v * m);
              (y = Math.sin(y * w) / b), (o = Math.sin(o * w) / b);
            }
            const _ = o * m;
            if (
              ((l = l * y + d * _),
              (u = u * y + f * _),
              (c = c * y + g * _),
              (h = h * y + p * _),
              y === 1 - o)
            ) {
              const b = 1 / Math.sqrt(l * l + u * u + c * c + h * h);
              (l *= b), (u *= b), (c *= b), (h *= b);
            }
          }
          (e[t] = l), (e[t + 1] = u), (e[t + 2] = c), (e[t + 3] = h);
        }
        static multiplyQuaternionsFlat(e, t, r, i, a, s) {
          const o = r[i],
            l = r[i + 1],
            u = r[i + 2],
            c = r[i + 3],
            h = a[s],
            d = a[s + 1],
            f = a[s + 2],
            g = a[s + 3];
          return (
            (e[t] = o * g + c * h + l * f - u * d),
            (e[t + 1] = l * g + c * d + u * h - o * f),
            (e[t + 2] = u * g + c * f + o * d - l * h),
            (e[t + 3] = c * g - o * h - l * d - u * f),
            e
          );
        }
        get x() {
          return this._x;
        }
        set x(e) {
          (this._x = e), this._onChangeCallback();
        }
        get y() {
          return this._y;
        }
        set y(e) {
          (this._y = e), this._onChangeCallback();
        }
        get z() {
          return this._z;
        }
        set z(e) {
          (this._z = e), this._onChangeCallback();
        }
        get w() {
          return this._w;
        }
        set w(e) {
          (this._w = e), this._onChangeCallback();
        }
        set(e, t, r, i) {
          return (
            (this._x = e),
            (this._y = t),
            (this._z = r),
            (this._w = i),
            this._onChangeCallback(),
            this
          );
        }
        clone() {
          return new this.constructor(this._x, this._y, this._z, this._w);
        }
        copy(e) {
          return (
            (this._x = e.x),
            (this._y = e.y),
            (this._z = e.z),
            (this._w = e.w),
            this._onChangeCallback(),
            this
          );
        }
        setFromEuler(e, t) {
          const r = e._x,
            i = e._y,
            a = e._z,
            s = e._order,
            o = Math.cos,
            l = Math.sin,
            u = o(r / 2),
            c = o(i / 2),
            h = o(a / 2),
            d = l(r / 2),
            f = l(i / 2),
            g = l(a / 2);
          switch (s) {
            case "XYZ":
              (this._x = d * c * h + u * f * g),
                (this._y = u * f * h - d * c * g),
                (this._z = u * c * g + d * f * h),
                (this._w = u * c * h - d * f * g);
              break;
            case "YXZ":
              (this._x = d * c * h + u * f * g),
                (this._y = u * f * h - d * c * g),
                (this._z = u * c * g - d * f * h),
                (this._w = u * c * h + d * f * g);
              break;
            case "ZXY":
              (this._x = d * c * h - u * f * g),
                (this._y = u * f * h + d * c * g),
                (this._z = u * c * g + d * f * h),
                (this._w = u * c * h - d * f * g);
              break;
            case "ZYX":
              (this._x = d * c * h - u * f * g),
                (this._y = u * f * h + d * c * g),
                (this._z = u * c * g - d * f * h),
                (this._w = u * c * h + d * f * g);
              break;
            case "YZX":
              (this._x = d * c * h + u * f * g),
                (this._y = u * f * h + d * c * g),
                (this._z = u * c * g - d * f * h),
                (this._w = u * c * h - d * f * g);
              break;
            case "XZY":
              (this._x = d * c * h - u * f * g),
                (this._y = u * f * h - d * c * g),
                (this._z = u * c * g + d * f * h),
                (this._w = u * c * h + d * f * g);
              break;
            default:
              console.warn(
                "THREE.Quaternion: .setFromEuler() encountered an unknown order: " +
                  s
              );
          }
          return t !== !1 && this._onChangeCallback(), this;
        }
        setFromAxisAngle(e, t) {
          const r = t / 2,
            i = Math.sin(r);
          return (
            (this._x = e.x * i),
            (this._y = e.y * i),
            (this._z = e.z * i),
            (this._w = Math.cos(r)),
            this._onChangeCallback(),
            this
          );
        }
        setFromRotationMatrix(e) {
          const t = e.elements,
            r = t[0],
            i = t[4],
            a = t[8],
            s = t[1],
            o = t[5],
            l = t[9],
            u = t[2],
            c = t[6],
            h = t[10],
            d = r + o + h;
          if (d > 0) {
            const f = 0.5 / Math.sqrt(d + 1);
            (this._w = 0.25 / f),
              (this._x = (c - l) * f),
              (this._y = (a - u) * f),
              (this._z = (s - i) * f);
          } else if (r > o && r > h) {
            const f = 2 * Math.sqrt(1 + r - o - h);
            (this._w = (c - l) / f),
              (this._x = 0.25 * f),
              (this._y = (i + s) / f),
              (this._z = (a + u) / f);
          } else if (o > h) {
            const f = 2 * Math.sqrt(1 + o - r - h);
            (this._w = (a - u) / f),
              (this._x = (i + s) / f),
              (this._y = 0.25 * f),
              (this._z = (l + c) / f);
          } else {
            const f = 2 * Math.sqrt(1 + h - r - o);
            (this._w = (s - i) / f),
              (this._x = (a + u) / f),
              (this._y = (l + c) / f),
              (this._z = 0.25 * f);
          }
          return this._onChangeCallback(), this;
        }
        setFromUnitVectors(e, t) {
          let r = e.dot(t) + 1;
          return (
            r < Number.EPSILON
              ? ((r = 0),
                Math.abs(e.x) > Math.abs(e.z)
                  ? ((this._x = -e.y),
                    (this._y = e.x),
                    (this._z = 0),
                    (this._w = r))
                  : ((this._x = 0),
                    (this._y = -e.z),
                    (this._z = e.y),
                    (this._w = r)))
              : ((this._x = e.y * t.z - e.z * t.y),
                (this._y = e.z * t.x - e.x * t.z),
                (this._z = e.x * t.y - e.y * t.x),
                (this._w = r)),
            this.normalize()
          );
        }
        angleTo(e) {
          return 2 * Math.acos(Math.abs(Gt(this.dot(e), -1, 1)));
        }
        rotateTowards(e, t) {
          const r = this.angleTo(e);
          if (r === 0) return this;
          const i = Math.min(1, t / r);
          return this.slerp(e, i), this;
        }
        identity() {
          return this.set(0, 0, 0, 1);
        }
        invert() {
          return this.conjugate();
        }
        conjugate() {
          return (
            (this._x *= -1),
            (this._y *= -1),
            (this._z *= -1),
            this._onChangeCallback(),
            this
          );
        }
        dot(e) {
          return (
            this._x * e._x + this._y * e._y + this._z * e._z + this._w * e._w
          );
        }
        lengthSq() {
          return (
            this._x * this._x +
            this._y * this._y +
            this._z * this._z +
            this._w * this._w
          );
        }
        length() {
          return Math.sqrt(
            this._x * this._x +
              this._y * this._y +
              this._z * this._z +
              this._w * this._w
          );
        }
        normalize() {
          let e = this.length();
          return (
            e === 0
              ? ((this._x = 0), (this._y = 0), (this._z = 0), (this._w = 1))
              : ((e = 1 / e),
                (this._x = this._x * e),
                (this._y = this._y * e),
                (this._z = this._z * e),
                (this._w = this._w * e)),
            this._onChangeCallback(),
            this
          );
        }
        multiply(e) {
          return this.multiplyQuaternions(this, e);
        }
        premultiply(e) {
          return this.multiplyQuaternions(e, this);
        }
        multiplyQuaternions(e, t) {
          const r = e._x,
            i = e._y,
            a = e._z,
            s = e._w,
            o = t._x,
            l = t._y,
            u = t._z,
            c = t._w;
          return (
            (this._x = r * c + s * o + i * u - a * l),
            (this._y = i * c + s * l + a * o - r * u),
            (this._z = a * c + s * u + r * l - i * o),
            (this._w = s * c - r * o - i * l - a * u),
            this._onChangeCallback(),
            this
          );
        }
        slerp(e, t) {
          if (t === 0) return this;
          if (t === 1) return this.copy(e);
          const r = this._x,
            i = this._y,
            a = this._z,
            s = this._w;
          let o = s * e._w + r * e._x + i * e._y + a * e._z;
          if (
            (o < 0
              ? ((this._w = -e._w),
                (this._x = -e._x),
                (this._y = -e._y),
                (this._z = -e._z),
                (o = -o))
              : this.copy(e),
            o >= 1)
          )
            return (
              (this._w = s), (this._x = r), (this._y = i), (this._z = a), this
            );
          const l = 1 - o * o;
          if (l <= Number.EPSILON) {
            const f = 1 - t;
            return (
              (this._w = f * s + t * this._w),
              (this._x = f * r + t * this._x),
              (this._y = f * i + t * this._y),
              (this._z = f * a + t * this._z),
              this.normalize(),
              this._onChangeCallback(),
              this
            );
          }
          const u = Math.sqrt(l),
            c = Math.atan2(u, o),
            h = Math.sin((1 - t) * c) / u,
            d = Math.sin(t * c) / u;
          return (
            (this._w = s * h + this._w * d),
            (this._x = r * h + this._x * d),
            (this._y = i * h + this._y * d),
            (this._z = a * h + this._z * d),
            this._onChangeCallback(),
            this
          );
        }
        slerpQuaternions(e, t, r) {
          return this.copy(e).slerp(t, r);
        }
        random() {
          const e = Math.random(),
            t = Math.sqrt(1 - e),
            r = Math.sqrt(e),
            i = 2 * Math.PI * Math.random(),
            a = 2 * Math.PI * Math.random();
          return this.set(
            t * Math.cos(i),
            r * Math.sin(a),
            r * Math.cos(a),
            t * Math.sin(i)
          );
        }
        equals(e) {
          return (
            e._x === this._x &&
            e._y === this._y &&
            e._z === this._z &&
            e._w === this._w
          );
        }
        fromArray(e, t = 0) {
          return (
            (this._x = e[t]),
            (this._y = e[t + 1]),
            (this._z = e[t + 2]),
            (this._w = e[t + 3]),
            this._onChangeCallback(),
            this
          );
        }
        toArray(e = [], t = 0) {
          return (
            (e[t] = this._x),
            (e[t + 1] = this._y),
            (e[t + 2] = this._z),
            (e[t + 3] = this._w),
            e
          );
        }
        fromBufferAttribute(e, t) {
          return (
            (this._x = e.getX(t)),
            (this._y = e.getY(t)),
            (this._z = e.getZ(t)),
            (this._w = e.getW(t)),
            this
          );
        }
        _onChange(e) {
          return (this._onChangeCallback = e), this;
        }
        _onChangeCallback() {}
        *[Symbol.iterator]() {
          yield this._x, yield this._y, yield this._z, yield this._w;
        }
      }
      class j {
        constructor(e = 0, t = 0, r = 0) {
          (j.prototype.isVector3 = !0),
            (this.x = e),
            (this.y = t),
            (this.z = r);
        }
        set(e, t, r) {
          return (
            r === void 0 && (r = this.z),
            (this.x = e),
            (this.y = t),
            (this.z = r),
            this
          );
        }
        setScalar(e) {
          return (this.x = e), (this.y = e), (this.z = e), this;
        }
        setX(e) {
          return (this.x = e), this;
        }
        setY(e) {
          return (this.y = e), this;
        }
        setZ(e) {
          return (this.z = e), this;
        }
        setComponent(e, t) {
          switch (e) {
            case 0:
              this.x = t;
              break;
            case 1:
              this.y = t;
              break;
            case 2:
              this.z = t;
              break;
            default:
              throw new Error("index is out of range: " + e);
          }
          return this;
        }
        getComponent(e) {
          switch (e) {
            case 0:
              return this.x;
            case 1:
              return this.y;
            case 2:
              return this.z;
            default:
              throw new Error("index is out of range: " + e);
          }
        }
        clone() {
          return new this.constructor(this.x, this.y, this.z);
        }
        copy(e) {
          return (this.x = e.x), (this.y = e.y), (this.z = e.z), this;
        }
        add(e) {
          return (this.x += e.x), (this.y += e.y), (this.z += e.z), this;
        }
        addScalar(e) {
          return (this.x += e), (this.y += e), (this.z += e), this;
        }
        addVectors(e, t) {
          return (
            (this.x = e.x + t.x),
            (this.y = e.y + t.y),
            (this.z = e.z + t.z),
            this
          );
        }
        addScaledVector(e, t) {
          return (
            (this.x += e.x * t), (this.y += e.y * t), (this.z += e.z * t), this
          );
        }
        sub(e) {
          return (this.x -= e.x), (this.y -= e.y), (this.z -= e.z), this;
        }
        subScalar(e) {
          return (this.x -= e), (this.y -= e), (this.z -= e), this;
        }
        subVectors(e, t) {
          return (
            (this.x = e.x - t.x),
            (this.y = e.y - t.y),
            (this.z = e.z - t.z),
            this
          );
        }
        multiply(e) {
          return (this.x *= e.x), (this.y *= e.y), (this.z *= e.z), this;
        }
        multiplyScalar(e) {
          return (this.x *= e), (this.y *= e), (this.z *= e), this;
        }
        multiplyVectors(e, t) {
          return (
            (this.x = e.x * t.x),
            (this.y = e.y * t.y),
            (this.z = e.z * t.z),
            this
          );
        }
        applyEuler(e) {
          return this.applyQuaternion(lv.setFromEuler(e));
        }
        applyAxisAngle(e, t) {
          return this.applyQuaternion(lv.setFromAxisAngle(e, t));
        }
        applyMatrix3(e) {
          const t = this.x,
            r = this.y,
            i = this.z,
            a = e.elements;
          return (
            (this.x = a[0] * t + a[3] * r + a[6] * i),
            (this.y = a[1] * t + a[4] * r + a[7] * i),
            (this.z = a[2] * t + a[5] * r + a[8] * i),
            this
          );
        }
        applyNormalMatrix(e) {
          return this.applyMatrix3(e).normalize();
        }
        applyMatrix4(e) {
          const t = this.x,
            r = this.y,
            i = this.z,
            a = e.elements,
            s = 1 / (a[3] * t + a[7] * r + a[11] * i + a[15]);
          return (
            (this.x = (a[0] * t + a[4] * r + a[8] * i + a[12]) * s),
            (this.y = (a[1] * t + a[5] * r + a[9] * i + a[13]) * s),
            (this.z = (a[2] * t + a[6] * r + a[10] * i + a[14]) * s),
            this
          );
        }
        applyQuaternion(e) {
          const t = this.x,
            r = this.y,
            i = this.z,
            a = e.x,
            s = e.y,
            o = e.z,
            l = e.w,
            u = l * t + s * i - o * r,
            c = l * r + o * t - a * i,
            h = l * i + a * r - s * t,
            d = -a * t - s * r - o * i;
          return (
            (this.x = u * l + d * -a + c * -o - h * -s),
            (this.y = c * l + d * -s + h * -a - u * -o),
            (this.z = h * l + d * -o + u * -s - c * -a),
            this
          );
        }
        project(e) {
          return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(
            e.projectionMatrix
          );
        }
        unproject(e) {
          return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(
            e.matrixWorld
          );
        }
        transformDirection(e) {
          const t = this.x,
            r = this.y,
            i = this.z,
            a = e.elements;
          return (
            (this.x = a[0] * t + a[4] * r + a[8] * i),
            (this.y = a[1] * t + a[5] * r + a[9] * i),
            (this.z = a[2] * t + a[6] * r + a[10] * i),
            this.normalize()
          );
        }
        divide(e) {
          return (this.x /= e.x), (this.y /= e.y), (this.z /= e.z), this;
        }
        divideScalar(e) {
          return this.multiplyScalar(1 / e);
        }
        min(e) {
          return (
            (this.x = Math.min(this.x, e.x)),
            (this.y = Math.min(this.y, e.y)),
            (this.z = Math.min(this.z, e.z)),
            this
          );
        }
        max(e) {
          return (
            (this.x = Math.max(this.x, e.x)),
            (this.y = Math.max(this.y, e.y)),
            (this.z = Math.max(this.z, e.z)),
            this
          );
        }
        clamp(e, t) {
          return (
            (this.x = Math.max(e.x, Math.min(t.x, this.x))),
            (this.y = Math.max(e.y, Math.min(t.y, this.y))),
            (this.z = Math.max(e.z, Math.min(t.z, this.z))),
            this
          );
        }
        clampScalar(e, t) {
          return (
            (this.x = Math.max(e, Math.min(t, this.x))),
            (this.y = Math.max(e, Math.min(t, this.y))),
            (this.z = Math.max(e, Math.min(t, this.z))),
            this
          );
        }
        clampLength(e, t) {
          const r = this.length();
          return this.divideScalar(r || 1).multiplyScalar(
            Math.max(e, Math.min(t, r))
          );
        }
        floor() {
          return (
            (this.x = Math.floor(this.x)),
            (this.y = Math.floor(this.y)),
            (this.z = Math.floor(this.z)),
            this
          );
        }
        ceil() {
          return (
            (this.x = Math.ceil(this.x)),
            (this.y = Math.ceil(this.y)),
            (this.z = Math.ceil(this.z)),
            this
          );
        }
        round() {
          return (
            (this.x = Math.round(this.x)),
            (this.y = Math.round(this.y)),
            (this.z = Math.round(this.z)),
            this
          );
        }
        roundToZero() {
          return (
            (this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x)),
            (this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y)),
            (this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z)),
            this
          );
        }
        negate() {
          return (
            (this.x = -this.x), (this.y = -this.y), (this.z = -this.z), this
          );
        }
        dot(e) {
          return this.x * e.x + this.y * e.y + this.z * e.z;
        }
        lengthSq() {
          return this.x * this.x + this.y * this.y + this.z * this.z;
        }
        length() {
          return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);
        }
        manhattanLength() {
          return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z);
        }
        normalize() {
          return this.divideScalar(this.length() || 1);
        }
        setLength(e) {
          return this.normalize().multiplyScalar(e);
        }
        lerp(e, t) {
          return (
            (this.x += (e.x - this.x) * t),
            (this.y += (e.y - this.y) * t),
            (this.z += (e.z - this.z) * t),
            this
          );
        }
        lerpVectors(e, t, r) {
          return (
            (this.x = e.x + (t.x - e.x) * r),
            (this.y = e.y + (t.y - e.y) * r),
            (this.z = e.z + (t.z - e.z) * r),
            this
          );
        }
        cross(e) {
          return this.crossVectors(this, e);
        }
        crossVectors(e, t) {
          const r = e.x,
            i = e.y,
            a = e.z,
            s = t.x,
            o = t.y,
            l = t.z;
          return (
            (this.x = i * l - a * o),
            (this.y = a * s - r * l),
            (this.z = r * o - i * s),
            this
          );
        }
        projectOnVector(e) {
          const t = e.lengthSq();
          if (t === 0) return this.set(0, 0, 0);
          const r = e.dot(this) / t;
          return this.copy(e).multiplyScalar(r);
        }
        projectOnPlane(e) {
          return Fd.copy(this).projectOnVector(e), this.sub(Fd);
        }
        reflect(e) {
          return this.sub(Fd.copy(e).multiplyScalar(2 * this.dot(e)));
        }
        angleTo(e) {
          const t = Math.sqrt(this.lengthSq() * e.lengthSq());
          if (t === 0) return Math.PI / 2;
          const r = this.dot(e) / t;
          return Math.acos(Gt(r, -1, 1));
        }
        distanceTo(e) {
          return Math.sqrt(this.distanceToSquared(e));
        }
        distanceToSquared(e) {
          const t = this.x - e.x,
            r = this.y - e.y,
            i = this.z - e.z;
          return t * t + r * r + i * i;
        }
        manhattanDistanceTo(e) {
          return (
            Math.abs(this.x - e.x) +
            Math.abs(this.y - e.y) +
            Math.abs(this.z - e.z)
          );
        }
        setFromSpherical(e) {
          return this.setFromSphericalCoords(e.radius, e.phi, e.theta);
        }
        setFromSphericalCoords(e, t, r) {
          const i = Math.sin(t) * e;
          return (
            (this.x = i * Math.sin(r)),
            (this.y = Math.cos(t) * e),
            (this.z = i * Math.cos(r)),
            this
          );
        }
        setFromCylindrical(e) {
          return this.setFromCylindricalCoords(e.radius, e.theta, e.y);
        }
        setFromCylindricalCoords(e, t, r) {
          return (
            (this.x = e * Math.sin(t)),
            (this.y = r),
            (this.z = e * Math.cos(t)),
            this
          );
        }
        setFromMatrixPosition(e) {
          const t = e.elements;
          return (this.x = t[12]), (this.y = t[13]), (this.z = t[14]), this;
        }
        setFromMatrixScale(e) {
          const t = this.setFromMatrixColumn(e, 0).length(),
            r = this.setFromMatrixColumn(e, 1).length(),
            i = this.setFromMatrixColumn(e, 2).length();
          return (this.x = t), (this.y = r), (this.z = i), this;
        }
        setFromMatrixColumn(e, t) {
          return this.fromArray(e.elements, 4 * t);
        }
        setFromMatrix3Column(e, t) {
          return this.fromArray(e.elements, 3 * t);
        }
        setFromEuler(e) {
          return (this.x = e._x), (this.y = e._y), (this.z = e._z), this;
        }
        equals(e) {
          return e.x === this.x && e.y === this.y && e.z === this.z;
        }
        fromArray(e, t = 0) {
          return (
            (this.x = e[t]), (this.y = e[t + 1]), (this.z = e[t + 2]), this
          );
        }
        toArray(e = [], t = 0) {
          return (e[t] = this.x), (e[t + 1] = this.y), (e[t + 2] = this.z), e;
        }
        fromBufferAttribute(e, t) {
          return (
            (this.x = e.getX(t)),
            (this.y = e.getY(t)),
            (this.z = e.getZ(t)),
            this
          );
        }
        random() {
          return (
            (this.x = Math.random()),
            (this.y = Math.random()),
            (this.z = Math.random()),
            this
          );
        }
        randomDirection() {
          const e = 2 * (Math.random() - 0.5),
            t = Math.random() * Math.PI * 2,
            r = Math.sqrt(1 - e ** 2);
          return (
            (this.x = r * Math.cos(t)),
            (this.y = r * Math.sin(t)),
            (this.z = e),
            this
          );
        }
        *[Symbol.iterator]() {
          yield this.x, yield this.y, yield this.z;
        }
      }
      const Fd = new j(),
        lv = new ar();
      class oo {
        constructor(
          e = new j(1 / 0, 1 / 0, 1 / 0),
          t = new j(-1 / 0, -1 / 0, -1 / 0)
        ) {
          (this.isBox3 = !0), (this.min = e), (this.max = t);
        }
        set(e, t) {
          return this.min.copy(e), this.max.copy(t), this;
        }
        setFromArray(e) {
          let t = 1 / 0,
            r = 1 / 0,
            i = 1 / 0,
            a = -1 / 0,
            s = -1 / 0,
            o = -1 / 0;
          for (let l = 0, u = e.length; l < u; l += 3) {
            const c = e[l],
              h = e[l + 1],
              d = e[l + 2];
            c < t && (t = c),
              h < r && (r = h),
              d < i && (i = d),
              c > a && (a = c),
              h > s && (s = h),
              d > o && (o = d);
          }
          return this.min.set(t, r, i), this.max.set(a, s, o), this;
        }
        setFromBufferAttribute(e) {
          let t = 1 / 0,
            r = 1 / 0,
            i = 1 / 0,
            a = -1 / 0,
            s = -1 / 0,
            o = -1 / 0;
          for (let l = 0, u = e.count; l < u; l++) {
            const c = e.getX(l),
              h = e.getY(l),
              d = e.getZ(l);
            c < t && (t = c),
              h < r && (r = h),
              d < i && (i = d),
              c > a && (a = c),
              h > s && (s = h),
              d > o && (o = d);
          }
          return this.min.set(t, r, i), this.max.set(a, s, o), this;
        }
        setFromPoints(e) {
          this.makeEmpty();
          for (let t = 0, r = e.length; t < r; t++) this.expandByPoint(e[t]);
          return this;
        }
        setFromCenterAndSize(e, t) {
          const r = fa.copy(t).multiplyScalar(0.5);
          return this.min.copy(e).sub(r), this.max.copy(e).add(r), this;
        }
        setFromObject(e, t = !1) {
          return this.makeEmpty(), this.expandByObject(e, t);
        }
        clone() {
          return new this.constructor().copy(this);
        }
        copy(e) {
          return this.min.copy(e.min), this.max.copy(e.max), this;
        }
        makeEmpty() {
          return (
            (this.min.x = this.min.y = this.min.z = 1 / 0),
            (this.max.x = this.max.y = this.max.z = -1 / 0),
            this
          );
        }
        isEmpty() {
          return (
            this.max.x < this.min.x ||
            this.max.y < this.min.y ||
            this.max.z < this.min.z
          );
        }
        getCenter(e) {
          return this.isEmpty()
            ? e.set(0, 0, 0)
            : e.addVectors(this.min, this.max).multiplyScalar(0.5);
        }
        getSize(e) {
          return this.isEmpty()
            ? e.set(0, 0, 0)
            : e.subVectors(this.max, this.min);
        }
        expandByPoint(e) {
          return this.min.min(e), this.max.max(e), this;
        }
        expandByVector(e) {
          return this.min.sub(e), this.max.add(e), this;
        }
        expandByScalar(e) {
          return this.min.addScalar(-e), this.max.addScalar(e), this;
        }
        expandByObject(e, t = !1) {
          e.updateWorldMatrix(!1, !1);
          const r = e.geometry;
          if (r !== void 0)
            if (t && r.attributes != null && r.attributes.position !== void 0) {
              const a = r.attributes.position;
              for (let s = 0, o = a.count; s < o; s++)
                fa.fromBufferAttribute(a, s).applyMatrix4(e.matrixWorld),
                  this.expandByPoint(fa);
            } else
              r.boundingBox === null && r.computeBoundingBox(),
                Bd.copy(r.boundingBox),
                Bd.applyMatrix4(e.matrixWorld),
                this.union(Bd);
          const i = e.children;
          for (let a = 0, s = i.length; a < s; a++)
            this.expandByObject(i[a], t);
          return this;
        }
        containsPoint(e) {
          return !(
            e.x < this.min.x ||
            e.x > this.max.x ||
            e.y < this.min.y ||
            e.y > this.max.y ||
            e.z < this.min.z ||
            e.z > this.max.z
          );
        }
        containsBox(e) {
          return (
            this.min.x <= e.min.x &&
            e.max.x <= this.max.x &&
            this.min.y <= e.min.y &&
            e.max.y <= this.max.y &&
            this.min.z <= e.min.z &&
            e.max.z <= this.max.z
          );
        }
        getParameter(e, t) {
          return t.set(
            (e.x - this.min.x) / (this.max.x - this.min.x),
            (e.y - this.min.y) / (this.max.y - this.min.y),
            (e.z - this.min.z) / (this.max.z - this.min.z)
          );
        }
        intersectsBox(e) {
          return !(
            e.max.x < this.min.x ||
            e.min.x > this.max.x ||
            e.max.y < this.min.y ||
            e.min.y > this.max.y ||
            e.max.z < this.min.z ||
            e.min.z > this.max.z
          );
        }
        intersectsSphere(e) {
          return (
            this.clampPoint(e.center, fa),
            fa.distanceToSquared(e.center) <= e.radius * e.radius
          );
        }
        intersectsPlane(e) {
          let t, r;
          return (
            e.normal.x > 0
              ? ((t = e.normal.x * this.min.x), (r = e.normal.x * this.max.x))
              : ((t = e.normal.x * this.max.x), (r = e.normal.x * this.min.x)),
            e.normal.y > 0
              ? ((t += e.normal.y * this.min.y), (r += e.normal.y * this.max.y))
              : ((t += e.normal.y * this.max.y),
                (r += e.normal.y * this.min.y)),
            e.normal.z > 0
              ? ((t += e.normal.z * this.min.z), (r += e.normal.z * this.max.z))
              : ((t += e.normal.z * this.max.z),
                (r += e.normal.z * this.min.z)),
            t <= -e.constant && r >= -e.constant
          );
        }
        intersectsTriangle(e) {
          if (this.isEmpty()) return !1;
          this.getCenter(No),
            Eu.subVectors(this.max, No),
            es.subVectors(e.a, No),
            ts.subVectors(e.b, No),
            ns.subVectors(e.c, No),
            Ti.subVectors(ts, es),
            Ei.subVectors(ns, ts),
            pa.subVectors(es, ns);
          let t = [
            0,
            -Ti.z,
            Ti.y,
            0,
            -Ei.z,
            Ei.y,
            0,
            -pa.z,
            pa.y,
            Ti.z,
            0,
            -Ti.x,
            Ei.z,
            0,
            -Ei.x,
            pa.z,
            0,
            -pa.x,
            -Ti.y,
            Ti.x,
            0,
            -Ei.y,
            Ei.x,
            0,
            -pa.y,
            pa.x,
            0,
          ];
          return (
            !!Gd(t, es, ts, ns, Eu) &&
            ((t = [1, 0, 0, 0, 1, 0, 0, 0, 1]),
            !!Gd(t, es, ts, ns, Eu) &&
              (Cu.crossVectors(Ti, Ei),
              (t = [Cu.x, Cu.y, Cu.z]),
              Gd(t, es, ts, ns, Eu)))
          );
        }
        clampPoint(e, t) {
          return t.copy(e).clamp(this.min, this.max);
        }
        distanceToPoint(e) {
          return fa.copy(e).clamp(this.min, this.max).sub(e).length();
        }
        getBoundingSphere(e) {
          return (
            this.getCenter(e.center),
            (e.radius = 0.5 * this.getSize(fa).length()),
            e
          );
        }
        intersect(e) {
          return (
            this.min.max(e.min),
            this.max.min(e.max),
            this.isEmpty() && this.makeEmpty(),
            this
          );
        }
        union(e) {
          return this.min.min(e.min), this.max.max(e.max), this;
        }
        applyMatrix4(e) {
          return (
            this.isEmpty() ||
              (Qr[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(e),
              Qr[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(e),
              Qr[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(e),
              Qr[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(e),
              Qr[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(e),
              Qr[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(e),
              Qr[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(e),
              Qr[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(e),
              this.setFromPoints(Qr)),
            this
          );
        }
        translate(e) {
          return this.min.add(e), this.max.add(e), this;
        }
        equals(e) {
          return e.min.equals(this.min) && e.max.equals(this.max);
        }
      }
      const Qr = [
          new j(),
          new j(),
          new j(),
          new j(),
          new j(),
          new j(),
          new j(),
          new j(),
        ],
        fa = new j(),
        Bd = new oo(),
        es = new j(),
        ts = new j(),
        ns = new j(),
        Ti = new j(),
        Ei = new j(),
        pa = new j(),
        No = new j(),
        Eu = new j(),
        Cu = new j(),
        ma = new j();
      function Gd(n, e, t, r, i) {
        for (let a = 0, s = n.length - 3; a <= s; a += 3) {
          ma.fromArray(n, a);
          const o =
              i.x * Math.abs(ma.x) +
              i.y * Math.abs(ma.y) +
              i.z * Math.abs(ma.z),
            l = e.dot(ma),
            u = t.dot(ma),
            c = r.dot(ma);
          if (Math.max(-Math.max(l, u, c), Math.min(l, u, c)) > o) return !1;
        }
        return !0;
      }
      const Q2 = new oo(),
        uv = new j(),
        Au = new j(),
        Hd = new j();
      class lo {
        constructor(e = new j(), t = -1) {
          (this.center = e), (this.radius = t);
        }
        set(e, t) {
          return this.center.copy(e), (this.radius = t), this;
        }
        setFromPoints(e, t) {
          const r = this.center;
          t !== void 0 ? r.copy(t) : Q2.setFromPoints(e).getCenter(r);
          let i = 0;
          for (let a = 0, s = e.length; a < s; a++)
            i = Math.max(i, r.distanceToSquared(e[a]));
          return (this.radius = Math.sqrt(i)), this;
        }
        copy(e) {
          return this.center.copy(e.center), (this.radius = e.radius), this;
        }
        isEmpty() {
          return this.radius < 0;
        }
        makeEmpty() {
          return this.center.set(0, 0, 0), (this.radius = -1), this;
        }
        containsPoint(e) {
          return e.distanceToSquared(this.center) <= this.radius * this.radius;
        }
        distanceToPoint(e) {
          return e.distanceTo(this.center) - this.radius;
        }
        intersectsSphere(e) {
          const t = this.radius + e.radius;
          return e.center.distanceToSquared(this.center) <= t * t;
        }
        intersectsBox(e) {
          return e.intersectsSphere(this);
        }
        intersectsPlane(e) {
          return Math.abs(e.distanceToPoint(this.center)) <= this.radius;
        }
        clampPoint(e, t) {
          const r = this.center.distanceToSquared(e);
          return (
            t.copy(e),
            r > this.radius * this.radius &&
              (t.sub(this.center).normalize(),
              t.multiplyScalar(this.radius).add(this.center)),
            t
          );
        }
        getBoundingBox(e) {
          return this.isEmpty()
            ? (e.makeEmpty(), e)
            : (e.set(this.center, this.center),
              e.expandByScalar(this.radius),
              e);
        }
        applyMatrix4(e) {
          return (
            this.center.applyMatrix4(e),
            (this.radius = this.radius * e.getMaxScaleOnAxis()),
            this
          );
        }
        translate(e) {
          return this.center.add(e), this;
        }
        expandByPoint(e) {
          Hd.subVectors(e, this.center);
          const t = Hd.lengthSq();
          if (t > this.radius * this.radius) {
            const r = Math.sqrt(t),
              i = 0.5 * (r - this.radius);
            this.center.add(Hd.multiplyScalar(i / r)), (this.radius += i);
          }
          return this;
        }
        union(e) {
          return (
            this.center.equals(e.center) === !0
              ? Au.set(0, 0, 1).multiplyScalar(e.radius)
              : Au.subVectors(e.center, this.center)
                  .normalize()
                  .multiplyScalar(e.radius),
            this.expandByPoint(uv.copy(e.center).add(Au)),
            this.expandByPoint(uv.copy(e.center).sub(Au)),
            this
          );
        }
        equals(e) {
          return e.center.equals(this.center) && e.radius === this.radius;
        }
        clone() {
          return new this.constructor().copy(this);
        }
      }
      const ei = new j(),
        Vd = new j(),
        Ru = new j(),
        Ci = new j(),
        Wd = new j(),
        Pu = new j(),
        jd = new j();
      class Ih {
        constructor(e = new j(), t = new j(0, 0, -1)) {
          (this.origin = e), (this.direction = t);
        }
        set(e, t) {
          return this.origin.copy(e), this.direction.copy(t), this;
        }
        copy(e) {
          return (
            this.origin.copy(e.origin), this.direction.copy(e.direction), this
          );
        }
        at(e, t) {
          return t.copy(this.direction).multiplyScalar(e).add(this.origin);
        }
        lookAt(e) {
          return this.direction.copy(e).sub(this.origin).normalize(), this;
        }
        recast(e) {
          return this.origin.copy(this.at(e, ei)), this;
        }
        closestPointToPoint(e, t) {
          t.subVectors(e, this.origin);
          const r = t.dot(this.direction);
          return r < 0
            ? t.copy(this.origin)
            : t.copy(this.direction).multiplyScalar(r).add(this.origin);
        }
        distanceToPoint(e) {
          return Math.sqrt(this.distanceSqToPoint(e));
        }
        distanceSqToPoint(e) {
          const t = ei.subVectors(e, this.origin).dot(this.direction);
          return t < 0
            ? this.origin.distanceToSquared(e)
            : (ei.copy(this.direction).multiplyScalar(t).add(this.origin),
              ei.distanceToSquared(e));
        }
        distanceSqToSegment(e, t, r, i) {
          Vd.copy(e).add(t).multiplyScalar(0.5),
            Ru.copy(t).sub(e).normalize(),
            Ci.copy(this.origin).sub(Vd);
          const a = 0.5 * e.distanceTo(t),
            s = -this.direction.dot(Ru),
            o = Ci.dot(this.direction),
            l = -Ci.dot(Ru),
            u = Ci.lengthSq(),
            c = Math.abs(1 - s * s);
          let h, d, f, g;
          if (c > 0)
            if (((h = s * l - o), (d = s * o - l), (g = a * c), h >= 0))
              if (d >= -g)
                if (d <= g) {
                  const p = 1 / c;
                  (h *= p),
                    (d *= p),
                    (f = h * (h + s * d + 2 * o) + d * (s * h + d + 2 * l) + u);
                } else
                  (d = a),
                    (h = Math.max(0, -(s * d + o))),
                    (f = -h * h + d * (d + 2 * l) + u);
              else
                (d = -a),
                  (h = Math.max(0, -(s * d + o))),
                  (f = -h * h + d * (d + 2 * l) + u);
            else
              d <= -g
                ? ((h = Math.max(0, -(-s * a + o))),
                  (d = h > 0 ? -a : Math.min(Math.max(-a, -l), a)),
                  (f = -h * h + d * (d + 2 * l) + u))
                : d <= g
                ? ((h = 0),
                  (d = Math.min(Math.max(-a, -l), a)),
                  (f = d * (d + 2 * l) + u))
                : ((h = Math.max(0, -(s * a + o))),
                  (d = h > 0 ? a : Math.min(Math.max(-a, -l), a)),
                  (f = -h * h + d * (d + 2 * l) + u));
          else
            (d = s > 0 ? -a : a),
              (h = Math.max(0, -(s * d + o))),
              (f = -h * h + d * (d + 2 * l) + u);
          return (
            r && r.copy(this.direction).multiplyScalar(h).add(this.origin),
            i && i.copy(Ru).multiplyScalar(d).add(Vd),
            f
          );
        }
        intersectSphere(e, t) {
          ei.subVectors(e.center, this.origin);
          const r = ei.dot(this.direction),
            i = ei.dot(ei) - r * r,
            a = e.radius * e.radius;
          if (i > a) return null;
          const s = Math.sqrt(a - i),
            o = r - s,
            l = r + s;
          return o < 0 && l < 0 ? null : o < 0 ? this.at(l, t) : this.at(o, t);
        }
        intersectsSphere(e) {
          return this.distanceSqToPoint(e.center) <= e.radius * e.radius;
        }
        distanceToPlane(e) {
          const t = e.normal.dot(this.direction);
          if (t === 0) return e.distanceToPoint(this.origin) === 0 ? 0 : null;
          const r = -(this.origin.dot(e.normal) + e.constant) / t;
          return r >= 0 ? r : null;
        }
        intersectPlane(e, t) {
          const r = this.distanceToPlane(e);
          return r === null ? null : this.at(r, t);
        }
        intersectsPlane(e) {
          const t = e.distanceToPoint(this.origin);
          return t === 0 ? !0 : e.normal.dot(this.direction) * t < 0;
        }
        intersectBox(e, t) {
          let r, i, a, s, o, l;
          const u = 1 / this.direction.x,
            c = 1 / this.direction.y,
            h = 1 / this.direction.z,
            d = this.origin;
          return (
            u >= 0
              ? ((r = (e.min.x - d.x) * u), (i = (e.max.x - d.x) * u))
              : ((r = (e.max.x - d.x) * u), (i = (e.min.x - d.x) * u)),
            c >= 0
              ? ((a = (e.min.y - d.y) * c), (s = (e.max.y - d.y) * c))
              : ((a = (e.max.y - d.y) * c), (s = (e.min.y - d.y) * c)),
            r > s || a > i
              ? null
              : ((a > r || r != r) && (r = a),
                (s < i || i != i) && (i = s),
                h >= 0
                  ? ((o = (e.min.z - d.z) * h), (l = (e.max.z - d.z) * h))
                  : ((o = (e.max.z - d.z) * h), (l = (e.min.z - d.z) * h)),
                r > l || o > i
                  ? null
                  : ((o > r || r != r) && (r = o),
                    (l < i || i != i) && (i = l),
                    i < 0 ? null : this.at(r >= 0 ? r : i, t)))
          );
        }
        intersectsBox(e) {
          return this.intersectBox(e, ei) !== null;
        }
        intersectTriangle(e, t, r, i, a) {
          Wd.subVectors(t, e), Pu.subVectors(r, e), jd.crossVectors(Wd, Pu);
          let s,
            o = this.direction.dot(jd);
          if (o > 0) {
            if (i) return null;
            s = 1;
          } else {
            if (!(o < 0)) return null;
            (s = -1), (o = -o);
          }
          Ci.subVectors(this.origin, e);
          const l = s * this.direction.dot(Pu.crossVectors(Ci, Pu));
          if (l < 0) return null;
          const u = s * this.direction.dot(Wd.cross(Ci));
          if (u < 0 || l + u > o) return null;
          const c = -s * Ci.dot(jd);
          return c < 0 ? null : this.at(c / o, a);
        }
        applyMatrix4(e) {
          return (
            this.origin.applyMatrix4(e),
            this.direction.transformDirection(e),
            this
          );
        }
        equals(e) {
          return (
            e.origin.equals(this.origin) && e.direction.equals(this.direction)
          );
        }
        clone() {
          return new this.constructor().copy(this);
        }
      }
      class Te {
        constructor() {
          (Te.prototype.isMatrix4 = !0),
            (this.elements = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);
        }
        set(e, t, r, i, a, s, o, l, u, c, h, d, f, g, p, y) {
          const v = this.elements;
          return (
            (v[0] = e),
            (v[4] = t),
            (v[8] = r),
            (v[12] = i),
            (v[1] = a),
            (v[5] = s),
            (v[9] = o),
            (v[13] = l),
            (v[2] = u),
            (v[6] = c),
            (v[10] = h),
            (v[14] = d),
            (v[3] = f),
            (v[7] = g),
            (v[11] = p),
            (v[15] = y),
            this
          );
        }
        identity() {
          return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this;
        }
        clone() {
          return new Te().fromArray(this.elements);
        }
        copy(e) {
          const t = this.elements,
            r = e.elements;
          return (
            (t[0] = r[0]),
            (t[1] = r[1]),
            (t[2] = r[2]),
            (t[3] = r[3]),
            (t[4] = r[4]),
            (t[5] = r[5]),
            (t[6] = r[6]),
            (t[7] = r[7]),
            (t[8] = r[8]),
            (t[9] = r[9]),
            (t[10] = r[10]),
            (t[11] = r[11]),
            (t[12] = r[12]),
            (t[13] = r[13]),
            (t[14] = r[14]),
            (t[15] = r[15]),
            this
          );
        }
        copyPosition(e) {
          const t = this.elements,
            r = e.elements;
          return (t[12] = r[12]), (t[13] = r[13]), (t[14] = r[14]), this;
        }
        setFromMatrix3(e) {
          const t = e.elements;
          return (
            this.set(
              t[0],
              t[3],
              t[6],
              0,
              t[1],
              t[4],
              t[7],
              0,
              t[2],
              t[5],
              t[8],
              0,
              0,
              0,
              0,
              1
            ),
            this
          );
        }
        extractBasis(e, t, r) {
          return (
            e.setFromMatrixColumn(this, 0),
            t.setFromMatrixColumn(this, 1),
            r.setFromMatrixColumn(this, 2),
            this
          );
        }
        makeBasis(e, t, r) {
          return (
            this.set(
              e.x,
              t.x,
              r.x,
              0,
              e.y,
              t.y,
              r.y,
              0,
              e.z,
              t.z,
              r.z,
              0,
              0,
              0,
              0,
              1
            ),
            this
          );
        }
        extractRotation(e) {
          const t = this.elements,
            r = e.elements,
            i = 1 / rs.setFromMatrixColumn(e, 0).length(),
            a = 1 / rs.setFromMatrixColumn(e, 1).length(),
            s = 1 / rs.setFromMatrixColumn(e, 2).length();
          return (
            (t[0] = r[0] * i),
            (t[1] = r[1] * i),
            (t[2] = r[2] * i),
            (t[3] = 0),
            (t[4] = r[4] * a),
            (t[5] = r[5] * a),
            (t[6] = r[6] * a),
            (t[7] = 0),
            (t[8] = r[8] * s),
            (t[9] = r[9] * s),
            (t[10] = r[10] * s),
            (t[11] = 0),
            (t[12] = 0),
            (t[13] = 0),
            (t[14] = 0),
            (t[15] = 1),
            this
          );
        }
        makeRotationFromEuler(e) {
          const t = this.elements,
            r = e.x,
            i = e.y,
            a = e.z,
            s = Math.cos(r),
            o = Math.sin(r),
            l = Math.cos(i),
            u = Math.sin(i),
            c = Math.cos(a),
            h = Math.sin(a);
          if (e.order === "XYZ") {
            const d = s * c,
              f = s * h,
              g = o * c,
              p = o * h;
            (t[0] = l * c),
              (t[4] = -l * h),
              (t[8] = u),
              (t[1] = f + g * u),
              (t[5] = d - p * u),
              (t[9] = -o * l),
              (t[2] = p - d * u),
              (t[6] = g + f * u),
              (t[10] = s * l);
          } else if (e.order === "YXZ") {
            const d = l * c,
              f = l * h,
              g = u * c,
              p = u * h;
            (t[0] = d + p * o),
              (t[4] = g * o - f),
              (t[8] = s * u),
              (t[1] = s * h),
              (t[5] = s * c),
              (t[9] = -o),
              (t[2] = f * o - g),
              (t[6] = p + d * o),
              (t[10] = s * l);
          } else if (e.order === "ZXY") {
            const d = l * c,
              f = l * h,
              g = u * c,
              p = u * h;
            (t[0] = d - p * o),
              (t[4] = -s * h),
              (t[8] = g + f * o),
              (t[1] = f + g * o),
              (t[5] = s * c),
              (t[9] = p - d * o),
              (t[2] = -s * u),
              (t[6] = o),
              (t[10] = s * l);
          } else if (e.order === "ZYX") {
            const d = s * c,
              f = s * h,
              g = o * c,
              p = o * h;
            (t[0] = l * c),
              (t[4] = g * u - f),
              (t[8] = d * u + p),
              (t[1] = l * h),
              (t[5] = p * u + d),
              (t[9] = f * u - g),
              (t[2] = -u),
              (t[6] = o * l),
              (t[10] = s * l);
          } else if (e.order === "YZX") {
            const d = s * l,
              f = s * u,
              g = o * l,
              p = o * u;
            (t[0] = l * c),
              (t[4] = p - d * h),
              (t[8] = g * h + f),
              (t[1] = h),
              (t[5] = s * c),
              (t[9] = -o * c),
              (t[2] = -u * c),
              (t[6] = f * h + g),
              (t[10] = d - p * h);
          } else if (e.order === "XZY") {
            const d = s * l,
              f = s * u,
              g = o * l,
              p = o * u;
            (t[0] = l * c),
              (t[4] = -h),
              (t[8] = u * c),
              (t[1] = d * h + p),
              (t[5] = s * c),
              (t[9] = f * h - g),
              (t[2] = g * h - f),
              (t[6] = o * c),
              (t[10] = p * h + d);
          }
          return (
            (t[3] = 0),
            (t[7] = 0),
            (t[11] = 0),
            (t[12] = 0),
            (t[13] = 0),
            (t[14] = 0),
            (t[15] = 1),
            this
          );
        }
        makeRotationFromQuaternion(e) {
          return this.compose(eS, e, tS);
        }
        lookAt(e, t, r) {
          const i = this.elements;
          return (
            Bn.subVectors(e, t),
            Bn.lengthSq() === 0 && (Bn.z = 1),
            Bn.normalize(),
            Ai.crossVectors(r, Bn),
            Ai.lengthSq() === 0 &&
              (Math.abs(r.z) === 1 ? (Bn.x += 1e-4) : (Bn.z += 1e-4),
              Bn.normalize(),
              Ai.crossVectors(r, Bn)),
            Ai.normalize(),
            Lu.crossVectors(Bn, Ai),
            (i[0] = Ai.x),
            (i[4] = Lu.x),
            (i[8] = Bn.x),
            (i[1] = Ai.y),
            (i[5] = Lu.y),
            (i[9] = Bn.y),
            (i[2] = Ai.z),
            (i[6] = Lu.z),
            (i[10] = Bn.z),
            this
          );
        }
        multiply(e) {
          return this.multiplyMatrices(this, e);
        }
        premultiply(e) {
          return this.multiplyMatrices(e, this);
        }
        multiplyMatrices(e, t) {
          const r = e.elements,
            i = t.elements,
            a = this.elements,
            s = r[0],
            o = r[4],
            l = r[8],
            u = r[12],
            c = r[1],
            h = r[5],
            d = r[9],
            f = r[13],
            g = r[2],
            p = r[6],
            y = r[10],
            v = r[14],
            m = r[3],
            x = r[7],
            _ = r[11],
            b = r[15],
            w = i[0],
            M = i[4],
            C = i[8],
            N = i[12],
            G = i[1],
            U = i[5],
            I = i[9],
            F = i[13],
            T = i[2],
            O = i[6],
            k = i[10],
            P = i[14],
            E = i[3],
            z = i[7],
            A = i[11],
            D = i[15];
          return (
            (a[0] = s * w + o * G + l * T + u * E),
            (a[4] = s * M + o * U + l * O + u * z),
            (a[8] = s * C + o * I + l * k + u * A),
            (a[12] = s * N + o * F + l * P + u * D),
            (a[1] = c * w + h * G + d * T + f * E),
            (a[5] = c * M + h * U + d * O + f * z),
            (a[9] = c * C + h * I + d * k + f * A),
            (a[13] = c * N + h * F + d * P + f * D),
            (a[2] = g * w + p * G + y * T + v * E),
            (a[6] = g * M + p * U + y * O + v * z),
            (a[10] = g * C + p * I + y * k + v * A),
            (a[14] = g * N + p * F + y * P + v * D),
            (a[3] = m * w + x * G + _ * T + b * E),
            (a[7] = m * M + x * U + _ * O + b * z),
            (a[11] = m * C + x * I + _ * k + b * A),
            (a[15] = m * N + x * F + _ * P + b * D),
            this
          );
        }
        multiplyScalar(e) {
          const t = this.elements;
          return (
            (t[0] *= e),
            (t[4] *= e),
            (t[8] *= e),
            (t[12] *= e),
            (t[1] *= e),
            (t[5] *= e),
            (t[9] *= e),
            (t[13] *= e),
            (t[2] *= e),
            (t[6] *= e),
            (t[10] *= e),
            (t[14] *= e),
            (t[3] *= e),
            (t[7] *= e),
            (t[11] *= e),
            (t[15] *= e),
            this
          );
        }
        determinant() {
          const e = this.elements,
            t = e[0],
            r = e[4],
            i = e[8],
            a = e[12],
            s = e[1],
            o = e[5],
            l = e[9],
            u = e[13],
            c = e[2],
            h = e[6],
            d = e[10],
            f = e[14];
          return (
            e[3] *
              (+a * l * h -
                i * u * h -
                a * o * d +
                r * u * d +
                i * o * f -
                r * l * f) +
            e[7] *
              (+t * l * f -
                t * u * d +
                a * s * d -
                i * s * f +
                i * u * c -
                a * l * c) +
            e[11] *
              (+t * u * h -
                t * o * f -
                a * s * h +
                r * s * f +
                a * o * c -
                r * u * c) +
            e[15] *
              (-i * o * c -
                t * l * h +
                t * o * d +
                i * s * h -
                r * s * d +
                r * l * c)
          );
        }
        transpose() {
          const e = this.elements;
          let t;
          return (
            (t = e[1]),
            (e[1] = e[4]),
            (e[4] = t),
            (t = e[2]),
            (e[2] = e[8]),
            (e[8] = t),
            (t = e[6]),
            (e[6] = e[9]),
            (e[9] = t),
            (t = e[3]),
            (e[3] = e[12]),
            (e[12] = t),
            (t = e[7]),
            (e[7] = e[13]),
            (e[13] = t),
            (t = e[11]),
            (e[11] = e[14]),
            (e[14] = t),
            this
          );
        }
        setPosition(e, t, r) {
          const i = this.elements;
          return (
            e.isVector3
              ? ((i[12] = e.x), (i[13] = e.y), (i[14] = e.z))
              : ((i[12] = e), (i[13] = t), (i[14] = r)),
            this
          );
        }
        invert() {
          const e = this.elements,
            t = e[0],
            r = e[1],
            i = e[2],
            a = e[3],
            s = e[4],
            o = e[5],
            l = e[6],
            u = e[7],
            c = e[8],
            h = e[9],
            d = e[10],
            f = e[11],
            g = e[12],
            p = e[13],
            y = e[14],
            v = e[15],
            m =
              h * y * u -
              p * d * u +
              p * l * f -
              o * y * f -
              h * l * v +
              o * d * v,
            x =
              g * d * u -
              c * y * u -
              g * l * f +
              s * y * f +
              c * l * v -
              s * d * v,
            _ =
              c * p * u -
              g * h * u +
              g * o * f -
              s * p * f -
              c * o * v +
              s * h * v,
            b =
              g * h * l -
              c * p * l -
              g * o * d +
              s * p * d +
              c * o * y -
              s * h * y,
            w = t * m + r * x + i * _ + a * b;
          if (w === 0)
            return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
          const M = 1 / w;
          return (
            (e[0] = m * M),
            (e[1] =
              (p * d * a -
                h * y * a -
                p * i * f +
                r * y * f +
                h * i * v -
                r * d * v) *
              M),
            (e[2] =
              (o * y * a -
                p * l * a +
                p * i * u -
                r * y * u -
                o * i * v +
                r * l * v) *
              M),
            (e[3] =
              (h * l * a -
                o * d * a -
                h * i * u +
                r * d * u +
                o * i * f -
                r * l * f) *
              M),
            (e[4] = x * M),
            (e[5] =
              (c * y * a -
                g * d * a +
                g * i * f -
                t * y * f -
                c * i * v +
                t * d * v) *
              M),
            (e[6] =
              (g * l * a -
                s * y * a -
                g * i * u +
                t * y * u +
                s * i * v -
                t * l * v) *
              M),
            (e[7] =
              (s * d * a -
                c * l * a +
                c * i * u -
                t * d * u -
                s * i * f +
                t * l * f) *
              M),
            (e[8] = _ * M),
            (e[9] =
              (g * h * a -
                c * p * a -
                g * r * f +
                t * p * f +
                c * r * v -
                t * h * v) *
              M),
            (e[10] =
              (s * p * a -
                g * o * a +
                g * r * u -
                t * p * u -
                s * r * v +
                t * o * v) *
              M),
            (e[11] =
              (c * o * a -
                s * h * a -
                c * r * u +
                t * h * u +
                s * r * f -
                t * o * f) *
              M),
            (e[12] = b * M),
            (e[13] =
              (c * p * i -
                g * h * i +
                g * r * d -
                t * p * d -
                c * r * y +
                t * h * y) *
              M),
            (e[14] =
              (g * o * i -
                s * p * i -
                g * r * l +
                t * p * l +
                s * r * y -
                t * o * y) *
              M),
            (e[15] =
              (s * h * i -
                c * o * i +
                c * r * l -
                t * h * l -
                s * r * d +
                t * o * d) *
              M),
            this
          );
        }
        scale(e) {
          const t = this.elements,
            r = e.x,
            i = e.y,
            a = e.z;
          return (
            (t[0] *= r),
            (t[4] *= i),
            (t[8] *= a),
            (t[1] *= r),
            (t[5] *= i),
            (t[9] *= a),
            (t[2] *= r),
            (t[6] *= i),
            (t[10] *= a),
            (t[3] *= r),
            (t[7] *= i),
            (t[11] *= a),
            this
          );
        }
        getMaxScaleOnAxis() {
          const e = this.elements,
            t = e[0] * e[0] + e[1] * e[1] + e[2] * e[2],
            r = e[4] * e[4] + e[5] * e[5] + e[6] * e[6],
            i = e[8] * e[8] + e[9] * e[9] + e[10] * e[10];
          return Math.sqrt(Math.max(t, r, i));
        }
        makeTranslation(e, t, r) {
          return this.set(1, 0, 0, e, 0, 1, 0, t, 0, 0, 1, r, 0, 0, 0, 1), this;
        }
        makeRotationX(e) {
          const t = Math.cos(e),
            r = Math.sin(e);
          return (
            this.set(1, 0, 0, 0, 0, t, -r, 0, 0, r, t, 0, 0, 0, 0, 1), this
          );
        }
        makeRotationY(e) {
          const t = Math.cos(e),
            r = Math.sin(e);
          return (
            this.set(t, 0, r, 0, 0, 1, 0, 0, -r, 0, t, 0, 0, 0, 0, 1), this
          );
        }
        makeRotationZ(e) {
          const t = Math.cos(e),
            r = Math.sin(e);
          return (
            this.set(t, -r, 0, 0, r, t, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
          );
        }
        makeRotationAxis(e, t) {
          const r = Math.cos(t),
            i = Math.sin(t),
            a = 1 - r,
            s = e.x,
            o = e.y,
            l = e.z,
            u = a * s,
            c = a * o;
          return (
            this.set(
              u * s + r,
              u * o - i * l,
              u * l + i * o,
              0,
              u * o + i * l,
              c * o + r,
              c * l - i * s,
              0,
              u * l - i * o,
              c * l + i * s,
              a * l * l + r,
              0,
              0,
              0,
              0,
              1
            ),
            this
          );
        }
        makeScale(e, t, r) {
          return this.set(e, 0, 0, 0, 0, t, 0, 0, 0, 0, r, 0, 0, 0, 0, 1), this;
        }
        makeShear(e, t, r, i, a, s) {
          return this.set(1, r, a, 0, e, 1, s, 0, t, i, 1, 0, 0, 0, 0, 1), this;
        }
        compose(e, t, r) {
          const i = this.elements,
            a = t._x,
            s = t._y,
            o = t._z,
            l = t._w,
            u = a + a,
            c = s + s,
            h = o + o,
            d = a * u,
            f = a * c,
            g = a * h,
            p = s * c,
            y = s * h,
            v = o * h,
            m = l * u,
            x = l * c,
            _ = l * h,
            b = r.x,
            w = r.y,
            M = r.z;
          return (
            (i[0] = (1 - (p + v)) * b),
            (i[1] = (f + _) * b),
            (i[2] = (g - x) * b),
            (i[3] = 0),
            (i[4] = (f - _) * w),
            (i[5] = (1 - (d + v)) * w),
            (i[6] = (y + m) * w),
            (i[7] = 0),
            (i[8] = (g + x) * M),
            (i[9] = (y - m) * M),
            (i[10] = (1 - (d + p)) * M),
            (i[11] = 0),
            (i[12] = e.x),
            (i[13] = e.y),
            (i[14] = e.z),
            (i[15] = 1),
            this
          );
        }
        decompose(e, t, r) {
          const i = this.elements;
          let a = rs.set(i[0], i[1], i[2]).length();
          const s = rs.set(i[4], i[5], i[6]).length(),
            o = rs.set(i[8], i[9], i[10]).length();
          this.determinant() < 0 && (a = -a),
            (e.x = i[12]),
            (e.y = i[13]),
            (e.z = i[14]),
            vr.copy(this);
          const l = 1 / a,
            u = 1 / s,
            c = 1 / o;
          return (
            (vr.elements[0] *= l),
            (vr.elements[1] *= l),
            (vr.elements[2] *= l),
            (vr.elements[4] *= u),
            (vr.elements[5] *= u),
            (vr.elements[6] *= u),
            (vr.elements[8] *= c),
            (vr.elements[9] *= c),
            (vr.elements[10] *= c),
            t.setFromRotationMatrix(vr),
            (r.x = a),
            (r.y = s),
            (r.z = o),
            this
          );
        }
        makePerspective(e, t, r, i, a, s) {
          const o = this.elements,
            l = (2 * a) / (t - e),
            u = (2 * a) / (r - i),
            c = (t + e) / (t - e),
            h = (r + i) / (r - i),
            d = -(s + a) / (s - a),
            f = (-2 * s * a) / (s - a);
          return (
            (o[0] = l),
            (o[4] = 0),
            (o[8] = c),
            (o[12] = 0),
            (o[1] = 0),
            (o[5] = u),
            (o[9] = h),
            (o[13] = 0),
            (o[2] = 0),
            (o[6] = 0),
            (o[10] = d),
            (o[14] = f),
            (o[3] = 0),
            (o[7] = 0),
            (o[11] = -1),
            (o[15] = 0),
            this
          );
        }
        makeOrthographic(e, t, r, i, a, s) {
          const o = this.elements,
            l = 1 / (t - e),
            u = 1 / (r - i),
            c = 1 / (s - a),
            h = (t + e) * l,
            d = (r + i) * u,
            f = (s + a) * c;
          return (
            (o[0] = 2 * l),
            (o[4] = 0),
            (o[8] = 0),
            (o[12] = -h),
            (o[1] = 0),
            (o[5] = 2 * u),
            (o[9] = 0),
            (o[13] = -d),
            (o[2] = 0),
            (o[6] = 0),
            (o[10] = -2 * c),
            (o[14] = -f),
            (o[3] = 0),
            (o[7] = 0),
            (o[11] = 0),
            (o[15] = 1),
            this
          );
        }
        equals(e) {
          const t = this.elements,
            r = e.elements;
          for (let i = 0; i < 16; i++) if (t[i] !== r[i]) return !1;
          return !0;
        }
        fromArray(e, t = 0) {
          for (let r = 0; r < 16; r++) this.elements[r] = e[r + t];
          return this;
        }
        toArray(e = [], t = 0) {
          const r = this.elements;
          return (
            (e[t] = r[0]),
            (e[t + 1] = r[1]),
            (e[t + 2] = r[2]),
            (e[t + 3] = r[3]),
            (e[t + 4] = r[4]),
            (e[t + 5] = r[5]),
            (e[t + 6] = r[6]),
            (e[t + 7] = r[7]),
            (e[t + 8] = r[8]),
            (e[t + 9] = r[9]),
            (e[t + 10] = r[10]),
            (e[t + 11] = r[11]),
            (e[t + 12] = r[12]),
            (e[t + 13] = r[13]),
            (e[t + 14] = r[14]),
            (e[t + 15] = r[15]),
            e
          );
        }
      }
      const rs = new j(),
        vr = new Te(),
        eS = new j(0, 0, 0),
        tS = new j(1, 1, 1),
        Ai = new j(),
        Lu = new j(),
        Bn = new j(),
        cv = new Te(),
        hv = new ar();
      class xn {
        constructor(e = 0, t = 0, r = 0, i = xn.DefaultOrder) {
          (this.isEuler = !0),
            (this._x = e),
            (this._y = t),
            (this._z = r),
            (this._order = i);
        }
        get x() {
          return this._x;
        }
        set x(e) {
          (this._x = e), this._onChangeCallback();
        }
        get y() {
          return this._y;
        }
        set y(e) {
          (this._y = e), this._onChangeCallback();
        }
        get z() {
          return this._z;
        }
        set z(e) {
          (this._z = e), this._onChangeCallback();
        }
        get order() {
          return this._order;
        }
        set order(e) {
          (this._order = e), this._onChangeCallback();
        }
        set(e, t, r, i = this._order) {
          return (
            (this._x = e),
            (this._y = t),
            (this._z = r),
            (this._order = i),
            this._onChangeCallback(),
            this
          );
        }
        clone() {
          return new this.constructor(this._x, this._y, this._z, this._order);
        }
        copy(e) {
          return (
            (this._x = e._x),
            (this._y = e._y),
            (this._z = e._z),
            (this._order = e._order),
            this._onChangeCallback(),
            this
          );
        }
        setFromRotationMatrix(e, t = this._order, r = !0) {
          const i = e.elements,
            a = i[0],
            s = i[4],
            o = i[8],
            l = i[1],
            u = i[5],
            c = i[9],
            h = i[2],
            d = i[6],
            f = i[10];
          switch (t) {
            case "XYZ":
              (this._y = Math.asin(Gt(o, -1, 1))),
                Math.abs(o) < 0.9999999
                  ? ((this._x = Math.atan2(-c, f)),
                    (this._z = Math.atan2(-s, a)))
                  : ((this._x = Math.atan2(d, u)), (this._z = 0));
              break;
            case "YXZ":
              (this._x = Math.asin(-Gt(c, -1, 1))),
                Math.abs(c) < 0.9999999
                  ? ((this._y = Math.atan2(o, f)), (this._z = Math.atan2(l, u)))
                  : ((this._y = Math.atan2(-h, a)), (this._z = 0));
              break;
            case "ZXY":
              (this._x = Math.asin(Gt(d, -1, 1))),
                Math.abs(d) < 0.9999999
                  ? ((this._y = Math.atan2(-h, f)),
                    (this._z = Math.atan2(-s, u)))
                  : ((this._y = 0), (this._z = Math.atan2(l, a)));
              break;
            case "ZYX":
              (this._y = Math.asin(-Gt(h, -1, 1))),
                Math.abs(h) < 0.9999999
                  ? ((this._x = Math.atan2(d, f)), (this._z = Math.atan2(l, a)))
                  : ((this._x = 0), (this._z = Math.atan2(-s, u)));
              break;
            case "YZX":
              (this._z = Math.asin(Gt(l, -1, 1))),
                Math.abs(l) < 0.9999999
                  ? ((this._x = Math.atan2(-c, u)),
                    (this._y = Math.atan2(-h, a)))
                  : ((this._x = 0), (this._y = Math.atan2(o, f)));
              break;
            case "XZY":
              (this._z = Math.asin(-Gt(s, -1, 1))),
                Math.abs(s) < 0.9999999
                  ? ((this._x = Math.atan2(d, u)), (this._y = Math.atan2(o, a)))
                  : ((this._x = Math.atan2(-c, f)), (this._y = 0));
              break;
            default:
              console.warn(
                "THREE.Euler: .setFromRotationMatrix() encountered an unknown order: " +
                  t
              );
          }
          return (this._order = t), r === !0 && this._onChangeCallback(), this;
        }
        setFromQuaternion(e, t, r) {
          return (
            cv.makeRotationFromQuaternion(e),
            this.setFromRotationMatrix(cv, t, r)
          );
        }
        setFromVector3(e, t = this._order) {
          return this.set(e.x, e.y, e.z, t);
        }
        reorder(e) {
          return hv.setFromEuler(this), this.setFromQuaternion(hv, e);
        }
        equals(e) {
          return (
            e._x === this._x &&
            e._y === this._y &&
            e._z === this._z &&
            e._order === this._order
          );
        }
        fromArray(e) {
          return (
            (this._x = e[0]),
            (this._y = e[1]),
            (this._z = e[2]),
            e[3] !== void 0 && (this._order = e[3]),
            this._onChangeCallback(),
            this
          );
        }
        toArray(e = [], t = 0) {
          return (
            (e[t] = this._x),
            (e[t + 1] = this._y),
            (e[t + 2] = this._z),
            (e[t + 3] = this._order),
            e
          );
        }
        _onChange(e) {
          return (this._onChangeCallback = e), this;
        }
        _onChangeCallback() {}
        *[Symbol.iterator]() {
          yield this._x, yield this._y, yield this._z, yield this._order;
        }
        toVector3() {
          console.error(
            "THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead"
          );
        }
      }
      (xn.DefaultOrder = "XYZ"),
        (xn.RotationOrders = ["XYZ", "YZX", "ZXY", "XZY", "YXZ", "ZYX"]);
      class jm {
        constructor() {
          this.mask = 1;
        }
        set(e) {
          this.mask = ((1 << e) | 0) >>> 0;
        }
        enable(e) {
          this.mask |= (1 << e) | 0;
        }
        enableAll() {
          this.mask = -1;
        }
        toggle(e) {
          this.mask ^= (1 << e) | 0;
        }
        disable(e) {
          this.mask &= ~((1 << e) | 0);
        }
        disableAll() {
          this.mask = 0;
        }
        test(e) {
          return (this.mask & e.mask) != 0;
        }
        isEnabled(e) {
          return (this.mask & ((1 << e) | 0)) != 0;
        }
      }
      let nS = 0;
      const dv = new j(),
        is = new ar(),
        ti = new Te(),
        Du = new j(),
        Fo = new j(),
        rS = new j(),
        iS = new ar(),
        fv = new j(1, 0, 0),
        pv = new j(0, 1, 0),
        mv = new j(0, 0, 1),
        aS = { type: "added" },
        gv = { type: "removed" };
      class ot extends Yr {
        constructor() {
          super(),
            (this.isObject3D = !0),
            Object.defineProperty(this, "id", { value: nS++ }),
            (this.uuid = Mr()),
            (this.name = ""),
            (this.type = "Object3D"),
            (this.parent = null),
            (this.children = []),
            (this.up = ot.DefaultUp.clone());
          const e = new j(),
            t = new xn(),
            r = new ar(),
            i = new j(1, 1, 1);
          t._onChange(function () {
            r.setFromEuler(t, !1);
          }),
            r._onChange(function () {
              t.setFromQuaternion(r, void 0, !1);
            }),
            Object.defineProperties(this, {
              position: { configurable: !0, enumerable: !0, value: e },
              rotation: { configurable: !0, enumerable: !0, value: t },
              quaternion: { configurable: !0, enumerable: !0, value: r },
              scale: { configurable: !0, enumerable: !0, value: i },
              modelViewMatrix: { value: new Te() },
              normalMatrix: { value: new Pn() },
            }),
            (this.matrix = new Te()),
            (this.matrixWorld = new Te()),
            (this.matrixAutoUpdate = ot.DefaultMatrixAutoUpdate),
            (this.matrixWorldNeedsUpdate = !1),
            (this.matrixWorldAutoUpdate = ot.DefaultMatrixWorldAutoUpdate),
            (this.layers = new jm()),
            (this.visible = !0),
            (this.castShadow = !1),
            (this.receiveShadow = !1),
            (this.frustumCulled = !0),
            (this.renderOrder = 0),
            (this.animations = []),
            (this.userData = {});
        }
        onBeforeRender() {}
        onAfterRender() {}
        applyMatrix4(e) {
          this.matrixAutoUpdate && this.updateMatrix(),
            this.matrix.premultiply(e),
            this.matrix.decompose(this.position, this.quaternion, this.scale);
        }
        applyQuaternion(e) {
          return this.quaternion.premultiply(e), this;
        }
        setRotationFromAxisAngle(e, t) {
          this.quaternion.setFromAxisAngle(e, t);
        }
        setRotationFromEuler(e) {
          this.quaternion.setFromEuler(e, !0);
        }
        setRotationFromMatrix(e) {
          this.quaternion.setFromRotationMatrix(e);
        }
        setRotationFromQuaternion(e) {
          this.quaternion.copy(e);
        }
        rotateOnAxis(e, t) {
          return is.setFromAxisAngle(e, t), this.quaternion.multiply(is), this;
        }
        rotateOnWorldAxis(e, t) {
          return (
            is.setFromAxisAngle(e, t), this.quaternion.premultiply(is), this
          );
        }
        rotateX(e) {
          return this.rotateOnAxis(fv, e);
        }
        rotateY(e) {
          return this.rotateOnAxis(pv, e);
        }
        rotateZ(e) {
          return this.rotateOnAxis(mv, e);
        }
        translateOnAxis(e, t) {
          return (
            dv.copy(e).applyQuaternion(this.quaternion),
            this.position.add(dv.multiplyScalar(t)),
            this
          );
        }
        translateX(e) {
          return this.translateOnAxis(fv, e);
        }
        translateY(e) {
          return this.translateOnAxis(pv, e);
        }
        translateZ(e) {
          return this.translateOnAxis(mv, e);
        }
        localToWorld(e) {
          return e.applyMatrix4(this.matrixWorld);
        }
        worldToLocal(e) {
          return e.applyMatrix4(ti.copy(this.matrixWorld).invert());
        }
        lookAt(e, t, r) {
          e.isVector3 ? Du.copy(e) : Du.set(e, t, r);
          const i = this.parent;
          this.updateWorldMatrix(!0, !1),
            Fo.setFromMatrixPosition(this.matrixWorld),
            this.isCamera || this.isLight
              ? ti.lookAt(Fo, Du, this.up)
              : ti.lookAt(Du, Fo, this.up),
            this.quaternion.setFromRotationMatrix(ti),
            i &&
              (ti.extractRotation(i.matrixWorld),
              is.setFromRotationMatrix(ti),
              this.quaternion.premultiply(is.invert()));
        }
        add(e) {
          if (arguments.length > 1) {
            for (let t = 0; t < arguments.length; t++) this.add(arguments[t]);
            return this;
          }
          return e === this
            ? (console.error(
                "THREE.Object3D.add: object can't be added as a child of itself.",
                e
              ),
              this)
            : (e && e.isObject3D
                ? (e.parent !== null && e.parent.remove(e),
                  (e.parent = this),
                  this.children.push(e),
                  e.dispatchEvent(aS))
                : console.error(
                    "THREE.Object3D.add: object not an instance of THREE.Object3D.",
                    e
                  ),
              this);
        }
        remove(e) {
          if (arguments.length > 1) {
            for (let r = 0; r < arguments.length; r++)
              this.remove(arguments[r]);
            return this;
          }
          const t = this.children.indexOf(e);
          return (
            t !== -1 &&
              ((e.parent = null),
              this.children.splice(t, 1),
              e.dispatchEvent(gv)),
            this
          );
        }
        removeFromParent() {
          const e = this.parent;
          return e !== null && e.remove(this), this;
        }
        clear() {
          for (let e = 0; e < this.children.length; e++) {
            const t = this.children[e];
            (t.parent = null), t.dispatchEvent(gv);
          }
          return (this.children.length = 0), this;
        }
        attach(e) {
          return (
            this.updateWorldMatrix(!0, !1),
            ti.copy(this.matrixWorld).invert(),
            e.parent !== null &&
              (e.parent.updateWorldMatrix(!0, !1),
              ti.multiply(e.parent.matrixWorld)),
            e.applyMatrix4(ti),
            this.add(e),
            e.updateWorldMatrix(!1, !0),
            this
          );
        }
        getObjectById(e) {
          return this.getObjectByProperty("id", e);
        }
        getObjectByName(e) {
          return this.getObjectByProperty("name", e);
        }
        getObjectByProperty(e, t) {
          if (this[e] === t) return this;
          for (let r = 0, i = this.children.length; r < i; r++) {
            const a = this.children[r].getObjectByProperty(e, t);
            if (a !== void 0) return a;
          }
        }
        getWorldPosition(e) {
          return (
            this.updateWorldMatrix(!0, !1),
            e.setFromMatrixPosition(this.matrixWorld)
          );
        }
        getWorldQuaternion(e) {
          return (
            this.updateWorldMatrix(!0, !1),
            this.matrixWorld.decompose(Fo, e, rS),
            e
          );
        }
        getWorldScale(e) {
          return (
            this.updateWorldMatrix(!0, !1),
            this.matrixWorld.decompose(Fo, iS, e),
            e
          );
        }
        getWorldDirection(e) {
          this.updateWorldMatrix(!0, !1);
          const t = this.matrixWorld.elements;
          return e.set(t[8], t[9], t[10]).normalize();
        }
        raycast() {}
        traverse(e) {
          e(this);
          const t = this.children;
          for (let r = 0, i = t.length; r < i; r++) t[r].traverse(e);
        }
        traverseVisible(e) {
          if (this.visible === !1) return;
          e(this);
          const t = this.children;
          for (let r = 0, i = t.length; r < i; r++) t[r].traverseVisible(e);
        }
        traverseAncestors(e) {
          const t = this.parent;
          t !== null && (e(t), t.traverseAncestors(e));
        }
        updateMatrix() {
          this.matrix.compose(this.position, this.quaternion, this.scale),
            (this.matrixWorldNeedsUpdate = !0);
        }
        updateMatrixWorld(e) {
          this.matrixAutoUpdate && this.updateMatrix(),
            (this.matrixWorldNeedsUpdate || e) &&
              (this.parent === null
                ? this.matrixWorld.copy(this.matrix)
                : this.matrixWorld.multiplyMatrices(
                    this.parent.matrixWorld,
                    this.matrix
                  ),
              (this.matrixWorldNeedsUpdate = !1),
              (e = !0));
          const t = this.children;
          for (let r = 0, i = t.length; r < i; r++) {
            const a = t[r];
            (a.matrixWorldAutoUpdate !== !0 && e !== !0) ||
              a.updateMatrixWorld(e);
          }
        }
        updateWorldMatrix(e, t) {
          const r = this.parent;
          if (
            (e === !0 &&
              r !== null &&
              r.matrixWorldAutoUpdate === !0 &&
              r.updateWorldMatrix(!0, !1),
            this.matrixAutoUpdate && this.updateMatrix(),
            this.parent === null
              ? this.matrixWorld.copy(this.matrix)
              : this.matrixWorld.multiplyMatrices(
                  this.parent.matrixWorld,
                  this.matrix
                ),
            t === !0)
          ) {
            const i = this.children;
            for (let a = 0, s = i.length; a < s; a++) {
              const o = i[a];
              o.matrixWorldAutoUpdate === !0 && o.updateWorldMatrix(!1, !0);
            }
          }
        }
        toJSON(e) {
          const t = e === void 0 || typeof e == "string",
            r = {};
          t &&
            ((e = {
              geometries: {},
              materials: {},
              textures: {},
              images: {},
              shapes: {},
              skeletons: {},
              animations: {},
              nodes: {},
            }),
            (r.metadata = {
              version: 4.5,
              type: "Object",
              generator: "Object3D.toJSON",
            }));
          const i = {};
          function a(o, l) {
            return o[l.uuid] === void 0 && (o[l.uuid] = l.toJSON(e)), l.uuid;
          }
          if (
            ((i.uuid = this.uuid),
            (i.type = this.type),
            this.name !== "" && (i.name = this.name),
            this.castShadow === !0 && (i.castShadow = !0),
            this.receiveShadow === !0 && (i.receiveShadow = !0),
            this.visible === !1 && (i.visible = !1),
            this.frustumCulled === !1 && (i.frustumCulled = !1),
            this.renderOrder !== 0 && (i.renderOrder = this.renderOrder),
            JSON.stringify(this.userData) !== "{}" &&
              (i.userData = this.userData),
            (i.layers = this.layers.mask),
            (i.matrix = this.matrix.toArray()),
            this.matrixAutoUpdate === !1 && (i.matrixAutoUpdate = !1),
            this.isInstancedMesh &&
              ((i.type = "InstancedMesh"),
              (i.count = this.count),
              (i.instanceMatrix = this.instanceMatrix.toJSON()),
              this.instanceColor !== null &&
                (i.instanceColor = this.instanceColor.toJSON())),
            this.isScene)
          )
            this.background &&
              (this.background.isColor
                ? (i.background = this.background.toJSON())
                : this.background.isTexture &&
                  (i.background = this.background.toJSON(e).uuid)),
              this.environment &&
                this.environment.isTexture &&
                this.environment.isRenderTargetTexture !== !0 &&
                (i.environment = this.environment.toJSON(e).uuid);
          else if (this.isMesh || this.isLine || this.isPoints) {
            i.geometry = a(e.geometries, this.geometry);
            const o = this.geometry.parameters;
            if (o !== void 0 && o.shapes !== void 0) {
              const l = o.shapes;
              if (Array.isArray(l))
                for (let u = 0, c = l.length; u < c; u++) {
                  const h = l[u];
                  a(e.shapes, h);
                }
              else a(e.shapes, l);
            }
          }
          if (
            (this.isSkinnedMesh &&
              ((i.bindMode = this.bindMode),
              (i.bindMatrix = this.bindMatrix.toArray()),
              this.skeleton !== void 0 &&
                (a(e.skeletons, this.skeleton),
                (i.skeleton = this.skeleton.uuid))),
            this.material !== void 0)
          )
            if (Array.isArray(this.material)) {
              const o = [];
              for (let l = 0, u = this.material.length; l < u; l++)
                o.push(a(e.materials, this.material[l]));
              i.material = o;
            } else i.material = a(e.materials, this.material);
          if (this.children.length > 0) {
            i.children = [];
            for (let o = 0; o < this.children.length; o++)
              i.children.push(this.children[o].toJSON(e).object);
          }
          if (this.animations.length > 0) {
            i.animations = [];
            for (let o = 0; o < this.animations.length; o++) {
              const l = this.animations[o];
              i.animations.push(a(e.animations, l));
            }
          }
          if (t) {
            const o = s(e.geometries),
              l = s(e.materials),
              u = s(e.textures),
              c = s(e.images),
              h = s(e.shapes),
              d = s(e.skeletons),
              f = s(e.animations),
              g = s(e.nodes);
            o.length > 0 && (r.geometries = o),
              l.length > 0 && (r.materials = l),
              u.length > 0 && (r.textures = u),
              c.length > 0 && (r.images = c),
              h.length > 0 && (r.shapes = h),
              d.length > 0 && (r.skeletons = d),
              f.length > 0 && (r.animations = f),
              g.length > 0 && (r.nodes = g);
          }
          return (r.object = i), r;
          function s(o) {
            const l = [];
            for (const u in o) {
              const c = o[u];
              delete c.metadata, l.push(c);
            }
            return l;
          }
        }
        clone(e) {
          return new this.constructor().copy(this, e);
        }
        copy(e, t = !0) {
          if (
            ((this.name = e.name),
            this.up.copy(e.up),
            this.position.copy(e.position),
            (this.rotation.order = e.rotation.order),
            this.quaternion.copy(e.quaternion),
            this.scale.copy(e.scale),
            this.matrix.copy(e.matrix),
            this.matrixWorld.copy(e.matrixWorld),
            (this.matrixAutoUpdate = e.matrixAutoUpdate),
            (this.matrixWorldNeedsUpdate = e.matrixWorldNeedsUpdate),
            (this.matrixWorldAutoUpdate = e.matrixWorldAutoUpdate),
            (this.layers.mask = e.layers.mask),
            (this.visible = e.visible),
            (this.castShadow = e.castShadow),
            (this.receiveShadow = e.receiveShadow),
            (this.frustumCulled = e.frustumCulled),
            (this.renderOrder = e.renderOrder),
            (this.userData = JSON.parse(JSON.stringify(e.userData))),
            t === !0)
          )
            for (let r = 0; r < e.children.length; r++) {
              const i = e.children[r];
              this.add(i.clone());
            }
          return this;
        }
      }
      (ot.DefaultUp = new j(0, 1, 0)),
        (ot.DefaultMatrixAutoUpdate = !0),
        (ot.DefaultMatrixWorldAutoUpdate = !0);
      const yr = new j(),
        ni = new j(),
        Xd = new j(),
        ri = new j(),
        as = new j(),
        ss = new j(),
        vv = new j(),
        qd = new j(),
        $d = new j(),
        Yd = new j();
      class Fr {
        constructor(e = new j(), t = new j(), r = new j()) {
          (this.a = e), (this.b = t), (this.c = r);
        }
        static getNormal(e, t, r, i) {
          i.subVectors(r, t), yr.subVectors(e, t), i.cross(yr);
          const a = i.lengthSq();
          return a > 0 ? i.multiplyScalar(1 / Math.sqrt(a)) : i.set(0, 0, 0);
        }
        static getBarycoord(e, t, r, i, a) {
          yr.subVectors(i, t), ni.subVectors(r, t), Xd.subVectors(e, t);
          const s = yr.dot(yr),
            o = yr.dot(ni),
            l = yr.dot(Xd),
            u = ni.dot(ni),
            c = ni.dot(Xd),
            h = s * u - o * o;
          if (h === 0) return a.set(-2, -1, -1);
          const d = 1 / h,
            f = (u * l - o * c) * d,
            g = (s * c - o * l) * d;
          return a.set(1 - f - g, g, f);
        }
        static containsPoint(e, t, r, i) {
          return (
            this.getBarycoord(e, t, r, i, ri),
            ri.x >= 0 && ri.y >= 0 && ri.x + ri.y <= 1
          );
        }
        static getUV(e, t, r, i, a, s, o, l) {
          return (
            this.getBarycoord(e, t, r, i, ri),
            l.set(0, 0),
            l.addScaledVector(a, ri.x),
            l.addScaledVector(s, ri.y),
            l.addScaledVector(o, ri.z),
            l
          );
        }
        static isFrontFacing(e, t, r, i) {
          return (
            yr.subVectors(r, t), ni.subVectors(e, t), yr.cross(ni).dot(i) < 0
          );
        }
        set(e, t, r) {
          return this.a.copy(e), this.b.copy(t), this.c.copy(r), this;
        }
        setFromPointsAndIndices(e, t, r, i) {
          return this.a.copy(e[t]), this.b.copy(e[r]), this.c.copy(e[i]), this;
        }
        setFromAttributeAndIndices(e, t, r, i) {
          return (
            this.a.fromBufferAttribute(e, t),
            this.b.fromBufferAttribute(e, r),
            this.c.fromBufferAttribute(e, i),
            this
          );
        }
        clone() {
          return new this.constructor().copy(this);
        }
        copy(e) {
          return this.a.copy(e.a), this.b.copy(e.b), this.c.copy(e.c), this;
        }
        getArea() {
          return (
            yr.subVectors(this.c, this.b),
            ni.subVectors(this.a, this.b),
            0.5 * yr.cross(ni).length()
          );
        }
        getMidpoint(e) {
          return e
            .addVectors(this.a, this.b)
            .add(this.c)
            .multiplyScalar(1 / 3);
        }
        getNormal(e) {
          return Fr.getNormal(this.a, this.b, this.c, e);
        }
        getPlane(e) {
          return e.setFromCoplanarPoints(this.a, this.b, this.c);
        }
        getBarycoord(e, t) {
          return Fr.getBarycoord(e, this.a, this.b, this.c, t);
        }
        getUV(e, t, r, i, a) {
          return Fr.getUV(e, this.a, this.b, this.c, t, r, i, a);
        }
        containsPoint(e) {
          return Fr.containsPoint(e, this.a, this.b, this.c);
        }
        isFrontFacing(e) {
          return Fr.isFrontFacing(this.a, this.b, this.c, e);
        }
        intersectsBox(e) {
          return e.intersectsTriangle(this);
        }
        closestPointToPoint(e, t) {
          const r = this.a,
            i = this.b,
            a = this.c;
          let s, o;
          as.subVectors(i, r), ss.subVectors(a, r), qd.subVectors(e, r);
          const l = as.dot(qd),
            u = ss.dot(qd);
          if (l <= 0 && u <= 0) return t.copy(r);
          $d.subVectors(e, i);
          const c = as.dot($d),
            h = ss.dot($d);
          if (c >= 0 && h <= c) return t.copy(i);
          const d = l * h - c * u;
          if (d <= 0 && l >= 0 && c <= 0)
            return (s = l / (l - c)), t.copy(r).addScaledVector(as, s);
          Yd.subVectors(e, a);
          const f = as.dot(Yd),
            g = ss.dot(Yd);
          if (g >= 0 && f <= g) return t.copy(a);
          const p = f * u - l * g;
          if (p <= 0 && u >= 0 && g <= 0)
            return (o = u / (u - g)), t.copy(r).addScaledVector(ss, o);
          const y = c * g - f * h;
          if (y <= 0 && h - c >= 0 && f - g >= 0)
            return (
              vv.subVectors(a, i),
              (o = (h - c) / (h - c + (f - g))),
              t.copy(i).addScaledVector(vv, o)
            );
          const v = 1 / (y + p + d);
          return (
            (s = p * v),
            (o = d * v),
            t.copy(r).addScaledVector(as, s).addScaledVector(ss, o)
          );
        }
        equals(e) {
          return e.a.equals(this.a) && e.b.equals(this.b) && e.c.equals(this.c);
        }
      }
      let sS = 0;
      class dr extends Yr {
        constructor() {
          super(),
            (this.isMaterial = !0),
            Object.defineProperty(this, "id", { value: sS++ }),
            (this.uuid = Mr()),
            (this.name = ""),
            (this.type = "Material"),
            (this.blending = 1),
            (this.side = 0),
            (this.vertexColors = !1),
            (this.opacity = 1),
            (this.transparent = !1),
            (this.blendSrc = 204),
            (this.blendDst = 205),
            (this.blendEquation = 100),
            (this.blendSrcAlpha = null),
            (this.blendDstAlpha = null),
            (this.blendEquationAlpha = null),
            (this.depthFunc = 3),
            (this.depthTest = !0),
            (this.depthWrite = !0),
            (this.stencilWriteMask = 255),
            (this.stencilFunc = 519),
            (this.stencilRef = 0),
            (this.stencilFuncMask = 255),
            (this.stencilFail = 7680),
            (this.stencilZFail = 7680),
            (this.stencilZPass = 7680),
            (this.stencilWrite = !1),
            (this.clippingPlanes = null),
            (this.clipIntersection = !1),
            (this.clipShadows = !1),
            (this.shadowSide = null),
            (this.colorWrite = !0),
            (this.precision = null),
            (this.polygonOffset = !1),
            (this.polygonOffsetFactor = 0),
            (this.polygonOffsetUnits = 0),
            (this.dithering = !1),
            (this.alphaToCoverage = !1),
            (this.premultipliedAlpha = !1),
            (this.visible = !0),
            (this.toneMapped = !0),
            (this.userData = {}),
            (this.version = 0),
            (this._alphaTest = 0);
        }
        get alphaTest() {
          return this._alphaTest;
        }
        set alphaTest(e) {
          this._alphaTest > 0 != e > 0 && this.version++, (this._alphaTest = e);
        }
        onBuild() {}
        onBeforeRender() {}
        onBeforeCompile() {}
        customProgramCacheKey() {
          return this.onBeforeCompile.toString();
        }
        setValues(e) {
          if (e !== void 0)
            for (const t in e) {
              const r = e[t];
              if (r === void 0) {
                console.warn(
                  "THREE.Material: '" + t + "' parameter is undefined."
                );
                continue;
              }
              const i = this[t];
              i !== void 0
                ? i && i.isColor
                  ? i.set(r)
                  : i && i.isVector3 && r && r.isVector3
                  ? i.copy(r)
                  : (this[t] = r)
                : console.warn(
                    "THREE." +
                      this.type +
                      ": '" +
                      t +
                      "' is not a property of this material."
                  );
            }
        }
        toJSON(e) {
          const t = e === void 0 || typeof e == "string";
          t && (e = { textures: {}, images: {} });
          const r = {
            metadata: {
              version: 4.5,
              type: "Material",
              generator: "Material.toJSON",
            },
          };
          function i(a) {
            const s = [];
            for (const o in a) {
              const l = a[o];
              delete l.metadata, s.push(l);
            }
            return s;
          }
          if (
            ((r.uuid = this.uuid),
            (r.type = this.type),
            this.name !== "" && (r.name = this.name),
            this.color && this.color.isColor && (r.color = this.color.getHex()),
            this.roughness !== void 0 && (r.roughness = this.roughness),
            this.metalness !== void 0 && (r.metalness = this.metalness),
            this.sheen !== void 0 && (r.sheen = this.sheen),
            this.sheenColor &&
              this.sheenColor.isColor &&
              (r.sheenColor = this.sheenColor.getHex()),
            this.sheenRoughness !== void 0 &&
              (r.sheenRoughness = this.sheenRoughness),
            this.emissive &&
              this.emissive.isColor &&
              (r.emissive = this.emissive.getHex()),
            this.emissiveIntensity &&
              this.emissiveIntensity !== 1 &&
              (r.emissiveIntensity = this.emissiveIntensity),
            this.specular &&
              this.specular.isColor &&
              (r.specular = this.specular.getHex()),
            this.specularIntensity !== void 0 &&
              (r.specularIntensity = this.specularIntensity),
            this.specularColor &&
              this.specularColor.isColor &&
              (r.specularColor = this.specularColor.getHex()),
            this.shininess !== void 0 && (r.shininess = this.shininess),
            this.clearcoat !== void 0 && (r.clearcoat = this.clearcoat),
            this.clearcoatRoughness !== void 0 &&
              (r.clearcoatRoughness = this.clearcoatRoughness),
            this.clearcoatMap &&
              this.clearcoatMap.isTexture &&
              (r.clearcoatMap = this.clearcoatMap.toJSON(e).uuid),
            this.clearcoatRoughnessMap &&
              this.clearcoatRoughnessMap.isTexture &&
              (r.clearcoatRoughnessMap =
                this.clearcoatRoughnessMap.toJSON(e).uuid),
            this.clearcoatNormalMap &&
              this.clearcoatNormalMap.isTexture &&
              ((r.clearcoatNormalMap = this.clearcoatNormalMap.toJSON(e).uuid),
              (r.clearcoatNormalScale = this.clearcoatNormalScale.toArray())),
            this.iridescence !== void 0 && (r.iridescence = this.iridescence),
            this.iridescenceIOR !== void 0 &&
              (r.iridescenceIOR = this.iridescenceIOR),
            this.iridescenceThicknessRange !== void 0 &&
              (r.iridescenceThicknessRange = this.iridescenceThicknessRange),
            this.iridescenceMap &&
              this.iridescenceMap.isTexture &&
              (r.iridescenceMap = this.iridescenceMap.toJSON(e).uuid),
            this.iridescenceThicknessMap &&
              this.iridescenceThicknessMap.isTexture &&
              (r.iridescenceThicknessMap =
                this.iridescenceThicknessMap.toJSON(e).uuid),
            this.map && this.map.isTexture && (r.map = this.map.toJSON(e).uuid),
            this.matcap &&
              this.matcap.isTexture &&
              (r.matcap = this.matcap.toJSON(e).uuid),
            this.alphaMap &&
              this.alphaMap.isTexture &&
              (r.alphaMap = this.alphaMap.toJSON(e).uuid),
            this.lightMap &&
              this.lightMap.isTexture &&
              ((r.lightMap = this.lightMap.toJSON(e).uuid),
              (r.lightMapIntensity = this.lightMapIntensity)),
            this.aoMap &&
              this.aoMap.isTexture &&
              ((r.aoMap = this.aoMap.toJSON(e).uuid),
              (r.aoMapIntensity = this.aoMapIntensity)),
            this.bumpMap &&
              this.bumpMap.isTexture &&
              ((r.bumpMap = this.bumpMap.toJSON(e).uuid),
              (r.bumpScale = this.bumpScale)),
            this.normalMap &&
              this.normalMap.isTexture &&
              ((r.normalMap = this.normalMap.toJSON(e).uuid),
              (r.normalMapType = this.normalMapType),
              (r.normalScale = this.normalScale.toArray())),
            this.displacementMap &&
              this.displacementMap.isTexture &&
              ((r.displacementMap = this.displacementMap.toJSON(e).uuid),
              (r.displacementScale = this.displacementScale),
              (r.displacementBias = this.displacementBias)),
            this.roughnessMap &&
              this.roughnessMap.isTexture &&
              (r.roughnessMap = this.roughnessMap.toJSON(e).uuid),
            this.metalnessMap &&
              this.metalnessMap.isTexture &&
              (r.metalnessMap = this.metalnessMap.toJSON(e).uuid),
            this.emissiveMap &&
              this.emissiveMap.isTexture &&
              (r.emissiveMap = this.emissiveMap.toJSON(e).uuid),
            this.specularMap &&
              this.specularMap.isTexture &&
              (r.specularMap = this.specularMap.toJSON(e).uuid),
            this.specularIntensityMap &&
              this.specularIntensityMap.isTexture &&
              (r.specularIntensityMap =
                this.specularIntensityMap.toJSON(e).uuid),
            this.specularColorMap &&
              this.specularColorMap.isTexture &&
              (r.specularColorMap = this.specularColorMap.toJSON(e).uuid),
            this.envMap &&
              this.envMap.isTexture &&
              ((r.envMap = this.envMap.toJSON(e).uuid),
              this.combine !== void 0 && (r.combine = this.combine)),
            this.envMapIntensity !== void 0 &&
              (r.envMapIntensity = this.envMapIntensity),
            this.reflectivity !== void 0 &&
              (r.reflectivity = this.reflectivity),
            this.refractionRatio !== void 0 &&
              (r.refractionRatio = this.refractionRatio),
            this.gradientMap &&
              this.gradientMap.isTexture &&
              (r.gradientMap = this.gradientMap.toJSON(e).uuid),
            this.transmission !== void 0 &&
              (r.transmission = this.transmission),
            this.transmissionMap &&
              this.transmissionMap.isTexture &&
              (r.transmissionMap = this.transmissionMap.toJSON(e).uuid),
            this.thickness !== void 0 && (r.thickness = this.thickness),
            this.thicknessMap &&
              this.thicknessMap.isTexture &&
              (r.thicknessMap = this.thicknessMap.toJSON(e).uuid),
            this.attenuationDistance !== void 0 &&
              (r.attenuationDistance = this.attenuationDistance),
            this.attenuationColor !== void 0 &&
              (r.attenuationColor = this.attenuationColor.getHex()),
            this.size !== void 0 && (r.size = this.size),
            this.shadowSide !== null && (r.shadowSide = this.shadowSide),
            this.sizeAttenuation !== void 0 &&
              (r.sizeAttenuation = this.sizeAttenuation),
            this.blending !== 1 && (r.blending = this.blending),
            this.side !== 0 && (r.side = this.side),
            this.vertexColors && (r.vertexColors = !0),
            this.opacity < 1 && (r.opacity = this.opacity),
            this.transparent === !0 && (r.transparent = this.transparent),
            (r.depthFunc = this.depthFunc),
            (r.depthTest = this.depthTest),
            (r.depthWrite = this.depthWrite),
            (r.colorWrite = this.colorWrite),
            (r.stencilWrite = this.stencilWrite),
            (r.stencilWriteMask = this.stencilWriteMask),
            (r.stencilFunc = this.stencilFunc),
            (r.stencilRef = this.stencilRef),
            (r.stencilFuncMask = this.stencilFuncMask),
            (r.stencilFail = this.stencilFail),
            (r.stencilZFail = this.stencilZFail),
            (r.stencilZPass = this.stencilZPass),
            this.rotation !== void 0 &&
              this.rotation !== 0 &&
              (r.rotation = this.rotation),
            this.polygonOffset === !0 && (r.polygonOffset = !0),
            this.polygonOffsetFactor !== 0 &&
              (r.polygonOffsetFactor = this.polygonOffsetFactor),
            this.polygonOffsetUnits !== 0 &&
              (r.polygonOffsetUnits = this.polygonOffsetUnits),
            this.linewidth !== void 0 &&
              this.linewidth !== 1 &&
              (r.linewidth = this.linewidth),
            this.dashSize !== void 0 && (r.dashSize = this.dashSize),
            this.gapSize !== void 0 && (r.gapSize = this.gapSize),
            this.scale !== void 0 && (r.scale = this.scale),
            this.dithering === !0 && (r.dithering = !0),
            this.alphaTest > 0 && (r.alphaTest = this.alphaTest),
            this.alphaToCoverage === !0 &&
              (r.alphaToCoverage = this.alphaToCoverage),
            this.premultipliedAlpha === !0 &&
              (r.premultipliedAlpha = this.premultipliedAlpha),
            this.wireframe === !0 && (r.wireframe = this.wireframe),
            this.wireframeLinewidth > 1 &&
              (r.wireframeLinewidth = this.wireframeLinewidth),
            this.wireframeLinecap !== "round" &&
              (r.wireframeLinecap = this.wireframeLinecap),
            this.wireframeLinejoin !== "round" &&
              (r.wireframeLinejoin = this.wireframeLinejoin),
            this.flatShading === !0 && (r.flatShading = this.flatShading),
            this.visible === !1 && (r.visible = !1),
            this.toneMapped === !1 && (r.toneMapped = !1),
            this.fog === !1 && (r.fog = !1),
            JSON.stringify(this.userData) !== "{}" &&
              (r.userData = this.userData),
            t)
          ) {
            const a = i(e.textures),
              s = i(e.images);
            a.length > 0 && (r.textures = a), s.length > 0 && (r.images = s);
          }
          return r;
        }
        clone() {
          return new this.constructor().copy(this);
        }
        copy(e) {
          (this.name = e.name),
            (this.blending = e.blending),
            (this.side = e.side),
            (this.vertexColors = e.vertexColors),
            (this.opacity = e.opacity),
            (this.transparent = e.transparent),
            (this.blendSrc = e.blendSrc),
            (this.blendDst = e.blendDst),
            (this.blendEquation = e.blendEquation),
            (this.blendSrcAlpha = e.blendSrcAlpha),
            (this.blendDstAlpha = e.blendDstAlpha),
            (this.blendEquationAlpha = e.blendEquationAlpha),
            (this.depthFunc = e.depthFunc),
            (this.depthTest = e.depthTest),
            (this.depthWrite = e.depthWrite),
            (this.stencilWriteMask = e.stencilWriteMask),
            (this.stencilFunc = e.stencilFunc),
            (this.stencilRef = e.stencilRef),
            (this.stencilFuncMask = e.stencilFuncMask),
            (this.stencilFail = e.stencilFail),
            (this.stencilZFail = e.stencilZFail),
            (this.stencilZPass = e.stencilZPass),
            (this.stencilWrite = e.stencilWrite);
          const t = e.clippingPlanes;
          let r = null;
          if (t !== null) {
            const i = t.length;
            r = new Array(i);
            for (let a = 0; a !== i; ++a) r[a] = t[a].clone();
          }
          return (
            (this.clippingPlanes = r),
            (this.clipIntersection = e.clipIntersection),
            (this.clipShadows = e.clipShadows),
            (this.shadowSide = e.shadowSide),
            (this.colorWrite = e.colorWrite),
            (this.precision = e.precision),
            (this.polygonOffset = e.polygonOffset),
            (this.polygonOffsetFactor = e.polygonOffsetFactor),
            (this.polygonOffsetUnits = e.polygonOffsetUnits),
            (this.dithering = e.dithering),
            (this.alphaTest = e.alphaTest),
            (this.alphaToCoverage = e.alphaToCoverage),
            (this.premultipliedAlpha = e.premultipliedAlpha),
            (this.visible = e.visible),
            (this.toneMapped = e.toneMapped),
            (this.userData = JSON.parse(JSON.stringify(e.userData))),
            this
          );
        }
        dispose() {
          this.dispatchEvent({ type: "dispose" });
        }
        set needsUpdate(e) {
          e === !0 && this.version++;
        }
      }
      class Fa extends dr {
        constructor(e) {
          super(),
            (this.isMeshBasicMaterial = !0),
            (this.type = "MeshBasicMaterial"),
            (this.color = new Ce(16777215)),
            (this.map = null),
            (this.lightMap = null),
            (this.lightMapIntensity = 1),
            (this.aoMap = null),
            (this.aoMapIntensity = 1),
            (this.specularMap = null),
            (this.alphaMap = null),
            (this.envMap = null),
            (this.combine = 0),
            (this.reflectivity = 1),
            (this.refractionRatio = 0.98),
            (this.wireframe = !1),
            (this.wireframeLinewidth = 1),
            (this.wireframeLinecap = "round"),
            (this.wireframeLinejoin = "round"),
            (this.fog = !0),
            this.setValues(e);
        }
        copy(e) {
          return (
            super.copy(e),
            this.color.copy(e.color),
            (this.map = e.map),
            (this.lightMap = e.lightMap),
            (this.lightMapIntensity = e.lightMapIntensity),
            (this.aoMap = e.aoMap),
            (this.aoMapIntensity = e.aoMapIntensity),
            (this.specularMap = e.specularMap),
            (this.alphaMap = e.alphaMap),
            (this.envMap = e.envMap),
            (this.combine = e.combine),
            (this.reflectivity = e.reflectivity),
            (this.refractionRatio = e.refractionRatio),
            (this.wireframe = e.wireframe),
            (this.wireframeLinewidth = e.wireframeLinewidth),
            (this.wireframeLinecap = e.wireframeLinecap),
            (this.wireframeLinejoin = e.wireframeLinejoin),
            (this.fog = e.fog),
            this
          );
        }
      }
      const At = new j(),
        ku = new ge();
      class un {
        constructor(e, t, r) {
          if (Array.isArray(e))
            throw new TypeError(
              "THREE.BufferAttribute: array should be a Typed Array."
            );
          (this.isBufferAttribute = !0),
            (this.name = ""),
            (this.array = e),
            (this.itemSize = t),
            (this.count = e !== void 0 ? e.length / t : 0),
            (this.normalized = r === !0),
            (this.usage = 35044),
            (this.updateRange = { offset: 0, count: -1 }),
            (this.version = 0);
        }
        onUploadCallback() {}
        set needsUpdate(e) {
          e === !0 && this.version++;
        }
        setUsage(e) {
          return (this.usage = e), this;
        }
        copy(e) {
          return (
            (this.name = e.name),
            (this.array = new e.array.constructor(e.array)),
            (this.itemSize = e.itemSize),
            (this.count = e.count),
            (this.normalized = e.normalized),
            (this.usage = e.usage),
            this
          );
        }
        copyAt(e, t, r) {
          (e *= this.itemSize), (r *= t.itemSize);
          for (let i = 0, a = this.itemSize; i < a; i++)
            this.array[e + i] = t.array[r + i];
          return this;
        }
        copyArray(e) {
          return this.array.set(e), this;
        }
        applyMatrix3(e) {
          if (this.itemSize === 2)
            for (let t = 0, r = this.count; t < r; t++)
              ku.fromBufferAttribute(this, t),
                ku.applyMatrix3(e),
                this.setXY(t, ku.x, ku.y);
          else if (this.itemSize === 3)
            for (let t = 0, r = this.count; t < r; t++)
              At.fromBufferAttribute(this, t),
                At.applyMatrix3(e),
                this.setXYZ(t, At.x, At.y, At.z);
          return this;
        }
        applyMatrix4(e) {
          for (let t = 0, r = this.count; t < r; t++)
            At.fromBufferAttribute(this, t),
              At.applyMatrix4(e),
              this.setXYZ(t, At.x, At.y, At.z);
          return this;
        }
        applyNormalMatrix(e) {
          for (let t = 0, r = this.count; t < r; t++)
            At.fromBufferAttribute(this, t),
              At.applyNormalMatrix(e),
              this.setXYZ(t, At.x, At.y, At.z);
          return this;
        }
        transformDirection(e) {
          for (let t = 0, r = this.count; t < r; t++)
            At.fromBufferAttribute(this, t),
              At.transformDirection(e),
              this.setXYZ(t, At.x, At.y, At.z);
          return this;
        }
        set(e, t = 0) {
          return this.array.set(e, t), this;
        }
        getX(e) {
          let t = this.array[e * this.itemSize];
          return this.normalized && (t = ui(t, this.array)), t;
        }
        setX(e, t) {
          return (
            this.normalized && (t = et(t, this.array)),
            (this.array[e * this.itemSize] = t),
            this
          );
        }
        getY(e) {
          let t = this.array[e * this.itemSize + 1];
          return this.normalized && (t = ui(t, this.array)), t;
        }
        setY(e, t) {
          return (
            this.normalized && (t = et(t, this.array)),
            (this.array[e * this.itemSize + 1] = t),
            this
          );
        }
        getZ(e) {
          let t = this.array[e * this.itemSize + 2];
          return this.normalized && (t = ui(t, this.array)), t;
        }
        setZ(e, t) {
          return (
            this.normalized && (t = et(t, this.array)),
            (this.array[e * this.itemSize + 2] = t),
            this
          );
        }
        getW(e) {
          let t = this.array[e * this.itemSize + 3];
          return this.normalized && (t = ui(t, this.array)), t;
        }
        setW(e, t) {
          return (
            this.normalized && (t = et(t, this.array)),
            (this.array[e * this.itemSize + 3] = t),
            this
          );
        }
        setXY(e, t, r) {
          return (
            (e *= this.itemSize),
            this.normalized &&
              ((t = et(t, this.array)), (r = et(r, this.array))),
            (this.array[e + 0] = t),
            (this.array[e + 1] = r),
            this
          );
        }
        setXYZ(e, t, r, i) {
          return (
            (e *= this.itemSize),
            this.normalized &&
              ((t = et(t, this.array)),
              (r = et(r, this.array)),
              (i = et(i, this.array))),
            (this.array[e + 0] = t),
            (this.array[e + 1] = r),
            (this.array[e + 2] = i),
            this
          );
        }
        setXYZW(e, t, r, i, a) {
          return (
            (e *= this.itemSize),
            this.normalized &&
              ((t = et(t, this.array)),
              (r = et(r, this.array)),
              (i = et(i, this.array)),
              (a = et(a, this.array))),
            (this.array[e + 0] = t),
            (this.array[e + 1] = r),
            (this.array[e + 2] = i),
            (this.array[e + 3] = a),
            this
          );
        }
        onUpload(e) {
          return (this.onUploadCallback = e), this;
        }
        clone() {
          return new this.constructor(this.array, this.itemSize).copy(this);
        }
        toJSON() {
          const e = {
            itemSize: this.itemSize,
            type: this.array.constructor.name,
            array: Array.from(this.array),
            normalized: this.normalized,
          };
          return (
            this.name !== "" && (e.name = this.name),
            this.usage !== 35044 && (e.usage = this.usage),
            (this.updateRange.offset === 0 && this.updateRange.count === -1) ||
              (e.updateRange = this.updateRange),
            e
          );
        }
        copyColorsArray() {
          console.error(
            "THREE.BufferAttribute: copyColorsArray() was removed in r144."
          );
        }
        copyVector2sArray() {
          console.error(
            "THREE.BufferAttribute: copyVector2sArray() was removed in r144."
          );
        }
        copyVector3sArray() {
          console.error(
            "THREE.BufferAttribute: copyVector3sArray() was removed in r144."
          );
        }
        copyVector4sArray() {
          console.error(
            "THREE.BufferAttribute: copyVector4sArray() was removed in r144."
          );
        }
      }
      class Xm extends un {
        constructor(e, t, r) {
          super(new Uint16Array(e), t, r);
        }
      }
      class v_ extends un {
        constructor(e, t, r) {
          super(new Uint32Array(e), t, r);
        }
      }
      class yt extends un {
        constructor(e, t, r) {
          super(new Float32Array(e), t, r);
        }
      }
      let oS = 0;
      const Qn = new Te(),
        Zd = new ot(),
        os = new j(),
        Gn = new oo(),
        Bo = new oo(),
        Nt = new j();
      class Lt extends Yr {
        constructor() {
          super(),
            (this.isBufferGeometry = !0),
            Object.defineProperty(this, "id", { value: oS++ }),
            (this.uuid = Mr()),
            (this.name = ""),
            (this.type = "BufferGeometry"),
            (this.index = null),
            (this.attributes = {}),
            (this.morphAttributes = {}),
            (this.morphTargetsRelative = !1),
            (this.groups = []),
            (this.boundingBox = null),
            (this.boundingSphere = null),
            (this.drawRange = { start: 0, count: 1 / 0 }),
            (this.userData = {});
        }
        getIndex() {
          return this.index;
        }
        setIndex(e) {
          return (
            Array.isArray(e)
              ? (this.index = new (d_(e) ? v_ : Xm)(e, 1))
              : (this.index = e),
            this
          );
        }
        getAttribute(e) {
          return this.attributes[e];
        }
        setAttribute(e, t) {
          return (this.attributes[e] = t), this;
        }
        deleteAttribute(e) {
          return delete this.attributes[e], this;
        }
        hasAttribute(e) {
          return this.attributes[e] !== void 0;
        }
        addGroup(e, t, r = 0) {
          this.groups.push({ start: e, count: t, materialIndex: r });
        }
        clearGroups() {
          this.groups = [];
        }
        setDrawRange(e, t) {
          (this.drawRange.start = e), (this.drawRange.count = t);
        }
        applyMatrix4(e) {
          const t = this.attributes.position;
          t !== void 0 && (t.applyMatrix4(e), (t.needsUpdate = !0));
          const r = this.attributes.normal;
          if (r !== void 0) {
            const a = new Pn().getNormalMatrix(e);
            r.applyNormalMatrix(a), (r.needsUpdate = !0);
          }
          const i = this.attributes.tangent;
          return (
            i !== void 0 && (i.transformDirection(e), (i.needsUpdate = !0)),
            this.boundingBox !== null && this.computeBoundingBox(),
            this.boundingSphere !== null && this.computeBoundingSphere(),
            this
          );
        }
        applyQuaternion(e) {
          return Qn.makeRotationFromQuaternion(e), this.applyMatrix4(Qn), this;
        }
        rotateX(e) {
          return Qn.makeRotationX(e), this.applyMatrix4(Qn), this;
        }
        rotateY(e) {
          return Qn.makeRotationY(e), this.applyMatrix4(Qn), this;
        }
        rotateZ(e) {
          return Qn.makeRotationZ(e), this.applyMatrix4(Qn), this;
        }
        translate(e, t, r) {
          return Qn.makeTranslation(e, t, r), this.applyMatrix4(Qn), this;
        }
        scale(e, t, r) {
          return Qn.makeScale(e, t, r), this.applyMatrix4(Qn), this;
        }
        lookAt(e) {
          return (
            Zd.lookAt(e), Zd.updateMatrix(), this.applyMatrix4(Zd.matrix), this
          );
        }
        center() {
          return (
            this.computeBoundingBox(),
            this.boundingBox.getCenter(os).negate(),
            this.translate(os.x, os.y, os.z),
            this
          );
        }
        setFromPoints(e) {
          const t = [];
          for (let r = 0, i = e.length; r < i; r++) {
            const a = e[r];
            t.push(a.x, a.y, a.z || 0);
          }
          return this.setAttribute("position", new yt(t, 3)), this;
        }
        computeBoundingBox() {
          this.boundingBox === null && (this.boundingBox = new oo());
          const e = this.attributes.position,
            t = this.morphAttributes.position;
          if (e && e.isGLBufferAttribute)
            return (
              console.error(
                'THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',
                this
              ),
              void this.boundingBox.set(
                new j(-1 / 0, -1 / 0, -1 / 0),
                new j(1 / 0, 1 / 0, 1 / 0)
              )
            );
          if (e !== void 0) {
            if ((this.boundingBox.setFromBufferAttribute(e), t))
              for (let r = 0, i = t.length; r < i; r++) {
                const a = t[r];
                Gn.setFromBufferAttribute(a),
                  this.morphTargetsRelative
                    ? (Nt.addVectors(this.boundingBox.min, Gn.min),
                      this.boundingBox.expandByPoint(Nt),
                      Nt.addVectors(this.boundingBox.max, Gn.max),
                      this.boundingBox.expandByPoint(Nt))
                    : (this.boundingBox.expandByPoint(Gn.min),
                      this.boundingBox.expandByPoint(Gn.max));
              }
          } else this.boundingBox.makeEmpty();
          (isNaN(this.boundingBox.min.x) ||
            isNaN(this.boundingBox.min.y) ||
            isNaN(this.boundingBox.min.z)) &&
            console.error(
              'THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',
              this
            );
        }
        computeBoundingSphere() {
          this.boundingSphere === null && (this.boundingSphere = new lo());
          const e = this.attributes.position,
            t = this.morphAttributes.position;
          if (e && e.isGLBufferAttribute)
            return (
              console.error(
                'THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',
                this
              ),
              void this.boundingSphere.set(new j(), 1 / 0)
            );
          if (e) {
            const r = this.boundingSphere.center;
            if ((Gn.setFromBufferAttribute(e), t))
              for (let a = 0, s = t.length; a < s; a++) {
                const o = t[a];
                Bo.setFromBufferAttribute(o),
                  this.morphTargetsRelative
                    ? (Nt.addVectors(Gn.min, Bo.min),
                      Gn.expandByPoint(Nt),
                      Nt.addVectors(Gn.max, Bo.max),
                      Gn.expandByPoint(Nt))
                    : (Gn.expandByPoint(Bo.min), Gn.expandByPoint(Bo.max));
              }
            Gn.getCenter(r);
            let i = 0;
            for (let a = 0, s = e.count; a < s; a++)
              Nt.fromBufferAttribute(e, a),
                (i = Math.max(i, r.distanceToSquared(Nt)));
            if (t)
              for (let a = 0, s = t.length; a < s; a++) {
                const o = t[a],
                  l = this.morphTargetsRelative;
                for (let u = 0, c = o.count; u < c; u++)
                  Nt.fromBufferAttribute(o, u),
                    l && (os.fromBufferAttribute(e, u), Nt.add(os)),
                    (i = Math.max(i, r.distanceToSquared(Nt)));
              }
            (this.boundingSphere.radius = Math.sqrt(i)),
              isNaN(this.boundingSphere.radius) &&
                console.error(
                  'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',
                  this
                );
          }
        }
        computeTangents() {
          const e = this.index,
            t = this.attributes;
          if (
            e === null ||
            t.position === void 0 ||
            t.normal === void 0 ||
            t.uv === void 0
          )
            return void console.error(
              "THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)"
            );
          const r = e.array,
            i = t.position.array,
            a = t.normal.array,
            s = t.uv.array,
            o = i.length / 3;
          this.hasAttribute("tangent") === !1 &&
            this.setAttribute("tangent", new un(new Float32Array(4 * o), 4));
          const l = this.getAttribute("tangent").array,
            u = [],
            c = [];
          for (let G = 0; G < o; G++) (u[G] = new j()), (c[G] = new j());
          const h = new j(),
            d = new j(),
            f = new j(),
            g = new ge(),
            p = new ge(),
            y = new ge(),
            v = new j(),
            m = new j();
          function x(G, U, I) {
            h.fromArray(i, 3 * G),
              d.fromArray(i, 3 * U),
              f.fromArray(i, 3 * I),
              g.fromArray(s, 2 * G),
              p.fromArray(s, 2 * U),
              y.fromArray(s, 2 * I),
              d.sub(h),
              f.sub(h),
              p.sub(g),
              y.sub(g);
            const F = 1 / (p.x * y.y - y.x * p.y);
            isFinite(F) &&
              (v
                .copy(d)
                .multiplyScalar(y.y)
                .addScaledVector(f, -p.y)
                .multiplyScalar(F),
              m
                .copy(f)
                .multiplyScalar(p.x)
                .addScaledVector(d, -y.x)
                .multiplyScalar(F),
              u[G].add(v),
              u[U].add(v),
              u[I].add(v),
              c[G].add(m),
              c[U].add(m),
              c[I].add(m));
          }
          let _ = this.groups;
          _.length === 0 && (_ = [{ start: 0, count: r.length }]);
          for (let G = 0, U = _.length; G < U; ++G) {
            const I = _[G],
              F = I.start;
            for (let T = F, O = F + I.count; T < O; T += 3)
              x(r[T + 0], r[T + 1], r[T + 2]);
          }
          const b = new j(),
            w = new j(),
            M = new j(),
            C = new j();
          function N(G) {
            M.fromArray(a, 3 * G), C.copy(M);
            const U = u[G];
            b.copy(U),
              b.sub(M.multiplyScalar(M.dot(U))).normalize(),
              w.crossVectors(C, U);
            const I = w.dot(c[G]) < 0 ? -1 : 1;
            (l[4 * G] = b.x),
              (l[4 * G + 1] = b.y),
              (l[4 * G + 2] = b.z),
              (l[4 * G + 3] = I);
          }
          for (let G = 0, U = _.length; G < U; ++G) {
            const I = _[G],
              F = I.start;
            for (let T = F, O = F + I.count; T < O; T += 3)
              N(r[T + 0]), N(r[T + 1]), N(r[T + 2]);
          }
        }
        computeVertexNormals() {
          const e = this.index,
            t = this.getAttribute("position");
          if (t !== void 0) {
            let r = this.getAttribute("normal");
            if (r === void 0)
              (r = new un(new Float32Array(3 * t.count), 3)),
                this.setAttribute("normal", r);
            else for (let d = 0, f = r.count; d < f; d++) r.setXYZ(d, 0, 0, 0);
            const i = new j(),
              a = new j(),
              s = new j(),
              o = new j(),
              l = new j(),
              u = new j(),
              c = new j(),
              h = new j();
            if (e)
              for (let d = 0, f = e.count; d < f; d += 3) {
                const g = e.getX(d + 0),
                  p = e.getX(d + 1),
                  y = e.getX(d + 2);
                i.fromBufferAttribute(t, g),
                  a.fromBufferAttribute(t, p),
                  s.fromBufferAttribute(t, y),
                  c.subVectors(s, a),
                  h.subVectors(i, a),
                  c.cross(h),
                  o.fromBufferAttribute(r, g),
                  l.fromBufferAttribute(r, p),
                  u.fromBufferAttribute(r, y),
                  o.add(c),
                  l.add(c),
                  u.add(c),
                  r.setXYZ(g, o.x, o.y, o.z),
                  r.setXYZ(p, l.x, l.y, l.z),
                  r.setXYZ(y, u.x, u.y, u.z);
              }
            else
              for (let d = 0, f = t.count; d < f; d += 3)
                i.fromBufferAttribute(t, d + 0),
                  a.fromBufferAttribute(t, d + 1),
                  s.fromBufferAttribute(t, d + 2),
                  c.subVectors(s, a),
                  h.subVectors(i, a),
                  c.cross(h),
                  r.setXYZ(d + 0, c.x, c.y, c.z),
                  r.setXYZ(d + 1, c.x, c.y, c.z),
                  r.setXYZ(d + 2, c.x, c.y, c.z);
            this.normalizeNormals(), (r.needsUpdate = !0);
          }
        }
        merge() {
          return (
            console.error(
              "THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."
            ),
            this
          );
        }
        normalizeNormals() {
          const e = this.attributes.normal;
          for (let t = 0, r = e.count; t < r; t++)
            Nt.fromBufferAttribute(e, t),
              Nt.normalize(),
              e.setXYZ(t, Nt.x, Nt.y, Nt.z);
        }
        toNonIndexed() {
          function e(o, l) {
            const u = o.array,
              c = o.itemSize,
              h = o.normalized,
              d = new u.constructor(l.length * c);
            let f = 0,
              g = 0;
            for (let p = 0, y = l.length; p < y; p++) {
              f = o.isInterleavedBufferAttribute
                ? l[p] * o.data.stride + o.offset
                : l[p] * c;
              for (let v = 0; v < c; v++) d[g++] = u[f++];
            }
            return new un(d, c, h);
          }
          if (this.index === null)
            return (
              console.warn(
                "THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."
              ),
              this
            );
          const t = new Lt(),
            r = this.index.array,
            i = this.attributes;
          for (const o in i) {
            const l = e(i[o], r);
            t.setAttribute(o, l);
          }
          const a = this.morphAttributes;
          for (const o in a) {
            const l = [],
              u = a[o];
            for (let c = 0, h = u.length; c < h; c++) {
              const d = e(u[c], r);
              l.push(d);
            }
            t.morphAttributes[o] = l;
          }
          t.morphTargetsRelative = this.morphTargetsRelative;
          const s = this.groups;
          for (let o = 0, l = s.length; o < l; o++) {
            const u = s[o];
            t.addGroup(u.start, u.count, u.materialIndex);
          }
          return t;
        }
        toJSON() {
          const e = {
            metadata: {
              version: 4.5,
              type: "BufferGeometry",
              generator: "BufferGeometry.toJSON",
            },
          };
          if (
            ((e.uuid = this.uuid),
            (e.type = this.type),
            this.name !== "" && (e.name = this.name),
            Object.keys(this.userData).length > 0 &&
              (e.userData = this.userData),
            this.parameters !== void 0)
          ) {
            const l = this.parameters;
            for (const u in l) l[u] !== void 0 && (e[u] = l[u]);
            return e;
          }
          e.data = { attributes: {} };
          const t = this.index;
          t !== null &&
            (e.data.index = {
              type: t.array.constructor.name,
              array: Array.prototype.slice.call(t.array),
            });
          const r = this.attributes;
          for (const l in r) {
            const u = r[l];
            e.data.attributes[l] = u.toJSON(e.data);
          }
          const i = {};
          let a = !1;
          for (const l in this.morphAttributes) {
            const u = this.morphAttributes[l],
              c = [];
            for (let h = 0, d = u.length; h < d; h++) {
              const f = u[h];
              c.push(f.toJSON(e.data));
            }
            c.length > 0 && ((i[l] = c), (a = !0));
          }
          a &&
            ((e.data.morphAttributes = i),
            (e.data.morphTargetsRelative = this.morphTargetsRelative));
          const s = this.groups;
          s.length > 0 && (e.data.groups = JSON.parse(JSON.stringify(s)));
          const o = this.boundingSphere;
          return (
            o !== null &&
              (e.data.boundingSphere = {
                center: o.center.toArray(),
                radius: o.radius,
              }),
            e
          );
        }
        clone() {
          return new this.constructor().copy(this);
        }
        copy(e) {
          (this.index = null),
            (this.attributes = {}),
            (this.morphAttributes = {}),
            (this.groups = []),
            (this.boundingBox = null),
            (this.boundingSphere = null);
          const t = {};
          this.name = e.name;
          const r = e.index;
          r !== null && this.setIndex(r.clone(t));
          const i = e.attributes;
          for (const u in i) {
            const c = i[u];
            this.setAttribute(u, c.clone(t));
          }
          const a = e.morphAttributes;
          for (const u in a) {
            const c = [],
              h = a[u];
            for (let d = 0, f = h.length; d < f; d++) c.push(h[d].clone(t));
            this.morphAttributes[u] = c;
          }
          this.morphTargetsRelative = e.morphTargetsRelative;
          const s = e.groups;
          for (let u = 0, c = s.length; u < c; u++) {
            const h = s[u];
            this.addGroup(h.start, h.count, h.materialIndex);
          }
          const o = e.boundingBox;
          o !== null && (this.boundingBox = o.clone());
          const l = e.boundingSphere;
          return (
            l !== null && (this.boundingSphere = l.clone()),
            (this.drawRange.start = e.drawRange.start),
            (this.drawRange.count = e.drawRange.count),
            (this.userData = e.userData),
            e.parameters !== void 0 &&
              (this.parameters = Object.assign({}, e.parameters)),
            this
          );
        }
        dispose() {
          this.dispatchEvent({ type: "dispose" });
        }
      }
      const yv = new Te(),
        ls = new Ih(),
        Kd = new lo(),
        Ri = new j(),
        Pi = new j(),
        Li = new j(),
        Jd = new j(),
        Qd = new j(),
        ef = new j(),
        Iu = new j(),
        Uu = new j(),
        Ou = new j(),
        zu = new ge(),
        Nu = new ge(),
        Fu = new ge(),
        tf = new j(),
        Bu = new j();
      class xt extends ot {
        constructor(e = new Lt(), t = new Fa()) {
          super(),
            (this.isMesh = !0),
            (this.type = "Mesh"),
            (this.geometry = e),
            (this.material = t),
            this.updateMorphTargets();
        }
        copy(e, t) {
          return (
            super.copy(e, t),
            e.morphTargetInfluences !== void 0 &&
              (this.morphTargetInfluences = e.morphTargetInfluences.slice()),
            e.morphTargetDictionary !== void 0 &&
              (this.morphTargetDictionary = Object.assign(
                {},
                e.morphTargetDictionary
              )),
            (this.material = e.material),
            (this.geometry = e.geometry),
            this
          );
        }
        updateMorphTargets() {
          const e = this.geometry.morphAttributes,
            t = Object.keys(e);
          if (t.length > 0) {
            const r = e[t[0]];
            if (r !== void 0) {
              (this.morphTargetInfluences = []),
                (this.morphTargetDictionary = {});
              for (let i = 0, a = r.length; i < a; i++) {
                const s = r[i].name || String(i);
                this.morphTargetInfluences.push(0),
                  (this.morphTargetDictionary[s] = i);
              }
            }
          }
        }
        raycast(e, t) {
          const r = this.geometry,
            i = this.material,
            a = this.matrixWorld;
          if (
            i === void 0 ||
            (r.boundingSphere === null && r.computeBoundingSphere(),
            Kd.copy(r.boundingSphere),
            Kd.applyMatrix4(a),
            e.ray.intersectsSphere(Kd) === !1) ||
            (yv.copy(a).invert(),
            ls.copy(e.ray).applyMatrix4(yv),
            r.boundingBox !== null && ls.intersectsBox(r.boundingBox) === !1)
          )
            return;
          let s;
          const o = r.index,
            l = r.attributes.position,
            u = r.morphAttributes.position,
            c = r.morphTargetsRelative,
            h = r.attributes.uv,
            d = r.attributes.uv2,
            f = r.groups,
            g = r.drawRange;
          if (o !== null)
            if (Array.isArray(i))
              for (let p = 0, y = f.length; p < y; p++) {
                const v = f[p],
                  m = i[v.materialIndex];
                for (
                  let x = Math.max(v.start, g.start),
                    _ = Math.min(
                      o.count,
                      Math.min(v.start + v.count, g.start + g.count)
                    );
                  x < _;
                  x += 3
                ) {
                  const b = o.getX(x),
                    w = o.getX(x + 1),
                    M = o.getX(x + 2);
                  (s = Gu(this, m, e, ls, l, u, c, h, d, b, w, M)),
                    s &&
                      ((s.faceIndex = Math.floor(x / 3)),
                      (s.face.materialIndex = v.materialIndex),
                      t.push(s));
                }
              }
            else
              for (
                let p = Math.max(0, g.start),
                  y = Math.min(o.count, g.start + g.count);
                p < y;
                p += 3
              ) {
                const v = o.getX(p),
                  m = o.getX(p + 1),
                  x = o.getX(p + 2);
                (s = Gu(this, i, e, ls, l, u, c, h, d, v, m, x)),
                  s && ((s.faceIndex = Math.floor(p / 3)), t.push(s));
              }
          else if (l !== void 0)
            if (Array.isArray(i))
              for (let p = 0, y = f.length; p < y; p++) {
                const v = f[p],
                  m = i[v.materialIndex];
                for (
                  let x = Math.max(v.start, g.start),
                    _ = Math.min(
                      l.count,
                      Math.min(v.start + v.count, g.start + g.count)
                    );
                  x < _;
                  x += 3
                )
                  (s = Gu(this, m, e, ls, l, u, c, h, d, x, x + 1, x + 2)),
                    s &&
                      ((s.faceIndex = Math.floor(x / 3)),
                      (s.face.materialIndex = v.materialIndex),
                      t.push(s));
              }
            else
              for (
                let p = Math.max(0, g.start),
                  y = Math.min(l.count, g.start + g.count);
                p < y;
                p += 3
              )
                (s = Gu(this, i, e, ls, l, u, c, h, d, p, p + 1, p + 2)),
                  s && ((s.faceIndex = Math.floor(p / 3)), t.push(s));
        }
      }
      function Gu(n, e, t, r, i, a, s, o, l, u, c, h) {
        Ri.fromBufferAttribute(i, u),
          Pi.fromBufferAttribute(i, c),
          Li.fromBufferAttribute(i, h);
        const d = n.morphTargetInfluences;
        if (a && d) {
          Iu.set(0, 0, 0), Uu.set(0, 0, 0), Ou.set(0, 0, 0);
          for (let g = 0, p = a.length; g < p; g++) {
            const y = d[g],
              v = a[g];
            y !== 0 &&
              (Jd.fromBufferAttribute(v, u),
              Qd.fromBufferAttribute(v, c),
              ef.fromBufferAttribute(v, h),
              s
                ? (Iu.addScaledVector(Jd, y),
                  Uu.addScaledVector(Qd, y),
                  Ou.addScaledVector(ef, y))
                : (Iu.addScaledVector(Jd.sub(Ri), y),
                  Uu.addScaledVector(Qd.sub(Pi), y),
                  Ou.addScaledVector(ef.sub(Li), y)));
          }
          Ri.add(Iu), Pi.add(Uu), Li.add(Ou);
        }
        n.isSkinnedMesh &&
          (n.boneTransform(u, Ri),
          n.boneTransform(c, Pi),
          n.boneTransform(h, Li));
        const f = (function (g, p, y, v, m, x, _, b) {
          let w;
          if (
            ((w =
              p.side === 1
                ? v.intersectTriangle(_, x, m, !0, b)
                : v.intersectTriangle(m, x, _, p.side !== 2, b)),
            w === null)
          )
            return null;
          Bu.copy(b), Bu.applyMatrix4(g.matrixWorld);
          const M = y.ray.origin.distanceTo(Bu);
          return M < y.near || M > y.far
            ? null
            : { distance: M, point: Bu.clone(), object: g };
        })(n, e, t, r, Ri, Pi, Li, tf);
        if (f) {
          o &&
            (zu.fromBufferAttribute(o, u),
            Nu.fromBufferAttribute(o, c),
            Fu.fromBufferAttribute(o, h),
            (f.uv = Fr.getUV(tf, Ri, Pi, Li, zu, Nu, Fu, new ge()))),
            l &&
              (zu.fromBufferAttribute(l, u),
              Nu.fromBufferAttribute(l, c),
              Fu.fromBufferAttribute(l, h),
              (f.uv2 = Fr.getUV(tf, Ri, Pi, Li, zu, Nu, Fu, new ge())));
          const g = { a: u, b: c, c: h, normal: new j(), materialIndex: 0 };
          Fr.getNormal(Ri, Pi, Li, g.normal), (f.face = g);
        }
        return f;
      }
      class Yl extends Lt {
        constructor(e = 1, t = 1, r = 1, i = 1, a = 1, s = 1) {
          super(),
            (this.type = "BoxGeometry"),
            (this.parameters = {
              width: e,
              height: t,
              depth: r,
              widthSegments: i,
              heightSegments: a,
              depthSegments: s,
            });
          const o = this;
          (i = Math.floor(i)), (a = Math.floor(a)), (s = Math.floor(s));
          const l = [],
            u = [],
            c = [],
            h = [];
          let d = 0,
            f = 0;
          function g(p, y, v, m, x, _, b, w, M, C, N) {
            const G = _ / M,
              U = b / C,
              I = _ / 2,
              F = b / 2,
              T = w / 2,
              O = M + 1,
              k = C + 1;
            let P = 0,
              E = 0;
            const z = new j();
            for (let A = 0; A < k; A++) {
              const D = A * U - F;
              for (let V = 0; V < O; V++) {
                const K = V * G - I;
                (z[p] = K * m),
                  (z[y] = D * x),
                  (z[v] = T),
                  u.push(z.x, z.y, z.z),
                  (z[p] = 0),
                  (z[y] = 0),
                  (z[v] = w > 0 ? 1 : -1),
                  c.push(z.x, z.y, z.z),
                  h.push(V / M),
                  h.push(1 - A / C),
                  (P += 1);
              }
            }
            for (let A = 0; A < C; A++)
              for (let D = 0; D < M; D++) {
                const V = d + D + O * A,
                  K = d + D + O * (A + 1),
                  B = d + (D + 1) + O * (A + 1),
                  Y = d + (D + 1) + O * A;
                l.push(V, K, Y), l.push(K, B, Y), (E += 6);
              }
            o.addGroup(f, E, N), (f += E), (d += P);
          }
          g("z", "y", "x", -1, -1, r, t, e, s, a, 0),
            g("z", "y", "x", 1, -1, r, t, -e, s, a, 1),
            g("x", "z", "y", 1, 1, e, r, t, i, s, 2),
            g("x", "z", "y", 1, -1, e, r, -t, i, s, 3),
            g("x", "y", "z", 1, -1, e, t, r, i, a, 4),
            g("x", "y", "z", -1, -1, e, t, -r, i, a, 5),
            this.setIndex(l),
            this.setAttribute("position", new yt(u, 3)),
            this.setAttribute("normal", new yt(c, 3)),
            this.setAttribute("uv", new yt(h, 2));
        }
        static fromJSON(e) {
          return new Yl(
            e.width,
            e.height,
            e.depth,
            e.widthSegments,
            e.heightSegments,
            e.depthSegments
          );
        }
      }
      function to(n) {
        const e = {};
        for (const t in n) {
          e[t] = {};
          for (const r in n[t]) {
            const i = n[t][r];
            i &&
            (i.isColor ||
              i.isMatrix3 ||
              i.isMatrix4 ||
              i.isVector2 ||
              i.isVector3 ||
              i.isVector4 ||
              i.isTexture ||
              i.isQuaternion)
              ? (e[t][r] = i.clone())
              : Array.isArray(i)
              ? (e[t][r] = i.slice())
              : (e[t][r] = i);
          }
        }
        return e;
      }
      function sn(n) {
        const e = {};
        for (let t = 0; t < n.length; t++) {
          const r = to(n[t]);
          for (const i in r) e[i] = r[i];
        }
        return e;
      }
      const y_ = { clone: to, merge: sn };
      class hn extends dr {
        constructor(e) {
          super(),
            (this.isShaderMaterial = !0),
            (this.type = "ShaderMaterial"),
            (this.defines = {}),
            (this.uniforms = {}),
            (this.uniformsGroups = []),
            (this.vertexShader = `void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`),
            (this.fragmentShader = `void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`),
            (this.linewidth = 1),
            (this.wireframe = !1),
            (this.wireframeLinewidth = 1),
            (this.fog = !1),
            (this.lights = !1),
            (this.clipping = !1),
            (this.extensions = {
              derivatives: !1,
              fragDepth: !1,
              drawBuffers: !1,
              shaderTextureLOD: !1,
            }),
            (this.defaultAttributeValues = {
              color: [1, 1, 1],
              uv: [0, 0],
              uv2: [0, 0],
            }),
            (this.index0AttributeName = void 0),
            (this.uniformsNeedUpdate = !1),
            (this.glslVersion = null),
            e !== void 0 && this.setValues(e);
        }
        copy(e) {
          return (
            super.copy(e),
            (this.fragmentShader = e.fragmentShader),
            (this.vertexShader = e.vertexShader),
            (this.uniforms = to(e.uniforms)),
            (this.uniformsGroups = (function (t) {
              const r = [];
              for (let i = 0; i < t.length; i++) r.push(t[i].clone());
              return r;
            })(e.uniformsGroups)),
            (this.defines = Object.assign({}, e.defines)),
            (this.wireframe = e.wireframe),
            (this.wireframeLinewidth = e.wireframeLinewidth),
            (this.fog = e.fog),
            (this.lights = e.lights),
            (this.clipping = e.clipping),
            (this.extensions = Object.assign({}, e.extensions)),
            (this.glslVersion = e.glslVersion),
            this
          );
        }
        toJSON(e) {
          const t = super.toJSON(e);
          (t.glslVersion = this.glslVersion), (t.uniforms = {});
          for (const i in this.uniforms) {
            const a = this.uniforms[i].value;
            a && a.isTexture
              ? (t.uniforms[i] = { type: "t", value: a.toJSON(e).uuid })
              : a && a.isColor
              ? (t.uniforms[i] = { type: "c", value: a.getHex() })
              : a && a.isVector2
              ? (t.uniforms[i] = { type: "v2", value: a.toArray() })
              : a && a.isVector3
              ? (t.uniforms[i] = { type: "v3", value: a.toArray() })
              : a && a.isVector4
              ? (t.uniforms[i] = { type: "v4", value: a.toArray() })
              : a && a.isMatrix3
              ? (t.uniforms[i] = { type: "m3", value: a.toArray() })
              : a && a.isMatrix4
              ? (t.uniforms[i] = { type: "m4", value: a.toArray() })
              : (t.uniforms[i] = { value: a });
          }
          Object.keys(this.defines).length > 0 && (t.defines = this.defines),
            (t.vertexShader = this.vertexShader),
            (t.fragmentShader = this.fragmentShader);
          const r = {};
          for (const i in this.extensions)
            this.extensions[i] === !0 && (r[i] = !0);
          return Object.keys(r).length > 0 && (t.extensions = r), t;
        }
      }
      class qm extends ot {
        constructor() {
          super(),
            (this.isCamera = !0),
            (this.type = "Camera"),
            (this.matrixWorldInverse = new Te()),
            (this.projectionMatrix = new Te()),
            (this.projectionMatrixInverse = new Te());
        }
        copy(e, t) {
          return (
            super.copy(e, t),
            this.matrixWorldInverse.copy(e.matrixWorldInverse),
            this.projectionMatrix.copy(e.projectionMatrix),
            this.projectionMatrixInverse.copy(e.projectionMatrixInverse),
            this
          );
        }
        getWorldDirection(e) {
          this.updateWorldMatrix(!0, !1);
          const t = this.matrixWorld.elements;
          return e.set(-t[8], -t[9], -t[10]).normalize();
        }
        updateMatrixWorld(e) {
          super.updateMatrixWorld(e),
            this.matrixWorldInverse.copy(this.matrixWorld).invert();
        }
        updateWorldMatrix(e, t) {
          super.updateWorldMatrix(e, t),
            this.matrixWorldInverse.copy(this.matrixWorld).invert();
        }
        clone() {
          return new this.constructor().copy(this);
        }
      }
      class ln extends qm {
        constructor(e = 50, t = 1, r = 0.1, i = 2e3) {
          super(),
            (this.isPerspectiveCamera = !0),
            (this.type = "PerspectiveCamera"),
            (this.fov = e),
            (this.zoom = 1),
            (this.near = r),
            (this.far = i),
            (this.focus = 10),
            (this.aspect = t),
            (this.view = null),
            (this.filmGauge = 35),
            (this.filmOffset = 0),
            this.updateProjectionMatrix();
        }
        copy(e, t) {
          return (
            super.copy(e, t),
            (this.fov = e.fov),
            (this.zoom = e.zoom),
            (this.near = e.near),
            (this.far = e.far),
            (this.focus = e.focus),
            (this.aspect = e.aspect),
            (this.view = e.view === null ? null : Object.assign({}, e.view)),
            (this.filmGauge = e.filmGauge),
            (this.filmOffset = e.filmOffset),
            this
          );
        }
        setFocalLength(e) {
          const t = (0.5 * this.getFilmHeight()) / e;
          (this.fov = 2 * Dl * Math.atan(t)), this.updateProjectionMatrix();
        }
        getFocalLength() {
          const e = Math.tan(0.5 * al * this.fov);
          return (0.5 * this.getFilmHeight()) / e;
        }
        getEffectiveFOV() {
          return 2 * Dl * Math.atan(Math.tan(0.5 * al * this.fov) / this.zoom);
        }
        getFilmWidth() {
          return this.filmGauge * Math.min(this.aspect, 1);
        }
        getFilmHeight() {
          return this.filmGauge / Math.max(this.aspect, 1);
        }
        setViewOffset(e, t, r, i, a, s) {
          (this.aspect = e / t),
            this.view === null &&
              (this.view = {
                enabled: !0,
                fullWidth: 1,
                fullHeight: 1,
                offsetX: 0,
                offsetY: 0,
                width: 1,
                height: 1,
              }),
            (this.view.enabled = !0),
            (this.view.fullWidth = e),
            (this.view.fullHeight = t),
            (this.view.offsetX = r),
            (this.view.offsetY = i),
            (this.view.width = a),
            (this.view.height = s),
            this.updateProjectionMatrix();
        }
        clearViewOffset() {
          this.view !== null && (this.view.enabled = !1),
            this.updateProjectionMatrix();
        }
        updateProjectionMatrix() {
          const e = this.near;
          let t = (e * Math.tan(0.5 * al * this.fov)) / this.zoom,
            r = 2 * t,
            i = this.aspect * r,
            a = -0.5 * i;
          const s = this.view;
          if (this.view !== null && this.view.enabled) {
            const l = s.fullWidth,
              u = s.fullHeight;
            (a += (s.offsetX * i) / l),
              (t -= (s.offsetY * r) / u),
              (i *= s.width / l),
              (r *= s.height / u);
          }
          const o = this.filmOffset;
          o !== 0 && (a += (e * o) / this.getFilmWidth()),
            this.projectionMatrix.makePerspective(
              a,
              a + i,
              t,
              t - r,
              e,
              this.far
            ),
            this.projectionMatrixInverse.copy(this.projectionMatrix).invert();
        }
        toJSON(e) {
          const t = super.toJSON(e);
          return (
            (t.object.fov = this.fov),
            (t.object.zoom = this.zoom),
            (t.object.near = this.near),
            (t.object.far = this.far),
            (t.object.focus = this.focus),
            (t.object.aspect = this.aspect),
            this.view !== null &&
              (t.object.view = Object.assign({}, this.view)),
            (t.object.filmGauge = this.filmGauge),
            (t.object.filmOffset = this.filmOffset),
            t
          );
        }
      }
      class lS extends ot {
        constructor(e, t, r) {
          super(), (this.type = "CubeCamera"), (this.renderTarget = r);
          const i = new ln(90, 1, e, t);
          (i.layers = this.layers),
            i.up.set(0, -1, 0),
            i.lookAt(new j(1, 0, 0)),
            this.add(i);
          const a = new ln(90, 1, e, t);
          (a.layers = this.layers),
            a.up.set(0, -1, 0),
            a.lookAt(new j(-1, 0, 0)),
            this.add(a);
          const s = new ln(90, 1, e, t);
          (s.layers = this.layers),
            s.up.set(0, 0, 1),
            s.lookAt(new j(0, 1, 0)),
            this.add(s);
          const o = new ln(90, 1, e, t);
          (o.layers = this.layers),
            o.up.set(0, 0, -1),
            o.lookAt(new j(0, -1, 0)),
            this.add(o);
          const l = new ln(90, 1, e, t);
          (l.layers = this.layers),
            l.up.set(0, -1, 0),
            l.lookAt(new j(0, 0, 1)),
            this.add(l);
          const u = new ln(90, 1, e, t);
          (u.layers = this.layers),
            u.up.set(0, -1, 0),
            u.lookAt(new j(0, 0, -1)),
            this.add(u);
        }
        update(e, t) {
          this.parent === null && this.updateMatrixWorld();
          const r = this.renderTarget,
            [i, a, s, o, l, u] = this.children,
            c = e.getRenderTarget(),
            h = e.toneMapping,
            d = e.xr.enabled;
          (e.toneMapping = 0), (e.xr.enabled = !1);
          const f = r.texture.generateMipmaps;
          (r.texture.generateMipmaps = !1),
            e.setRenderTarget(r, 0),
            e.render(t, i),
            e.setRenderTarget(r, 1),
            e.render(t, a),
            e.setRenderTarget(r, 2),
            e.render(t, s),
            e.setRenderTarget(r, 3),
            e.render(t, o),
            e.setRenderTarget(r, 4),
            e.render(t, l),
            (r.texture.generateMipmaps = f),
            e.setRenderTarget(r, 5),
            e.render(t, u),
            e.setRenderTarget(c),
            (e.toneMapping = h),
            (e.xr.enabled = d),
            (r.texture.needsPMREMUpdate = !0);
        }
      }
      class x_ extends jt {
        constructor(e, t, r, i, a, s, o, l, u, c) {
          super(
            (e = e !== void 0 ? e : []),
            (t = t !== void 0 ? t : 301),
            r,
            i,
            a,
            s,
            o,
            l,
            u,
            c
          ),
            (this.isCubeTexture = !0),
            (this.flipY = !1);
        }
        get images() {
          return this.image;
        }
        set images(e) {
          this.image = e;
        }
      }
      class uS extends Jt {
        constructor(e, t = {}) {
          super(e, e, t), (this.isWebGLCubeRenderTarget = !0);
          const r = { width: e, height: e, depth: 1 },
            i = [r, r, r, r, r, r];
          (this.texture = new x_(
            i,
            t.mapping,
            t.wrapS,
            t.wrapT,
            t.magFilter,
            t.minFilter,
            t.format,
            t.type,
            t.anisotropy,
            t.encoding
          )),
            (this.texture.isRenderTargetTexture = !0),
            (this.texture.generateMipmaps =
              t.generateMipmaps !== void 0 && t.generateMipmaps),
            (this.texture.minFilter =
              t.minFilter !== void 0 ? t.minFilter : 1006);
        }
        fromEquirectangularTexture(e, t) {
          (this.texture.type = t.type),
            (this.texture.encoding = t.encoding),
            (this.texture.generateMipmaps = t.generateMipmaps),
            (this.texture.minFilter = t.minFilter),
            (this.texture.magFilter = t.magFilter);
          const r = {
              uniforms: { tEquirect: { value: null } },
              vertexShader: `

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,
              fragmentShader: `

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`,
            },
            i = new Yl(5, 5, 5),
            a = new hn({
              name: "CubemapFromEquirect",
              uniforms: to(r.uniforms),
              vertexShader: r.vertexShader,
              fragmentShader: r.fragmentShader,
              side: 1,
              blending: 0,
            });
          a.uniforms.tEquirect.value = t;
          const s = new xt(i, a),
            o = t.minFilter;
          return (
            t.minFilter === 1008 && (t.minFilter = 1006),
            new lS(1, 10, this).update(e, s),
            (t.minFilter = o),
            s.geometry.dispose(),
            s.material.dispose(),
            this
          );
        }
        clear(e, t, r, i) {
          const a = e.getRenderTarget();
          for (let s = 0; s < 6; s++)
            e.setRenderTarget(this, s), e.clear(t, r, i);
          e.setRenderTarget(a);
        }
      }
      const nf = new j(),
        cS = new j(),
        hS = new Pn();
      class Sa {
        constructor(e = new j(1, 0, 0), t = 0) {
          (this.isPlane = !0), (this.normal = e), (this.constant = t);
        }
        set(e, t) {
          return this.normal.copy(e), (this.constant = t), this;
        }
        setComponents(e, t, r, i) {
          return this.normal.set(e, t, r), (this.constant = i), this;
        }
        setFromNormalAndCoplanarPoint(e, t) {
          return (
            this.normal.copy(e), (this.constant = -t.dot(this.normal)), this
          );
        }
        setFromCoplanarPoints(e, t, r) {
          const i = nf.subVectors(r, t).cross(cS.subVectors(e, t)).normalize();
          return this.setFromNormalAndCoplanarPoint(i, e), this;
        }
        copy(e) {
          return this.normal.copy(e.normal), (this.constant = e.constant), this;
        }
        normalize() {
          const e = 1 / this.normal.length();
          return this.normal.multiplyScalar(e), (this.constant *= e), this;
        }
        negate() {
          return (this.constant *= -1), this.normal.negate(), this;
        }
        distanceToPoint(e) {
          return this.normal.dot(e) + this.constant;
        }
        distanceToSphere(e) {
          return this.distanceToPoint(e.center) - e.radius;
        }
        projectPoint(e, t) {
          return t
            .copy(this.normal)
            .multiplyScalar(-this.distanceToPoint(e))
            .add(e);
        }
        intersectLine(e, t) {
          const r = e.delta(nf),
            i = this.normal.dot(r);
          if (i === 0)
            return this.distanceToPoint(e.start) === 0 ? t.copy(e.start) : null;
          const a = -(e.start.dot(this.normal) + this.constant) / i;
          return a < 0 || a > 1
            ? null
            : t.copy(r).multiplyScalar(a).add(e.start);
        }
        intersectsLine(e) {
          const t = this.distanceToPoint(e.start),
            r = this.distanceToPoint(e.end);
          return (t < 0 && r > 0) || (r < 0 && t > 0);
        }
        intersectsBox(e) {
          return e.intersectsPlane(this);
        }
        intersectsSphere(e) {
          return e.intersectsPlane(this);
        }
        coplanarPoint(e) {
          return e.copy(this.normal).multiplyScalar(-this.constant);
        }
        applyMatrix4(e, t) {
          const r = t || hS.getNormalMatrix(e),
            i = this.coplanarPoint(nf).applyMatrix4(e),
            a = this.normal.applyMatrix3(r).normalize();
          return (this.constant = -i.dot(a)), this;
        }
        translate(e) {
          return (this.constant -= e.dot(this.normal)), this;
        }
        equals(e) {
          return e.normal.equals(this.normal) && e.constant === this.constant;
        }
        clone() {
          return new this.constructor().copy(this);
        }
      }
      const us = new lo(),
        Hu = new j();
      class $m {
        constructor(
          e = new Sa(),
          t = new Sa(),
          r = new Sa(),
          i = new Sa(),
          a = new Sa(),
          s = new Sa()
        ) {
          this.planes = [e, t, r, i, a, s];
        }
        set(e, t, r, i, a, s) {
          const o = this.planes;
          return (
            o[0].copy(e),
            o[1].copy(t),
            o[2].copy(r),
            o[3].copy(i),
            o[4].copy(a),
            o[5].copy(s),
            this
          );
        }
        copy(e) {
          const t = this.planes;
          for (let r = 0; r < 6; r++) t[r].copy(e.planes[r]);
          return this;
        }
        setFromProjectionMatrix(e) {
          const t = this.planes,
            r = e.elements,
            i = r[0],
            a = r[1],
            s = r[2],
            o = r[3],
            l = r[4],
            u = r[5],
            c = r[6],
            h = r[7],
            d = r[8],
            f = r[9],
            g = r[10],
            p = r[11],
            y = r[12],
            v = r[13],
            m = r[14],
            x = r[15];
          return (
            t[0].setComponents(o - i, h - l, p - d, x - y).normalize(),
            t[1].setComponents(o + i, h + l, p + d, x + y).normalize(),
            t[2].setComponents(o + a, h + u, p + f, x + v).normalize(),
            t[3].setComponents(o - a, h - u, p - f, x - v).normalize(),
            t[4].setComponents(o - s, h - c, p - g, x - m).normalize(),
            t[5].setComponents(o + s, h + c, p + g, x + m).normalize(),
            this
          );
        }
        intersectsObject(e) {
          const t = e.geometry;
          return (
            t.boundingSphere === null && t.computeBoundingSphere(),
            us.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),
            this.intersectsSphere(us)
          );
        }
        intersectsSprite(e) {
          return (
            us.center.set(0, 0, 0),
            (us.radius = 0.7071067811865476),
            us.applyMatrix4(e.matrixWorld),
            this.intersectsSphere(us)
          );
        }
        intersectsSphere(e) {
          const t = this.planes,
            r = e.center,
            i = -e.radius;
          for (let a = 0; a < 6; a++)
            if (t[a].distanceToPoint(r) < i) return !1;
          return !0;
        }
        intersectsBox(e) {
          const t = this.planes;
          for (let r = 0; r < 6; r++) {
            const i = t[r];
            if (
              ((Hu.x = i.normal.x > 0 ? e.max.x : e.min.x),
              (Hu.y = i.normal.y > 0 ? e.max.y : e.min.y),
              (Hu.z = i.normal.z > 0 ? e.max.z : e.min.z),
              i.distanceToPoint(Hu) < 0)
            )
              return !1;
          }
          return !0;
        }
        containsPoint(e) {
          const t = this.planes;
          for (let r = 0; r < 6; r++)
            if (t[r].distanceToPoint(e) < 0) return !1;
          return !0;
        }
        clone() {
          return new this.constructor().copy(this);
        }
      }
      function __() {
        let n = null,
          e = !1,
          t = null,
          r = null;
        function i(a, s) {
          t(a, s), (r = n.requestAnimationFrame(i));
        }
        return {
          start: function () {
            e !== !0 &&
              t !== null &&
              ((r = n.requestAnimationFrame(i)), (e = !0));
          },
          stop: function () {
            n.cancelAnimationFrame(r), (e = !1);
          },
          setAnimationLoop: function (a) {
            t = a;
          },
          setContext: function (a) {
            n = a;
          },
        };
      }
      function dS(n, e) {
        const t = e.isWebGL2,
          r = new WeakMap();
        return {
          get: function (i) {
            return i.isInterleavedBufferAttribute && (i = i.data), r.get(i);
          },
          remove: function (i) {
            i.isInterleavedBufferAttribute && (i = i.data);
            const a = r.get(i);
            a && (n.deleteBuffer(a.buffer), r.delete(i));
          },
          update: function (i, a) {
            if (i.isGLBufferAttribute) {
              const o = r.get(i);
              return void (
                (!o || o.version < i.version) &&
                r.set(i, {
                  buffer: i.buffer,
                  type: i.type,
                  bytesPerElement: i.elementSize,
                  version: i.version,
                })
              );
            }
            i.isInterleavedBufferAttribute && (i = i.data);
            const s = r.get(i);
            s === void 0
              ? r.set(
                  i,
                  (function (o, l) {
                    const u = o.array,
                      c = o.usage,
                      h = n.createBuffer();
                    let d;
                    if (
                      (n.bindBuffer(l, h),
                      n.bufferData(l, u, c),
                      o.onUploadCallback(),
                      u instanceof Float32Array)
                    )
                      d = 5126;
                    else if (u instanceof Uint16Array)
                      if (o.isFloat16BufferAttribute) {
                        if (!t)
                          throw new Error(
                            "THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."
                          );
                        d = 5131;
                      } else d = 5123;
                    else if (u instanceof Int16Array) d = 5122;
                    else if (u instanceof Uint32Array) d = 5125;
                    else if (u instanceof Int32Array) d = 5124;
                    else if (u instanceof Int8Array) d = 5120;
                    else if (u instanceof Uint8Array) d = 5121;
                    else {
                      if (!(u instanceof Uint8ClampedArray))
                        throw new Error(
                          "THREE.WebGLAttributes: Unsupported buffer data format: " +
                            u
                        );
                      d = 5121;
                    }
                    return {
                      buffer: h,
                      type: d,
                      bytesPerElement: u.BYTES_PER_ELEMENT,
                      version: o.version,
                    };
                  })(i, a)
                )
              : s.version < i.version &&
                ((function (o, l, u) {
                  const c = l.array,
                    h = l.updateRange;
                  n.bindBuffer(u, o),
                    h.count === -1
                      ? n.bufferSubData(u, 0, c)
                      : (t
                          ? n.bufferSubData(
                              u,
                              h.offset * c.BYTES_PER_ELEMENT,
                              c,
                              h.offset,
                              h.count
                            )
                          : n.bufferSubData(
                              u,
                              h.offset * c.BYTES_PER_ELEMENT,
                              c.subarray(h.offset, h.offset + h.count)
                            ),
                        (h.count = -1));
                })(s.buffer, i, a),
                (s.version = i.version));
          },
        };
      }
      class uo extends Lt {
        constructor(e = 1, t = 1, r = 1, i = 1) {
          super(),
            (this.type = "PlaneGeometry"),
            (this.parameters = {
              width: e,
              height: t,
              widthSegments: r,
              heightSegments: i,
            });
          const a = e / 2,
            s = t / 2,
            o = Math.floor(r),
            l = Math.floor(i),
            u = o + 1,
            c = l + 1,
            h = e / o,
            d = t / l,
            f = [],
            g = [],
            p = [],
            y = [];
          for (let v = 0; v < c; v++) {
            const m = v * d - s;
            for (let x = 0; x < u; x++) {
              const _ = x * h - a;
              g.push(_, -m, 0),
                p.push(0, 0, 1),
                y.push(x / o),
                y.push(1 - v / l);
            }
          }
          for (let v = 0; v < l; v++)
            for (let m = 0; m < o; m++) {
              const x = m + u * v,
                _ = m + u * (v + 1),
                b = m + 1 + u * (v + 1),
                w = m + 1 + u * v;
              f.push(x, _, w), f.push(_, b, w);
            }
          this.setIndex(f),
            this.setAttribute("position", new yt(g, 3)),
            this.setAttribute("normal", new yt(p, 3)),
            this.setAttribute("uv", new yt(y, 2));
        }
        static fromJSON(e) {
          return new uo(e.width, e.height, e.widthSegments, e.heightSegments);
        }
      }
      const Ie = {
          alphamap_fragment: `#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,
          alphamap_pars_fragment: `#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,
          alphatest_fragment: `#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,
          alphatest_pars_fragment: `#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,
          aomap_fragment: `#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,
          aomap_pars_fragment: `#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,
          begin_vertex: "vec3 transformed = vec3( position );",
          beginnormal_vertex: `vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,
          bsdfs: `vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,
          iridescence_fragment: `#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,
          bumpmap_pars_fragment: `#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,
          clipping_planes_fragment: `#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,
          clipping_planes_pars_fragment: `#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,
          clipping_planes_pars_vertex: `#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,
          clipping_planes_vertex: `#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,
          color_fragment: `#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,
          color_pars_fragment: `#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,
          color_pars_vertex: `#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,
          color_vertex: `#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,
          common: `#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,
          cube_uv_reflection_fragment: `#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,
          defaultnormal_vertex: `vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,
          displacementmap_pars_vertex: `#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,
          displacementmap_vertex: `#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,
          emissivemap_fragment: `#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,
          emissivemap_pars_fragment: `#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,
          encodings_fragment:
            "gl_FragColor = linearToOutputTexel( gl_FragColor );",
          encodings_pars_fragment: `vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,
          envmap_fragment: `#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,
          envmap_common_pars_fragment: `#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,
          envmap_pars_fragment: `#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,
          envmap_pars_vertex: `#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,
          envmap_physical_pars_fragment: `#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,
          envmap_vertex: `#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,
          fog_vertex: `#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,
          fog_pars_vertex: `#ifdef USE_FOG
	varying float vFogDepth;
#endif`,
          fog_fragment: `#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,
          fog_pars_fragment: `#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,
          gradientmap_pars_fragment: `#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,
          lightmap_fragment: `#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,
          lightmap_pars_fragment: `#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,
          lights_lambert_fragment: `LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,
          lights_lambert_pars_fragment: `varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert
#define Material_LightProbeLOD( material )	(0)`,
          lights_pars_begin: `uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,
          lights_toon_fragment: `ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,
          lights_toon_pars_fragment: `varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,
          lights_phong_fragment: `BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,
          lights_phong_pars_fragment: `varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,
          lights_physical_fragment: `PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,
          lights_physical_pars_fragment: `struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,
          lights_fragment_begin: `
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,
          lights_fragment_maps: `#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,
          lights_fragment_end: `#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,
          logdepthbuf_fragment: `#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,
          logdepthbuf_pars_fragment: `#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,
          logdepthbuf_pars_vertex: `#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,
          logdepthbuf_vertex: `#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,
          map_fragment: `#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,
          map_pars_fragment: `#ifdef USE_MAP
	uniform sampler2D map;
#endif`,
          map_particle_fragment: `#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,
          map_particle_pars_fragment: `#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,
          metalnessmap_fragment: `float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,
          metalnessmap_pars_fragment: `#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,
          morphcolor_vertex: `#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,
          morphnormal_vertex: `#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,
          morphtarget_pars_vertex: `#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,
          morphtarget_vertex: `#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,
          normal_fragment_begin: `float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,
          normal_fragment_maps: `#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,
          normal_pars_fragment: `#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,
          normal_pars_vertex: `#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,
          normal_vertex: `#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,
          normalmap_pars_fragment: `#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,
          clearcoat_normal_fragment_begin: `#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,
          clearcoat_normal_fragment_maps: `#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,
          clearcoat_pars_fragment: `#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,
          iridescence_pars_fragment: `#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,
          output_fragment: `#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,
          packing: `vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,
          premultiplied_alpha_fragment: `#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,
          project_vertex: `vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,
          dithering_fragment: `#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,
          dithering_pars_fragment: `#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,
          roughnessmap_fragment: `float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,
          roughnessmap_pars_fragment: `#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,
          shadowmap_pars_fragment: `#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,
          shadowmap_pars_vertex: `#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,
          shadowmap_vertex: `#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,
          shadowmask_pars_fragment: `float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,
          skinbase_vertex: `#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,
          skinning_pars_vertex: `#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,
          skinning_vertex: `#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,
          skinnormal_vertex: `#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,
          specularmap_fragment: `float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,
          specularmap_pars_fragment: `#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,
          tonemapping_fragment: `#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,
          tonemapping_pars_fragment: `#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,
          transmission_fragment: `#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,
          transmission_pars_fragment: `#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,
          uv_pars_fragment: `#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,
          uv_pars_vertex: `#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,
          uv_vertex: `#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,
          uv2_pars_fragment: `#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,
          uv2_pars_vertex: `#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,
          uv2_vertex: `#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,
          worldpos_vertex: `#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,
          background_vert: `varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,
          background_frag: `uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,
          cube_vert: `varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,
          cube_frag: `#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,
          depth_vert: `#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,
          depth_frag: `#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,
          distanceRGBA_vert: `#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,
          distanceRGBA_frag: `#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,
          equirect_vert: `varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,
          equirect_frag: `uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,
          linedashed_vert: `uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,
          linedashed_frag: `uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,
          meshbasic_vert: `#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,
          meshbasic_frag: `uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,
          meshlambert_vert: `#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,
          meshlambert_frag: `#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,
          meshmatcap_vert: `#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,
          meshmatcap_frag: `#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,
          meshnormal_vert: `#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,
          meshnormal_frag: `#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,
          meshphong_vert: `#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,
          meshphong_frag: `#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,
          meshphysical_vert: `#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,
          meshphysical_frag: `#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,
          meshtoon_vert: `#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,
          meshtoon_frag: `#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,
          points_vert: `uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,
          points_frag: `uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,
          shadow_vert: `#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,
          shadow_frag: `uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,
          sprite_vert: `uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,
          sprite_frag: `uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,
        },
        ve = {
          common: {
            diffuse: { value: new Ce(16777215) },
            opacity: { value: 1 },
            map: { value: null },
            uvTransform: { value: new Pn() },
            uv2Transform: { value: new Pn() },
            alphaMap: { value: null },
            alphaTest: { value: 0 },
          },
          specularmap: { specularMap: { value: null } },
          envmap: {
            envMap: { value: null },
            flipEnvMap: { value: -1 },
            reflectivity: { value: 1 },
            ior: { value: 1.5 },
            refractionRatio: { value: 0.98 },
          },
          aomap: { aoMap: { value: null }, aoMapIntensity: { value: 1 } },
          lightmap: {
            lightMap: { value: null },
            lightMapIntensity: { value: 1 },
          },
          emissivemap: { emissiveMap: { value: null } },
          bumpmap: { bumpMap: { value: null }, bumpScale: { value: 1 } },
          normalmap: {
            normalMap: { value: null },
            normalScale: { value: new ge(1, 1) },
          },
          displacementmap: {
            displacementMap: { value: null },
            displacementScale: { value: 1 },
            displacementBias: { value: 0 },
          },
          roughnessmap: { roughnessMap: { value: null } },
          metalnessmap: { metalnessMap: { value: null } },
          gradientmap: { gradientMap: { value: null } },
          fog: {
            fogDensity: { value: 25e-5 },
            fogNear: { value: 1 },
            fogFar: { value: 2e3 },
            fogColor: { value: new Ce(16777215) },
          },
          lights: {
            ambientLightColor: { value: [] },
            lightProbe: { value: [] },
            directionalLights: {
              value: [],
              properties: { direction: {}, color: {} },
            },
            directionalLightShadows: {
              value: [],
              properties: {
                shadowBias: {},
                shadowNormalBias: {},
                shadowRadius: {},
                shadowMapSize: {},
              },
            },
            directionalShadowMap: { value: [] },
            directionalShadowMatrix: { value: [] },
            spotLights: {
              value: [],
              properties: {
                color: {},
                position: {},
                direction: {},
                distance: {},
                coneCos: {},
                penumbraCos: {},
                decay: {},
              },
            },
            spotLightShadows: {
              value: [],
              properties: {
                shadowBias: {},
                shadowNormalBias: {},
                shadowRadius: {},
                shadowMapSize: {},
              },
            },
            spotLightMap: { value: [] },
            spotShadowMap: { value: [] },
            spotLightMatrix: { value: [] },
            pointLights: {
              value: [],
              properties: { color: {}, position: {}, decay: {}, distance: {} },
            },
            pointLightShadows: {
              value: [],
              properties: {
                shadowBias: {},
                shadowNormalBias: {},
                shadowRadius: {},
                shadowMapSize: {},
                shadowCameraNear: {},
                shadowCameraFar: {},
              },
            },
            pointShadowMap: { value: [] },
            pointShadowMatrix: { value: [] },
            hemisphereLights: {
              value: [],
              properties: { direction: {}, skyColor: {}, groundColor: {} },
            },
            rectAreaLights: {
              value: [],
              properties: { color: {}, position: {}, width: {}, height: {} },
            },
            ltc_1: { value: null },
            ltc_2: { value: null },
          },
          points: {
            diffuse: { value: new Ce(16777215) },
            opacity: { value: 1 },
            size: { value: 1 },
            scale: { value: 1 },
            map: { value: null },
            alphaMap: { value: null },
            alphaTest: { value: 0 },
            uvTransform: { value: new Pn() },
          },
          sprite: {
            diffuse: { value: new Ce(16777215) },
            opacity: { value: 1 },
            center: { value: new ge(0.5, 0.5) },
            rotation: { value: 0 },
            map: { value: null },
            alphaMap: { value: null },
            alphaTest: { value: 0 },
            uvTransform: { value: new Pn() },
          },
        },
        Or = {
          basic: {
            uniforms: sn([
              ve.common,
              ve.specularmap,
              ve.envmap,
              ve.aomap,
              ve.lightmap,
              ve.fog,
            ]),
            vertexShader: Ie.meshbasic_vert,
            fragmentShader: Ie.meshbasic_frag,
          },
          lambert: {
            uniforms: sn([
              ve.common,
              ve.specularmap,
              ve.envmap,
              ve.aomap,
              ve.lightmap,
              ve.emissivemap,
              ve.bumpmap,
              ve.normalmap,
              ve.displacementmap,
              ve.fog,
              ve.lights,
              { emissive: { value: new Ce(0) } },
            ]),
            vertexShader: Ie.meshlambert_vert,
            fragmentShader: Ie.meshlambert_frag,
          },
          phong: {
            uniforms: sn([
              ve.common,
              ve.specularmap,
              ve.envmap,
              ve.aomap,
              ve.lightmap,
              ve.emissivemap,
              ve.bumpmap,
              ve.normalmap,
              ve.displacementmap,
              ve.fog,
              ve.lights,
              {
                emissive: { value: new Ce(0) },
                specular: { value: new Ce(1118481) },
                shininess: { value: 30 },
              },
            ]),
            vertexShader: Ie.meshphong_vert,
            fragmentShader: Ie.meshphong_frag,
          },
          standard: {
            uniforms: sn([
              ve.common,
              ve.envmap,
              ve.aomap,
              ve.lightmap,
              ve.emissivemap,
              ve.bumpmap,
              ve.normalmap,
              ve.displacementmap,
              ve.roughnessmap,
              ve.metalnessmap,
              ve.fog,
              ve.lights,
              {
                emissive: { value: new Ce(0) },
                roughness: { value: 1 },
                metalness: { value: 0 },
                envMapIntensity: { value: 1 },
              },
            ]),
            vertexShader: Ie.meshphysical_vert,
            fragmentShader: Ie.meshphysical_frag,
          },
          toon: {
            uniforms: sn([
              ve.common,
              ve.aomap,
              ve.lightmap,
              ve.emissivemap,
              ve.bumpmap,
              ve.normalmap,
              ve.displacementmap,
              ve.gradientmap,
              ve.fog,
              ve.lights,
              { emissive: { value: new Ce(0) } },
            ]),
            vertexShader: Ie.meshtoon_vert,
            fragmentShader: Ie.meshtoon_frag,
          },
          matcap: {
            uniforms: sn([
              ve.common,
              ve.bumpmap,
              ve.normalmap,
              ve.displacementmap,
              ve.fog,
              { matcap: { value: null } },
            ]),
            vertexShader: Ie.meshmatcap_vert,
            fragmentShader: Ie.meshmatcap_frag,
          },
          points: {
            uniforms: sn([ve.points, ve.fog]),
            vertexShader: Ie.points_vert,
            fragmentShader: Ie.points_frag,
          },
          dashed: {
            uniforms: sn([
              ve.common,
              ve.fog,
              {
                scale: { value: 1 },
                dashSize: { value: 1 },
                totalSize: { value: 2 },
              },
            ]),
            vertexShader: Ie.linedashed_vert,
            fragmentShader: Ie.linedashed_frag,
          },
          depth: {
            uniforms: sn([ve.common, ve.displacementmap]),
            vertexShader: Ie.depth_vert,
            fragmentShader: Ie.depth_frag,
          },
          normal: {
            uniforms: sn([
              ve.common,
              ve.bumpmap,
              ve.normalmap,
              ve.displacementmap,
              { opacity: { value: 1 } },
            ]),
            vertexShader: Ie.meshnormal_vert,
            fragmentShader: Ie.meshnormal_frag,
          },
          sprite: {
            uniforms: sn([ve.sprite, ve.fog]),
            vertexShader: Ie.sprite_vert,
            fragmentShader: Ie.sprite_frag,
          },
          background: {
            uniforms: {
              uvTransform: { value: new Pn() },
              t2D: { value: null },
            },
            vertexShader: Ie.background_vert,
            fragmentShader: Ie.background_frag,
          },
          cube: {
            uniforms: sn([ve.envmap, { opacity: { value: 1 } }]),
            vertexShader: Ie.cube_vert,
            fragmentShader: Ie.cube_frag,
          },
          equirect: {
            uniforms: { tEquirect: { value: null } },
            vertexShader: Ie.equirect_vert,
            fragmentShader: Ie.equirect_frag,
          },
          distanceRGBA: {
            uniforms: sn([
              ve.common,
              ve.displacementmap,
              {
                referencePosition: { value: new j() },
                nearDistance: { value: 1 },
                farDistance: { value: 1e3 },
              },
            ]),
            vertexShader: Ie.distanceRGBA_vert,
            fragmentShader: Ie.distanceRGBA_frag,
          },
          shadow: {
            uniforms: sn([
              ve.lights,
              ve.fog,
              { color: { value: new Ce(0) }, opacity: { value: 1 } },
            ]),
            vertexShader: Ie.shadow_vert,
            fragmentShader: Ie.shadow_frag,
          },
        };
      function fS(n, e, t, r, i, a) {
        const s = new Ce(0);
        let o,
          l,
          u = i === !0 ? 0 : 1,
          c = null,
          h = 0,
          d = null;
        function f(g, p) {
          t.buffers.color.setClear(g.r, g.g, g.b, p, a);
        }
        return {
          getClearColor: function () {
            return s;
          },
          setClearColor: function (g, p = 1) {
            s.set(g), (u = p), f(s, u);
          },
          getClearAlpha: function () {
            return u;
          },
          setClearAlpha: function (g) {
            (u = g), f(s, u);
          },
          render: function (g, p) {
            let y = !1,
              v = p.isScene === !0 ? p.background : null;
            v && v.isTexture && (v = e.get(v));
            const m = n.xr,
              x = m.getSession && m.getSession();
            x && x.environmentBlendMode === "additive" && (v = null),
              v === null ? f(s, u) : v && v.isColor && (f(v, 1), (y = !0)),
              (n.autoClear || y) &&
                n.clear(n.autoClearColor, n.autoClearDepth, n.autoClearStencil),
              v && (v.isCubeTexture || v.mapping === 306)
                ? (l === void 0 &&
                    ((l = new xt(
                      new Yl(1, 1, 1),
                      new hn({
                        name: "BackgroundCubeMaterial",
                        uniforms: to(Or.cube.uniforms),
                        vertexShader: Or.cube.vertexShader,
                        fragmentShader: Or.cube.fragmentShader,
                        side: 1,
                        depthTest: !1,
                        depthWrite: !1,
                        fog: !1,
                      })
                    )),
                    l.geometry.deleteAttribute("normal"),
                    l.geometry.deleteAttribute("uv"),
                    (l.onBeforeRender = function (_, b, w) {
                      this.matrixWorld.copyPosition(w.matrixWorld);
                    }),
                    Object.defineProperty(l.material, "envMap", {
                      get: function () {
                        return this.uniforms.envMap.value;
                      },
                    }),
                    r.update(l)),
                  (l.material.uniforms.envMap.value = v),
                  (l.material.uniforms.flipEnvMap.value =
                    v.isCubeTexture && v.isRenderTargetTexture === !1 ? -1 : 1),
                  (c === v && h === v.version && d === n.toneMapping) ||
                    ((l.material.needsUpdate = !0),
                    (c = v),
                    (h = v.version),
                    (d = n.toneMapping)),
                  l.layers.enableAll(),
                  g.unshift(l, l.geometry, l.material, 0, 0, null))
                : v &&
                  v.isTexture &&
                  (o === void 0 &&
                    ((o = new xt(
                      new uo(2, 2),
                      new hn({
                        name: "BackgroundMaterial",
                        uniforms: to(Or.background.uniforms),
                        vertexShader: Or.background.vertexShader,
                        fragmentShader: Or.background.fragmentShader,
                        side: 0,
                        depthTest: !1,
                        depthWrite: !1,
                        fog: !1,
                      })
                    )),
                    o.geometry.deleteAttribute("normal"),
                    Object.defineProperty(o.material, "map", {
                      get: function () {
                        return this.uniforms.t2D.value;
                      },
                    }),
                    r.update(o)),
                  (o.material.uniforms.t2D.value = v),
                  v.matrixAutoUpdate === !0 && v.updateMatrix(),
                  o.material.uniforms.uvTransform.value.copy(v.matrix),
                  (c === v && h === v.version && d === n.toneMapping) ||
                    ((o.material.needsUpdate = !0),
                    (c = v),
                    (h = v.version),
                    (d = n.toneMapping)),
                  o.layers.enableAll(),
                  g.unshift(o, o.geometry, o.material, 0, 0, null));
          },
        };
      }
      function pS(n, e, t, r) {
        const i = n.getParameter(34921),
          a = r.isWebGL2 ? null : e.get("OES_vertex_array_object"),
          s = r.isWebGL2 || a !== null,
          o = {},
          l = f(null);
        let u = l,
          c = !1;
        function h(b) {
          return r.isWebGL2 ? n.bindVertexArray(b) : a.bindVertexArrayOES(b);
        }
        function d(b) {
          return r.isWebGL2
            ? n.deleteVertexArray(b)
            : a.deleteVertexArrayOES(b);
        }
        function f(b) {
          const w = [],
            M = [],
            C = [];
          for (let N = 0; N < i; N++) (w[N] = 0), (M[N] = 0), (C[N] = 0);
          return {
            geometry: null,
            program: null,
            wireframe: !1,
            newAttributes: w,
            enabledAttributes: M,
            attributeDivisors: C,
            object: b,
            attributes: {},
            index: null,
          };
        }
        function g() {
          const b = u.newAttributes;
          for (let w = 0, M = b.length; w < M; w++) b[w] = 0;
        }
        function p(b) {
          y(b, 0);
        }
        function y(b, w) {
          const M = u.newAttributes,
            C = u.enabledAttributes,
            N = u.attributeDivisors;
          (M[b] = 1),
            C[b] === 0 && (n.enableVertexAttribArray(b), (C[b] = 1)),
            N[b] !== w &&
              ((r.isWebGL2 ? n : e.get("ANGLE_instanced_arrays"))[
                r.isWebGL2 ? "vertexAttribDivisor" : "vertexAttribDivisorANGLE"
              ](b, w),
              (N[b] = w));
        }
        function v() {
          const b = u.newAttributes,
            w = u.enabledAttributes;
          for (let M = 0, C = w.length; M < C; M++)
            w[M] !== b[M] && (n.disableVertexAttribArray(M), (w[M] = 0));
        }
        function m(b, w, M, C, N, G) {
          r.isWebGL2 !== !0 || (M !== 5124 && M !== 5125)
            ? n.vertexAttribPointer(b, w, M, C, N, G)
            : n.vertexAttribIPointer(b, w, M, N, G);
        }
        function x() {
          _(), (c = !0), u !== l && ((u = l), h(u.object));
        }
        function _() {
          (l.geometry = null), (l.program = null), (l.wireframe = !1);
        }
        return {
          setup: function (b, w, M, C, N) {
            let G = !1;
            if (s) {
              const U = (function (I, F, T) {
                const O = T.wireframe === !0;
                let k = o[I.id];
                k === void 0 && ((k = {}), (o[I.id] = k));
                let P = k[F.id];
                P === void 0 && ((P = {}), (k[F.id] = P));
                let E = P[O];
                return (
                  E === void 0 &&
                    ((E = f(
                      r.isWebGL2
                        ? n.createVertexArray()
                        : a.createVertexArrayOES()
                    )),
                    (P[O] = E)),
                  E
                );
              })(C, M, w);
              u !== U && ((u = U), h(u.object)),
                (G = (function (I, F, T, O) {
                  const k = u.attributes,
                    P = F.attributes;
                  let E = 0;
                  const z = T.getAttributes();
                  for (const A in z)
                    if (z[A].location >= 0) {
                      const D = k[A];
                      let V = P[A];
                      if (
                        (V === void 0 &&
                          (A === "instanceMatrix" &&
                            I.instanceMatrix &&
                            (V = I.instanceMatrix),
                          A === "instanceColor" &&
                            I.instanceColor &&
                            (V = I.instanceColor)),
                        D === void 0 ||
                          D.attribute !== V ||
                          (V && D.data !== V.data))
                      )
                        return !0;
                      E++;
                    }
                  return u.attributesNum !== E || u.index !== O;
                })(b, C, M, N)),
                G &&
                  (function (I, F, T, O) {
                    const k = {},
                      P = F.attributes;
                    let E = 0;
                    const z = T.getAttributes();
                    for (const A in z)
                      if (z[A].location >= 0) {
                        let D = P[A];
                        D === void 0 &&
                          (A === "instanceMatrix" &&
                            I.instanceMatrix &&
                            (D = I.instanceMatrix),
                          A === "instanceColor" &&
                            I.instanceColor &&
                            (D = I.instanceColor));
                        const V = {};
                        (V.attribute = D),
                          D && D.data && (V.data = D.data),
                          (k[A] = V),
                          E++;
                      }
                    (u.attributes = k), (u.attributesNum = E), (u.index = O);
                  })(b, C, M, N);
            } else {
              const U = w.wireframe === !0;
              (u.geometry === C.id &&
                u.program === M.id &&
                u.wireframe === U) ||
                ((u.geometry = C.id),
                (u.program = M.id),
                (u.wireframe = U),
                (G = !0));
            }
            N !== null && t.update(N, 34963),
              (G || c) &&
                ((c = !1),
                (function (U, I, F, T) {
                  if (
                    r.isWebGL2 === !1 &&
                    (U.isInstancedMesh || T.isInstancedBufferGeometry) &&
                    e.get("ANGLE_instanced_arrays") === null
                  )
                    return;
                  g();
                  const O = T.attributes,
                    k = F.getAttributes(),
                    P = I.defaultAttributeValues;
                  for (const E in k) {
                    const z = k[E];
                    if (z.location >= 0) {
                      let A = O[E];
                      if (
                        (A === void 0 &&
                          (E === "instanceMatrix" &&
                            U.instanceMatrix &&
                            (A = U.instanceMatrix),
                          E === "instanceColor" &&
                            U.instanceColor &&
                            (A = U.instanceColor)),
                        A !== void 0)
                      ) {
                        const D = A.normalized,
                          V = A.itemSize,
                          K = t.get(A);
                        if (K === void 0) continue;
                        const B = K.buffer,
                          Y = K.type,
                          R = K.bytesPerElement;
                        if (A.isInterleavedBufferAttribute) {
                          const L = A.data,
                            Z = L.stride,
                            re = A.offset;
                          if (L.isInstancedInterleavedBuffer) {
                            for (let q = 0; q < z.locationSize; q++)
                              y(z.location + q, L.meshPerAttribute);
                            U.isInstancedMesh !== !0 &&
                              T._maxInstanceCount === void 0 &&
                              (T._maxInstanceCount =
                                L.meshPerAttribute * L.count);
                          } else
                            for (let q = 0; q < z.locationSize; q++)
                              p(z.location + q);
                          n.bindBuffer(34962, B);
                          for (let q = 0; q < z.locationSize; q++)
                            m(
                              z.location + q,
                              V / z.locationSize,
                              Y,
                              D,
                              Z * R,
                              (re + (V / z.locationSize) * q) * R
                            );
                        } else {
                          if (A.isInstancedBufferAttribute) {
                            for (let L = 0; L < z.locationSize; L++)
                              y(z.location + L, A.meshPerAttribute);
                            U.isInstancedMesh !== !0 &&
                              T._maxInstanceCount === void 0 &&
                              (T._maxInstanceCount =
                                A.meshPerAttribute * A.count);
                          } else
                            for (let L = 0; L < z.locationSize; L++)
                              p(z.location + L);
                          n.bindBuffer(34962, B);
                          for (let L = 0; L < z.locationSize; L++)
                            m(
                              z.location + L,
                              V / z.locationSize,
                              Y,
                              D,
                              V * R,
                              (V / z.locationSize) * L * R
                            );
                        }
                      } else if (P !== void 0) {
                        const D = P[E];
                        if (D !== void 0)
                          switch (D.length) {
                            case 2:
                              n.vertexAttrib2fv(z.location, D);
                              break;
                            case 3:
                              n.vertexAttrib3fv(z.location, D);
                              break;
                            case 4:
                              n.vertexAttrib4fv(z.location, D);
                              break;
                            default:
                              n.vertexAttrib1fv(z.location, D);
                          }
                      }
                    }
                  }
                  v();
                })(b, w, M, C),
                N !== null && n.bindBuffer(34963, t.get(N).buffer));
          },
          reset: x,
          resetDefaultState: _,
          dispose: function () {
            x();
            for (const b in o) {
              const w = o[b];
              for (const M in w) {
                const C = w[M];
                for (const N in C) d(C[N].object), delete C[N];
                delete w[M];
              }
              delete o[b];
            }
          },
          releaseStatesOfGeometry: function (b) {
            if (o[b.id] === void 0) return;
            const w = o[b.id];
            for (const M in w) {
              const C = w[M];
              for (const N in C) d(C[N].object), delete C[N];
              delete w[M];
            }
            delete o[b.id];
          },
          releaseStatesOfProgram: function (b) {
            for (const w in o) {
              const M = o[w];
              if (M[b.id] === void 0) continue;
              const C = M[b.id];
              for (const N in C) d(C[N].object), delete C[N];
              delete M[b.id];
            }
          },
          initAttributes: g,
          enableAttribute: p,
          disableUnusedAttributes: v,
        };
      }
      function mS(n, e, t, r) {
        const i = r.isWebGL2;
        let a;
        (this.setMode = function (s) {
          a = s;
        }),
          (this.render = function (s, o) {
            n.drawArrays(a, s, o), t.update(o, a, 1);
          }),
          (this.renderInstances = function (s, o, l) {
            if (l === 0) return;
            let u, c;
            if (i) (u = n), (c = "drawArraysInstanced");
            else if (
              ((u = e.get("ANGLE_instanced_arrays")),
              (c = "drawArraysInstancedANGLE"),
              u === null)
            )
              return void console.error(
                "THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."
              );
            u[c](a, s, o, l), t.update(o, a, l);
          });
      }
      function gS(n, e, t) {
        let r;
        function i(_) {
          if (_ === "highp") {
            if (
              n.getShaderPrecisionFormat(35633, 36338).precision > 0 &&
              n.getShaderPrecisionFormat(35632, 36338).precision > 0
            )
              return "highp";
            _ = "mediump";
          }
          return _ === "mediump" &&
            n.getShaderPrecisionFormat(35633, 36337).precision > 0 &&
            n.getShaderPrecisionFormat(35632, 36337).precision > 0
            ? "mediump"
            : "lowp";
        }
        const a =
          (typeof WebGL2RenderingContext < "u" &&
            n instanceof WebGL2RenderingContext) ||
          (typeof WebGL2ComputeRenderingContext < "u" &&
            n instanceof WebGL2ComputeRenderingContext);
        let s = t.precision !== void 0 ? t.precision : "highp";
        const o = i(s);
        o !== s &&
          (console.warn(
            "THREE.WebGLRenderer:",
            s,
            "not supported, using",
            o,
            "instead."
          ),
          (s = o));
        const l = a || e.has("WEBGL_draw_buffers"),
          u = t.logarithmicDepthBuffer === !0,
          c = n.getParameter(34930),
          h = n.getParameter(35660),
          d = n.getParameter(3379),
          f = n.getParameter(34076),
          g = n.getParameter(34921),
          p = n.getParameter(36347),
          y = n.getParameter(36348),
          v = n.getParameter(36349),
          m = h > 0,
          x = a || e.has("OES_texture_float");
        return {
          isWebGL2: a,
          drawBuffers: l,
          getMaxAnisotropy: function () {
            if (r !== void 0) return r;
            if (e.has("EXT_texture_filter_anisotropic") === !0) {
              const _ = e.get("EXT_texture_filter_anisotropic");
              r = n.getParameter(_.MAX_TEXTURE_MAX_ANISOTROPY_EXT);
            } else r = 0;
            return r;
          },
          getMaxPrecision: i,
          precision: s,
          logarithmicDepthBuffer: u,
          maxTextures: c,
          maxVertexTextures: h,
          maxTextureSize: d,
          maxCubemapSize: f,
          maxAttributes: g,
          maxVertexUniforms: p,
          maxVaryings: y,
          maxFragmentUniforms: v,
          vertexTextures: m,
          floatFragmentTextures: x,
          floatVertexTextures: m && x,
          maxSamples: a ? n.getParameter(36183) : 0,
        };
      }
      function vS(n) {
        const e = this;
        let t = null,
          r = 0,
          i = !1,
          a = !1;
        const s = new Sa(),
          o = new Pn(),
          l = { value: null, needsUpdate: !1 };
        function u() {
          l.value !== t && ((l.value = t), (l.needsUpdate = r > 0)),
            (e.numPlanes = r),
            (e.numIntersection = 0);
        }
        function c(h, d, f, g) {
          const p = h !== null ? h.length : 0;
          let y = null;
          if (p !== 0) {
            if (((y = l.value), g !== !0 || y === null)) {
              const v = f + 4 * p,
                m = d.matrixWorldInverse;
              o.getNormalMatrix(m),
                (y === null || y.length < v) && (y = new Float32Array(v));
              for (let x = 0, _ = f; x !== p; ++x, _ += 4)
                s.copy(h[x]).applyMatrix4(m, o),
                  s.normal.toArray(y, _),
                  (y[_ + 3] = s.constant);
            }
            (l.value = y), (l.needsUpdate = !0);
          }
          return (e.numPlanes = p), (e.numIntersection = 0), y;
        }
        (this.uniform = l),
          (this.numPlanes = 0),
          (this.numIntersection = 0),
          (this.init = function (h, d, f) {
            const g = h.length !== 0 || d || r !== 0 || i;
            return (i = d), (t = c(h, f, 0)), (r = h.length), g;
          }),
          (this.beginShadows = function () {
            (a = !0), c(null);
          }),
          (this.endShadows = function () {
            (a = !1), u();
          }),
          (this.setState = function (h, d, f) {
            const g = h.clippingPlanes,
              p = h.clipIntersection,
              y = h.clipShadows,
              v = n.get(h);
            if (!i || g === null || g.length === 0 || (a && !y))
              a ? c(null) : u();
            else {
              const m = a ? 0 : r,
                x = 4 * m;
              let _ = v.clippingState || null;
              (l.value = _), (_ = c(g, d, x, f));
              for (let b = 0; b !== x; ++b) _[b] = t[b];
              (v.clippingState = _),
                (this.numIntersection = p ? this.numPlanes : 0),
                (this.numPlanes += m);
            }
          });
      }
      function yS(n) {
        let e = new WeakMap();
        function t(i, a) {
          return (
            a === 303 ? (i.mapping = 301) : a === 304 && (i.mapping = 302), i
          );
        }
        function r(i) {
          const a = i.target;
          a.removeEventListener("dispose", r);
          const s = e.get(a);
          s !== void 0 && (e.delete(a), s.dispose());
        }
        return {
          get: function (i) {
            if (i && i.isTexture && i.isRenderTargetTexture === !1) {
              const a = i.mapping;
              if (a === 303 || a === 304) {
                if (e.has(i)) return t(e.get(i).texture, i.mapping);
                {
                  const s = i.image;
                  if (s && s.height > 0) {
                    const o = new uS(s.height / 2);
                    return (
                      o.fromEquirectangularTexture(n, i),
                      e.set(i, o),
                      i.addEventListener("dispose", r),
                      t(o.texture, i.mapping)
                    );
                  }
                  return null;
                }
              }
            }
            return i;
          },
          dispose: function () {
            e = new WeakMap();
          },
        };
      }
      Or.physical = {
        uniforms: sn([
          Or.standard.uniforms,
          {
            clearcoat: { value: 0 },
            clearcoatMap: { value: null },
            clearcoatRoughness: { value: 0 },
            clearcoatRoughnessMap: { value: null },
            clearcoatNormalScale: { value: new ge(1, 1) },
            clearcoatNormalMap: { value: null },
            iridescence: { value: 0 },
            iridescenceMap: { value: null },
            iridescenceIOR: { value: 1.3 },
            iridescenceThicknessMinimum: { value: 100 },
            iridescenceThicknessMaximum: { value: 400 },
            iridescenceThicknessMap: { value: null },
            sheen: { value: 0 },
            sheenColor: { value: new Ce(0) },
            sheenColorMap: { value: null },
            sheenRoughness: { value: 1 },
            sheenRoughnessMap: { value: null },
            transmission: { value: 0 },
            transmissionMap: { value: null },
            transmissionSamplerSize: { value: new ge() },
            transmissionSamplerMap: { value: null },
            thickness: { value: 0 },
            thicknessMap: { value: null },
            attenuationDistance: { value: 0 },
            attenuationColor: { value: new Ce(0) },
            specularIntensity: { value: 1 },
            specularIntensityMap: { value: null },
            specularColor: { value: new Ce(1, 1, 1) },
            specularColorMap: { value: null },
          },
        ]),
        vertexShader: Ie.meshphysical_vert,
        fragmentShader: Ie.meshphysical_frag,
      };
      class Ym extends qm {
        constructor(e = -1, t = 1, r = 1, i = -1, a = 0.1, s = 2e3) {
          super(),
            (this.isOrthographicCamera = !0),
            (this.type = "OrthographicCamera"),
            (this.zoom = 1),
            (this.view = null),
            (this.left = e),
            (this.right = t),
            (this.top = r),
            (this.bottom = i),
            (this.near = a),
            (this.far = s),
            this.updateProjectionMatrix();
        }
        copy(e, t) {
          return (
            super.copy(e, t),
            (this.left = e.left),
            (this.right = e.right),
            (this.top = e.top),
            (this.bottom = e.bottom),
            (this.near = e.near),
            (this.far = e.far),
            (this.zoom = e.zoom),
            (this.view = e.view === null ? null : Object.assign({}, e.view)),
            this
          );
        }
        setViewOffset(e, t, r, i, a, s) {
          this.view === null &&
            (this.view = {
              enabled: !0,
              fullWidth: 1,
              fullHeight: 1,
              offsetX: 0,
              offsetY: 0,
              width: 1,
              height: 1,
            }),
            (this.view.enabled = !0),
            (this.view.fullWidth = e),
            (this.view.fullHeight = t),
            (this.view.offsetX = r),
            (this.view.offsetY = i),
            (this.view.width = a),
            (this.view.height = s),
            this.updateProjectionMatrix();
        }
        clearViewOffset() {
          this.view !== null && (this.view.enabled = !1),
            this.updateProjectionMatrix();
        }
        updateProjectionMatrix() {
          const e = (this.right - this.left) / (2 * this.zoom),
            t = (this.top - this.bottom) / (2 * this.zoom),
            r = (this.right + this.left) / 2,
            i = (this.top + this.bottom) / 2;
          let a = r - e,
            s = r + e,
            o = i + t,
            l = i - t;
          if (this.view !== null && this.view.enabled) {
            const u =
                (this.right - this.left) / this.view.fullWidth / this.zoom,
              c = (this.top - this.bottom) / this.view.fullHeight / this.zoom;
            (a += u * this.view.offsetX),
              (s = a + u * this.view.width),
              (o -= c * this.view.offsetY),
              (l = o - c * this.view.height);
          }
          this.projectionMatrix.makeOrthographic(
            a,
            s,
            o,
            l,
            this.near,
            this.far
          ),
            this.projectionMatrixInverse.copy(this.projectionMatrix).invert();
        }
        toJSON(e) {
          const t = super.toJSON(e);
          return (
            (t.object.zoom = this.zoom),
            (t.object.left = this.left),
            (t.object.right = this.right),
            (t.object.top = this.top),
            (t.object.bottom = this.bottom),
            (t.object.near = this.near),
            (t.object.far = this.far),
            this.view !== null &&
              (t.object.view = Object.assign({}, this.view)),
            t
          );
        }
      }
      const xv = [0.125, 0.215, 0.35, 0.446, 0.526, 0.582],
        rf = new Ym(),
        _v = new Ce();
      let af = null;
      const Ma = (1 + Math.sqrt(5)) / 2,
        cs = 1 / Ma,
        bv = [
          new j(1, 1, 1),
          new j(-1, 1, 1),
          new j(1, 1, -1),
          new j(-1, 1, -1),
          new j(0, Ma, cs),
          new j(0, Ma, -cs),
          new j(cs, 0, Ma),
          new j(-cs, 0, Ma),
          new j(Ma, cs, 0),
          new j(-Ma, cs, 0),
        ];
      class wv {
        constructor(e) {
          (this._renderer = e),
            (this._pingPongRenderTarget = null),
            (this._lodMax = 0),
            (this._cubeSize = 0),
            (this._lodPlanes = []),
            (this._sizeLods = []),
            (this._sigmas = []),
            (this._blurMaterial = null),
            (this._cubemapMaterial = null),
            (this._equirectMaterial = null),
            this._compileMaterial(this._blurMaterial);
        }
        fromScene(e, t = 0, r = 0.1, i = 100) {
          (af = this._renderer.getRenderTarget()), this._setSize(256);
          const a = this._allocateTargets();
          return (
            (a.depthBuffer = !0),
            this._sceneToCubeUV(e, r, i, a),
            t > 0 && this._blur(a, 0, 0, t),
            this._applyPMREM(a),
            this._cleanup(a),
            a
          );
        }
        fromEquirectangular(e, t = null) {
          return this._fromTexture(e, t);
        }
        fromCubemap(e, t = null) {
          return this._fromTexture(e, t);
        }
        compileCubemapShader() {
          this._cubemapMaterial === null &&
            ((this._cubemapMaterial = Tv()),
            this._compileMaterial(this._cubemapMaterial));
        }
        compileEquirectangularShader() {
          this._equirectMaterial === null &&
            ((this._equirectMaterial = Mv()),
            this._compileMaterial(this._equirectMaterial));
        }
        dispose() {
          this._dispose(),
            this._cubemapMaterial !== null && this._cubemapMaterial.dispose(),
            this._equirectMaterial !== null && this._equirectMaterial.dispose();
        }
        _setSize(e) {
          (this._lodMax = Math.floor(Math.log2(e))),
            (this._cubeSize = Math.pow(2, this._lodMax));
        }
        _dispose() {
          this._blurMaterial !== null && this._blurMaterial.dispose(),
            this._pingPongRenderTarget !== null &&
              this._pingPongRenderTarget.dispose();
          for (let e = 0; e < this._lodPlanes.length; e++)
            this._lodPlanes[e].dispose();
        }
        _cleanup(e) {
          this._renderer.setRenderTarget(af),
            (e.scissorTest = !1),
            Vu(e, 0, 0, e.width, e.height);
        }
        _fromTexture(e, t) {
          e.mapping === 301 || e.mapping === 302
            ? this._setSize(
                e.image.length === 0
                  ? 16
                  : e.image[0].width || e.image[0].image.width
              )
            : this._setSize(e.image.width / 4),
            (af = this._renderer.getRenderTarget());
          const r = t || this._allocateTargets();
          return (
            this._textureToCubeUV(e, r),
            this._applyPMREM(r),
            this._cleanup(r),
            r
          );
        }
        _allocateTargets() {
          const e = 3 * Math.max(this._cubeSize, 112),
            t = 4 * this._cubeSize,
            r = {
              magFilter: 1006,
              minFilter: 1006,
              generateMipmaps: !1,
              type: 1016,
              format: 1023,
              encoding: 3e3,
              depthBuffer: !1,
            },
            i = Sv(e, t, r);
          if (
            this._pingPongRenderTarget === null ||
            this._pingPongRenderTarget.width !== e
          ) {
            this._pingPongRenderTarget !== null && this._dispose(),
              (this._pingPongRenderTarget = Sv(e, t, r));
            const { _lodMax: a } = this;
            ({
              sizeLods: this._sizeLods,
              lodPlanes: this._lodPlanes,
              sigmas: this._sigmas,
            } = (function (s) {
              const o = [],
                l = [],
                u = [];
              let c = s;
              const h = s - 4 + 1 + xv.length;
              for (let d = 0; d < h; d++) {
                const f = Math.pow(2, c);
                l.push(f);
                let g = 1 / f;
                d > s - 4 ? (g = xv[d - s + 4 - 1]) : d === 0 && (g = 0),
                  u.push(g);
                const p = 1 / (f - 2),
                  y = -p,
                  v = 1 + p,
                  m = [y, y, v, y, v, v, y, y, v, v, y, v],
                  x = 6,
                  _ = 6,
                  b = 3,
                  w = 2,
                  M = 1,
                  C = new Float32Array(b * _ * x),
                  N = new Float32Array(w * _ * x),
                  G = new Float32Array(M * _ * x);
                for (let I = 0; I < x; I++) {
                  const F = ((I % 3) * 2) / 3 - 1,
                    T = I > 2 ? 0 : -1,
                    O = [
                      F,
                      T,
                      0,
                      F + 2 / 3,
                      T,
                      0,
                      F + 2 / 3,
                      T + 1,
                      0,
                      F,
                      T,
                      0,
                      F + 2 / 3,
                      T + 1,
                      0,
                      F,
                      T + 1,
                      0,
                    ];
                  C.set(O, b * _ * I), N.set(m, w * _ * I);
                  const k = [I, I, I, I, I, I];
                  G.set(k, M * _ * I);
                }
                const U = new Lt();
                U.setAttribute("position", new un(C, b)),
                  U.setAttribute("uv", new un(N, w)),
                  U.setAttribute("faceIndex", new un(G, M)),
                  o.push(U),
                  c > 4 && c--;
              }
              return { lodPlanes: o, sizeLods: l, sigmas: u };
            })(a)),
              (this._blurMaterial = (function (s, o, l) {
                const u = new Float32Array(20),
                  c = new j(0, 1, 0);
                return new hn({
                  name: "SphericalGaussianBlur",
                  defines: {
                    n: 20,
                    CUBEUV_TEXEL_WIDTH: 1 / o,
                    CUBEUV_TEXEL_HEIGHT: 1 / l,
                    CUBEUV_MAX_MIP: `${s}.0`,
                  },
                  uniforms: {
                    envMap: { value: null },
                    samples: { value: 1 },
                    weights: { value: u },
                    latitudinal: { value: !1 },
                    dTheta: { value: 0 },
                    mipInt: { value: 0 },
                    poleAxis: { value: c },
                  },
                  vertexShader: Zm(),
                  fragmentShader: `

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,
                  blending: 0,
                  depthTest: !1,
                  depthWrite: !1,
                });
              })(a, e, t));
          }
          return i;
        }
        _compileMaterial(e) {
          const t = new xt(this._lodPlanes[0], e);
          this._renderer.compile(t, rf);
        }
        _sceneToCubeUV(e, t, r, i) {
          const a = new ln(90, 1, t, r),
            s = [1, -1, 1, 1, 1, 1],
            o = [1, 1, 1, -1, -1, -1],
            l = this._renderer,
            u = l.autoClear,
            c = l.toneMapping;
          l.getClearColor(_v), (l.toneMapping = 0), (l.autoClear = !1);
          const h = new Fa({
              name: "PMREM.Background",
              side: 1,
              depthWrite: !1,
              depthTest: !1,
            }),
            d = new xt(new Yl(), h);
          let f = !1;
          const g = e.background;
          g
            ? g.isColor && (h.color.copy(g), (e.background = null), (f = !0))
            : (h.color.copy(_v), (f = !0));
          for (let p = 0; p < 6; p++) {
            const y = p % 3;
            y === 0
              ? (a.up.set(0, s[p], 0), a.lookAt(o[p], 0, 0))
              : y === 1
              ? (a.up.set(0, 0, s[p]), a.lookAt(0, o[p], 0))
              : (a.up.set(0, s[p], 0), a.lookAt(0, 0, o[p]));
            const v = this._cubeSize;
            Vu(i, y * v, p > 2 ? v : 0, v, v),
              l.setRenderTarget(i),
              f && l.render(d, a),
              l.render(e, a);
          }
          d.geometry.dispose(),
            d.material.dispose(),
            (l.toneMapping = c),
            (l.autoClear = u),
            (e.background = g);
        }
        _textureToCubeUV(e, t) {
          const r = this._renderer,
            i = e.mapping === 301 || e.mapping === 302;
          i
            ? (this._cubemapMaterial === null && (this._cubemapMaterial = Tv()),
              (this._cubemapMaterial.uniforms.flipEnvMap.value =
                e.isRenderTargetTexture === !1 ? -1 : 1))
            : this._equirectMaterial === null &&
              (this._equirectMaterial = Mv());
          const a = i ? this._cubemapMaterial : this._equirectMaterial,
            s = new xt(this._lodPlanes[0], a);
          a.uniforms.envMap.value = e;
          const o = this._cubeSize;
          Vu(t, 0, 0, 3 * o, 2 * o), r.setRenderTarget(t), r.render(s, rf);
        }
        _applyPMREM(e) {
          const t = this._renderer,
            r = t.autoClear;
          t.autoClear = !1;
          for (let i = 1; i < this._lodPlanes.length; i++) {
            const a = Math.sqrt(
                this._sigmas[i] * this._sigmas[i] -
                  this._sigmas[i - 1] * this._sigmas[i - 1]
              ),
              s = bv[(i - 1) % bv.length];
            this._blur(e, i - 1, i, a, s);
          }
          t.autoClear = r;
        }
        _blur(e, t, r, i, a) {
          const s = this._pingPongRenderTarget;
          this._halfBlur(e, s, t, r, i, "latitudinal", a),
            this._halfBlur(s, e, r, r, i, "longitudinal", a);
        }
        _halfBlur(e, t, r, i, a, s, o) {
          const l = this._renderer,
            u = this._blurMaterial;
          s !== "latitudinal" &&
            s !== "longitudinal" &&
            console.error(
              "blur direction must be either latitudinal or longitudinal!"
            );
          const c = new xt(this._lodPlanes[i], u),
            h = u.uniforms,
            d = this._sizeLods[r] - 1,
            f = isFinite(a) ? Math.PI / (2 * d) : (2 * Math.PI) / 39,
            g = a / f,
            p = isFinite(a) ? 1 + Math.floor(3 * g) : 20;
          p > 20 &&
            console.warn(
              `sigmaRadians, ${a}, is too large and will clip, as it requested ${p} samples when the maximum is set to 20`
            );
          const y = [];
          let v = 0;
          for (let _ = 0; _ < 20; ++_) {
            const b = _ / g,
              w = Math.exp((-b * b) / 2);
            y.push(w), _ === 0 ? (v += w) : _ < p && (v += 2 * w);
          }
          for (let _ = 0; _ < y.length; _++) y[_] = y[_] / v;
          (h.envMap.value = e.texture),
            (h.samples.value = p),
            (h.weights.value = y),
            (h.latitudinal.value = s === "latitudinal"),
            o && (h.poleAxis.value = o);
          const { _lodMax: m } = this;
          (h.dTheta.value = f), (h.mipInt.value = m - r);
          const x = this._sizeLods[i];
          Vu(
            t,
            3 * x * (i > m - 4 ? i - m + 4 : 0),
            4 * (this._cubeSize - x),
            3 * x,
            2 * x
          ),
            l.setRenderTarget(t),
            l.render(c, rf);
        }
      }
      function Sv(n, e, t) {
        const r = new Jt(n, e, t);
        return (
          (r.texture.mapping = 306),
          (r.texture.name = "PMREM.cubeUv"),
          (r.scissorTest = !0),
          r
        );
      }
      function Vu(n, e, t, r, i) {
        n.viewport.set(e, t, r, i), n.scissor.set(e, t, r, i);
      }
      function Mv() {
        return new hn({
          name: "EquirectangularToCubeUV",
          uniforms: { envMap: { value: null } },
          vertexShader: Zm(),
          fragmentShader: `

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,
          blending: 0,
          depthTest: !1,
          depthWrite: !1,
        });
      }
      function Tv() {
        return new hn({
          name: "CubemapToCubeUV",
          uniforms: { envMap: { value: null }, flipEnvMap: { value: -1 } },
          vertexShader: Zm(),
          fragmentShader: `

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,
          blending: 0,
          depthTest: !1,
          depthWrite: !1,
        });
      }
      function Zm() {
        return `

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`;
      }
      function xS(n) {
        let e = new WeakMap(),
          t = null;
        function r(i) {
          const a = i.target;
          a.removeEventListener("dispose", r);
          const s = e.get(a);
          s !== void 0 && (e.delete(a), s.dispose());
        }
        return {
          get: function (i) {
            if (i && i.isTexture) {
              const a = i.mapping,
                s = a === 303 || a === 304,
                o = a === 301 || a === 302;
              if (s || o) {
                if (i.isRenderTargetTexture && i.needsPMREMUpdate === !0) {
                  i.needsPMREMUpdate = !1;
                  let l = e.get(i);
                  return (
                    t === null && (t = new wv(n)),
                    (l = s ? t.fromEquirectangular(i, l) : t.fromCubemap(i, l)),
                    e.set(i, l),
                    l.texture
                  );
                }
                if (e.has(i)) return e.get(i).texture;
                {
                  const l = i.image;
                  if (
                    (s && l && l.height > 0) ||
                    (o &&
                      l &&
                      (function (u) {
                        let c = 0;
                        const h = 6;
                        for (let d = 0; d < h; d++) u[d] !== void 0 && c++;
                        return c === h;
                      })(l))
                  ) {
                    t === null && (t = new wv(n));
                    const u = s ? t.fromEquirectangular(i) : t.fromCubemap(i);
                    return (
                      e.set(i, u), i.addEventListener("dispose", r), u.texture
                    );
                  }
                  return null;
                }
              }
            }
            return i;
          },
          dispose: function () {
            (e = new WeakMap()), t !== null && (t.dispose(), (t = null));
          },
        };
      }
      function _S(n) {
        const e = {};
        function t(r) {
          if (e[r] !== void 0) return e[r];
          let i;
          switch (r) {
            case "WEBGL_depth_texture":
              i =
                n.getExtension("WEBGL_depth_texture") ||
                n.getExtension("MOZ_WEBGL_depth_texture") ||
                n.getExtension("WEBKIT_WEBGL_depth_texture");
              break;
            case "EXT_texture_filter_anisotropic":
              i =
                n.getExtension("EXT_texture_filter_anisotropic") ||
                n.getExtension("MOZ_EXT_texture_filter_anisotropic") ||
                n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
              break;
            case "WEBGL_compressed_texture_s3tc":
              i =
                n.getExtension("WEBGL_compressed_texture_s3tc") ||
                n.getExtension("MOZ_WEBGL_compressed_texture_s3tc") ||
                n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
              break;
            case "WEBGL_compressed_texture_pvrtc":
              i =
                n.getExtension("WEBGL_compressed_texture_pvrtc") ||
                n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
              break;
            default:
              i = n.getExtension(r);
          }
          return (e[r] = i), i;
        }
        return {
          has: function (r) {
            return t(r) !== null;
          },
          init: function (r) {
            r.isWebGL2
              ? t("EXT_color_buffer_float")
              : (t("WEBGL_depth_texture"),
                t("OES_texture_float"),
                t("OES_texture_half_float"),
                t("OES_texture_half_float_linear"),
                t("OES_standard_derivatives"),
                t("OES_element_index_uint"),
                t("OES_vertex_array_object"),
                t("ANGLE_instanced_arrays")),
              t("OES_texture_float_linear"),
              t("EXT_color_buffer_half_float"),
              t("WEBGL_multisampled_render_to_texture");
          },
          get: function (r) {
            const i = t(r);
            return (
              i === null &&
                console.warn(
                  "THREE.WebGLRenderer: " + r + " extension not supported."
                ),
              i
            );
          },
        };
      }
      function bS(n, e, t, r) {
        const i = {},
          a = new WeakMap();
        function s(l) {
          const u = l.target;
          u.index !== null && e.remove(u.index);
          for (const h in u.attributes) e.remove(u.attributes[h]);
          u.removeEventListener("dispose", s), delete i[u.id];
          const c = a.get(u);
          c && (e.remove(c), a.delete(u)),
            r.releaseStatesOfGeometry(u),
            u.isInstancedBufferGeometry === !0 && delete u._maxInstanceCount,
            t.memory.geometries--;
        }
        function o(l) {
          const u = [],
            c = l.index,
            h = l.attributes.position;
          let d = 0;
          if (c !== null) {
            const p = c.array;
            d = c.version;
            for (let y = 0, v = p.length; y < v; y += 3) {
              const m = p[y + 0],
                x = p[y + 1],
                _ = p[y + 2];
              u.push(m, x, x, _, _, m);
            }
          } else {
            const p = h.array;
            d = h.version;
            for (let y = 0, v = p.length / 3 - 1; y < v; y += 3) {
              const m = y + 0,
                x = y + 1,
                _ = y + 2;
              u.push(m, x, x, _, _, m);
            }
          }
          const f = new (d_(u) ? v_ : Xm)(u, 1);
          f.version = d;
          const g = a.get(l);
          g && e.remove(g), a.set(l, f);
        }
        return {
          get: function (l, u) {
            return (
              i[u.id] === !0 ||
                (u.addEventListener("dispose", s),
                (i[u.id] = !0),
                t.memory.geometries++),
              u
            );
          },
          update: function (l) {
            const u = l.attributes;
            for (const h in u) e.update(u[h], 34962);
            const c = l.morphAttributes;
            for (const h in c) {
              const d = c[h];
              for (let f = 0, g = d.length; f < g; f++) e.update(d[f], 34962);
            }
          },
          getWireframeAttribute: function (l) {
            const u = a.get(l);
            if (u) {
              const c = l.index;
              c !== null && u.version < c.version && o(l);
            } else o(l);
            return a.get(l);
          },
        };
      }
      function wS(n, e, t, r) {
        const i = r.isWebGL2;
        let a, s, o;
        (this.setMode = function (l) {
          a = l;
        }),
          (this.setIndex = function (l) {
            (s = l.type), (o = l.bytesPerElement);
          }),
          (this.render = function (l, u) {
            n.drawElements(a, u, s, l * o), t.update(u, a, 1);
          }),
          (this.renderInstances = function (l, u, c) {
            if (c === 0) return;
            let h, d;
            if (i) (h = n), (d = "drawElementsInstanced");
            else if (
              ((h = e.get("ANGLE_instanced_arrays")),
              (d = "drawElementsInstancedANGLE"),
              h === null)
            )
              return void console.error(
                "THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."
              );
            h[d](a, u, s, l * o, c), t.update(u, a, c);
          });
      }
      function SS(n) {
        const e = { frame: 0, calls: 0, triangles: 0, points: 0, lines: 0 };
        return {
          memory: { geometries: 0, textures: 0 },
          render: e,
          programs: null,
          autoReset: !0,
          reset: function () {
            e.frame++,
              (e.calls = 0),
              (e.triangles = 0),
              (e.points = 0),
              (e.lines = 0);
          },
          update: function (t, r, i) {
            switch ((e.calls++, r)) {
              case 4:
                e.triangles += i * (t / 3);
                break;
              case 1:
                e.lines += i * (t / 2);
                break;
              case 3:
                e.lines += i * (t - 1);
                break;
              case 2:
                e.lines += i * t;
                break;
              case 0:
                e.points += i * t;
                break;
              default:
                console.error("THREE.WebGLInfo: Unknown draw mode:", r);
            }
          },
        };
      }
      function MS(n, e) {
        return n[0] - e[0];
      }
      function TS(n, e) {
        return Math.abs(e[1]) - Math.abs(n[1]);
      }
      function ES(n, e, t) {
        const r = {},
          i = new Float32Array(8),
          a = new WeakMap(),
          s = new Be(),
          o = [];
        for (let l = 0; l < 8; l++) o[l] = [l, 0];
        return {
          update: function (l, u, c, h) {
            const d = l.morphTargetInfluences;
            if (e.isWebGL2 === !0) {
              const f =
                  u.morphAttributes.position ||
                  u.morphAttributes.normal ||
                  u.morphAttributes.color,
                g = f !== void 0 ? f.length : 0;
              let p = a.get(u);
              if (p === void 0 || p.count !== g) {
                p !== void 0 && p.texture.dispose();
                const m = u.morphAttributes.position !== void 0,
                  x = u.morphAttributes.normal !== void 0,
                  _ = u.morphAttributes.color !== void 0,
                  b = u.morphAttributes.position || [],
                  w = u.morphAttributes.normal || [],
                  M = u.morphAttributes.color || [];
                let C = 0;
                m === !0 && (C = 1), x === !0 && (C = 2), _ === !0 && (C = 3);
                let N = u.attributes.position.count * C,
                  G = 1;
                N > e.maxTextureSize &&
                  ((G = Math.ceil(N / e.maxTextureSize)),
                  (N = e.maxTextureSize));
                const U = new Float32Array(N * G * 4 * g),
                  I = new g_(U, N, G, g);
                (I.type = 1015), (I.needsUpdate = !0);
                const F = 4 * C;
                for (let T = 0; T < g; T++) {
                  const O = b[T],
                    k = w[T],
                    P = M[T],
                    E = N * G * 4 * T;
                  for (let z = 0; z < O.count; z++) {
                    const A = z * F;
                    m === !0 &&
                      (s.fromBufferAttribute(O, z),
                      (U[E + A + 0] = s.x),
                      (U[E + A + 1] = s.y),
                      (U[E + A + 2] = s.z),
                      (U[E + A + 3] = 0)),
                      x === !0 &&
                        (s.fromBufferAttribute(k, z),
                        (U[E + A + 4] = s.x),
                        (U[E + A + 5] = s.y),
                        (U[E + A + 6] = s.z),
                        (U[E + A + 7] = 0)),
                      _ === !0 &&
                        (s.fromBufferAttribute(P, z),
                        (U[E + A + 8] = s.x),
                        (U[E + A + 9] = s.y),
                        (U[E + A + 10] = s.z),
                        (U[E + A + 11] = P.itemSize === 4 ? s.w : 1));
                  }
                }
                (p = { count: g, texture: I, size: new ge(N, G) }),
                  a.set(u, p),
                  u.addEventListener("dispose", function T() {
                    I.dispose(),
                      a.delete(u),
                      u.removeEventListener("dispose", T);
                  });
              }
              let y = 0;
              for (let m = 0; m < d.length; m++) y += d[m];
              const v = u.morphTargetsRelative ? 1 : 1 - y;
              h.getUniforms().setValue(n, "morphTargetBaseInfluence", v),
                h.getUniforms().setValue(n, "morphTargetInfluences", d),
                h
                  .getUniforms()
                  .setValue(n, "morphTargetsTexture", p.texture, t),
                h.getUniforms().setValue(n, "morphTargetsTextureSize", p.size);
            } else {
              const f = d === void 0 ? 0 : d.length;
              let g = r[u.id];
              if (g === void 0 || g.length !== f) {
                g = [];
                for (let x = 0; x < f; x++) g[x] = [x, 0];
                r[u.id] = g;
              }
              for (let x = 0; x < f; x++) {
                const _ = g[x];
                (_[0] = x), (_[1] = d[x]);
              }
              g.sort(TS);
              for (let x = 0; x < 8; x++)
                x < f && g[x][1]
                  ? ((o[x][0] = g[x][0]), (o[x][1] = g[x][1]))
                  : ((o[x][0] = Number.MAX_SAFE_INTEGER), (o[x][1] = 0));
              o.sort(MS);
              const p = u.morphAttributes.position,
                y = u.morphAttributes.normal;
              let v = 0;
              for (let x = 0; x < 8; x++) {
                const _ = o[x],
                  b = _[0],
                  w = _[1];
                b !== Number.MAX_SAFE_INTEGER && w
                  ? (p &&
                      u.getAttribute("morphTarget" + x) !== p[b] &&
                      u.setAttribute("morphTarget" + x, p[b]),
                    y &&
                      u.getAttribute("morphNormal" + x) !== y[b] &&
                      u.setAttribute("morphNormal" + x, y[b]),
                    (i[x] = w),
                    (v += w))
                  : (p &&
                      u.hasAttribute("morphTarget" + x) === !0 &&
                      u.deleteAttribute("morphTarget" + x),
                    y &&
                      u.hasAttribute("morphNormal" + x) === !0 &&
                      u.deleteAttribute("morphNormal" + x),
                    (i[x] = 0));
              }
              const m = u.morphTargetsRelative ? 1 : 1 - v;
              h.getUniforms().setValue(n, "morphTargetBaseInfluence", m),
                h.getUniforms().setValue(n, "morphTargetInfluences", i);
            }
          },
        };
      }
      function CS(n, e, t, r) {
        let i = new WeakMap();
        function a(s) {
          const o = s.target;
          o.removeEventListener("dispose", a),
            t.remove(o.instanceMatrix),
            o.instanceColor !== null && t.remove(o.instanceColor);
        }
        return {
          update: function (s) {
            const o = r.render.frame,
              l = s.geometry,
              u = e.get(s, l);
            return (
              i.get(u) !== o && (e.update(u), i.set(u, o)),
              s.isInstancedMesh &&
                (s.hasEventListener("dispose", a) === !1 &&
                  s.addEventListener("dispose", a),
                t.update(s.instanceMatrix, 34962),
                s.instanceColor !== null && t.update(s.instanceColor, 34962)),
              u
            );
          },
          dispose: function () {
            i = new WeakMap();
          },
        };
      }
      const b_ = new jt(),
        w_ = new g_(),
        S_ = new J2(),
        M_ = new x_(),
        Ev = [],
        Cv = [],
        Av = new Float32Array(16),
        Rv = new Float32Array(9),
        Pv = new Float32Array(4);
      function co(n, e, t) {
        const r = n[0];
        if (r <= 0 || r > 0) return n;
        const i = e * t;
        let a = Ev[i];
        if (
          (a === void 0 && ((a = new Float32Array(i)), (Ev[i] = a)), e !== 0)
        ) {
          r.toArray(a, 0);
          for (let s = 1, o = 0; s !== e; ++s) (o += t), n[s].toArray(a, o);
        }
        return a;
      }
      function bn(n, e) {
        if (n.length !== e.length) return !1;
        for (let t = 0, r = n.length; t < r; t++) if (n[t] !== e[t]) return !1;
        return !0;
      }
      function wn(n, e) {
        for (let t = 0, r = e.length; t < r; t++) n[t] = e[t];
      }
      function Uh(n, e) {
        let t = Cv[e];
        t === void 0 && ((t = new Int32Array(e)), (Cv[e] = t));
        for (let r = 0; r !== e; ++r) t[r] = n.allocateTextureUnit();
        return t;
      }
      function AS(n, e) {
        const t = this.cache;
        t[0] !== e && (n.uniform1f(this.addr, e), (t[0] = e));
      }
      function RS(n, e) {
        const t = this.cache;
        if (e.x !== void 0)
          (t[0] === e.x && t[1] === e.y) ||
            (n.uniform2f(this.addr, e.x, e.y), (t[0] = e.x), (t[1] = e.y));
        else {
          if (bn(t, e)) return;
          n.uniform2fv(this.addr, e), wn(t, e);
        }
      }
      function PS(n, e) {
        const t = this.cache;
        if (e.x !== void 0)
          (t[0] === e.x && t[1] === e.y && t[2] === e.z) ||
            (n.uniform3f(this.addr, e.x, e.y, e.z),
            (t[0] = e.x),
            (t[1] = e.y),
            (t[2] = e.z));
        else if (e.r !== void 0)
          (t[0] === e.r && t[1] === e.g && t[2] === e.b) ||
            (n.uniform3f(this.addr, e.r, e.g, e.b),
            (t[0] = e.r),
            (t[1] = e.g),
            (t[2] = e.b));
        else {
          if (bn(t, e)) return;
          n.uniform3fv(this.addr, e), wn(t, e);
        }
      }
      function LS(n, e) {
        const t = this.cache;
        if (e.x !== void 0)
          (t[0] === e.x && t[1] === e.y && t[2] === e.z && t[3] === e.w) ||
            (n.uniform4f(this.addr, e.x, e.y, e.z, e.w),
            (t[0] = e.x),
            (t[1] = e.y),
            (t[2] = e.z),
            (t[3] = e.w));
        else {
          if (bn(t, e)) return;
          n.uniform4fv(this.addr, e), wn(t, e);
        }
      }
      function DS(n, e) {
        const t = this.cache,
          r = e.elements;
        if (r === void 0) {
          if (bn(t, e)) return;
          n.uniformMatrix2fv(this.addr, !1, e), wn(t, e);
        } else {
          if (bn(t, r)) return;
          Pv.set(r), n.uniformMatrix2fv(this.addr, !1, Pv), wn(t, r);
        }
      }
      function kS(n, e) {
        const t = this.cache,
          r = e.elements;
        if (r === void 0) {
          if (bn(t, e)) return;
          n.uniformMatrix3fv(this.addr, !1, e), wn(t, e);
        } else {
          if (bn(t, r)) return;
          Rv.set(r), n.uniformMatrix3fv(this.addr, !1, Rv), wn(t, r);
        }
      }
      function IS(n, e) {
        const t = this.cache,
          r = e.elements;
        if (r === void 0) {
          if (bn(t, e)) return;
          n.uniformMatrix4fv(this.addr, !1, e), wn(t, e);
        } else {
          if (bn(t, r)) return;
          Av.set(r), n.uniformMatrix4fv(this.addr, !1, Av), wn(t, r);
        }
      }
      function US(n, e) {
        const t = this.cache;
        t[0] !== e && (n.uniform1i(this.addr, e), (t[0] = e));
      }
      function OS(n, e) {
        const t = this.cache;
        bn(t, e) || (n.uniform2iv(this.addr, e), wn(t, e));
      }
      function zS(n, e) {
        const t = this.cache;
        bn(t, e) || (n.uniform3iv(this.addr, e), wn(t, e));
      }
      function NS(n, e) {
        const t = this.cache;
        bn(t, e) || (n.uniform4iv(this.addr, e), wn(t, e));
      }
      function FS(n, e) {
        const t = this.cache;
        t[0] !== e && (n.uniform1ui(this.addr, e), (t[0] = e));
      }
      function BS(n, e) {
        const t = this.cache;
        bn(t, e) || (n.uniform2uiv(this.addr, e), wn(t, e));
      }
      function GS(n, e) {
        const t = this.cache;
        bn(t, e) || (n.uniform3uiv(this.addr, e), wn(t, e));
      }
      function HS(n, e) {
        const t = this.cache;
        bn(t, e) || (n.uniform4uiv(this.addr, e), wn(t, e));
      }
      function VS(n, e, t) {
        const r = this.cache,
          i = t.allocateTextureUnit();
        r[0] !== i && (n.uniform1i(this.addr, i), (r[0] = i)),
          t.setTexture2D(e || b_, i);
      }
      function WS(n, e, t) {
        const r = this.cache,
          i = t.allocateTextureUnit();
        r[0] !== i && (n.uniform1i(this.addr, i), (r[0] = i)),
          t.setTexture3D(e || S_, i);
      }
      function jS(n, e, t) {
        const r = this.cache,
          i = t.allocateTextureUnit();
        r[0] !== i && (n.uniform1i(this.addr, i), (r[0] = i)),
          t.setTextureCube(e || M_, i);
      }
      function XS(n, e, t) {
        const r = this.cache,
          i = t.allocateTextureUnit();
        r[0] !== i && (n.uniform1i(this.addr, i), (r[0] = i)),
          t.setTexture2DArray(e || w_, i);
      }
      function qS(n, e) {
        n.uniform1fv(this.addr, e);
      }
      function $S(n, e) {
        const t = co(e, this.size, 2);
        n.uniform2fv(this.addr, t);
      }
      function YS(n, e) {
        const t = co(e, this.size, 3);
        n.uniform3fv(this.addr, t);
      }
      function ZS(n, e) {
        const t = co(e, this.size, 4);
        n.uniform4fv(this.addr, t);
      }
      function KS(n, e) {
        const t = co(e, this.size, 4);
        n.uniformMatrix2fv(this.addr, !1, t);
      }
      function JS(n, e) {
        const t = co(e, this.size, 9);
        n.uniformMatrix3fv(this.addr, !1, t);
      }
      function QS(n, e) {
        const t = co(e, this.size, 16);
        n.uniformMatrix4fv(this.addr, !1, t);
      }
      function eM(n, e) {
        n.uniform1iv(this.addr, e);
      }
      function tM(n, e) {
        n.uniform2iv(this.addr, e);
      }
      function nM(n, e) {
        n.uniform3iv(this.addr, e);
      }
      function rM(n, e) {
        n.uniform4iv(this.addr, e);
      }
      function iM(n, e) {
        n.uniform1uiv(this.addr, e);
      }
      function aM(n, e) {
        n.uniform2uiv(this.addr, e);
      }
      function sM(n, e) {
        n.uniform3uiv(this.addr, e);
      }
      function oM(n, e) {
        n.uniform4uiv(this.addr, e);
      }
      function lM(n, e, t) {
        const r = e.length,
          i = Uh(t, r);
        n.uniform1iv(this.addr, i);
        for (let a = 0; a !== r; ++a) t.setTexture2D(e[a] || b_, i[a]);
      }
      function uM(n, e, t) {
        const r = e.length,
          i = Uh(t, r);
        n.uniform1iv(this.addr, i);
        for (let a = 0; a !== r; ++a) t.setTexture3D(e[a] || S_, i[a]);
      }
      function cM(n, e, t) {
        const r = e.length,
          i = Uh(t, r);
        n.uniform1iv(this.addr, i);
        for (let a = 0; a !== r; ++a) t.setTextureCube(e[a] || M_, i[a]);
      }
      function hM(n, e, t) {
        const r = e.length,
          i = Uh(t, r);
        n.uniform1iv(this.addr, i);
        for (let a = 0; a !== r; ++a) t.setTexture2DArray(e[a] || w_, i[a]);
      }
      class dM {
        constructor(e, t, r) {
          (this.id = e),
            (this.addr = r),
            (this.cache = []),
            (this.setValue = (function (i) {
              switch (i) {
                case 5126:
                  return AS;
                case 35664:
                  return RS;
                case 35665:
                  return PS;
                case 35666:
                  return LS;
                case 35674:
                  return DS;
                case 35675:
                  return kS;
                case 35676:
                  return IS;
                case 5124:
                case 35670:
                  return US;
                case 35667:
                case 35671:
                  return OS;
                case 35668:
                case 35672:
                  return zS;
                case 35669:
                case 35673:
                  return NS;
                case 5125:
                  return FS;
                case 36294:
                  return BS;
                case 36295:
                  return GS;
                case 36296:
                  return HS;
                case 35678:
                case 36198:
                case 36298:
                case 36306:
                case 35682:
                  return VS;
                case 35679:
                case 36299:
                case 36307:
                  return WS;
                case 35680:
                case 36300:
                case 36308:
                case 36293:
                  return jS;
                case 36289:
                case 36303:
                case 36311:
                case 36292:
                  return XS;
              }
            })(t.type));
        }
      }
      class fM {
        constructor(e, t, r) {
          (this.id = e),
            (this.addr = r),
            (this.cache = []),
            (this.size = t.size),
            (this.setValue = (function (i) {
              switch (i) {
                case 5126:
                  return qS;
                case 35664:
                  return $S;
                case 35665:
                  return YS;
                case 35666:
                  return ZS;
                case 35674:
                  return KS;
                case 35675:
                  return JS;
                case 35676:
                  return QS;
                case 5124:
                case 35670:
                  return eM;
                case 35667:
                case 35671:
                  return tM;
                case 35668:
                case 35672:
                  return nM;
                case 35669:
                case 35673:
                  return rM;
                case 5125:
                  return iM;
                case 36294:
                  return aM;
                case 36295:
                  return sM;
                case 36296:
                  return oM;
                case 35678:
                case 36198:
                case 36298:
                case 36306:
                case 35682:
                  return lM;
                case 35679:
                case 36299:
                case 36307:
                  return uM;
                case 35680:
                case 36300:
                case 36308:
                case 36293:
                  return cM;
                case 36289:
                case 36303:
                case 36311:
                case 36292:
                  return hM;
              }
            })(t.type));
        }
      }
      class pM {
        constructor(e) {
          (this.id = e), (this.seq = []), (this.map = {});
        }
        setValue(e, t, r) {
          const i = this.seq;
          for (let a = 0, s = i.length; a !== s; ++a) {
            const o = i[a];
            o.setValue(e, t[o.id], r);
          }
        }
      }
      const sf = /(\w+)(\])?(\[|\.)?/g;
      function Lv(n, e) {
        n.seq.push(e), (n.map[e.id] = e);
      }
      function mM(n, e, t) {
        const r = n.name,
          i = r.length;
        for (sf.lastIndex = 0; ; ) {
          const a = sf.exec(r),
            s = sf.lastIndex;
          let o = a[1];
          const l = a[2] === "]",
            u = a[3];
          if ((l && (o |= 0), u === void 0 || (u === "[" && s + 2 === i))) {
            Lv(t, u === void 0 ? new dM(o, n, e) : new fM(o, n, e));
            break;
          }
          {
            let c = t.map[o];
            c === void 0 && ((c = new pM(o)), Lv(t, c)), (t = c);
          }
        }
      }
      class Tc {
        constructor(e, t) {
          (this.seq = []), (this.map = {});
          const r = e.getProgramParameter(t, 35718);
          for (let i = 0; i < r; ++i) {
            const a = e.getActiveUniform(t, i);
            mM(a, e.getUniformLocation(t, a.name), this);
          }
        }
        setValue(e, t, r, i) {
          const a = this.map[t];
          a !== void 0 && a.setValue(e, r, i);
        }
        setOptional(e, t, r) {
          const i = t[r];
          i !== void 0 && this.setValue(e, r, i);
        }
        static upload(e, t, r, i) {
          for (let a = 0, s = t.length; a !== s; ++a) {
            const o = t[a],
              l = r[o.id];
            l.needsUpdate !== !1 && o.setValue(e, l.value, i);
          }
        }
        static seqWithValue(e, t) {
          const r = [];
          for (let i = 0, a = e.length; i !== a; ++i) {
            const s = e[i];
            s.id in t && r.push(s);
          }
          return r;
        }
      }
      function Dv(n, e, t) {
        const r = n.createShader(e);
        return n.shaderSource(r, t), n.compileShader(r), r;
      }
      let gM = 0;
      function kv(n, e, t) {
        const r = n.getShaderParameter(e, 35713),
          i = n.getShaderInfoLog(e).trim();
        if (r && i === "") return "";
        const a = /ERROR: 0:(\d+)/.exec(i);
        if (a) {
          const s = parseInt(a[1]);
          return (
            t.toUpperCase() +
            `

` +
            i +
            `

` +
            (function (o, l) {
              const u = o.split(`
`),
                c = [],
                h = Math.max(l - 6, 0),
                d = Math.min(l + 6, u.length);
              for (let f = h; f < d; f++) {
                const g = f + 1;
                c.push(`${g === l ? ">" : " "} ${g}: ${u[f]}`);
              }
              return c.join(`
`);
            })(n.getShaderSource(e), s)
          );
        }
        return i;
      }
      function vM(n, e) {
        const t = (function (r) {
          switch (r) {
            case 3e3:
              return ["Linear", "( value )"];
            case 3001:
              return ["sRGB", "( value )"];
            default:
              return (
                console.warn("THREE.WebGLProgram: Unsupported encoding:", r),
                ["Linear", "( value )"]
              );
          }
        })(e);
        return (
          "vec4 " + n + "( vec4 value ) { return LinearTo" + t[0] + t[1] + "; }"
        );
      }
      function yM(n, e) {
        let t;
        switch (e) {
          case 1:
            t = "Linear";
            break;
          case 2:
            t = "Reinhard";
            break;
          case 3:
            t = "OptimizedCineon";
            break;
          case 4:
            t = "ACESFilmic";
            break;
          case 5:
            t = "Custom";
            break;
          default:
            console.warn("THREE.WebGLProgram: Unsupported toneMapping:", e),
              (t = "Linear");
        }
        return (
          "vec3 " +
          n +
          "( vec3 color ) { return " +
          t +
          "ToneMapping( color ); }"
        );
      }
      function Go(n) {
        return n !== "";
      }
      function Iv(n, e) {
        const t =
          e.numSpotLightShadows +
          e.numSpotLightMaps -
          e.numSpotLightShadowsWithMaps;
        return n
          .replace(/NUM_DIR_LIGHTS/g, e.numDirLights)
          .replace(/NUM_SPOT_LIGHTS/g, e.numSpotLights)
          .replace(/NUM_SPOT_LIGHT_MAPS/g, e.numSpotLightMaps)
          .replace(/NUM_SPOT_LIGHT_COORDS/g, t)
          .replace(/NUM_RECT_AREA_LIGHTS/g, e.numRectAreaLights)
          .replace(/NUM_POINT_LIGHTS/g, e.numPointLights)
          .replace(/NUM_HEMI_LIGHTS/g, e.numHemiLights)
          .replace(/NUM_DIR_LIGHT_SHADOWS/g, e.numDirLightShadows)
          .replace(
            /NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,
            e.numSpotLightShadowsWithMaps
          )
          .replace(/NUM_SPOT_LIGHT_SHADOWS/g, e.numSpotLightShadows)
          .replace(/NUM_POINT_LIGHT_SHADOWS/g, e.numPointLightShadows);
      }
      function Uv(n, e) {
        return n
          .replace(/NUM_CLIPPING_PLANES/g, e.numClippingPlanes)
          .replace(
            /UNION_CLIPPING_PLANES/g,
            e.numClippingPlanes - e.numClipIntersection
          );
      }
      const xM = /^[ \t]*#include +<([\w\d./]+)>/gm;
      function Sp(n) {
        return n.replace(xM, _M);
      }
      function _M(n, e) {
        const t = Ie[e];
        if (t === void 0)
          throw new Error("Can not resolve #include <" + e + ">");
        return Sp(t);
      }
      const bM =
        /#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;
      function Ov(n) {
        return n.replace(bM, wM);
      }
      function wM(n, e, t, r) {
        let i = "";
        for (let a = parseInt(e); a < parseInt(t); a++)
          i += r
            .replace(/\[\s*i\s*\]/g, "[ " + a + " ]")
            .replace(/UNROLLED_LOOP_INDEX/g, a);
        return i;
      }
      function zv(n) {
        let e =
          "precision " +
          n.precision +
          ` float;
precision ` +
          n.precision +
          " int;";
        return (
          n.precision === "highp"
            ? (e += `
#define HIGH_PRECISION`)
            : n.precision === "mediump"
            ? (e += `
#define MEDIUM_PRECISION`)
            : n.precision === "lowp" &&
              (e += `
#define LOW_PRECISION`),
          e
        );
      }
      function SM(n, e, t, r) {
        const i = n.getContext(),
          a = t.defines;
        let s = t.vertexShader,
          o = t.fragmentShader;
        const l = (function (C) {
            let N = "SHADOWMAP_TYPE_BASIC";
            return (
              C.shadowMapType === 1
                ? (N = "SHADOWMAP_TYPE_PCF")
                : C.shadowMapType === 2
                ? (N = "SHADOWMAP_TYPE_PCF_SOFT")
                : C.shadowMapType === 3 && (N = "SHADOWMAP_TYPE_VSM"),
              N
            );
          })(t),
          u = (function (C) {
            let N = "ENVMAP_TYPE_CUBE";
            if (C.envMap)
              switch (C.envMapMode) {
                case 301:
                case 302:
                  N = "ENVMAP_TYPE_CUBE";
                  break;
                case 306:
                  N = "ENVMAP_TYPE_CUBE_UV";
              }
            return N;
          })(t),
          c = (function (C) {
            let N = "ENVMAP_MODE_REFLECTION";
            return (
              C.envMap &&
                C.envMapMode === 302 &&
                (N = "ENVMAP_MODE_REFRACTION"),
              N
            );
          })(t),
          h = (function (C) {
            let N = "ENVMAP_BLENDING_NONE";
            if (C.envMap)
              switch (C.combine) {
                case 0:
                  N = "ENVMAP_BLENDING_MULTIPLY";
                  break;
                case 1:
                  N = "ENVMAP_BLENDING_MIX";
                  break;
                case 2:
                  N = "ENVMAP_BLENDING_ADD";
              }
            return N;
          })(t),
          d = (function (C) {
            const N = C.envMapCubeUVHeight;
            if (N === null) return null;
            const G = Math.log2(N) - 2,
              U = 1 / N;
            return {
              texelWidth: 1 / (3 * Math.max(Math.pow(2, G), 112)),
              texelHeight: U,
              maxMip: G,
            };
          })(t),
          f = t.isWebGL2
            ? ""
            : (function (C) {
                return [
                  C.extensionDerivatives ||
                  C.envMapCubeUVHeight ||
                  C.bumpMap ||
                  C.tangentSpaceNormalMap ||
                  C.clearcoatNormalMap ||
                  C.flatShading ||
                  C.shaderID === "physical"
                    ? "#extension GL_OES_standard_derivatives : enable"
                    : "",
                  (C.extensionFragDepth || C.logarithmicDepthBuffer) &&
                  C.rendererExtensionFragDepth
                    ? "#extension GL_EXT_frag_depth : enable"
                    : "",
                  C.extensionDrawBuffers && C.rendererExtensionDrawBuffers
                    ? "#extension GL_EXT_draw_buffers : require"
                    : "",
                  (C.extensionShaderTextureLOD || C.envMap || C.transmission) &&
                  C.rendererExtensionShaderTextureLod
                    ? "#extension GL_EXT_shader_texture_lod : enable"
                    : "",
                ].filter(Go).join(`
`);
              })(t),
          g = (function (C) {
            const N = [];
            for (const G in C) {
              const U = C[G];
              U !== !1 && N.push("#define " + G + " " + U);
            }
            return N.join(`
`);
          })(a),
          p = i.createProgram();
        let y,
          v,
          m = t.glslVersion
            ? "#version " +
              t.glslVersion +
              `
`
            : "";
        t.isRawShaderMaterial
          ? ((y = [g].filter(Go).join(`
`)),
            y.length > 0 &&
              (y += `
`),
            (v = [f, g].filter(Go).join(`
`)),
            v.length > 0 &&
              (v += `
`))
          : ((y = [
              zv(t),
              "#define SHADER_NAME " + t.shaderName,
              g,
              t.instancing ? "#define USE_INSTANCING" : "",
              t.instancingColor ? "#define USE_INSTANCING_COLOR" : "",
              t.supportsVertexTextures ? "#define VERTEX_TEXTURES" : "",
              t.useFog && t.fog ? "#define USE_FOG" : "",
              t.useFog && t.fogExp2 ? "#define FOG_EXP2" : "",
              t.map ? "#define USE_MAP" : "",
              t.envMap ? "#define USE_ENVMAP" : "",
              t.envMap ? "#define " + c : "",
              t.lightMap ? "#define USE_LIGHTMAP" : "",
              t.aoMap ? "#define USE_AOMAP" : "",
              t.emissiveMap ? "#define USE_EMISSIVEMAP" : "",
              t.bumpMap ? "#define USE_BUMPMAP" : "",
              t.normalMap ? "#define USE_NORMALMAP" : "",
              t.normalMap && t.objectSpaceNormalMap
                ? "#define OBJECTSPACE_NORMALMAP"
                : "",
              t.normalMap && t.tangentSpaceNormalMap
                ? "#define TANGENTSPACE_NORMALMAP"
                : "",
              t.clearcoatMap ? "#define USE_CLEARCOATMAP" : "",
              t.clearcoatRoughnessMap
                ? "#define USE_CLEARCOAT_ROUGHNESSMAP"
                : "",
              t.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "",
              t.iridescenceMap ? "#define USE_IRIDESCENCEMAP" : "",
              t.iridescenceThicknessMap
                ? "#define USE_IRIDESCENCE_THICKNESSMAP"
                : "",
              t.displacementMap && t.supportsVertexTextures
                ? "#define USE_DISPLACEMENTMAP"
                : "",
              t.specularMap ? "#define USE_SPECULARMAP" : "",
              t.specularIntensityMap ? "#define USE_SPECULARINTENSITYMAP" : "",
              t.specularColorMap ? "#define USE_SPECULARCOLORMAP" : "",
              t.roughnessMap ? "#define USE_ROUGHNESSMAP" : "",
              t.metalnessMap ? "#define USE_METALNESSMAP" : "",
              t.alphaMap ? "#define USE_ALPHAMAP" : "",
              t.transmission ? "#define USE_TRANSMISSION" : "",
              t.transmissionMap ? "#define USE_TRANSMISSIONMAP" : "",
              t.thicknessMap ? "#define USE_THICKNESSMAP" : "",
              t.sheenColorMap ? "#define USE_SHEENCOLORMAP" : "",
              t.sheenRoughnessMap ? "#define USE_SHEENROUGHNESSMAP" : "",
              t.vertexTangents ? "#define USE_TANGENT" : "",
              t.vertexColors ? "#define USE_COLOR" : "",
              t.vertexAlphas ? "#define USE_COLOR_ALPHA" : "",
              t.vertexUvs ? "#define USE_UV" : "",
              t.uvsVertexOnly ? "#define UVS_VERTEX_ONLY" : "",
              t.flatShading ? "#define FLAT_SHADED" : "",
              t.skinning ? "#define USE_SKINNING" : "",
              t.morphTargets ? "#define USE_MORPHTARGETS" : "",
              t.morphNormals && t.flatShading === !1
                ? "#define USE_MORPHNORMALS"
                : "",
              t.morphColors && t.isWebGL2 ? "#define USE_MORPHCOLORS" : "",
              t.morphTargetsCount > 0 && t.isWebGL2
                ? "#define MORPHTARGETS_TEXTURE"
                : "",
              t.morphTargetsCount > 0 && t.isWebGL2
                ? "#define MORPHTARGETS_TEXTURE_STRIDE " + t.morphTextureStride
                : "",
              t.morphTargetsCount > 0 && t.isWebGL2
                ? "#define MORPHTARGETS_COUNT " + t.morphTargetsCount
                : "",
              t.doubleSided ? "#define DOUBLE_SIDED" : "",
              t.flipSided ? "#define FLIP_SIDED" : "",
              t.shadowMapEnabled ? "#define USE_SHADOWMAP" : "",
              t.shadowMapEnabled ? "#define " + l : "",
              t.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "",
              t.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "",
              t.logarithmicDepthBuffer && t.rendererExtensionFragDepth
                ? "#define USE_LOGDEPTHBUF_EXT"
                : "",
              "uniform mat4 modelMatrix;",
              "uniform mat4 modelViewMatrix;",
              "uniform mat4 projectionMatrix;",
              "uniform mat4 viewMatrix;",
              "uniform mat3 normalMatrix;",
              "uniform vec3 cameraPosition;",
              "uniform bool isOrthographic;",
              "#ifdef USE_INSTANCING",
              "	attribute mat4 instanceMatrix;",
              "#endif",
              "#ifdef USE_INSTANCING_COLOR",
              "	attribute vec3 instanceColor;",
              "#endif",
              "attribute vec3 position;",
              "attribute vec3 normal;",
              "attribute vec2 uv;",
              "#ifdef USE_TANGENT",
              "	attribute vec4 tangent;",
              "#endif",
              "#if defined( USE_COLOR_ALPHA )",
              "	attribute vec4 color;",
              "#elif defined( USE_COLOR )",
              "	attribute vec3 color;",
              "#endif",
              "#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )",
              "	attribute vec3 morphTarget0;",
              "	attribute vec3 morphTarget1;",
              "	attribute vec3 morphTarget2;",
              "	attribute vec3 morphTarget3;",
              "	#ifdef USE_MORPHNORMALS",
              "		attribute vec3 morphNormal0;",
              "		attribute vec3 morphNormal1;",
              "		attribute vec3 morphNormal2;",
              "		attribute vec3 morphNormal3;",
              "	#else",
              "		attribute vec3 morphTarget4;",
              "		attribute vec3 morphTarget5;",
              "		attribute vec3 morphTarget6;",
              "		attribute vec3 morphTarget7;",
              "	#endif",
              "#endif",
              "#ifdef USE_SKINNING",
              "	attribute vec4 skinIndex;",
              "	attribute vec4 skinWeight;",
              "#endif",
              `
`,
            ].filter(Go).join(`
`)),
            (v = [
              f,
              zv(t),
              "#define SHADER_NAME " + t.shaderName,
              g,
              t.useFog && t.fog ? "#define USE_FOG" : "",
              t.useFog && t.fogExp2 ? "#define FOG_EXP2" : "",
              t.map ? "#define USE_MAP" : "",
              t.matcap ? "#define USE_MATCAP" : "",
              t.envMap ? "#define USE_ENVMAP" : "",
              t.envMap ? "#define " + u : "",
              t.envMap ? "#define " + c : "",
              t.envMap ? "#define " + h : "",
              d ? "#define CUBEUV_TEXEL_WIDTH " + d.texelWidth : "",
              d ? "#define CUBEUV_TEXEL_HEIGHT " + d.texelHeight : "",
              d ? "#define CUBEUV_MAX_MIP " + d.maxMip + ".0" : "",
              t.lightMap ? "#define USE_LIGHTMAP" : "",
              t.aoMap ? "#define USE_AOMAP" : "",
              t.emissiveMap ? "#define USE_EMISSIVEMAP" : "",
              t.bumpMap ? "#define USE_BUMPMAP" : "",
              t.normalMap ? "#define USE_NORMALMAP" : "",
              t.normalMap && t.objectSpaceNormalMap
                ? "#define OBJECTSPACE_NORMALMAP"
                : "",
              t.normalMap && t.tangentSpaceNormalMap
                ? "#define TANGENTSPACE_NORMALMAP"
                : "",
              t.clearcoat ? "#define USE_CLEARCOAT" : "",
              t.clearcoatMap ? "#define USE_CLEARCOATMAP" : "",
              t.clearcoatRoughnessMap
                ? "#define USE_CLEARCOAT_ROUGHNESSMAP"
                : "",
              t.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "",
              t.iridescence ? "#define USE_IRIDESCENCE" : "",
              t.iridescenceMap ? "#define USE_IRIDESCENCEMAP" : "",
              t.iridescenceThicknessMap
                ? "#define USE_IRIDESCENCE_THICKNESSMAP"
                : "",
              t.specularMap ? "#define USE_SPECULARMAP" : "",
              t.specularIntensityMap ? "#define USE_SPECULARINTENSITYMAP" : "",
              t.specularColorMap ? "#define USE_SPECULARCOLORMAP" : "",
              t.roughnessMap ? "#define USE_ROUGHNESSMAP" : "",
              t.metalnessMap ? "#define USE_METALNESSMAP" : "",
              t.alphaMap ? "#define USE_ALPHAMAP" : "",
              t.alphaTest ? "#define USE_ALPHATEST" : "",
              t.sheen ? "#define USE_SHEEN" : "",
              t.sheenColorMap ? "#define USE_SHEENCOLORMAP" : "",
              t.sheenRoughnessMap ? "#define USE_SHEENROUGHNESSMAP" : "",
              t.transmission ? "#define USE_TRANSMISSION" : "",
              t.transmissionMap ? "#define USE_TRANSMISSIONMAP" : "",
              t.thicknessMap ? "#define USE_THICKNESSMAP" : "",
              t.decodeVideoTexture ? "#define DECODE_VIDEO_TEXTURE" : "",
              t.vertexTangents ? "#define USE_TANGENT" : "",
              t.vertexColors || t.instancingColor ? "#define USE_COLOR" : "",
              t.vertexAlphas ? "#define USE_COLOR_ALPHA" : "",
              t.vertexUvs ? "#define USE_UV" : "",
              t.uvsVertexOnly ? "#define UVS_VERTEX_ONLY" : "",
              t.gradientMap ? "#define USE_GRADIENTMAP" : "",
              t.flatShading ? "#define FLAT_SHADED" : "",
              t.doubleSided ? "#define DOUBLE_SIDED" : "",
              t.flipSided ? "#define FLIP_SIDED" : "",
              t.shadowMapEnabled ? "#define USE_SHADOWMAP" : "",
              t.shadowMapEnabled ? "#define " + l : "",
              t.premultipliedAlpha ? "#define PREMULTIPLIED_ALPHA" : "",
              t.physicallyCorrectLights
                ? "#define PHYSICALLY_CORRECT_LIGHTS"
                : "",
              t.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "",
              t.logarithmicDepthBuffer && t.rendererExtensionFragDepth
                ? "#define USE_LOGDEPTHBUF_EXT"
                : "",
              "uniform mat4 viewMatrix;",
              "uniform vec3 cameraPosition;",
              "uniform bool isOrthographic;",
              t.toneMapping !== 0 ? "#define TONE_MAPPING" : "",
              t.toneMapping !== 0 ? Ie.tonemapping_pars_fragment : "",
              t.toneMapping !== 0 ? yM("toneMapping", t.toneMapping) : "",
              t.dithering ? "#define DITHERING" : "",
              t.opaque ? "#define OPAQUE" : "",
              Ie.encodings_pars_fragment,
              vM("linearToOutputTexel", t.outputEncoding),
              t.useDepthPacking
                ? "#define DEPTH_PACKING " + t.depthPacking
                : "",
              `
`,
            ].filter(Go).join(`
`))),
          (s = Sp(s)),
          (s = Iv(s, t)),
          (s = Uv(s, t)),
          (o = Sp(o)),
          (o = Iv(o, t)),
          (o = Uv(o, t)),
          (s = Ov(s)),
          (o = Ov(o)),
          t.isWebGL2 &&
            t.isRawShaderMaterial !== !0 &&
            ((m = `#version 300 es
`),
            (y =
              [
                "precision mediump sampler2DArray;",
                "#define attribute in",
                "#define varying out",
                "#define texture2D texture",
              ].join(`
`) +
              `
` +
              y),
            (v =
              [
                "#define varying in",
                t.glslVersion === "300 es"
                  ? ""
                  : "layout(location = 0) out highp vec4 pc_fragColor;",
                t.glslVersion === "300 es"
                  ? ""
                  : "#define gl_FragColor pc_fragColor",
                "#define gl_FragDepthEXT gl_FragDepth",
                "#define texture2D texture",
                "#define textureCube texture",
                "#define texture2DProj textureProj",
                "#define texture2DLodEXT textureLod",
                "#define texture2DProjLodEXT textureProjLod",
                "#define textureCubeLodEXT textureLod",
                "#define texture2DGradEXT textureGrad",
                "#define texture2DProjGradEXT textureProjGrad",
                "#define textureCubeGradEXT textureGrad",
              ].join(`
`) +
              `
` +
              v));
        const x = m + v + o,
          _ = Dv(i, 35633, m + y + s),
          b = Dv(i, 35632, x);
        if (
          (i.attachShader(p, _),
          i.attachShader(p, b),
          t.index0AttributeName !== void 0
            ? i.bindAttribLocation(p, 0, t.index0AttributeName)
            : t.morphTargets === !0 && i.bindAttribLocation(p, 0, "position"),
          i.linkProgram(p),
          n.debug.checkShaderErrors)
        ) {
          const C = i.getProgramInfoLog(p).trim(),
            N = i.getShaderInfoLog(_).trim(),
            G = i.getShaderInfoLog(b).trim();
          let U = !0,
            I = !0;
          if (i.getProgramParameter(p, 35714) === !1) {
            U = !1;
            const F = kv(i, _, "vertex"),
              T = kv(i, b, "fragment");
            console.error(
              "THREE.WebGLProgram: Shader Error " +
                i.getError() +
                " - VALIDATE_STATUS " +
                i.getProgramParameter(p, 35715) +
                `

Program Info Log: ` +
                C +
                `
` +
                F +
                `
` +
                T
            );
          } else
            C !== ""
              ? console.warn("THREE.WebGLProgram: Program Info Log:", C)
              : (N !== "" && G !== "") || (I = !1);
          I &&
            (this.diagnostics = {
              runnable: U,
              programLog: C,
              vertexShader: { log: N, prefix: y },
              fragmentShader: { log: G, prefix: v },
            });
        }
        let w, M;
        return (
          i.deleteShader(_),
          i.deleteShader(b),
          (this.getUniforms = function () {
            return w === void 0 && (w = new Tc(i, p)), w;
          }),
          (this.getAttributes = function () {
            return (
              M === void 0 &&
                (M = (function (C, N) {
                  const G = {},
                    U = C.getProgramParameter(N, 35721);
                  for (let I = 0; I < U; I++) {
                    const F = C.getActiveAttrib(N, I),
                      T = F.name;
                    let O = 1;
                    F.type === 35674 && (O = 2),
                      F.type === 35675 && (O = 3),
                      F.type === 35676 && (O = 4),
                      (G[T] = {
                        type: F.type,
                        location: C.getAttribLocation(N, T),
                        locationSize: O,
                      });
                  }
                  return G;
                })(i, p)),
              M
            );
          }),
          (this.destroy = function () {
            r.releaseStatesOfProgram(this),
              i.deleteProgram(p),
              (this.program = void 0);
          }),
          (this.name = t.shaderName),
          (this.id = gM++),
          (this.cacheKey = e),
          (this.usedTimes = 1),
          (this.program = p),
          (this.vertexShader = _),
          (this.fragmentShader = b),
          this
        );
      }
      let MM = 0;
      class TM {
        constructor() {
          (this.shaderCache = new Map()), (this.materialCache = new Map());
        }
        update(e) {
          const t = e.vertexShader,
            r = e.fragmentShader,
            i = this._getShaderStage(t),
            a = this._getShaderStage(r),
            s = this._getShaderCacheForMaterial(e);
          return (
            s.has(i) === !1 && (s.add(i), i.usedTimes++),
            s.has(a) === !1 && (s.add(a), a.usedTimes++),
            this
          );
        }
        remove(e) {
          const t = this.materialCache.get(e);
          for (const r of t)
            r.usedTimes--, r.usedTimes === 0 && this.shaderCache.delete(r.code);
          return this.materialCache.delete(e), this;
        }
        getVertexShaderID(e) {
          return this._getShaderStage(e.vertexShader).id;
        }
        getFragmentShaderID(e) {
          return this._getShaderStage(e.fragmentShader).id;
        }
        dispose() {
          this.shaderCache.clear(), this.materialCache.clear();
        }
        _getShaderCacheForMaterial(e) {
          const t = this.materialCache;
          let r = t.get(e);
          return r === void 0 && ((r = new Set()), t.set(e, r)), r;
        }
        _getShaderStage(e) {
          const t = this.shaderCache;
          let r = t.get(e);
          return r === void 0 && ((r = new EM(e)), t.set(e, r)), r;
        }
      }
      class EM {
        constructor(e) {
          (this.id = MM++), (this.code = e), (this.usedTimes = 0);
        }
      }
      function CM(n, e, t, r, i, a, s) {
        const o = new jm(),
          l = new TM(),
          u = [],
          c = i.isWebGL2,
          h = i.logarithmicDepthBuffer,
          d = i.vertexTextures;
        let f = i.precision;
        const g = {
          MeshDepthMaterial: "depth",
          MeshDistanceMaterial: "distanceRGBA",
          MeshNormalMaterial: "normal",
          MeshBasicMaterial: "basic",
          MeshLambertMaterial: "lambert",
          MeshPhongMaterial: "phong",
          MeshToonMaterial: "toon",
          MeshStandardMaterial: "physical",
          MeshPhysicalMaterial: "physical",
          MeshMatcapMaterial: "matcap",
          LineBasicMaterial: "basic",
          LineDashedMaterial: "dashed",
          PointsMaterial: "points",
          ShadowMaterial: "shadow",
          SpriteMaterial: "sprite",
        };
        return {
          getParameters: function (p, y, v, m, x) {
            const _ = m.fog,
              b = x.geometry,
              w = p.isMeshStandardMaterial ? m.environment : null,
              M = (p.isMeshStandardMaterial ? t : e).get(p.envMap || w),
              C = M && M.mapping === 306 ? M.image.height : null,
              N = g[p.type];
            p.precision !== null &&
              ((f = i.getMaxPrecision(p.precision)),
              f !== p.precision &&
                console.warn(
                  "THREE.WebGLProgram.getParameters:",
                  p.precision,
                  "not supported, using",
                  f,
                  "instead."
                ));
            const G =
                b.morphAttributes.position ||
                b.morphAttributes.normal ||
                b.morphAttributes.color,
              U = G !== void 0 ? G.length : 0;
            let I,
              F,
              T,
              O,
              k = 0;
            if (
              (b.morphAttributes.position !== void 0 && (k = 1),
              b.morphAttributes.normal !== void 0 && (k = 2),
              b.morphAttributes.color !== void 0 && (k = 3),
              N)
            ) {
              const D = Or[N];
              (I = D.vertexShader), (F = D.fragmentShader);
            } else
              (I = p.vertexShader),
                (F = p.fragmentShader),
                l.update(p),
                (T = l.getVertexShaderID(p)),
                (O = l.getFragmentShaderID(p));
            const P = n.getRenderTarget(),
              E = p.alphaTest > 0,
              z = p.clearcoat > 0,
              A = p.iridescence > 0;
            return {
              isWebGL2: c,
              shaderID: N,
              shaderName: p.type,
              vertexShader: I,
              fragmentShader: F,
              defines: p.defines,
              customVertexShaderID: T,
              customFragmentShaderID: O,
              isRawShaderMaterial: p.isRawShaderMaterial === !0,
              glslVersion: p.glslVersion,
              precision: f,
              instancing: x.isInstancedMesh === !0,
              instancingColor:
                x.isInstancedMesh === !0 && x.instanceColor !== null,
              supportsVertexTextures: d,
              outputEncoding:
                P === null
                  ? n.outputEncoding
                  : P.isXRRenderTarget === !0
                  ? P.texture.encoding
                  : 3e3,
              map: !!p.map,
              matcap: !!p.matcap,
              envMap: !!M,
              envMapMode: M && M.mapping,
              envMapCubeUVHeight: C,
              lightMap: !!p.lightMap,
              aoMap: !!p.aoMap,
              emissiveMap: !!p.emissiveMap,
              bumpMap: !!p.bumpMap,
              normalMap: !!p.normalMap,
              objectSpaceNormalMap: p.normalMapType === 1,
              tangentSpaceNormalMap: p.normalMapType === 0,
              decodeVideoTexture:
                !!p.map &&
                p.map.isVideoTexture === !0 &&
                p.map.encoding === 3001,
              clearcoat: z,
              clearcoatMap: z && !!p.clearcoatMap,
              clearcoatRoughnessMap: z && !!p.clearcoatRoughnessMap,
              clearcoatNormalMap: z && !!p.clearcoatNormalMap,
              iridescence: A,
              iridescenceMap: A && !!p.iridescenceMap,
              iridescenceThicknessMap: A && !!p.iridescenceThicknessMap,
              displacementMap: !!p.displacementMap,
              roughnessMap: !!p.roughnessMap,
              metalnessMap: !!p.metalnessMap,
              specularMap: !!p.specularMap,
              specularIntensityMap: !!p.specularIntensityMap,
              specularColorMap: !!p.specularColorMap,
              opaque: p.transparent === !1 && p.blending === 1,
              alphaMap: !!p.alphaMap,
              alphaTest: E,
              gradientMap: !!p.gradientMap,
              sheen: p.sheen > 0,
              sheenColorMap: !!p.sheenColorMap,
              sheenRoughnessMap: !!p.sheenRoughnessMap,
              transmission: p.transmission > 0,
              transmissionMap: !!p.transmissionMap,
              thicknessMap: !!p.thicknessMap,
              combine: p.combine,
              vertexTangents: !!p.normalMap && !!b.attributes.tangent,
              vertexColors: p.vertexColors,
              vertexAlphas:
                p.vertexColors === !0 &&
                !!b.attributes.color &&
                b.attributes.color.itemSize === 4,
              vertexUvs: !!(
                p.map ||
                p.bumpMap ||
                p.normalMap ||
                p.specularMap ||
                p.alphaMap ||
                p.emissiveMap ||
                p.roughnessMap ||
                p.metalnessMap ||
                p.clearcoatMap ||
                p.clearcoatRoughnessMap ||
                p.clearcoatNormalMap ||
                p.iridescenceMap ||
                p.iridescenceThicknessMap ||
                p.displacementMap ||
                p.transmissionMap ||
                p.thicknessMap ||
                p.specularIntensityMap ||
                p.specularColorMap ||
                p.sheenColorMap ||
                p.sheenRoughnessMap
              ),
              uvsVertexOnly: !(
                p.map ||
                p.bumpMap ||
                p.normalMap ||
                p.specularMap ||
                p.alphaMap ||
                p.emissiveMap ||
                p.roughnessMap ||
                p.metalnessMap ||
                p.clearcoatNormalMap ||
                p.iridescenceMap ||
                p.iridescenceThicknessMap ||
                p.transmission > 0 ||
                p.transmissionMap ||
                p.thicknessMap ||
                p.specularIntensityMap ||
                p.specularColorMap ||
                p.sheen > 0 ||
                p.sheenColorMap ||
                p.sheenRoughnessMap ||
                !p.displacementMap
              ),
              fog: !!_,
              useFog: p.fog === !0,
              fogExp2: _ && _.isFogExp2,
              flatShading: !!p.flatShading,
              sizeAttenuation: p.sizeAttenuation,
              logarithmicDepthBuffer: h,
              skinning: x.isSkinnedMesh === !0,
              morphTargets: b.morphAttributes.position !== void 0,
              morphNormals: b.morphAttributes.normal !== void 0,
              morphColors: b.morphAttributes.color !== void 0,
              morphTargetsCount: U,
              morphTextureStride: k,
              numDirLights: y.directional.length,
              numPointLights: y.point.length,
              numSpotLights: y.spot.length,
              numSpotLightMaps: y.spotLightMap.length,
              numRectAreaLights: y.rectArea.length,
              numHemiLights: y.hemi.length,
              numDirLightShadows: y.directionalShadowMap.length,
              numPointLightShadows: y.pointShadowMap.length,
              numSpotLightShadows: y.spotShadowMap.length,
              numSpotLightShadowsWithMaps: y.numSpotLightShadowsWithMaps,
              numClippingPlanes: s.numPlanes,
              numClipIntersection: s.numIntersection,
              dithering: p.dithering,
              shadowMapEnabled: n.shadowMap.enabled && v.length > 0,
              shadowMapType: n.shadowMap.type,
              toneMapping: p.toneMapped ? n.toneMapping : 0,
              physicallyCorrectLights: n.physicallyCorrectLights,
              premultipliedAlpha: p.premultipliedAlpha,
              doubleSided: p.side === 2,
              flipSided: p.side === 1,
              useDepthPacking: !!p.depthPacking,
              depthPacking: p.depthPacking || 0,
              index0AttributeName: p.index0AttributeName,
              extensionDerivatives: p.extensions && p.extensions.derivatives,
              extensionFragDepth: p.extensions && p.extensions.fragDepth,
              extensionDrawBuffers: p.extensions && p.extensions.drawBuffers,
              extensionShaderTextureLOD:
                p.extensions && p.extensions.shaderTextureLOD,
              rendererExtensionFragDepth: c || r.has("EXT_frag_depth"),
              rendererExtensionDrawBuffers: c || r.has("WEBGL_draw_buffers"),
              rendererExtensionShaderTextureLod:
                c || r.has("EXT_shader_texture_lod"),
              customProgramCacheKey: p.customProgramCacheKey(),
            };
          },
          getProgramCacheKey: function (p) {
            const y = [];
            if (
              (p.shaderID
                ? y.push(p.shaderID)
                : (y.push(p.customVertexShaderID),
                  y.push(p.customFragmentShaderID)),
              p.defines !== void 0)
            )
              for (const v in p.defines) y.push(v), y.push(p.defines[v]);
            return (
              p.isRawShaderMaterial === !1 &&
                ((function (v, m) {
                  v.push(m.precision),
                    v.push(m.outputEncoding),
                    v.push(m.envMapMode),
                    v.push(m.envMapCubeUVHeight),
                    v.push(m.combine),
                    v.push(m.vertexUvs),
                    v.push(m.fogExp2),
                    v.push(m.sizeAttenuation),
                    v.push(m.morphTargetsCount),
                    v.push(m.morphAttributeCount),
                    v.push(m.numDirLights),
                    v.push(m.numPointLights),
                    v.push(m.numSpotLights),
                    v.push(m.numSpotLightMaps),
                    v.push(m.numHemiLights),
                    v.push(m.numRectAreaLights),
                    v.push(m.numDirLightShadows),
                    v.push(m.numPointLightShadows),
                    v.push(m.numSpotLightShadows),
                    v.push(m.numSpotLightShadowsWithMaps),
                    v.push(m.shadowMapType),
                    v.push(m.toneMapping),
                    v.push(m.numClippingPlanes),
                    v.push(m.numClipIntersection),
                    v.push(m.depthPacking);
                })(y, p),
                (function (v, m) {
                  o.disableAll(),
                    m.isWebGL2 && o.enable(0),
                    m.supportsVertexTextures && o.enable(1),
                    m.instancing && o.enable(2),
                    m.instancingColor && o.enable(3),
                    m.map && o.enable(4),
                    m.matcap && o.enable(5),
                    m.envMap && o.enable(6),
                    m.lightMap && o.enable(7),
                    m.aoMap && o.enable(8),
                    m.emissiveMap && o.enable(9),
                    m.bumpMap && o.enable(10),
                    m.normalMap && o.enable(11),
                    m.objectSpaceNormalMap && o.enable(12),
                    m.tangentSpaceNormalMap && o.enable(13),
                    m.clearcoat && o.enable(14),
                    m.clearcoatMap && o.enable(15),
                    m.clearcoatRoughnessMap && o.enable(16),
                    m.clearcoatNormalMap && o.enable(17),
                    m.iridescence && o.enable(18),
                    m.iridescenceMap && o.enable(19),
                    m.iridescenceThicknessMap && o.enable(20),
                    m.displacementMap && o.enable(21),
                    m.specularMap && o.enable(22),
                    m.roughnessMap && o.enable(23),
                    m.metalnessMap && o.enable(24),
                    m.gradientMap && o.enable(25),
                    m.alphaMap && o.enable(26),
                    m.alphaTest && o.enable(27),
                    m.vertexColors && o.enable(28),
                    m.vertexAlphas && o.enable(29),
                    m.vertexUvs && o.enable(30),
                    m.vertexTangents && o.enable(31),
                    m.uvsVertexOnly && o.enable(32),
                    v.push(o.mask),
                    o.disableAll(),
                    m.fog && o.enable(0),
                    m.useFog && o.enable(1),
                    m.flatShading && o.enable(2),
                    m.logarithmicDepthBuffer && o.enable(3),
                    m.skinning && o.enable(4),
                    m.morphTargets && o.enable(5),
                    m.morphNormals && o.enable(6),
                    m.morphColors && o.enable(7),
                    m.premultipliedAlpha && o.enable(8),
                    m.shadowMapEnabled && o.enable(9),
                    m.physicallyCorrectLights && o.enable(10),
                    m.doubleSided && o.enable(11),
                    m.flipSided && o.enable(12),
                    m.useDepthPacking && o.enable(13),
                    m.dithering && o.enable(14),
                    m.specularIntensityMap && o.enable(15),
                    m.specularColorMap && o.enable(16),
                    m.transmission && o.enable(17),
                    m.transmissionMap && o.enable(18),
                    m.thicknessMap && o.enable(19),
                    m.sheen && o.enable(20),
                    m.sheenColorMap && o.enable(21),
                    m.sheenRoughnessMap && o.enable(22),
                    m.decodeVideoTexture && o.enable(23),
                    m.opaque && o.enable(24),
                    v.push(o.mask);
                })(y, p),
                y.push(n.outputEncoding)),
              y.push(p.customProgramCacheKey),
              y.join()
            );
          },
          getUniforms: function (p) {
            const y = g[p.type];
            let v;
            if (y) {
              const m = Or[y];
              v = y_.clone(m.uniforms);
            } else v = p.uniforms;
            return v;
          },
          acquireProgram: function (p, y) {
            let v;
            for (let m = 0, x = u.length; m < x; m++) {
              const _ = u[m];
              if (_.cacheKey === y) {
                (v = _), ++v.usedTimes;
                break;
              }
            }
            return v === void 0 && ((v = new SM(n, y, p, a)), u.push(v)), v;
          },
          releaseProgram: function (p) {
            if (--p.usedTimes == 0) {
              const y = u.indexOf(p);
              (u[y] = u[u.length - 1]), u.pop(), p.destroy();
            }
          },
          releaseShaderCache: function (p) {
            l.remove(p);
          },
          programs: u,
          dispose: function () {
            l.dispose();
          },
        };
      }
      function AM() {
        let n = new WeakMap();
        return {
          get: function (e) {
            let t = n.get(e);
            return t === void 0 && ((t = {}), n.set(e, t)), t;
          },
          remove: function (e) {
            n.delete(e);
          },
          update: function (e, t, r) {
            n.get(e)[t] = r;
          },
          dispose: function () {
            n = new WeakMap();
          },
        };
      }
      function RM(n, e) {
        return n.groupOrder !== e.groupOrder
          ? n.groupOrder - e.groupOrder
          : n.renderOrder !== e.renderOrder
          ? n.renderOrder - e.renderOrder
          : n.material.id !== e.material.id
          ? n.material.id - e.material.id
          : n.z !== e.z
          ? n.z - e.z
          : n.id - e.id;
      }
      function Nv(n, e) {
        return n.groupOrder !== e.groupOrder
          ? n.groupOrder - e.groupOrder
          : n.renderOrder !== e.renderOrder
          ? n.renderOrder - e.renderOrder
          : n.z !== e.z
          ? e.z - n.z
          : n.id - e.id;
      }
      function Fv() {
        const n = [];
        let e = 0;
        const t = [],
          r = [],
          i = [];
        function a(s, o, l, u, c, h) {
          let d = n[e];
          return (
            d === void 0
              ? ((d = {
                  id: s.id,
                  object: s,
                  geometry: o,
                  material: l,
                  groupOrder: u,
                  renderOrder: s.renderOrder,
                  z: c,
                  group: h,
                }),
                (n[e] = d))
              : ((d.id = s.id),
                (d.object = s),
                (d.geometry = o),
                (d.material = l),
                (d.groupOrder = u),
                (d.renderOrder = s.renderOrder),
                (d.z = c),
                (d.group = h)),
            e++,
            d
          );
        }
        return {
          opaque: t,
          transmissive: r,
          transparent: i,
          init: function () {
            (e = 0), (t.length = 0), (r.length = 0), (i.length = 0);
          },
          push: function (s, o, l, u, c, h) {
            const d = a(s, o, l, u, c, h);
            l.transmission > 0
              ? r.push(d)
              : l.transparent === !0
              ? i.push(d)
              : t.push(d);
          },
          unshift: function (s, o, l, u, c, h) {
            const d = a(s, o, l, u, c, h);
            l.transmission > 0
              ? r.unshift(d)
              : l.transparent === !0
              ? i.unshift(d)
              : t.unshift(d);
          },
          finish: function () {
            for (let s = e, o = n.length; s < o; s++) {
              const l = n[s];
              if (l.id === null) break;
              (l.id = null),
                (l.object = null),
                (l.geometry = null),
                (l.material = null),
                (l.group = null);
            }
          },
          sort: function (s, o) {
            t.length > 1 && t.sort(s || RM),
              r.length > 1 && r.sort(o || Nv),
              i.length > 1 && i.sort(o || Nv);
          },
        };
      }
      function PM() {
        let n = new WeakMap();
        return {
          get: function (e, t) {
            const r = n.get(e);
            let i;
            return (
              r === void 0
                ? ((i = new Fv()), n.set(e, [i]))
                : t >= r.length
                ? ((i = new Fv()), r.push(i))
                : (i = r[t]),
              i
            );
          },
          dispose: function () {
            n = new WeakMap();
          },
        };
      }
      function LM() {
        const n = {};
        return {
          get: function (e) {
            if (n[e.id] !== void 0) return n[e.id];
            let t;
            switch (e.type) {
              case "DirectionalLight":
                t = { direction: new j(), color: new Ce() };
                break;
              case "SpotLight":
                t = {
                  position: new j(),
                  direction: new j(),
                  color: new Ce(),
                  distance: 0,
                  coneCos: 0,
                  penumbraCos: 0,
                  decay: 0,
                };
                break;
              case "PointLight":
                t = {
                  position: new j(),
                  color: new Ce(),
                  distance: 0,
                  decay: 0,
                };
                break;
              case "HemisphereLight":
                t = {
                  direction: new j(),
                  skyColor: new Ce(),
                  groundColor: new Ce(),
                };
                break;
              case "RectAreaLight":
                t = {
                  color: new Ce(),
                  position: new j(),
                  halfWidth: new j(),
                  halfHeight: new j(),
                };
            }
            return (n[e.id] = t), t;
          },
        };
      }
      let DM = 0;
      function kM(n, e) {
        return (
          (e.castShadow ? 2 : 0) -
          (n.castShadow ? 2 : 0) +
          (e.map ? 1 : 0) -
          (n.map ? 1 : 0)
        );
      }
      function IM(n, e) {
        const t = new LM(),
          r = (function () {
            const l = {};
            return {
              get: function (u) {
                if (l[u.id] !== void 0) return l[u.id];
                let c;
                switch (u.type) {
                  case "DirectionalLight":
                  case "SpotLight":
                    c = {
                      shadowBias: 0,
                      shadowNormalBias: 0,
                      shadowRadius: 1,
                      shadowMapSize: new ge(),
                    };
                    break;
                  case "PointLight":
                    c = {
                      shadowBias: 0,
                      shadowNormalBias: 0,
                      shadowRadius: 1,
                      shadowMapSize: new ge(),
                      shadowCameraNear: 1,
                      shadowCameraFar: 1e3,
                    };
                }
                return (l[u.id] = c), c;
              },
            };
          })(),
          i = {
            version: 0,
            hash: {
              directionalLength: -1,
              pointLength: -1,
              spotLength: -1,
              rectAreaLength: -1,
              hemiLength: -1,
              numDirectionalShadows: -1,
              numPointShadows: -1,
              numSpotShadows: -1,
              numSpotMaps: -1,
            },
            ambient: [0, 0, 0],
            probe: [],
            directional: [],
            directionalShadow: [],
            directionalShadowMap: [],
            directionalShadowMatrix: [],
            spot: [],
            spotLightMap: [],
            spotShadow: [],
            spotShadowMap: [],
            spotLightMatrix: [],
            rectArea: [],
            rectAreaLTC1: null,
            rectAreaLTC2: null,
            point: [],
            pointShadow: [],
            pointShadowMap: [],
            pointShadowMatrix: [],
            hemi: [],
            numSpotLightShadowsWithMaps: 0,
          };
        for (let l = 0; l < 9; l++) i.probe.push(new j());
        const a = new j(),
          s = new Te(),
          o = new Te();
        return {
          setup: function (l, u) {
            let c = 0,
              h = 0,
              d = 0;
            for (let N = 0; N < 9; N++) i.probe[N].set(0, 0, 0);
            let f = 0,
              g = 0,
              p = 0,
              y = 0,
              v = 0,
              m = 0,
              x = 0,
              _ = 0,
              b = 0,
              w = 0;
            l.sort(kM);
            const M = u !== !0 ? Math.PI : 1;
            for (let N = 0, G = l.length; N < G; N++) {
              const U = l[N],
                I = U.color,
                F = U.intensity,
                T = U.distance,
                O = U.shadow && U.shadow.map ? U.shadow.map.texture : null;
              if (U.isAmbientLight)
                (c += I.r * F * M), (h += I.g * F * M), (d += I.b * F * M);
              else if (U.isLightProbe)
                for (let k = 0; k < 9; k++)
                  i.probe[k].addScaledVector(U.sh.coefficients[k], F);
              else if (U.isDirectionalLight) {
                const k = t.get(U);
                if (
                  (k.color.copy(U.color).multiplyScalar(U.intensity * M),
                  U.castShadow)
                ) {
                  const P = U.shadow,
                    E = r.get(U);
                  (E.shadowBias = P.bias),
                    (E.shadowNormalBias = P.normalBias),
                    (E.shadowRadius = P.radius),
                    (E.shadowMapSize = P.mapSize),
                    (i.directionalShadow[f] = E),
                    (i.directionalShadowMap[f] = O),
                    (i.directionalShadowMatrix[f] = U.shadow.matrix),
                    m++;
                }
                (i.directional[f] = k), f++;
              } else if (U.isSpotLight) {
                const k = t.get(U);
                k.position.setFromMatrixPosition(U.matrixWorld),
                  k.color.copy(I).multiplyScalar(F * M),
                  (k.distance = T),
                  (k.coneCos = Math.cos(U.angle)),
                  (k.penumbraCos = Math.cos(U.angle * (1 - U.penumbra))),
                  (k.decay = U.decay),
                  (i.spot[p] = k);
                const P = U.shadow;
                if (
                  (U.map &&
                    ((i.spotLightMap[b] = U.map),
                    b++,
                    P.updateMatrices(U),
                    U.castShadow && w++),
                  (i.spotLightMatrix[p] = P.matrix),
                  U.castShadow)
                ) {
                  const E = r.get(U);
                  (E.shadowBias = P.bias),
                    (E.shadowNormalBias = P.normalBias),
                    (E.shadowRadius = P.radius),
                    (E.shadowMapSize = P.mapSize),
                    (i.spotShadow[p] = E),
                    (i.spotShadowMap[p] = O),
                    _++;
                }
                p++;
              } else if (U.isRectAreaLight) {
                const k = t.get(U);
                k.color.copy(I).multiplyScalar(F),
                  k.halfWidth.set(0.5 * U.width, 0, 0),
                  k.halfHeight.set(0, 0.5 * U.height, 0),
                  (i.rectArea[y] = k),
                  y++;
              } else if (U.isPointLight) {
                const k = t.get(U);
                if (
                  (k.color.copy(U.color).multiplyScalar(U.intensity * M),
                  (k.distance = U.distance),
                  (k.decay = U.decay),
                  U.castShadow)
                ) {
                  const P = U.shadow,
                    E = r.get(U);
                  (E.shadowBias = P.bias),
                    (E.shadowNormalBias = P.normalBias),
                    (E.shadowRadius = P.radius),
                    (E.shadowMapSize = P.mapSize),
                    (E.shadowCameraNear = P.camera.near),
                    (E.shadowCameraFar = P.camera.far),
                    (i.pointShadow[g] = E),
                    (i.pointShadowMap[g] = O),
                    (i.pointShadowMatrix[g] = U.shadow.matrix),
                    x++;
                }
                (i.point[g] = k), g++;
              } else if (U.isHemisphereLight) {
                const k = t.get(U);
                k.skyColor.copy(U.color).multiplyScalar(F * M),
                  k.groundColor.copy(U.groundColor).multiplyScalar(F * M),
                  (i.hemi[v] = k),
                  v++;
              }
            }
            y > 0 &&
              (e.isWebGL2 || n.has("OES_texture_float_linear") === !0
                ? ((i.rectAreaLTC1 = ve.LTC_FLOAT_1),
                  (i.rectAreaLTC2 = ve.LTC_FLOAT_2))
                : n.has("OES_texture_half_float_linear") === !0
                ? ((i.rectAreaLTC1 = ve.LTC_HALF_1),
                  (i.rectAreaLTC2 = ve.LTC_HALF_2))
                : console.error(
                    "THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions."
                  )),
              (i.ambient[0] = c),
              (i.ambient[1] = h),
              (i.ambient[2] = d);
            const C = i.hash;
            (C.directionalLength === f &&
              C.pointLength === g &&
              C.spotLength === p &&
              C.rectAreaLength === y &&
              C.hemiLength === v &&
              C.numDirectionalShadows === m &&
              C.numPointShadows === x &&
              C.numSpotShadows === _ &&
              C.numSpotMaps === b) ||
              ((i.directional.length = f),
              (i.spot.length = p),
              (i.rectArea.length = y),
              (i.point.length = g),
              (i.hemi.length = v),
              (i.directionalShadow.length = m),
              (i.directionalShadowMap.length = m),
              (i.pointShadow.length = x),
              (i.pointShadowMap.length = x),
              (i.spotShadow.length = _),
              (i.spotShadowMap.length = _),
              (i.directionalShadowMatrix.length = m),
              (i.pointShadowMatrix.length = x),
              (i.spotLightMatrix.length = _ + b - w),
              (i.spotLightMap.length = b),
              (i.numSpotLightShadowsWithMaps = w),
              (C.directionalLength = f),
              (C.pointLength = g),
              (C.spotLength = p),
              (C.rectAreaLength = y),
              (C.hemiLength = v),
              (C.numDirectionalShadows = m),
              (C.numPointShadows = x),
              (C.numSpotShadows = _),
              (C.numSpotMaps = b),
              (i.version = DM++));
          },
          setupView: function (l, u) {
            let c = 0,
              h = 0,
              d = 0,
              f = 0,
              g = 0;
            const p = u.matrixWorldInverse;
            for (let y = 0, v = l.length; y < v; y++) {
              const m = l[y];
              if (m.isDirectionalLight) {
                const x = i.directional[c];
                x.direction.setFromMatrixPosition(m.matrixWorld),
                  a.setFromMatrixPosition(m.target.matrixWorld),
                  x.direction.sub(a),
                  x.direction.transformDirection(p),
                  c++;
              } else if (m.isSpotLight) {
                const x = i.spot[d];
                x.position.setFromMatrixPosition(m.matrixWorld),
                  x.position.applyMatrix4(p),
                  x.direction.setFromMatrixPosition(m.matrixWorld),
                  a.setFromMatrixPosition(m.target.matrixWorld),
                  x.direction.sub(a),
                  x.direction.transformDirection(p),
                  d++;
              } else if (m.isRectAreaLight) {
                const x = i.rectArea[f];
                x.position.setFromMatrixPosition(m.matrixWorld),
                  x.position.applyMatrix4(p),
                  o.identity(),
                  s.copy(m.matrixWorld),
                  s.premultiply(p),
                  o.extractRotation(s),
                  x.halfWidth.set(0.5 * m.width, 0, 0),
                  x.halfHeight.set(0, 0.5 * m.height, 0),
                  x.halfWidth.applyMatrix4(o),
                  x.halfHeight.applyMatrix4(o),
                  f++;
              } else if (m.isPointLight) {
                const x = i.point[h];
                x.position.setFromMatrixPosition(m.matrixWorld),
                  x.position.applyMatrix4(p),
                  h++;
              } else if (m.isHemisphereLight) {
                const x = i.hemi[g];
                x.direction.setFromMatrixPosition(m.matrixWorld),
                  x.direction.transformDirection(p),
                  g++;
              }
            }
          },
          state: i,
        };
      }
      function Bv(n, e) {
        const t = new IM(n, e),
          r = [],
          i = [];
        return {
          init: function () {
            (r.length = 0), (i.length = 0);
          },
          state: { lightsArray: r, shadowsArray: i, lights: t },
          setupLights: function (a) {
            t.setup(r, a);
          },
          setupLightsView: function (a) {
            t.setupView(r, a);
          },
          pushLight: function (a) {
            r.push(a);
          },
          pushShadow: function (a) {
            i.push(a);
          },
        };
      }
      function UM(n, e) {
        let t = new WeakMap();
        return {
          get: function (r, i = 0) {
            const a = t.get(r);
            let s;
            return (
              a === void 0
                ? ((s = new Bv(n, e)), t.set(r, [s]))
                : i >= a.length
                ? ((s = new Bv(n, e)), a.push(s))
                : (s = a[i]),
              s
            );
          },
          dispose: function () {
            t = new WeakMap();
          },
        };
      }
      class T_ extends dr {
        constructor(e) {
          super(),
            (this.isMeshDepthMaterial = !0),
            (this.type = "MeshDepthMaterial"),
            (this.depthPacking = 3200),
            (this.map = null),
            (this.alphaMap = null),
            (this.displacementMap = null),
            (this.displacementScale = 1),
            (this.displacementBias = 0),
            (this.wireframe = !1),
            (this.wireframeLinewidth = 1),
            this.setValues(e);
        }
        copy(e) {
          return (
            super.copy(e),
            (this.depthPacking = e.depthPacking),
            (this.map = e.map),
            (this.alphaMap = e.alphaMap),
            (this.displacementMap = e.displacementMap),
            (this.displacementScale = e.displacementScale),
            (this.displacementBias = e.displacementBias),
            (this.wireframe = e.wireframe),
            (this.wireframeLinewidth = e.wireframeLinewidth),
            this
          );
        }
      }
      class E_ extends dr {
        constructor(e) {
          super(),
            (this.isMeshDistanceMaterial = !0),
            (this.type = "MeshDistanceMaterial"),
            (this.referencePosition = new j()),
            (this.nearDistance = 1),
            (this.farDistance = 1e3),
            (this.map = null),
            (this.alphaMap = null),
            (this.displacementMap = null),
            (this.displacementScale = 1),
            (this.displacementBias = 0),
            this.setValues(e);
        }
        copy(e) {
          return (
            super.copy(e),
            this.referencePosition.copy(e.referencePosition),
            (this.nearDistance = e.nearDistance),
            (this.farDistance = e.farDistance),
            (this.map = e.map),
            (this.alphaMap = e.alphaMap),
            (this.displacementMap = e.displacementMap),
            (this.displacementScale = e.displacementScale),
            (this.displacementBias = e.displacementBias),
            this
          );
        }
      }
      function OM(n, e, t) {
        let r = new $m();
        const i = new ge(),
          a = new ge(),
          s = new Be(),
          o = new T_({ depthPacking: 3201 }),
          l = new E_(),
          u = {},
          c = t.maxTextureSize,
          h = { 0: 1, 1: 0, 2: 2 },
          d = new hn({
            defines: { VSM_SAMPLES: 8 },
            uniforms: {
              shadow_pass: { value: null },
              resolution: { value: new ge() },
              radius: { value: 4 },
            },
            vertexShader: `void main() {
	gl_Position = vec4( position, 1.0 );
}`,
            fragmentShader: `uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,
          }),
          f = d.clone();
        f.defines.HORIZONTAL_PASS = 1;
        const g = new Lt();
        g.setAttribute(
          "position",
          new un(new Float32Array([-1, -1, 0.5, 3, -1, 0.5, -1, 3, 0.5]), 3)
        );
        const p = new xt(g, d),
          y = this;
        function v(_, b) {
          const w = e.update(p);
          d.defines.VSM_SAMPLES !== _.blurSamples &&
            ((d.defines.VSM_SAMPLES = _.blurSamples),
            (f.defines.VSM_SAMPLES = _.blurSamples),
            (d.needsUpdate = !0),
            (f.needsUpdate = !0)),
            _.mapPass === null && (_.mapPass = new Jt(i.x, i.y)),
            (d.uniforms.shadow_pass.value = _.map.texture),
            (d.uniforms.resolution.value = _.mapSize),
            (d.uniforms.radius.value = _.radius),
            n.setRenderTarget(_.mapPass),
            n.clear(),
            n.renderBufferDirect(b, null, w, d, p, null),
            (f.uniforms.shadow_pass.value = _.mapPass.texture),
            (f.uniforms.resolution.value = _.mapSize),
            (f.uniforms.radius.value = _.radius),
            n.setRenderTarget(_.map),
            n.clear(),
            n.renderBufferDirect(b, null, w, f, p, null);
        }
        function m(_, b, w, M, C, N) {
          let G = null;
          const U =
            w.isPointLight === !0
              ? _.customDistanceMaterial
              : _.customDepthMaterial;
          if (
            ((G = U !== void 0 ? U : w.isPointLight === !0 ? l : o),
            (n.localClippingEnabled &&
              b.clipShadows === !0 &&
              Array.isArray(b.clippingPlanes) &&
              b.clippingPlanes.length !== 0) ||
              (b.displacementMap && b.displacementScale !== 0) ||
              (b.alphaMap && b.alphaTest > 0))
          ) {
            const I = G.uuid,
              F = b.uuid;
            let T = u[I];
            T === void 0 && ((T = {}), (u[I] = T));
            let O = T[F];
            O === void 0 && ((O = G.clone()), (T[F] = O)), (G = O);
          }
          return (
            (G.visible = b.visible),
            (G.wireframe = b.wireframe),
            (G.side =
              N === 3
                ? b.shadowSide !== null
                  ? b.shadowSide
                  : b.side
                : b.shadowSide !== null
                ? b.shadowSide
                : h[b.side]),
            (G.alphaMap = b.alphaMap),
            (G.alphaTest = b.alphaTest),
            (G.clipShadows = b.clipShadows),
            (G.clippingPlanes = b.clippingPlanes),
            (G.clipIntersection = b.clipIntersection),
            (G.displacementMap = b.displacementMap),
            (G.displacementScale = b.displacementScale),
            (G.displacementBias = b.displacementBias),
            (G.wireframeLinewidth = b.wireframeLinewidth),
            (G.linewidth = b.linewidth),
            w.isPointLight === !0 &&
              G.isMeshDistanceMaterial === !0 &&
              (G.referencePosition.setFromMatrixPosition(w.matrixWorld),
              (G.nearDistance = M),
              (G.farDistance = C)),
            G
          );
        }
        function x(_, b, w, M, C) {
          if (_.visible === !1) return;
          if (
            _.layers.test(b.layers) &&
            (_.isMesh || _.isLine || _.isPoints) &&
            (_.castShadow || (_.receiveShadow && C === 3)) &&
            (!_.frustumCulled || r.intersectsObject(_))
          ) {
            _.modelViewMatrix.multiplyMatrices(
              w.matrixWorldInverse,
              _.matrixWorld
            );
            const G = e.update(_),
              U = _.material;
            if (Array.isArray(U)) {
              const I = G.groups;
              for (let F = 0, T = I.length; F < T; F++) {
                const O = I[F],
                  k = U[O.materialIndex];
                if (k && k.visible) {
                  const P = m(_, k, M, w.near, w.far, C);
                  n.renderBufferDirect(w, null, G, P, _, O);
                }
              }
            } else if (U.visible) {
              const I = m(_, U, M, w.near, w.far, C);
              n.renderBufferDirect(w, null, G, I, _, null);
            }
          }
          const N = _.children;
          for (let G = 0, U = N.length; G < U; G++) x(N[G], b, w, M, C);
        }
        (this.enabled = !1),
          (this.autoUpdate = !0),
          (this.needsUpdate = !1),
          (this.type = 1),
          (this.render = function (_, b, w) {
            if (
              y.enabled === !1 ||
              (y.autoUpdate === !1 && y.needsUpdate === !1) ||
              _.length === 0
            )
              return;
            const M = n.getRenderTarget(),
              C = n.getActiveCubeFace(),
              N = n.getActiveMipmapLevel(),
              G = n.state;
            G.setBlending(0),
              G.buffers.color.setClear(1, 1, 1, 1),
              G.buffers.depth.setTest(!0),
              G.setScissorTest(!1);
            for (let U = 0, I = _.length; U < I; U++) {
              const F = _[U],
                T = F.shadow;
              if (T === void 0) {
                console.warn("THREE.WebGLShadowMap:", F, "has no shadow.");
                continue;
              }
              if (T.autoUpdate === !1 && T.needsUpdate === !1) continue;
              i.copy(T.mapSize);
              const O = T.getFrameExtents();
              if (
                (i.multiply(O),
                a.copy(T.mapSize),
                (i.x > c || i.y > c) &&
                  (i.x > c &&
                    ((a.x = Math.floor(c / O.x)),
                    (i.x = a.x * O.x),
                    (T.mapSize.x = a.x)),
                  i.y > c &&
                    ((a.y = Math.floor(c / O.y)),
                    (i.y = a.y * O.y),
                    (T.mapSize.y = a.y))),
                T.map === null)
              ) {
                const P =
                  this.type !== 3 ? { minFilter: 1003, magFilter: 1003 } : {};
                (T.map = new Jt(i.x, i.y, P)),
                  (T.map.texture.name = F.name + ".shadowMap"),
                  T.camera.updateProjectionMatrix();
              }
              n.setRenderTarget(T.map), n.clear();
              const k = T.getViewportCount();
              for (let P = 0; P < k; P++) {
                const E = T.getViewport(P);
                s.set(a.x * E.x, a.y * E.y, a.x * E.z, a.y * E.w),
                  G.viewport(s),
                  T.updateMatrices(F, P),
                  (r = T.getFrustum()),
                  x(b, w, T.camera, F, this.type);
              }
              T.isPointLightShadow !== !0 && this.type === 3 && v(T, w),
                (T.needsUpdate = !1);
            }
            (y.needsUpdate = !1), n.setRenderTarget(M, C, N);
          });
      }
      function zM(n, e, t) {
        const r = t.isWebGL2,
          i = new (function () {
            let S = !1;
            const H = new Be();
            let $ = null;
            const J = new Be(0, 0, 0, 0);
            return {
              setMask: function (te) {
                $ === te || S || (n.colorMask(te, te, te, te), ($ = te));
              },
              setLocked: function (te) {
                S = te;
              },
              setClear: function (te, ne, de, ue, ce) {
                ce === !0 && ((te *= ue), (ne *= ue), (de *= ue)),
                  H.set(te, ne, de, ue),
                  J.equals(H) === !1 &&
                    (n.clearColor(te, ne, de, ue), J.copy(H));
              },
              reset: function () {
                (S = !1), ($ = null), J.set(-1, 0, 0, 0);
              },
            };
          })(),
          a = new (function () {
            let S = !1,
              H = null,
              $ = null,
              J = null;
            return {
              setTest: function (te) {
                te ? B(2929) : Y(2929);
              },
              setMask: function (te) {
                H === te || S || (n.depthMask(te), (H = te));
              },
              setFunc: function (te) {
                if ($ !== te) {
                  if (te)
                    switch (te) {
                      case 0:
                        n.depthFunc(512);
                        break;
                      case 1:
                        n.depthFunc(519);
                        break;
                      case 2:
                        n.depthFunc(513);
                        break;
                      case 3:
                      default:
                        n.depthFunc(515);
                        break;
                      case 4:
                        n.depthFunc(514);
                        break;
                      case 5:
                        n.depthFunc(518);
                        break;
                      case 6:
                        n.depthFunc(516);
                        break;
                      case 7:
                        n.depthFunc(517);
                    }
                  else n.depthFunc(515);
                  $ = te;
                }
              },
              setLocked: function (te) {
                S = te;
              },
              setClear: function (te) {
                J !== te && (n.clearDepth(te), (J = te));
              },
              reset: function () {
                (S = !1), (H = null), ($ = null), (J = null);
              },
            };
          })(),
          s = new (function () {
            let S = !1,
              H = null,
              $ = null,
              J = null,
              te = null,
              ne = null,
              de = null,
              ue = null,
              ce = null;
            return {
              setTest: function (he) {
                S || (he ? B(2960) : Y(2960));
              },
              setMask: function (he) {
                H === he || S || (n.stencilMask(he), (H = he));
              },
              setFunc: function (he, oe, xe) {
                ($ === he && J === oe && te === xe) ||
                  (n.stencilFunc(he, oe, xe), ($ = he), (J = oe), (te = xe));
              },
              setOp: function (he, oe, xe) {
                (ne === he && de === oe && ue === xe) ||
                  (n.stencilOp(he, oe, xe), (ne = he), (de = oe), (ue = xe));
              },
              setLocked: function (he) {
                S = he;
              },
              setClear: function (he) {
                ce !== he && (n.clearStencil(he), (ce = he));
              },
              reset: function () {
                (S = !1),
                  (H = null),
                  ($ = null),
                  (J = null),
                  (te = null),
                  (ne = null),
                  (de = null),
                  (ue = null),
                  (ce = null);
              },
            };
          })(),
          o = new WeakMap(),
          l = new WeakMap();
        let u = {},
          c = {},
          h = new WeakMap(),
          d = [],
          f = null,
          g = !1,
          p = null,
          y = null,
          v = null,
          m = null,
          x = null,
          _ = null,
          b = null,
          w = !1,
          M = null,
          C = null,
          N = null,
          G = null,
          U = null;
        const I = n.getParameter(35661);
        let F = !1,
          T = 0;
        const O = n.getParameter(7938);
        O.indexOf("WebGL") !== -1
          ? ((T = parseFloat(/^WebGL (\d)/.exec(O)[1])), (F = T >= 1))
          : O.indexOf("OpenGL ES") !== -1 &&
            ((T = parseFloat(/^OpenGL ES (\d)/.exec(O)[1])), (F = T >= 2));
        let k = null,
          P = {};
        const E = n.getParameter(3088),
          z = n.getParameter(2978),
          A = new Be().fromArray(E),
          D = new Be().fromArray(z);
        function V(S, H, $) {
          const J = new Uint8Array(4),
            te = n.createTexture();
          n.bindTexture(S, te),
            n.texParameteri(S, 10241, 9728),
            n.texParameteri(S, 10240, 9728);
          for (let ne = 0; ne < $; ne++)
            n.texImage2D(H + ne, 0, 6408, 1, 1, 0, 6408, 5121, J);
          return te;
        }
        const K = {};
        function B(S) {
          u[S] !== !0 && (n.enable(S), (u[S] = !0));
        }
        function Y(S) {
          u[S] !== !1 && (n.disable(S), (u[S] = !1));
        }
        (K[3553] = V(3553, 3553, 1)),
          (K[34067] = V(34067, 34069, 6)),
          i.setClear(0, 0, 0, 1),
          a.setClear(1),
          s.setClear(0),
          B(2929),
          a.setFunc(3),
          re(!1),
          q(1),
          B(2884),
          Z(0);
        const R = { 100: 32774, 101: 32778, 102: 32779 };
        if (r) (R[103] = 32775), (R[104] = 32776);
        else {
          const S = e.get("EXT_blend_minmax");
          S !== null && ((R[103] = S.MIN_EXT), (R[104] = S.MAX_EXT));
        }
        const L = {
          200: 0,
          201: 1,
          202: 768,
          204: 770,
          210: 776,
          208: 774,
          206: 772,
          203: 769,
          205: 771,
          209: 775,
          207: 773,
        };
        function Z(S, H, $, J, te, ne, de, ue) {
          if (S !== 0) {
            if ((g === !1 && (B(3042), (g = !0)), S === 5))
              (te = te || H),
                (ne = ne || $),
                (de = de || J),
                (H === y && te === x) ||
                  (n.blendEquationSeparate(R[H], R[te]), (y = H), (x = te)),
                ($ === v && J === m && ne === _ && de === b) ||
                  (n.blendFuncSeparate(L[$], L[J], L[ne], L[de]),
                  (v = $),
                  (m = J),
                  (_ = ne),
                  (b = de)),
                (p = S),
                (w = null);
            else if (S !== p || ue !== w) {
              if (
                ((y === 100 && x === 100) ||
                  (n.blendEquation(32774), (y = 100), (x = 100)),
                ue)
              )
                switch (S) {
                  case 1:
                    n.blendFuncSeparate(1, 771, 1, 771);
                    break;
                  case 2:
                    n.blendFunc(1, 1);
                    break;
                  case 3:
                    n.blendFuncSeparate(0, 769, 0, 1);
                    break;
                  case 4:
                    n.blendFuncSeparate(0, 768, 0, 770);
                    break;
                  default:
                    console.error("THREE.WebGLState: Invalid blending: ", S);
                }
              else
                switch (S) {
                  case 1:
                    n.blendFuncSeparate(770, 771, 1, 771);
                    break;
                  case 2:
                    n.blendFunc(770, 1);
                    break;
                  case 3:
                    n.blendFuncSeparate(0, 769, 0, 1);
                    break;
                  case 4:
                    n.blendFunc(0, 768);
                    break;
                  default:
                    console.error("THREE.WebGLState: Invalid blending: ", S);
                }
              (v = null), (m = null), (_ = null), (b = null), (p = S), (w = ue);
            }
          } else g === !0 && (Y(3042), (g = !1));
        }
        function re(S) {
          M !== S && (S ? n.frontFace(2304) : n.frontFace(2305), (M = S));
        }
        function q(S) {
          S !== 0
            ? (B(2884),
              S !== C &&
                (S === 1
                  ? n.cullFace(1029)
                  : S === 2
                  ? n.cullFace(1028)
                  : n.cullFace(1032)))
            : Y(2884),
            (C = S);
        }
        function Q(S, H, $) {
          S
            ? (B(32823),
              (G === H && U === $) || (n.polygonOffset(H, $), (G = H), (U = $)))
            : Y(32823);
        }
        function ee(S) {
          S === void 0 && (S = 33984 + I - 1),
            k !== S && (n.activeTexture(S), (k = S));
        }
        return {
          buffers: { color: i, depth: a, stencil: s },
          enable: B,
          disable: Y,
          bindFramebuffer: function (S, H) {
            return (
              c[S] !== H &&
              (n.bindFramebuffer(S, H),
              (c[S] = H),
              r &&
                (S === 36009 && (c[36160] = H), S === 36160 && (c[36009] = H)),
              !0)
            );
          },
          drawBuffers: function (S, H) {
            let $ = d,
              J = !1;
            if (S)
              if (
                (($ = h.get(H)),
                $ === void 0 && (($ = []), h.set(H, $)),
                S.isWebGLMultipleRenderTargets)
              ) {
                const te = S.texture;
                if ($.length !== te.length || $[0] !== 36064) {
                  for (let ne = 0, de = te.length; ne < de; ne++)
                    $[ne] = 36064 + ne;
                  ($.length = te.length), (J = !0);
                }
              } else $[0] !== 36064 && (($[0] = 36064), (J = !0));
            else $[0] !== 1029 && (($[0] = 1029), (J = !0));
            J &&
              (t.isWebGL2
                ? n.drawBuffers($)
                : e.get("WEBGL_draw_buffers").drawBuffersWEBGL($));
          },
          useProgram: function (S) {
            return f !== S && (n.useProgram(S), (f = S), !0);
          },
          setBlending: Z,
          setMaterial: function (S, H) {
            S.side === 2 ? Y(2884) : B(2884);
            let $ = S.side === 1;
            H && ($ = !$),
              re($),
              S.blending === 1 && S.transparent === !1
                ? Z(0)
                : Z(
                    S.blending,
                    S.blendEquation,
                    S.blendSrc,
                    S.blendDst,
                    S.blendEquationAlpha,
                    S.blendSrcAlpha,
                    S.blendDstAlpha,
                    S.premultipliedAlpha
                  ),
              a.setFunc(S.depthFunc),
              a.setTest(S.depthTest),
              a.setMask(S.depthWrite),
              i.setMask(S.colorWrite);
            const J = S.stencilWrite;
            s.setTest(J),
              J &&
                (s.setMask(S.stencilWriteMask),
                s.setFunc(S.stencilFunc, S.stencilRef, S.stencilFuncMask),
                s.setOp(S.stencilFail, S.stencilZFail, S.stencilZPass)),
              Q(S.polygonOffset, S.polygonOffsetFactor, S.polygonOffsetUnits),
              S.alphaToCoverage === !0 ? B(32926) : Y(32926);
          },
          setFlipSided: re,
          setCullFace: q,
          setLineWidth: function (S) {
            S !== N && (F && n.lineWidth(S), (N = S));
          },
          setPolygonOffset: Q,
          setScissorTest: function (S) {
            S ? B(3089) : Y(3089);
          },
          activeTexture: ee,
          bindTexture: function (S, H) {
            k === null && ee();
            let $ = P[k];
            $ === void 0 &&
              (($ = { type: void 0, texture: void 0 }), (P[k] = $)),
              ($.type === S && $.texture === H) ||
                (n.bindTexture(S, H || K[S]), ($.type = S), ($.texture = H));
          },
          unbindTexture: function () {
            const S = P[k];
            S !== void 0 &&
              S.type !== void 0 &&
              (n.bindTexture(S.type, null),
              (S.type = void 0),
              (S.texture = void 0));
          },
          compressedTexImage2D: function () {
            try {
              n.compressedTexImage2D.apply(n, arguments);
            } catch (S) {
              console.error("THREE.WebGLState:", S);
            }
          },
          texImage2D: function () {
            try {
              n.texImage2D.apply(n, arguments);
            } catch (S) {
              console.error("THREE.WebGLState:", S);
            }
          },
          texImage3D: function () {
            try {
              n.texImage3D.apply(n, arguments);
            } catch (S) {
              console.error("THREE.WebGLState:", S);
            }
          },
          updateUBOMapping: function (S, H) {
            let $ = l.get(H);
            $ === void 0 && (($ = new WeakMap()), l.set(H, $));
            let J = $.get(S);
            J === void 0 &&
              ((J = n.getUniformBlockIndex(H, S.name)), $.set(S, J));
          },
          uniformBlockBinding: function (S, H) {
            const $ = l.get(H).get(S);
            o.get(S) !== $ &&
              (n.uniformBlockBinding(H, $, S.__bindingPointIndex), o.set(S, $));
          },
          texStorage2D: function () {
            try {
              n.texStorage2D.apply(n, arguments);
            } catch (S) {
              console.error("THREE.WebGLState:", S);
            }
          },
          texStorage3D: function () {
            try {
              n.texStorage3D.apply(n, arguments);
            } catch (S) {
              console.error("THREE.WebGLState:", S);
            }
          },
          texSubImage2D: function () {
            try {
              n.texSubImage2D.apply(n, arguments);
            } catch (S) {
              console.error("THREE.WebGLState:", S);
            }
          },
          texSubImage3D: function () {
            try {
              n.texSubImage3D.apply(n, arguments);
            } catch (S) {
              console.error("THREE.WebGLState:", S);
            }
          },
          compressedTexSubImage2D: function () {
            try {
              n.compressedTexSubImage2D.apply(n, arguments);
            } catch (S) {
              console.error("THREE.WebGLState:", S);
            }
          },
          scissor: function (S) {
            A.equals(S) === !1 && (n.scissor(S.x, S.y, S.z, S.w), A.copy(S));
          },
          viewport: function (S) {
            D.equals(S) === !1 && (n.viewport(S.x, S.y, S.z, S.w), D.copy(S));
          },
          reset: function () {
            n.disable(3042),
              n.disable(2884),
              n.disable(2929),
              n.disable(32823),
              n.disable(3089),
              n.disable(2960),
              n.disable(32926),
              n.blendEquation(32774),
              n.blendFunc(1, 0),
              n.blendFuncSeparate(1, 0, 1, 0),
              n.colorMask(!0, !0, !0, !0),
              n.clearColor(0, 0, 0, 0),
              n.depthMask(!0),
              n.depthFunc(513),
              n.clearDepth(1),
              n.stencilMask(4294967295),
              n.stencilFunc(519, 0, 4294967295),
              n.stencilOp(7680, 7680, 7680),
              n.clearStencil(0),
              n.cullFace(1029),
              n.frontFace(2305),
              n.polygonOffset(0, 0),
              n.activeTexture(33984),
              n.bindFramebuffer(36160, null),
              r === !0 &&
                (n.bindFramebuffer(36009, null),
                n.bindFramebuffer(36008, null)),
              n.useProgram(null),
              n.lineWidth(1),
              n.scissor(0, 0, n.canvas.width, n.canvas.height),
              n.viewport(0, 0, n.canvas.width, n.canvas.height),
              (u = {}),
              (k = null),
              (P = {}),
              (c = {}),
              (h = new WeakMap()),
              (d = []),
              (f = null),
              (g = !1),
              (p = null),
              (y = null),
              (v = null),
              (m = null),
              (x = null),
              (_ = null),
              (b = null),
              (w = !1),
              (M = null),
              (C = null),
              (N = null),
              (G = null),
              (U = null),
              A.set(0, 0, n.canvas.width, n.canvas.height),
              D.set(0, 0, n.canvas.width, n.canvas.height),
              i.reset(),
              a.reset(),
              s.reset();
          },
        };
      }
      function NM(n, e, t, r, i, a, s) {
        const o = i.isWebGL2,
          l = i.maxTextures,
          u = i.maxCubemapSize,
          c = i.maxTextureSize,
          h = i.maxSamples,
          d = e.has("WEBGL_multisampled_render_to_texture")
            ? e.get("WEBGL_multisampled_render_to_texture")
            : null,
          f = /OculusBrowser/g.test(navigator.userAgent),
          g = new WeakMap();
        let p;
        const y = new WeakMap();
        let v = !1;
        try {
          v =
            typeof OffscreenCanvas < "u" &&
            new OffscreenCanvas(1, 1).getContext("2d") !== null;
        } catch {}
        function m(R, L) {
          return v ? new OffscreenCanvas(R, L) : kl("canvas");
        }
        function x(R, L, Z, re) {
          let q = 1;
          if (
            ((R.width > re || R.height > re) &&
              (q = re / Math.max(R.width, R.height)),
            q < 1 || L === !0)
          ) {
            if (
              (typeof HTMLImageElement < "u" &&
                R instanceof HTMLImageElement) ||
              (typeof HTMLCanvasElement < "u" &&
                R instanceof HTMLCanvasElement) ||
              (typeof ImageBitmap < "u" && R instanceof ImageBitmap)
            ) {
              const Q = L ? uh : Math.floor,
                ee = Q(q * R.width),
                S = Q(q * R.height);
              p === void 0 && (p = m(ee, S));
              const H = Z ? m(ee, S) : p;
              return (
                (H.width = ee),
                (H.height = S),
                H.getContext("2d").drawImage(R, 0, 0, ee, S),
                console.warn(
                  "THREE.WebGLRenderer: Texture has been resized from (" +
                    R.width +
                    "x" +
                    R.height +
                    ") to (" +
                    ee +
                    "x" +
                    S +
                    ")."
                ),
                H
              );
            }
            return (
              "data" in R &&
                console.warn(
                  "THREE.WebGLRenderer: Image in DataTexture is too big (" +
                    R.width +
                    "x" +
                    R.height +
                    ")."
                ),
              R
            );
          }
          return R;
        }
        function _(R) {
          return wp(R.width) && wp(R.height);
        }
        function b(R, L) {
          return (
            R.generateMipmaps &&
            L &&
            R.minFilter !== 1003 &&
            R.minFilter !== 1006
          );
        }
        function w(R) {
          n.generateMipmap(R);
        }
        function M(R, L, Z, re, q = !1) {
          if (o === !1) return L;
          if (R !== null) {
            if (n[R] !== void 0) return n[R];
            console.warn(
              "THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '" +
                R +
                "'"
            );
          }
          let Q = L;
          return (
            L === 6403 &&
              (Z === 5126 && (Q = 33326),
              Z === 5131 && (Q = 33325),
              Z === 5121 && (Q = 33321)),
            L === 33319 &&
              (Z === 5126 && (Q = 33328),
              Z === 5131 && (Q = 33327),
              Z === 5121 && (Q = 33323)),
            L === 6408 &&
              (Z === 5126 && (Q = 34836),
              Z === 5131 && (Q = 34842),
              Z === 5121 && (Q = re === 3001 && q === !1 ? 35907 : 32856),
              Z === 32819 && (Q = 32854),
              Z === 32820 && (Q = 32855)),
            (Q !== 33325 &&
              Q !== 33326 &&
              Q !== 33327 &&
              Q !== 33328 &&
              Q !== 34842 &&
              Q !== 34836) ||
              e.get("EXT_color_buffer_float"),
            Q
          );
        }
        function C(R, L, Z) {
          return b(R, Z) === !0 ||
            (R.isFramebufferTexture &&
              R.minFilter !== 1003 &&
              R.minFilter !== 1006)
            ? Math.log2(Math.max(L.width, L.height)) + 1
            : R.mipmaps !== void 0 && R.mipmaps.length > 0
            ? R.mipmaps.length
            : R.isCompressedTexture && Array.isArray(R.image)
            ? L.mipmaps.length
            : 1;
        }
        function N(R) {
          return R === 1003 || R === 1004 || R === 1005 ? 9728 : 9729;
        }
        function G(R) {
          const L = R.target;
          L.removeEventListener("dispose", G),
            (function (Z) {
              const re = r.get(Z);
              if (re.__webglInit === void 0) return;
              const q = Z.source,
                Q = y.get(q);
              if (Q) {
                const ee = Q[re.__cacheKey];
                ee.usedTimes--,
                  ee.usedTimes === 0 && I(Z),
                  Object.keys(Q).length === 0 && y.delete(q);
              }
              r.remove(Z);
            })(L),
            L.isVideoTexture && g.delete(L);
        }
        function U(R) {
          const L = R.target;
          L.removeEventListener("dispose", U),
            (function (Z) {
              const re = Z.texture,
                q = r.get(Z),
                Q = r.get(re);
              if (
                (Q.__webglTexture !== void 0 &&
                  (n.deleteTexture(Q.__webglTexture), s.memory.textures--),
                Z.depthTexture && Z.depthTexture.dispose(),
                Z.isWebGLCubeRenderTarget)
              )
                for (let ee = 0; ee < 6; ee++)
                  n.deleteFramebuffer(q.__webglFramebuffer[ee]),
                    q.__webglDepthbuffer &&
                      n.deleteRenderbuffer(q.__webglDepthbuffer[ee]);
              else {
                if (
                  (n.deleteFramebuffer(q.__webglFramebuffer),
                  q.__webglDepthbuffer &&
                    n.deleteRenderbuffer(q.__webglDepthbuffer),
                  q.__webglMultisampledFramebuffer &&
                    n.deleteFramebuffer(q.__webglMultisampledFramebuffer),
                  q.__webglColorRenderbuffer)
                )
                  for (let ee = 0; ee < q.__webglColorRenderbuffer.length; ee++)
                    q.__webglColorRenderbuffer[ee] &&
                      n.deleteRenderbuffer(q.__webglColorRenderbuffer[ee]);
                q.__webglDepthRenderbuffer &&
                  n.deleteRenderbuffer(q.__webglDepthRenderbuffer);
              }
              if (Z.isWebGLMultipleRenderTargets)
                for (let ee = 0, S = re.length; ee < S; ee++) {
                  const H = r.get(re[ee]);
                  H.__webglTexture &&
                    (n.deleteTexture(H.__webglTexture), s.memory.textures--),
                    r.remove(re[ee]);
                }
              r.remove(re), r.remove(Z);
            })(L);
        }
        function I(R) {
          const L = r.get(R);
          n.deleteTexture(L.__webglTexture);
          const Z = R.source;
          delete y.get(Z)[L.__cacheKey], s.memory.textures--;
        }
        let F = 0;
        function T(R, L) {
          const Z = r.get(R);
          if (
            (R.isVideoTexture &&
              (function (re) {
                const q = s.render.frame;
                g.get(re) !== q && (g.set(re, q), re.update());
              })(R),
            R.isRenderTargetTexture === !1 &&
              R.version > 0 &&
              Z.__version !== R.version)
          ) {
            const re = R.image;
            if (re === null)
              console.warn(
                "THREE.WebGLRenderer: Texture marked for update but no image data found."
              );
            else {
              if (re.complete !== !1) return void z(Z, R, L);
              console.warn(
                "THREE.WebGLRenderer: Texture marked for update but image is incomplete"
              );
            }
          }
          t.activeTexture(33984 + L), t.bindTexture(3553, Z.__webglTexture);
        }
        const O = { 1e3: 10497, 1001: 33071, 1002: 33648 },
          k = {
            1003: 9728,
            1004: 9984,
            1005: 9986,
            1006: 9729,
            1007: 9985,
            1008: 9987,
          };
        function P(R, L, Z) {
          if (
            (Z
              ? (n.texParameteri(R, 10242, O[L.wrapS]),
                n.texParameteri(R, 10243, O[L.wrapT]),
                (R !== 32879 && R !== 35866) ||
                  n.texParameteri(R, 32882, O[L.wrapR]),
                n.texParameteri(R, 10240, k[L.magFilter]),
                n.texParameteri(R, 10241, k[L.minFilter]))
              : (n.texParameteri(R, 10242, 33071),
                n.texParameteri(R, 10243, 33071),
                (R !== 32879 && R !== 35866) ||
                  n.texParameteri(R, 32882, 33071),
                (L.wrapS === 1001 && L.wrapT === 1001) ||
                  console.warn(
                    "THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."
                  ),
                n.texParameteri(R, 10240, N(L.magFilter)),
                n.texParameteri(R, 10241, N(L.minFilter)),
                L.minFilter !== 1003 &&
                  L.minFilter !== 1006 &&
                  console.warn(
                    "THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."
                  )),
            e.has("EXT_texture_filter_anisotropic") === !0)
          ) {
            const re = e.get("EXT_texture_filter_anisotropic");
            if (
              (L.type === 1015 && e.has("OES_texture_float_linear") === !1) ||
              (o === !1 &&
                L.type === 1016 &&
                e.has("OES_texture_half_float_linear") === !1)
            )
              return;
            (L.anisotropy > 1 || r.get(L).__currentAnisotropy) &&
              (n.texParameterf(
                R,
                re.TEXTURE_MAX_ANISOTROPY_EXT,
                Math.min(L.anisotropy, i.getMaxAnisotropy())
              ),
              (r.get(L).__currentAnisotropy = L.anisotropy));
          }
        }
        function E(R, L) {
          let Z = !1;
          R.__webglInit === void 0 &&
            ((R.__webglInit = !0), L.addEventListener("dispose", G));
          const re = L.source;
          let q = y.get(re);
          q === void 0 && ((q = {}), y.set(re, q));
          const Q = (function (ee) {
            const S = [];
            return (
              S.push(ee.wrapS),
              S.push(ee.wrapT),
              S.push(ee.magFilter),
              S.push(ee.minFilter),
              S.push(ee.anisotropy),
              S.push(ee.internalFormat),
              S.push(ee.format),
              S.push(ee.type),
              S.push(ee.generateMipmaps),
              S.push(ee.premultiplyAlpha),
              S.push(ee.flipY),
              S.push(ee.unpackAlignment),
              S.push(ee.encoding),
              S.join()
            );
          })(L);
          if (Q !== R.__cacheKey) {
            q[Q] === void 0 &&
              ((q[Q] = { texture: n.createTexture(), usedTimes: 0 }),
              s.memory.textures++,
              (Z = !0)),
              q[Q].usedTimes++;
            const ee = q[R.__cacheKey];
            ee !== void 0 &&
              (q[R.__cacheKey].usedTimes--, ee.usedTimes === 0 && I(L)),
              (R.__cacheKey = Q),
              (R.__webglTexture = q[Q].texture);
          }
          return Z;
        }
        function z(R, L, Z) {
          let re = 3553;
          L.isDataArrayTexture && (re = 35866),
            L.isData3DTexture && (re = 32879);
          const q = E(R, L),
            Q = L.source;
          if (
            (t.activeTexture(33984 + Z),
            t.bindTexture(re, R.__webglTexture),
            Q.version !== Q.__currentVersion || q === !0)
          ) {
            n.pixelStorei(37440, L.flipY),
              n.pixelStorei(37441, L.premultiplyAlpha),
              n.pixelStorei(3317, L.unpackAlignment),
              n.pixelStorei(37443, 0);
            const ee =
              (function (oe) {
                return (
                  !o &&
                  (oe.wrapS !== 1001 ||
                    oe.wrapT !== 1001 ||
                    (oe.minFilter !== 1003 && oe.minFilter !== 1006))
                );
              })(L) && _(L.image) === !1;
            let S = x(L.image, ee, !1, c);
            S = Y(L, S);
            const H = _(S) || o,
              $ = a.convert(L.format, L.encoding);
            let J,
              te = a.convert(L.type),
              ne = M(L.internalFormat, $, te, L.encoding, L.isVideoTexture);
            P(re, L, H);
            const de = L.mipmaps,
              ue = o && L.isVideoTexture !== !0,
              ce = Q.__currentVersion === void 0 || q === !0,
              he = C(L, S, H);
            if (L.isDepthTexture)
              (ne = 6402),
                o
                  ? (ne =
                      L.type === 1015
                        ? 36012
                        : L.type === 1014
                        ? 33190
                        : L.type === 1020
                        ? 35056
                        : 33189)
                  : L.type === 1015 &&
                    console.error(
                      "WebGLRenderer: Floating point depth texture requires WebGL2."
                    ),
                L.format === 1026 &&
                  ne === 6402 &&
                  L.type !== 1012 &&
                  L.type !== 1014 &&
                  (console.warn(
                    "THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."
                  ),
                  (L.type = 1014),
                  (te = a.convert(L.type))),
                L.format === 1027 &&
                  ne === 6402 &&
                  ((ne = 34041),
                  L.type !== 1020 &&
                    (console.warn(
                      "THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."
                    ),
                    (L.type = 1020),
                    (te = a.convert(L.type)))),
                ce &&
                  (ue
                    ? t.texStorage2D(3553, 1, ne, S.width, S.height)
                    : t.texImage2D(
                        3553,
                        0,
                        ne,
                        S.width,
                        S.height,
                        0,
                        $,
                        te,
                        null
                      ));
            else if (L.isDataTexture)
              if (de.length > 0 && H) {
                ue &&
                  ce &&
                  t.texStorage2D(3553, he, ne, de[0].width, de[0].height);
                for (let oe = 0, xe = de.length; oe < xe; oe++)
                  (J = de[oe]),
                    ue
                      ? t.texSubImage2D(
                          3553,
                          oe,
                          0,
                          0,
                          J.width,
                          J.height,
                          $,
                          te,
                          J.data
                        )
                      : t.texImage2D(
                          3553,
                          oe,
                          ne,
                          J.width,
                          J.height,
                          0,
                          $,
                          te,
                          J.data
                        );
                L.generateMipmaps = !1;
              } else
                ue
                  ? (ce && t.texStorage2D(3553, he, ne, S.width, S.height),
                    t.texSubImage2D(
                      3553,
                      0,
                      0,
                      0,
                      S.width,
                      S.height,
                      $,
                      te,
                      S.data
                    ))
                  : t.texImage2D(
                      3553,
                      0,
                      ne,
                      S.width,
                      S.height,
                      0,
                      $,
                      te,
                      S.data
                    );
            else if (L.isCompressedTexture) {
              ue &&
                ce &&
                t.texStorage2D(3553, he, ne, de[0].width, de[0].height);
              for (let oe = 0, xe = de.length; oe < xe; oe++)
                (J = de[oe]),
                  L.format !== 1023
                    ? $ !== null
                      ? ue
                        ? t.compressedTexSubImage2D(
                            3553,
                            oe,
                            0,
                            0,
                            J.width,
                            J.height,
                            $,
                            J.data
                          )
                        : t.compressedTexImage2D(
                            3553,
                            oe,
                            ne,
                            J.width,
                            J.height,
                            0,
                            J.data
                          )
                      : console.warn(
                          "THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"
                        )
                    : ue
                    ? t.texSubImage2D(
                        3553,
                        oe,
                        0,
                        0,
                        J.width,
                        J.height,
                        $,
                        te,
                        J.data
                      )
                    : t.texImage2D(
                        3553,
                        oe,
                        ne,
                        J.width,
                        J.height,
                        0,
                        $,
                        te,
                        J.data
                      );
            } else if (L.isDataArrayTexture)
              ue
                ? (ce &&
                    t.texStorage3D(35866, he, ne, S.width, S.height, S.depth),
                  t.texSubImage3D(
                    35866,
                    0,
                    0,
                    0,
                    0,
                    S.width,
                    S.height,
                    S.depth,
                    $,
                    te,
                    S.data
                  ))
                : t.texImage3D(
                    35866,
                    0,
                    ne,
                    S.width,
                    S.height,
                    S.depth,
                    0,
                    $,
                    te,
                    S.data
                  );
            else if (L.isData3DTexture)
              ue
                ? (ce &&
                    t.texStorage3D(32879, he, ne, S.width, S.height, S.depth),
                  t.texSubImage3D(
                    32879,
                    0,
                    0,
                    0,
                    0,
                    S.width,
                    S.height,
                    S.depth,
                    $,
                    te,
                    S.data
                  ))
                : t.texImage3D(
                    32879,
                    0,
                    ne,
                    S.width,
                    S.height,
                    S.depth,
                    0,
                    $,
                    te,
                    S.data
                  );
            else if (L.isFramebufferTexture) {
              if (ce)
                if (ue) t.texStorage2D(3553, he, ne, S.width, S.height);
                else {
                  let oe = S.width,
                    xe = S.height;
                  for (let Le = 0; Le < he; Le++)
                    t.texImage2D(3553, Le, ne, oe, xe, 0, $, te, null),
                      (oe >>= 1),
                      (xe >>= 1);
                }
            } else if (de.length > 0 && H) {
              ue &&
                ce &&
                t.texStorage2D(3553, he, ne, de[0].width, de[0].height);
              for (let oe = 0, xe = de.length; oe < xe; oe++)
                (J = de[oe]),
                  ue
                    ? t.texSubImage2D(3553, oe, 0, 0, $, te, J)
                    : t.texImage2D(3553, oe, ne, $, te, J);
              L.generateMipmaps = !1;
            } else
              ue
                ? (ce && t.texStorage2D(3553, he, ne, S.width, S.height),
                  t.texSubImage2D(3553, 0, 0, 0, $, te, S))
                : t.texImage2D(3553, 0, ne, $, te, S);
            b(L, H) && w(re),
              (Q.__currentVersion = Q.version),
              L.onUpdate && L.onUpdate(L);
          }
          R.__version = L.version;
        }
        function A(R, L, Z, re, q) {
          const Q = a.convert(Z.format, Z.encoding),
            ee = a.convert(Z.type),
            S = M(Z.internalFormat, Q, ee, Z.encoding);
          r.get(L).__hasExternalTextures ||
            (q === 32879 || q === 35866
              ? t.texImage3D(
                  q,
                  0,
                  S,
                  L.width,
                  L.height,
                  L.depth,
                  0,
                  Q,
                  ee,
                  null
                )
              : t.texImage2D(q, 0, S, L.width, L.height, 0, Q, ee, null)),
            t.bindFramebuffer(36160, R),
            B(L)
              ? d.framebufferTexture2DMultisampleEXT(
                  36160,
                  re,
                  q,
                  r.get(Z).__webglTexture,
                  0,
                  K(L)
                )
              : n.framebufferTexture2D(
                  36160,
                  re,
                  q,
                  r.get(Z).__webglTexture,
                  0
                ),
            t.bindFramebuffer(36160, null);
        }
        function D(R, L, Z) {
          if (
            (n.bindRenderbuffer(36161, R), L.depthBuffer && !L.stencilBuffer)
          ) {
            let re = 33189;
            if (Z || B(L)) {
              const q = L.depthTexture;
              q &&
                q.isDepthTexture &&
                (q.type === 1015
                  ? (re = 36012)
                  : q.type === 1014 && (re = 33190));
              const Q = K(L);
              B(L)
                ? d.renderbufferStorageMultisampleEXT(
                    36161,
                    Q,
                    re,
                    L.width,
                    L.height
                  )
                : n.renderbufferStorageMultisample(
                    36161,
                    Q,
                    re,
                    L.width,
                    L.height
                  );
            } else n.renderbufferStorage(36161, re, L.width, L.height);
            n.framebufferRenderbuffer(36160, 36096, 36161, R);
          } else if (L.depthBuffer && L.stencilBuffer) {
            const re = K(L);
            Z && B(L) === !1
              ? n.renderbufferStorageMultisample(
                  36161,
                  re,
                  35056,
                  L.width,
                  L.height
                )
              : B(L)
              ? d.renderbufferStorageMultisampleEXT(
                  36161,
                  re,
                  35056,
                  L.width,
                  L.height
                )
              : n.renderbufferStorage(36161, 34041, L.width, L.height),
              n.framebufferRenderbuffer(36160, 33306, 36161, R);
          } else {
            const re =
              L.isWebGLMultipleRenderTargets === !0 ? L.texture : [L.texture];
            for (let q = 0; q < re.length; q++) {
              const Q = re[q],
                ee = a.convert(Q.format, Q.encoding),
                S = a.convert(Q.type),
                H = M(Q.internalFormat, ee, S, Q.encoding),
                $ = K(L);
              Z && B(L) === !1
                ? n.renderbufferStorageMultisample(
                    36161,
                    $,
                    H,
                    L.width,
                    L.height
                  )
                : B(L)
                ? d.renderbufferStorageMultisampleEXT(
                    36161,
                    $,
                    H,
                    L.width,
                    L.height
                  )
                : n.renderbufferStorage(36161, H, L.width, L.height);
            }
          }
          n.bindRenderbuffer(36161, null);
        }
        function V(R) {
          const L = r.get(R),
            Z = R.isWebGLCubeRenderTarget === !0;
          if (R.depthTexture && !L.__autoAllocateDepthBuffer) {
            if (Z)
              throw new Error(
                "target.depthTexture not supported in Cube render targets"
              );
            (function (re, q) {
              if (q && q.isWebGLCubeRenderTarget)
                throw new Error(
                  "Depth Texture with cube render targets is not supported"
                );
              if (
                (t.bindFramebuffer(36160, re),
                !q.depthTexture || !q.depthTexture.isDepthTexture)
              )
                throw new Error(
                  "renderTarget.depthTexture must be an instance of THREE.DepthTexture"
                );
              (r.get(q.depthTexture).__webglTexture &&
                q.depthTexture.image.width === q.width &&
                q.depthTexture.image.height === q.height) ||
                ((q.depthTexture.image.width = q.width),
                (q.depthTexture.image.height = q.height),
                (q.depthTexture.needsUpdate = !0)),
                T(q.depthTexture, 0);
              const Q = r.get(q.depthTexture).__webglTexture,
                ee = K(q);
              if (q.depthTexture.format === 1026)
                B(q)
                  ? d.framebufferTexture2DMultisampleEXT(
                      36160,
                      36096,
                      3553,
                      Q,
                      0,
                      ee
                    )
                  : n.framebufferTexture2D(36160, 36096, 3553, Q, 0);
              else {
                if (q.depthTexture.format !== 1027)
                  throw new Error("Unknown depthTexture format");
                B(q)
                  ? d.framebufferTexture2DMultisampleEXT(
                      36160,
                      33306,
                      3553,
                      Q,
                      0,
                      ee
                    )
                  : n.framebufferTexture2D(36160, 33306, 3553, Q, 0);
              }
            })(L.__webglFramebuffer, R);
          } else if (Z) {
            L.__webglDepthbuffer = [];
            for (let re = 0; re < 6; re++)
              t.bindFramebuffer(36160, L.__webglFramebuffer[re]),
                (L.__webglDepthbuffer[re] = n.createRenderbuffer()),
                D(L.__webglDepthbuffer[re], R, !1);
          } else
            t.bindFramebuffer(36160, L.__webglFramebuffer),
              (L.__webglDepthbuffer = n.createRenderbuffer()),
              D(L.__webglDepthbuffer, R, !1);
          t.bindFramebuffer(36160, null);
        }
        function K(R) {
          return Math.min(h, R.samples);
        }
        function B(R) {
          const L = r.get(R);
          return (
            o &&
            R.samples > 0 &&
            e.has("WEBGL_multisampled_render_to_texture") === !0 &&
            L.__useRenderToTexture !== !1
          );
        }
        function Y(R, L) {
          const Z = R.encoding,
            re = R.format,
            q = R.type;
          return (
            R.isCompressedTexture === !0 ||
              R.isVideoTexture === !0 ||
              R.format === 1035 ||
              (Z !== 3e3 &&
                (Z === 3001
                  ? o === !1
                    ? e.has("EXT_sRGB") === !0 && re === 1023
                      ? ((R.format = 1035),
                        (R.minFilter = 1006),
                        (R.generateMipmaps = !1))
                      : (L = p_.sRGBToLinear(L))
                    : (re === 1023 && q === 1009) ||
                      console.warn(
                        "THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."
                      )
                  : console.error(
                      "THREE.WebGLTextures: Unsupported texture encoding:",
                      Z
                    ))),
            L
          );
        }
        (this.allocateTextureUnit = function () {
          const R = F;
          return (
            R >= l &&
              console.warn(
                "THREE.WebGLTextures: Trying to use " +
                  R +
                  " texture units while this GPU supports only " +
                  l
              ),
            (F += 1),
            R
          );
        }),
          (this.resetTextureUnits = function () {
            F = 0;
          }),
          (this.setTexture2D = T),
          (this.setTexture2DArray = function (R, L) {
            const Z = r.get(R);
            R.version > 0 && Z.__version !== R.version
              ? z(Z, R, L)
              : (t.activeTexture(33984 + L),
                t.bindTexture(35866, Z.__webglTexture));
          }),
          (this.setTexture3D = function (R, L) {
            const Z = r.get(R);
            R.version > 0 && Z.__version !== R.version
              ? z(Z, R, L)
              : (t.activeTexture(33984 + L),
                t.bindTexture(32879, Z.__webglTexture));
          }),
          (this.setTextureCube = function (R, L) {
            const Z = r.get(R);
            R.version > 0 && Z.__version !== R.version
              ? (function (re, q, Q) {
                  if (q.image.length !== 6) return;
                  const ee = E(re, q),
                    S = q.source;
                  if (
                    (t.activeTexture(33984 + Q),
                    t.bindTexture(34067, re.__webglTexture),
                    S.version !== S.__currentVersion || ee === !0)
                  ) {
                    n.pixelStorei(37440, q.flipY),
                      n.pixelStorei(37441, q.premultiplyAlpha),
                      n.pixelStorei(3317, q.unpackAlignment),
                      n.pixelStorei(37443, 0);
                    const H =
                        q.isCompressedTexture || q.image[0].isCompressedTexture,
                      $ = q.image[0] && q.image[0].isDataTexture,
                      J = [];
                    for (let me = 0; me < 6; me++)
                      (J[me] =
                        H || $
                          ? $
                            ? q.image[me].image
                            : q.image[me]
                          : x(q.image[me], !1, !0, u)),
                        (J[me] = Y(q, J[me]));
                    const te = J[0],
                      ne = _(te) || o,
                      de = a.convert(q.format, q.encoding),
                      ue = a.convert(q.type),
                      ce = M(q.internalFormat, de, ue, q.encoding),
                      he = o && q.isVideoTexture !== !0,
                      oe = S.__currentVersion === void 0 || ee === !0;
                    let xe,
                      Le = C(q, te, ne);
                    if ((P(34067, q, ne), H)) {
                      he &&
                        oe &&
                        t.texStorage2D(34067, Le, ce, te.width, te.height);
                      for (let me = 0; me < 6; me++) {
                        xe = J[me].mipmaps;
                        for (let _e = 0; _e < xe.length; _e++) {
                          const ye = xe[_e];
                          q.format !== 1023
                            ? de !== null
                              ? he
                                ? t.compressedTexSubImage2D(
                                    34069 + me,
                                    _e,
                                    0,
                                    0,
                                    ye.width,
                                    ye.height,
                                    de,
                                    ye.data
                                  )
                                : t.compressedTexImage2D(
                                    34069 + me,
                                    _e,
                                    ce,
                                    ye.width,
                                    ye.height,
                                    0,
                                    ye.data
                                  )
                              : console.warn(
                                  "THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"
                                )
                            : he
                            ? t.texSubImage2D(
                                34069 + me,
                                _e,
                                0,
                                0,
                                ye.width,
                                ye.height,
                                de,
                                ue,
                                ye.data
                              )
                            : t.texImage2D(
                                34069 + me,
                                _e,
                                ce,
                                ye.width,
                                ye.height,
                                0,
                                de,
                                ue,
                                ye.data
                              );
                        }
                      }
                    } else {
                      (xe = q.mipmaps),
                        he &&
                          oe &&
                          (xe.length > 0 && Le++,
                          t.texStorage2D(
                            34067,
                            Le,
                            ce,
                            J[0].width,
                            J[0].height
                          ));
                      for (let me = 0; me < 6; me++)
                        if ($) {
                          he
                            ? t.texSubImage2D(
                                34069 + me,
                                0,
                                0,
                                0,
                                J[me].width,
                                J[me].height,
                                de,
                                ue,
                                J[me].data
                              )
                            : t.texImage2D(
                                34069 + me,
                                0,
                                ce,
                                J[me].width,
                                J[me].height,
                                0,
                                de,
                                ue,
                                J[me].data
                              );
                          for (let _e = 0; _e < xe.length; _e++) {
                            const ye = xe[_e].image[me].image;
                            he
                              ? t.texSubImage2D(
                                  34069 + me,
                                  _e + 1,
                                  0,
                                  0,
                                  ye.width,
                                  ye.height,
                                  de,
                                  ue,
                                  ye.data
                                )
                              : t.texImage2D(
                                  34069 + me,
                                  _e + 1,
                                  ce,
                                  ye.width,
                                  ye.height,
                                  0,
                                  de,
                                  ue,
                                  ye.data
                                );
                          }
                        } else {
                          he
                            ? t.texSubImage2D(
                                34069 + me,
                                0,
                                0,
                                0,
                                de,
                                ue,
                                J[me]
                              )
                            : t.texImage2D(34069 + me, 0, ce, de, ue, J[me]);
                          for (let _e = 0; _e < xe.length; _e++) {
                            const ye = xe[_e];
                            he
                              ? t.texSubImage2D(
                                  34069 + me,
                                  _e + 1,
                                  0,
                                  0,
                                  de,
                                  ue,
                                  ye.image[me]
                                )
                              : t.texImage2D(
                                  34069 + me,
                                  _e + 1,
                                  ce,
                                  de,
                                  ue,
                                  ye.image[me]
                                );
                          }
                        }
                    }
                    b(q, ne) && w(34067),
                      (S.__currentVersion = S.version),
                      q.onUpdate && q.onUpdate(q);
                  }
                  re.__version = q.version;
                })(Z, R, L)
              : (t.activeTexture(33984 + L),
                t.bindTexture(34067, Z.__webglTexture));
          }),
          (this.rebindTextures = function (R, L, Z) {
            const re = r.get(R);
            L !== void 0 && A(re.__webglFramebuffer, R, R.texture, 36064, 3553),
              Z !== void 0 && V(R);
          }),
          (this.setupRenderTarget = function (R) {
            const L = R.texture,
              Z = r.get(R),
              re = r.get(L);
            R.addEventListener("dispose", U),
              R.isWebGLMultipleRenderTargets !== !0 &&
                (re.__webglTexture === void 0 &&
                  (re.__webglTexture = n.createTexture()),
                (re.__version = L.version),
                s.memory.textures++);
            const q = R.isWebGLCubeRenderTarget === !0,
              Q = R.isWebGLMultipleRenderTargets === !0,
              ee = _(R) || o;
            if (q) {
              Z.__webglFramebuffer = [];
              for (let S = 0; S < 6; S++)
                Z.__webglFramebuffer[S] = n.createFramebuffer();
            } else {
              if (((Z.__webglFramebuffer = n.createFramebuffer()), Q))
                if (i.drawBuffers) {
                  const S = R.texture;
                  for (let H = 0, $ = S.length; H < $; H++) {
                    const J = r.get(S[H]);
                    J.__webglTexture === void 0 &&
                      ((J.__webglTexture = n.createTexture()),
                      s.memory.textures++);
                  }
                } else
                  console.warn(
                    "THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension."
                  );
              if (o && R.samples > 0 && B(R) === !1) {
                const S = Q ? L : [L];
                (Z.__webglMultisampledFramebuffer = n.createFramebuffer()),
                  (Z.__webglColorRenderbuffer = []),
                  t.bindFramebuffer(36160, Z.__webglMultisampledFramebuffer);
                for (let H = 0; H < S.length; H++) {
                  const $ = S[H];
                  (Z.__webglColorRenderbuffer[H] = n.createRenderbuffer()),
                    n.bindRenderbuffer(36161, Z.__webglColorRenderbuffer[H]);
                  const J = a.convert($.format, $.encoding),
                    te = a.convert($.type),
                    ne = M($.internalFormat, J, te, $.encoding),
                    de = K(R);
                  n.renderbufferStorageMultisample(
                    36161,
                    de,
                    ne,
                    R.width,
                    R.height
                  ),
                    n.framebufferRenderbuffer(
                      36160,
                      36064 + H,
                      36161,
                      Z.__webglColorRenderbuffer[H]
                    );
                }
                n.bindRenderbuffer(36161, null),
                  R.depthBuffer &&
                    ((Z.__webglDepthRenderbuffer = n.createRenderbuffer()),
                    D(Z.__webglDepthRenderbuffer, R, !0)),
                  t.bindFramebuffer(36160, null);
              }
            }
            if (q) {
              t.bindTexture(34067, re.__webglTexture), P(34067, L, ee);
              for (let S = 0; S < 6; S++)
                A(Z.__webglFramebuffer[S], R, L, 36064, 34069 + S);
              b(L, ee) && w(34067), t.unbindTexture();
            } else if (Q) {
              const S = R.texture;
              for (let H = 0, $ = S.length; H < $; H++) {
                const J = S[H],
                  te = r.get(J);
                t.bindTexture(3553, te.__webglTexture),
                  P(3553, J, ee),
                  A(Z.__webglFramebuffer, R, J, 36064 + H, 3553),
                  b(J, ee) && w(3553);
              }
              t.unbindTexture();
            } else {
              let S = 3553;
              (R.isWebGL3DRenderTarget || R.isWebGLArrayRenderTarget) &&
                (o
                  ? (S = R.isWebGL3DRenderTarget ? 32879 : 35866)
                  : console.error(
                      "THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2."
                    )),
                t.bindTexture(S, re.__webglTexture),
                P(S, L, ee),
                A(Z.__webglFramebuffer, R, L, 36064, S),
                b(L, ee) && w(S),
                t.unbindTexture();
            }
            R.depthBuffer && V(R);
          }),
          (this.updateRenderTargetMipmap = function (R) {
            const L = _(R) || o,
              Z =
                R.isWebGLMultipleRenderTargets === !0 ? R.texture : [R.texture];
            for (let re = 0, q = Z.length; re < q; re++) {
              const Q = Z[re];
              if (b(Q, L)) {
                const ee = R.isWebGLCubeRenderTarget ? 34067 : 3553,
                  S = r.get(Q).__webglTexture;
                t.bindTexture(ee, S), w(ee), t.unbindTexture();
              }
            }
          }),
          (this.updateMultisampleRenderTarget = function (R) {
            if (o && R.samples > 0 && B(R) === !1) {
              const L = R.isWebGLMultipleRenderTargets
                  ? R.texture
                  : [R.texture],
                Z = R.width,
                re = R.height;
              let q = 16384;
              const Q = [],
                ee = R.stencilBuffer ? 33306 : 36096,
                S = r.get(R),
                H = R.isWebGLMultipleRenderTargets === !0;
              if (H)
                for (let $ = 0; $ < L.length; $++)
                  t.bindFramebuffer(36160, S.__webglMultisampledFramebuffer),
                    n.framebufferRenderbuffer(36160, 36064 + $, 36161, null),
                    t.bindFramebuffer(36160, S.__webglFramebuffer),
                    n.framebufferTexture2D(36009, 36064 + $, 3553, null, 0);
              t.bindFramebuffer(36008, S.__webglMultisampledFramebuffer),
                t.bindFramebuffer(36009, S.__webglFramebuffer);
              for (let $ = 0; $ < L.length; $++) {
                Q.push(36064 + $), R.depthBuffer && Q.push(ee);
                const J =
                  S.__ignoreDepthValues !== void 0 && S.__ignoreDepthValues;
                if (
                  (J === !1 &&
                    (R.depthBuffer && (q |= 256),
                    R.stencilBuffer && (q |= 1024)),
                  H &&
                    n.framebufferRenderbuffer(
                      36008,
                      36064,
                      36161,
                      S.__webglColorRenderbuffer[$]
                    ),
                  J === !0 &&
                    (n.invalidateFramebuffer(36008, [ee]),
                    n.invalidateFramebuffer(36009, [ee])),
                  H)
                ) {
                  const te = r.get(L[$]).__webglTexture;
                  n.framebufferTexture2D(36009, 36064, 3553, te, 0);
                }
                n.blitFramebuffer(0, 0, Z, re, 0, 0, Z, re, q, 9728),
                  f && n.invalidateFramebuffer(36008, Q);
              }
              if (
                (t.bindFramebuffer(36008, null),
                t.bindFramebuffer(36009, null),
                H)
              )
                for (let $ = 0; $ < L.length; $++) {
                  t.bindFramebuffer(36160, S.__webglMultisampledFramebuffer),
                    n.framebufferRenderbuffer(
                      36160,
                      36064 + $,
                      36161,
                      S.__webglColorRenderbuffer[$]
                    );
                  const J = r.get(L[$]).__webglTexture;
                  t.bindFramebuffer(36160, S.__webglFramebuffer),
                    n.framebufferTexture2D(36009, 36064 + $, 3553, J, 0);
                }
              t.bindFramebuffer(36009, S.__webglMultisampledFramebuffer);
            }
          }),
          (this.setupDepthRenderbuffer = V),
          (this.setupFrameBufferTexture = A),
          (this.useMultisampledRTT = B);
      }
      function FM(n, e, t) {
        const r = t.isWebGL2;
        return {
          convert: function (i, a = null) {
            let s;
            if (i === 1009) return 5121;
            if (i === 1017) return 32819;
            if (i === 1018) return 32820;
            if (i === 1010) return 5120;
            if (i === 1011) return 5122;
            if (i === 1012) return 5123;
            if (i === 1013) return 5124;
            if (i === 1014) return 5125;
            if (i === 1015) return 5126;
            if (i === 1016)
              return r
                ? 5131
                : ((s = e.get("OES_texture_half_float")),
                  s !== null ? s.HALF_FLOAT_OES : null);
            if (i === 1021) return 6406;
            if (i === 1023) return 6408;
            if (i === 1024) return 6409;
            if (i === 1025) return 6410;
            if (i === 1026) return 6402;
            if (i === 1027) return 34041;
            if (i === 1028) return 6403;
            if (i === 1022)
              return (
                console.warn(
                  "THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"
                ),
                6408
              );
            if (i === 1035)
              return (
                (s = e.get("EXT_sRGB")), s !== null ? s.SRGB_ALPHA_EXT : null
              );
            if (i === 1029) return 36244;
            if (i === 1030) return 33319;
            if (i === 1031) return 33320;
            if (i === 1033) return 36249;
            if (i === 33776 || i === 33777 || i === 33778 || i === 33779)
              if (a === 3001) {
                if (
                  ((s = e.get("WEBGL_compressed_texture_s3tc_srgb")),
                  s === null)
                )
                  return null;
                if (i === 33776) return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;
                if (i === 33777) return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;
                if (i === 33778) return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;
                if (i === 33779) return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;
              } else {
                if (((s = e.get("WEBGL_compressed_texture_s3tc")), s === null))
                  return null;
                if (i === 33776) return s.COMPRESSED_RGB_S3TC_DXT1_EXT;
                if (i === 33777) return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;
                if (i === 33778) return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;
                if (i === 33779) return s.COMPRESSED_RGBA_S3TC_DXT5_EXT;
              }
            if (i === 35840 || i === 35841 || i === 35842 || i === 35843) {
              if (((s = e.get("WEBGL_compressed_texture_pvrtc")), s === null))
                return null;
              if (i === 35840) return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
              if (i === 35841) return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
              if (i === 35842) return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
              if (i === 35843) return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;
            }
            if (i === 36196)
              return (
                (s = e.get("WEBGL_compressed_texture_etc1")),
                s !== null ? s.COMPRESSED_RGB_ETC1_WEBGL : null
              );
            if (i === 37492 || i === 37496) {
              if (((s = e.get("WEBGL_compressed_texture_etc")), s === null))
                return null;
              if (i === 37492)
                return a === 3001
                  ? s.COMPRESSED_SRGB8_ETC2
                  : s.COMPRESSED_RGB8_ETC2;
              if (i === 37496)
                return a === 3001
                  ? s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC
                  : s.COMPRESSED_RGBA8_ETC2_EAC;
            }
            if (
              i === 37808 ||
              i === 37809 ||
              i === 37810 ||
              i === 37811 ||
              i === 37812 ||
              i === 37813 ||
              i === 37814 ||
              i === 37815 ||
              i === 37816 ||
              i === 37817 ||
              i === 37818 ||
              i === 37819 ||
              i === 37820 ||
              i === 37821
            ) {
              if (((s = e.get("WEBGL_compressed_texture_astc")), s === null))
                return null;
              if (i === 37808)
                return a === 3001
                  ? s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR
                  : s.COMPRESSED_RGBA_ASTC_4x4_KHR;
              if (i === 37809)
                return a === 3001
                  ? s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR
                  : s.COMPRESSED_RGBA_ASTC_5x4_KHR;
              if (i === 37810)
                return a === 3001
                  ? s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR
                  : s.COMPRESSED_RGBA_ASTC_5x5_KHR;
              if (i === 37811)
                return a === 3001
                  ? s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR
                  : s.COMPRESSED_RGBA_ASTC_6x5_KHR;
              if (i === 37812)
                return a === 3001
                  ? s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR
                  : s.COMPRESSED_RGBA_ASTC_6x6_KHR;
              if (i === 37813)
                return a === 3001
                  ? s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR
                  : s.COMPRESSED_RGBA_ASTC_8x5_KHR;
              if (i === 37814)
                return a === 3001
                  ? s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR
                  : s.COMPRESSED_RGBA_ASTC_8x6_KHR;
              if (i === 37815)
                return a === 3001
                  ? s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR
                  : s.COMPRESSED_RGBA_ASTC_8x8_KHR;
              if (i === 37816)
                return a === 3001
                  ? s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR
                  : s.COMPRESSED_RGBA_ASTC_10x5_KHR;
              if (i === 37817)
                return a === 3001
                  ? s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR
                  : s.COMPRESSED_RGBA_ASTC_10x6_KHR;
              if (i === 37818)
                return a === 3001
                  ? s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR
                  : s.COMPRESSED_RGBA_ASTC_10x8_KHR;
              if (i === 37819)
                return a === 3001
                  ? s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR
                  : s.COMPRESSED_RGBA_ASTC_10x10_KHR;
              if (i === 37820)
                return a === 3001
                  ? s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR
                  : s.COMPRESSED_RGBA_ASTC_12x10_KHR;
              if (i === 37821)
                return a === 3001
                  ? s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR
                  : s.COMPRESSED_RGBA_ASTC_12x12_KHR;
            }
            if (i === 36492) {
              if (((s = e.get("EXT_texture_compression_bptc")), s === null))
                return null;
              if (i === 36492)
                return a === 3001
                  ? s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT
                  : s.COMPRESSED_RGBA_BPTC_UNORM_EXT;
            }
            return i === 1020
              ? r
                ? 34042
                : ((s = e.get("WEBGL_depth_texture")),
                  s !== null ? s.UNSIGNED_INT_24_8_WEBGL : null)
              : n[i] !== void 0
              ? n[i]
              : null;
          },
        };
      }
      class BM extends ln {
        constructor(e = []) {
          super(), (this.isArrayCamera = !0), (this.cameras = e);
        }
      }
      class Ln extends ot {
        constructor() {
          super(), (this.isGroup = !0), (this.type = "Group");
        }
      }
      const GM = { type: "move" };
      class of {
        constructor() {
          (this._targetRay = null), (this._grip = null), (this._hand = null);
        }
        getHandSpace() {
          return (
            this._hand === null &&
              ((this._hand = new Ln()),
              (this._hand.matrixAutoUpdate = !1),
              (this._hand.visible = !1),
              (this._hand.joints = {}),
              (this._hand.inputState = { pinching: !1 })),
            this._hand
          );
        }
        getTargetRaySpace() {
          return (
            this._targetRay === null &&
              ((this._targetRay = new Ln()),
              (this._targetRay.matrixAutoUpdate = !1),
              (this._targetRay.visible = !1),
              (this._targetRay.hasLinearVelocity = !1),
              (this._targetRay.linearVelocity = new j()),
              (this._targetRay.hasAngularVelocity = !1),
              (this._targetRay.angularVelocity = new j())),
            this._targetRay
          );
        }
        getGripSpace() {
          return (
            this._grip === null &&
              ((this._grip = new Ln()),
              (this._grip.matrixAutoUpdate = !1),
              (this._grip.visible = !1),
              (this._grip.hasLinearVelocity = !1),
              (this._grip.linearVelocity = new j()),
              (this._grip.hasAngularVelocity = !1),
              (this._grip.angularVelocity = new j())),
            this._grip
          );
        }
        dispatchEvent(e) {
          return (
            this._targetRay !== null && this._targetRay.dispatchEvent(e),
            this._grip !== null && this._grip.dispatchEvent(e),
            this._hand !== null && this._hand.dispatchEvent(e),
            this
          );
        }
        disconnect(e) {
          return (
            this.dispatchEvent({ type: "disconnected", data: e }),
            this._targetRay !== null && (this._targetRay.visible = !1),
            this._grip !== null && (this._grip.visible = !1),
            this._hand !== null && (this._hand.visible = !1),
            this
          );
        }
        update(e, t, r) {
          let i = null,
            a = null,
            s = null;
          const o = this._targetRay,
            l = this._grip,
            u = this._hand;
          if (e && t.session.visibilityState !== "visible-blurred") {
            if (u && e.hand) {
              s = !0;
              for (const p of e.hand.values()) {
                const y = t.getJointPose(p, r);
                if (u.joints[p.jointName] === void 0) {
                  const m = new Ln();
                  (m.matrixAutoUpdate = !1),
                    (m.visible = !1),
                    (u.joints[p.jointName] = m),
                    u.add(m);
                }
                const v = u.joints[p.jointName];
                y !== null &&
                  (v.matrix.fromArray(y.transform.matrix),
                  v.matrix.decompose(v.position, v.rotation, v.scale),
                  (v.jointRadius = y.radius)),
                  (v.visible = y !== null);
              }
              const c = u.joints["index-finger-tip"],
                h = u.joints["thumb-tip"],
                d = c.position.distanceTo(h.position),
                f = 0.02,
                g = 0.005;
              u.inputState.pinching && d > f + g
                ? ((u.inputState.pinching = !1),
                  this.dispatchEvent({
                    type: "pinchend",
                    handedness: e.handedness,
                    target: this,
                  }))
                : !u.inputState.pinching &&
                  d <= f - g &&
                  ((u.inputState.pinching = !0),
                  this.dispatchEvent({
                    type: "pinchstart",
                    handedness: e.handedness,
                    target: this,
                  }));
            } else
              l !== null &&
                e.gripSpace &&
                ((a = t.getPose(e.gripSpace, r)),
                a !== null &&
                  (l.matrix.fromArray(a.transform.matrix),
                  l.matrix.decompose(l.position, l.rotation, l.scale),
                  a.linearVelocity
                    ? ((l.hasLinearVelocity = !0),
                      l.linearVelocity.copy(a.linearVelocity))
                    : (l.hasLinearVelocity = !1),
                  a.angularVelocity
                    ? ((l.hasAngularVelocity = !0),
                      l.angularVelocity.copy(a.angularVelocity))
                    : (l.hasAngularVelocity = !1)));
            o !== null &&
              ((i = t.getPose(e.targetRaySpace, r)),
              i === null && a !== null && (i = a),
              i !== null &&
                (o.matrix.fromArray(i.transform.matrix),
                o.matrix.decompose(o.position, o.rotation, o.scale),
                i.linearVelocity
                  ? ((o.hasLinearVelocity = !0),
                    o.linearVelocity.copy(i.linearVelocity))
                  : (o.hasLinearVelocity = !1),
                i.angularVelocity
                  ? ((o.hasAngularVelocity = !0),
                    o.angularVelocity.copy(i.angularVelocity))
                  : (o.hasAngularVelocity = !1),
                this.dispatchEvent(GM)));
          }
          return (
            o !== null && (o.visible = i !== null),
            l !== null && (l.visible = a !== null),
            u !== null && (u.visible = s !== null),
            this
          );
        }
      }
      class C_ extends jt {
        constructor(e, t, r, i, a, s, o, l, u, c) {
          if ((c = c !== void 0 ? c : 1026) !== 1026 && c !== 1027)
            throw new Error(
              "DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat"
            );
          r === void 0 && c === 1026 && (r = 1014),
            r === void 0 && c === 1027 && (r = 1020),
            super(null, i, a, s, o, l, c, r, u),
            (this.isDepthTexture = !0),
            (this.image = { width: e, height: t }),
            (this.magFilter = o !== void 0 ? o : 1003),
            (this.minFilter = l !== void 0 ? l : 1003),
            (this.flipY = !1),
            (this.generateMipmaps = !1);
        }
      }
      class HM extends Yr {
        constructor(e, t) {
          super();
          const r = this;
          let i = null,
            a = 1,
            s = null,
            o = "local-floor",
            l = null,
            u = null,
            c = null,
            h = null,
            d = null,
            f = null;
          const g = t.getContextAttributes();
          let p = null,
            y = null;
          const v = [],
            m = [],
            x = new ln();
          x.layers.enable(1), (x.viewport = new Be());
          const _ = new ln();
          _.layers.enable(2), (_.viewport = new Be());
          const b = [x, _],
            w = new BM();
          w.layers.enable(1), w.layers.enable(2);
          let M = null,
            C = null;
          function N(P) {
            const E = m.indexOf(P.inputSource);
            if (E === -1) return;
            const z = v[E];
            z !== void 0 &&
              z.dispatchEvent({ type: P.type, data: P.inputSource });
          }
          function G() {
            i.removeEventListener("select", N),
              i.removeEventListener("selectstart", N),
              i.removeEventListener("selectend", N),
              i.removeEventListener("squeeze", N),
              i.removeEventListener("squeezestart", N),
              i.removeEventListener("squeezeend", N),
              i.removeEventListener("end", G),
              i.removeEventListener("inputsourceschange", U);
            for (let P = 0; P < v.length; P++) {
              const E = m[P];
              E !== null && ((m[P] = null), v[P].disconnect(E));
            }
            (M = null),
              (C = null),
              e.setRenderTarget(p),
              (d = null),
              (h = null),
              (c = null),
              (i = null),
              (y = null),
              k.stop(),
              (r.isPresenting = !1),
              r.dispatchEvent({ type: "sessionend" });
          }
          function U(P) {
            for (let E = 0; E < P.removed.length; E++) {
              const z = P.removed[E],
                A = m.indexOf(z);
              A >= 0 &&
                ((m[A] = null),
                v[A].dispatchEvent({ type: "disconnected", data: z }));
            }
            for (let E = 0; E < P.added.length; E++) {
              const z = P.added[E];
              let A = m.indexOf(z);
              if (A === -1) {
                for (let V = 0; V < v.length; V++) {
                  if (V >= m.length) {
                    m.push(z), (A = V);
                    break;
                  }
                  if (m[V] === null) {
                    (m[V] = z), (A = V);
                    break;
                  }
                }
                if (A === -1) break;
              }
              const D = v[A];
              D && D.dispatchEvent({ type: "connected", data: z });
            }
          }
          (this.cameraAutoUpdate = !0),
            (this.enabled = !1),
            (this.isPresenting = !1),
            (this.getController = function (P) {
              let E = v[P];
              return (
                E === void 0 && ((E = new of()), (v[P] = E)),
                E.getTargetRaySpace()
              );
            }),
            (this.getControllerGrip = function (P) {
              let E = v[P];
              return (
                E === void 0 && ((E = new of()), (v[P] = E)), E.getGripSpace()
              );
            }),
            (this.getHand = function (P) {
              let E = v[P];
              return (
                E === void 0 && ((E = new of()), (v[P] = E)), E.getHandSpace()
              );
            }),
            (this.setFramebufferScaleFactor = function (P) {
              (a = P),
                r.isPresenting === !0 &&
                  console.warn(
                    "THREE.WebXRManager: Cannot change framebuffer scale while presenting."
                  );
            }),
            (this.setReferenceSpaceType = function (P) {
              (o = P),
                r.isPresenting === !0 &&
                  console.warn(
                    "THREE.WebXRManager: Cannot change reference space type while presenting."
                  );
            }),
            (this.getReferenceSpace = function () {
              return l || s;
            }),
            (this.setReferenceSpace = function (P) {
              l = P;
            }),
            (this.getBaseLayer = function () {
              return h !== null ? h : d;
            }),
            (this.getBinding = function () {
              return c;
            }),
            (this.getFrame = function () {
              return f;
            }),
            (this.getSession = function () {
              return i;
            }),
            (this.setSession = async function (P) {
              if (((i = P), i !== null)) {
                if (
                  ((p = e.getRenderTarget()),
                  i.addEventListener("select", N),
                  i.addEventListener("selectstart", N),
                  i.addEventListener("selectend", N),
                  i.addEventListener("squeeze", N),
                  i.addEventListener("squeezestart", N),
                  i.addEventListener("squeezeend", N),
                  i.addEventListener("end", G),
                  i.addEventListener("inputsourceschange", U),
                  g.xrCompatible !== !0 && (await t.makeXRCompatible()),
                  i.renderState.layers === void 0 ||
                    e.capabilities.isWebGL2 === !1)
                ) {
                  const E = {
                    antialias: i.renderState.layers !== void 0 || g.antialias,
                    alpha: g.alpha,
                    depth: g.depth,
                    stencil: g.stencil,
                    framebufferScaleFactor: a,
                  };
                  (d = new XRWebGLLayer(i, t, E)),
                    i.updateRenderState({ baseLayer: d }),
                    (y = new Jt(d.framebufferWidth, d.framebufferHeight, {
                      format: 1023,
                      type: 1009,
                      encoding: e.outputEncoding,
                      stencilBuffer: g.stencil,
                    }));
                } else {
                  let E = null,
                    z = null,
                    A = null;
                  g.depth &&
                    ((A = g.stencil ? 35056 : 33190),
                    (E = g.stencil ? 1027 : 1026),
                    (z = g.stencil ? 1020 : 1014));
                  const D = {
                    colorFormat: 32856,
                    depthFormat: A,
                    scaleFactor: a,
                  };
                  (c = new XRWebGLBinding(i, t)),
                    (h = c.createProjectionLayer(D)),
                    i.updateRenderState({ layers: [h] }),
                    (y = new Jt(h.textureWidth, h.textureHeight, {
                      format: 1023,
                      type: 1009,
                      depthTexture: new C_(
                        h.textureWidth,
                        h.textureHeight,
                        z,
                        void 0,
                        void 0,
                        void 0,
                        void 0,
                        void 0,
                        void 0,
                        E
                      ),
                      stencilBuffer: g.stencil,
                      encoding: e.outputEncoding,
                      samples: g.antialias ? 4 : 0,
                    })),
                    (e.properties.get(y).__ignoreDepthValues =
                      h.ignoreDepthValues);
                }
                (y.isXRRenderTarget = !0),
                  this.setFoveation(1),
                  (l = null),
                  (s = await i.requestReferenceSpace(o)),
                  k.setContext(i),
                  k.start(),
                  (r.isPresenting = !0),
                  r.dispatchEvent({ type: "sessionstart" });
              }
            });
          const I = new j(),
            F = new j();
          function T(P, E) {
            E === null
              ? P.matrixWorld.copy(P.matrix)
              : P.matrixWorld.multiplyMatrices(E.matrixWorld, P.matrix),
              P.matrixWorldInverse.copy(P.matrixWorld).invert();
          }
          (this.updateCamera = function (P) {
            if (i === null) return;
            (w.near = _.near = x.near = P.near),
              (w.far = _.far = x.far = P.far),
              (M === w.near && C === w.far) ||
                (i.updateRenderState({ depthNear: w.near, depthFar: w.far }),
                (M = w.near),
                (C = w.far));
            const E = P.parent,
              z = w.cameras;
            T(w, E);
            for (let D = 0; D < z.length; D++) T(z[D], E);
            w.matrixWorld.decompose(w.position, w.quaternion, w.scale),
              P.matrix.copy(w.matrix),
              P.matrix.decompose(P.position, P.quaternion, P.scale);
            const A = P.children;
            for (let D = 0, V = A.length; D < V; D++)
              A[D].updateMatrixWorld(!0);
            z.length === 2
              ? (function (D, V, K) {
                  I.setFromMatrixPosition(V.matrixWorld),
                    F.setFromMatrixPosition(K.matrixWorld);
                  const B = I.distanceTo(F),
                    Y = V.projectionMatrix.elements,
                    R = K.projectionMatrix.elements,
                    L = Y[14] / (Y[10] - 1),
                    Z = Y[14] / (Y[10] + 1),
                    re = (Y[9] + 1) / Y[5],
                    q = (Y[9] - 1) / Y[5],
                    Q = (Y[8] - 1) / Y[0],
                    ee = (R[8] + 1) / R[0],
                    S = L * Q,
                    H = L * ee,
                    $ = B / (-Q + ee),
                    J = $ * -Q;
                  V.matrixWorld.decompose(D.position, D.quaternion, D.scale),
                    D.translateX(J),
                    D.translateZ($),
                    D.matrixWorld.compose(D.position, D.quaternion, D.scale),
                    D.matrixWorldInverse.copy(D.matrixWorld).invert();
                  const te = L + $,
                    ne = Z + $,
                    de = S - J,
                    ue = H + (B - J),
                    ce = ((re * Z) / ne) * te,
                    he = ((q * Z) / ne) * te;
                  D.projectionMatrix.makePerspective(de, ue, ce, he, te, ne);
                })(w, x, _)
              : w.projectionMatrix.copy(x.projectionMatrix);
          }),
            (this.getCamera = function () {
              return w;
            }),
            (this.getFoveation = function () {
              return h !== null
                ? h.fixedFoveation
                : d !== null
                ? d.fixedFoveation
                : void 0;
            }),
            (this.setFoveation = function (P) {
              h !== null && (h.fixedFoveation = P),
                d !== null &&
                  d.fixedFoveation !== void 0 &&
                  (d.fixedFoveation = P);
            });
          let O = null;
          const k = new __();
          k.setAnimationLoop(function (P, E) {
            if (((u = E.getViewerPose(l || s)), (f = E), u !== null)) {
              const z = u.views;
              d !== null &&
                (e.setRenderTargetFramebuffer(y, d.framebuffer),
                e.setRenderTarget(y));
              let A = !1;
              z.length !== w.cameras.length &&
                ((w.cameras.length = 0), (A = !0));
              for (let D = 0; D < z.length; D++) {
                const V = z[D];
                let K = null;
                if (d !== null) K = d.getViewport(V);
                else {
                  const Y = c.getViewSubImage(h, V);
                  (K = Y.viewport),
                    D === 0 &&
                      (e.setRenderTargetTextures(
                        y,
                        Y.colorTexture,
                        h.ignoreDepthValues ? void 0 : Y.depthStencilTexture
                      ),
                      e.setRenderTarget(y));
                }
                let B = b[D];
                B === void 0 &&
                  ((B = new ln()),
                  B.layers.enable(D),
                  (B.viewport = new Be()),
                  (b[D] = B)),
                  B.matrix.fromArray(V.transform.matrix),
                  B.projectionMatrix.fromArray(V.projectionMatrix),
                  B.viewport.set(K.x, K.y, K.width, K.height),
                  D === 0 && w.matrix.copy(B.matrix),
                  A === !0 && w.cameras.push(B);
              }
            }
            for (let z = 0; z < v.length; z++) {
              const A = m[z],
                D = v[z];
              A !== null && D !== void 0 && D.update(A, E, l || s);
            }
            O && O(P, E), (f = null);
          }),
            (this.setAnimationLoop = function (P) {
              O = P;
            }),
            (this.dispose = function () {});
        }
      }
      function VM(n, e) {
        function t(r, i) {
          (r.opacity.value = i.opacity),
            i.color && r.diffuse.value.copy(i.color),
            i.emissive &&
              r.emissive.value
                .copy(i.emissive)
                .multiplyScalar(i.emissiveIntensity),
            i.map && (r.map.value = i.map),
            i.alphaMap && (r.alphaMap.value = i.alphaMap),
            i.bumpMap &&
              ((r.bumpMap.value = i.bumpMap),
              (r.bumpScale.value = i.bumpScale),
              i.side === 1 && (r.bumpScale.value *= -1)),
            i.displacementMap &&
              ((r.displacementMap.value = i.displacementMap),
              (r.displacementScale.value = i.displacementScale),
              (r.displacementBias.value = i.displacementBias)),
            i.emissiveMap && (r.emissiveMap.value = i.emissiveMap),
            i.normalMap &&
              ((r.normalMap.value = i.normalMap),
              r.normalScale.value.copy(i.normalScale),
              i.side === 1 && r.normalScale.value.negate()),
            i.specularMap && (r.specularMap.value = i.specularMap),
            i.alphaTest > 0 && (r.alphaTest.value = i.alphaTest);
          const a = e.get(i).envMap;
          if (
            (a &&
              ((r.envMap.value = a),
              (r.flipEnvMap.value =
                a.isCubeTexture && a.isRenderTargetTexture === !1 ? -1 : 1),
              (r.reflectivity.value = i.reflectivity),
              (r.ior.value = i.ior),
              (r.refractionRatio.value = i.refractionRatio)),
            i.lightMap)
          ) {
            r.lightMap.value = i.lightMap;
            const l = n.physicallyCorrectLights !== !0 ? Math.PI : 1;
            r.lightMapIntensity.value = i.lightMapIntensity * l;
          }
          let s, o;
          i.aoMap &&
            ((r.aoMap.value = i.aoMap),
            (r.aoMapIntensity.value = i.aoMapIntensity)),
            i.map
              ? (s = i.map)
              : i.specularMap
              ? (s = i.specularMap)
              : i.displacementMap
              ? (s = i.displacementMap)
              : i.normalMap
              ? (s = i.normalMap)
              : i.bumpMap
              ? (s = i.bumpMap)
              : i.roughnessMap
              ? (s = i.roughnessMap)
              : i.metalnessMap
              ? (s = i.metalnessMap)
              : i.alphaMap
              ? (s = i.alphaMap)
              : i.emissiveMap
              ? (s = i.emissiveMap)
              : i.clearcoatMap
              ? (s = i.clearcoatMap)
              : i.clearcoatNormalMap
              ? (s = i.clearcoatNormalMap)
              : i.clearcoatRoughnessMap
              ? (s = i.clearcoatRoughnessMap)
              : i.iridescenceMap
              ? (s = i.iridescenceMap)
              : i.iridescenceThicknessMap
              ? (s = i.iridescenceThicknessMap)
              : i.specularIntensityMap
              ? (s = i.specularIntensityMap)
              : i.specularColorMap
              ? (s = i.specularColorMap)
              : i.transmissionMap
              ? (s = i.transmissionMap)
              : i.thicknessMap
              ? (s = i.thicknessMap)
              : i.sheenColorMap
              ? (s = i.sheenColorMap)
              : i.sheenRoughnessMap && (s = i.sheenRoughnessMap),
            s !== void 0 &&
              (s.isWebGLRenderTarget && (s = s.texture),
              s.matrixAutoUpdate === !0 && s.updateMatrix(),
              r.uvTransform.value.copy(s.matrix)),
            i.aoMap ? (o = i.aoMap) : i.lightMap && (o = i.lightMap),
            o !== void 0 &&
              (o.isWebGLRenderTarget && (o = o.texture),
              o.matrixAutoUpdate === !0 && o.updateMatrix(),
              r.uv2Transform.value.copy(o.matrix));
        }
        return {
          refreshFogUniforms: function (r, i) {
            r.fogColor.value.copy(i.color),
              i.isFog
                ? ((r.fogNear.value = i.near), (r.fogFar.value = i.far))
                : i.isFogExp2 && (r.fogDensity.value = i.density);
          },
          refreshMaterialUniforms: function (r, i, a, s, o) {
            i.isMeshBasicMaterial || i.isMeshLambertMaterial
              ? t(r, i)
              : i.isMeshToonMaterial
              ? (t(r, i),
                (function (l, u) {
                  u.gradientMap && (l.gradientMap.value = u.gradientMap);
                })(r, i))
              : i.isMeshPhongMaterial
              ? (t(r, i),
                (function (l, u) {
                  l.specular.value.copy(u.specular),
                    (l.shininess.value = Math.max(u.shininess, 1e-4));
                })(r, i))
              : i.isMeshStandardMaterial
              ? (t(r, i),
                (function (l, u) {
                  (l.roughness.value = u.roughness),
                    (l.metalness.value = u.metalness),
                    u.roughnessMap && (l.roughnessMap.value = u.roughnessMap),
                    u.metalnessMap && (l.metalnessMap.value = u.metalnessMap),
                    e.get(u).envMap &&
                      (l.envMapIntensity.value = u.envMapIntensity);
                })(r, i),
                i.isMeshPhysicalMaterial &&
                  (function (l, u, c) {
                    (l.ior.value = u.ior),
                      u.sheen > 0 &&
                        (l.sheenColor.value
                          .copy(u.sheenColor)
                          .multiplyScalar(u.sheen),
                        (l.sheenRoughness.value = u.sheenRoughness),
                        u.sheenColorMap &&
                          (l.sheenColorMap.value = u.sheenColorMap),
                        u.sheenRoughnessMap &&
                          (l.sheenRoughnessMap.value = u.sheenRoughnessMap)),
                      u.clearcoat > 0 &&
                        ((l.clearcoat.value = u.clearcoat),
                        (l.clearcoatRoughness.value = u.clearcoatRoughness),
                        u.clearcoatMap &&
                          (l.clearcoatMap.value = u.clearcoatMap),
                        u.clearcoatRoughnessMap &&
                          (l.clearcoatRoughnessMap.value =
                            u.clearcoatRoughnessMap),
                        u.clearcoatNormalMap &&
                          (l.clearcoatNormalScale.value.copy(
                            u.clearcoatNormalScale
                          ),
                          (l.clearcoatNormalMap.value = u.clearcoatNormalMap),
                          u.side === 1 &&
                            l.clearcoatNormalScale.value.negate())),
                      u.iridescence > 0 &&
                        ((l.iridescence.value = u.iridescence),
                        (l.iridescenceIOR.value = u.iridescenceIOR),
                        (l.iridescenceThicknessMinimum.value =
                          u.iridescenceThicknessRange[0]),
                        (l.iridescenceThicknessMaximum.value =
                          u.iridescenceThicknessRange[1]),
                        u.iridescenceMap &&
                          (l.iridescenceMap.value = u.iridescenceMap),
                        u.iridescenceThicknessMap &&
                          (l.iridescenceThicknessMap.value =
                            u.iridescenceThicknessMap)),
                      u.transmission > 0 &&
                        ((l.transmission.value = u.transmission),
                        (l.transmissionSamplerMap.value = c.texture),
                        l.transmissionSamplerSize.value.set(c.width, c.height),
                        u.transmissionMap &&
                          (l.transmissionMap.value = u.transmissionMap),
                        (l.thickness.value = u.thickness),
                        u.thicknessMap &&
                          (l.thicknessMap.value = u.thicknessMap),
                        (l.attenuationDistance.value = u.attenuationDistance),
                        l.attenuationColor.value.copy(u.attenuationColor)),
                      (l.specularIntensity.value = u.specularIntensity),
                      l.specularColor.value.copy(u.specularColor),
                      u.specularIntensityMap &&
                        (l.specularIntensityMap.value = u.specularIntensityMap),
                      u.specularColorMap &&
                        (l.specularColorMap.value = u.specularColorMap);
                  })(r, i, o))
              : i.isMeshMatcapMaterial
              ? (t(r, i),
                (function (l, u) {
                  u.matcap && (l.matcap.value = u.matcap);
                })(r, i))
              : i.isMeshDepthMaterial
              ? t(r, i)
              : i.isMeshDistanceMaterial
              ? (t(r, i),
                (function (l, u) {
                  l.referencePosition.value.copy(u.referencePosition),
                    (l.nearDistance.value = u.nearDistance),
                    (l.farDistance.value = u.farDistance);
                })(r, i))
              : i.isMeshNormalMaterial
              ? t(r, i)
              : i.isLineBasicMaterial
              ? ((function (l, u) {
                  l.diffuse.value.copy(u.color), (l.opacity.value = u.opacity);
                })(r, i),
                i.isLineDashedMaterial &&
                  (function (l, u) {
                    (l.dashSize.value = u.dashSize),
                      (l.totalSize.value = u.dashSize + u.gapSize),
                      (l.scale.value = u.scale);
                  })(r, i))
              : i.isPointsMaterial
              ? (function (l, u, c, h) {
                  l.diffuse.value.copy(u.color),
                    (l.opacity.value = u.opacity),
                    (l.size.value = u.size * c),
                    (l.scale.value = 0.5 * h),
                    u.map && (l.map.value = u.map),
                    u.alphaMap && (l.alphaMap.value = u.alphaMap),
                    u.alphaTest > 0 && (l.alphaTest.value = u.alphaTest);
                  let d;
                  u.map ? (d = u.map) : u.alphaMap && (d = u.alphaMap),
                    d !== void 0 &&
                      (d.matrixAutoUpdate === !0 && d.updateMatrix(),
                      l.uvTransform.value.copy(d.matrix));
                })(r, i, a, s)
              : i.isSpriteMaterial
              ? (function (l, u) {
                  l.diffuse.value.copy(u.color),
                    (l.opacity.value = u.opacity),
                    (l.rotation.value = u.rotation),
                    u.map && (l.map.value = u.map),
                    u.alphaMap && (l.alphaMap.value = u.alphaMap),
                    u.alphaTest > 0 && (l.alphaTest.value = u.alphaTest);
                  let c;
                  u.map ? (c = u.map) : u.alphaMap && (c = u.alphaMap),
                    c !== void 0 &&
                      (c.matrixAutoUpdate === !0 && c.updateMatrix(),
                      l.uvTransform.value.copy(c.matrix));
                })(r, i)
              : i.isShadowMaterial
              ? (r.color.value.copy(i.color), (r.opacity.value = i.opacity))
              : i.isShaderMaterial && (i.uniformsNeedUpdate = !1);
          },
        };
      }
      function WM(n, e, t, r) {
        let i = {},
          a = {},
          s = [];
        const o = t.isWebGL2 ? n.getParameter(35375) : 0;
        function l(h, d, f) {
          const g = h.value;
          if (f[d] === void 0)
            return (f[d] = typeof g == "number" ? g : g.clone()), !0;
          if (typeof g == "number") {
            if (f[d] !== g) return (f[d] = g), !0;
          } else {
            const p = f[d];
            if (p.equals(g) === !1) return p.copy(g), !0;
          }
          return !1;
        }
        function u(h) {
          const d = h.value,
            f = { boundary: 0, storage: 0 };
          return (
            typeof d == "number"
              ? ((f.boundary = 4), (f.storage = 4))
              : d.isVector2
              ? ((f.boundary = 8), (f.storage = 8))
              : d.isVector3 || d.isColor
              ? ((f.boundary = 16), (f.storage = 12))
              : d.isVector4
              ? ((f.boundary = 16), (f.storage = 16))
              : d.isMatrix3
              ? ((f.boundary = 48), (f.storage = 48))
              : d.isMatrix4
              ? ((f.boundary = 64), (f.storage = 64))
              : d.isTexture
              ? console.warn(
                  "THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."
                )
              : console.warn(
                  "THREE.WebGLRenderer: Unsupported uniform value type.",
                  d
                ),
            f
          );
        }
        function c(h) {
          const d = h.target;
          d.removeEventListener("dispose", c);
          const f = s.indexOf(d.__bindingPointIndex);
          s.splice(f, 1),
            n.deleteBuffer(i[d.id]),
            delete i[d.id],
            delete a[d.id];
        }
        return {
          bind: function (h, d) {
            const f = d.program;
            r.uniformBlockBinding(h, f);
          },
          update: function (h, d) {
            let f = i[h.id];
            f === void 0 &&
              ((function (y) {
                const v = y.uniforms;
                let m = 0;
                const x = 16;
                let _ = 0;
                for (let b = 0, w = v.length; b < w; b++) {
                  const M = v[b],
                    C = u(M);
                  if (
                    ((M.__data = new Float32Array(
                      C.storage / Float32Array.BYTES_PER_ELEMENT
                    )),
                    (M.__offset = m),
                    b > 0)
                  ) {
                    _ = m % x;
                    const N = x - _;
                    _ !== 0 &&
                      N - C.boundary < 0 &&
                      ((m += x - _), (M.__offset = m));
                  }
                  m += C.storage;
                }
                (_ = m % x),
                  _ > 0 && (m += x - _),
                  (y.__size = m),
                  (y.__cache = {});
              })(h),
              (f = (function (y) {
                const v = (function () {
                  for (let b = 0; b < o; b++)
                    if (s.indexOf(b) === -1) return s.push(b), b;
                  return (
                    console.error(
                      "THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."
                    ),
                    0
                  );
                })();
                y.__bindingPointIndex = v;
                const m = n.createBuffer(),
                  x = y.__size,
                  _ = y.usage;
                return (
                  n.bindBuffer(35345, m),
                  n.bufferData(35345, x, _),
                  n.bindBuffer(35345, null),
                  n.bindBufferBase(35345, v, m),
                  m
                );
              })(h)),
              (i[h.id] = f),
              h.addEventListener("dispose", c));
            const g = d.program;
            r.updateUBOMapping(h, g);
            const p = e.render.frame;
            a[h.id] !== p &&
              ((function (y) {
                const v = i[y.id],
                  m = y.uniforms,
                  x = y.__cache;
                n.bindBuffer(35345, v);
                for (let _ = 0, b = m.length; _ < b; _++) {
                  const w = m[_];
                  if (l(w, _, x) === !0) {
                    const M = w.value,
                      C = w.__offset;
                    typeof M == "number"
                      ? ((w.__data[0] = M), n.bufferSubData(35345, C, w.__data))
                      : (w.value.isMatrix3
                          ? ((w.__data[0] = w.value.elements[0]),
                            (w.__data[1] = w.value.elements[1]),
                            (w.__data[2] = w.value.elements[2]),
                            (w.__data[3] = w.value.elements[0]),
                            (w.__data[4] = w.value.elements[3]),
                            (w.__data[5] = w.value.elements[4]),
                            (w.__data[6] = w.value.elements[5]),
                            (w.__data[7] = w.value.elements[0]),
                            (w.__data[8] = w.value.elements[6]),
                            (w.__data[9] = w.value.elements[7]),
                            (w.__data[10] = w.value.elements[8]),
                            (w.__data[11] = w.value.elements[0]))
                          : M.toArray(w.__data),
                        n.bufferSubData(35345, C, w.__data));
                  }
                }
                n.bindBuffer(35345, null);
              })(h),
              (a[h.id] = p));
          },
          dispose: function () {
            for (const h in i) n.deleteBuffer(i[h]);
            (s = []), (i = {}), (a = {});
          },
        };
      }
      function A_(n = {}) {
        this.isWebGLRenderer = !0;
        const e =
            n.canvas !== void 0
              ? n.canvas
              : (function () {
                  const W = kl("canvas");
                  return (W.style.display = "block"), W;
                })(),
          t = n.context !== void 0 ? n.context : null,
          r = n.depth === void 0 || n.depth,
          i = n.stencil === void 0 || n.stencil,
          a = n.antialias !== void 0 && n.antialias,
          s = n.premultipliedAlpha === void 0 || n.premultipliedAlpha,
          o = n.preserveDrawingBuffer !== void 0 && n.preserveDrawingBuffer,
          l = n.powerPreference !== void 0 ? n.powerPreference : "default",
          u =
            n.failIfMajorPerformanceCaveat !== void 0 &&
            n.failIfMajorPerformanceCaveat;
        let c;
        c =
          t !== null
            ? t.getContextAttributes().alpha
            : n.alpha !== void 0 && n.alpha;
        let h = null,
          d = null;
        const f = [],
          g = [];
        (this.domElement = e),
          (this.debug = { checkShaderErrors: !0 }),
          (this.autoClear = !0),
          (this.autoClearColor = !0),
          (this.autoClearDepth = !0),
          (this.autoClearStencil = !0),
          (this.sortObjects = !0),
          (this.clippingPlanes = []),
          (this.localClippingEnabled = !1),
          (this.outputEncoding = 3e3),
          (this.physicallyCorrectLights = !1),
          (this.toneMapping = 0),
          (this.toneMappingExposure = 1),
          Object.defineProperties(this, {
            gammaFactor: {
              get: function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderer: .gammaFactor has been removed."
                  ),
                  2
                );
              },
              set: function () {
                console.warn(
                  "THREE.WebGLRenderer: .gammaFactor has been removed."
                );
              },
            },
          });
        const p = this;
        let y = !1,
          v = 0,
          m = 0,
          x = null,
          _ = -1,
          b = null;
        const w = new Be(),
          M = new Be();
        let C = null,
          N = e.width,
          G = e.height,
          U = 1,
          I = null,
          F = null;
        const T = new Be(0, 0, N, G),
          O = new Be(0, 0, N, G);
        let k = !1;
        const P = new $m();
        let E = !1,
          z = !1,
          A = null;
        const D = new Te(),
          V = new ge(),
          K = new j(),
          B = {
            background: null,
            fog: null,
            environment: null,
            overrideMaterial: null,
            isScene: !0,
          };
        function Y() {
          return x === null ? U : 1;
        }
        let R,
          L,
          Z,
          re,
          q,
          Q,
          ee,
          S,
          H,
          $,
          J,
          te,
          ne,
          de,
          ue,
          ce,
          he,
          oe,
          xe,
          Le,
          me,
          _e,
          ye,
          De,
          fe = t;
        function mt(W, ie) {
          for (let se = 0; se < W.length; se++) {
            const ae = W[se],
              le = e.getContext(ae, ie);
            if (le !== null) return le;
          }
          return null;
        }
        try {
          const W = {
            alpha: !0,
            depth: r,
            stencil: i,
            antialias: a,
            premultipliedAlpha: s,
            preserveDrawingBuffer: o,
            powerPreference: l,
            failIfMajorPerformanceCaveat: u,
          };
          if (
            ("setAttribute" in e &&
              e.setAttribute("data-engine", "three.js r144"),
            e.addEventListener("webglcontextlost", Mn, !1),
            e.addEventListener("webglcontextrestored", Je, !1),
            e.addEventListener("webglcontextcreationerror", _t, !1),
            fe === null)
          ) {
            const ie = ["webgl2", "webgl", "experimental-webgl"];
            if (
              (p.isWebGL1Renderer === !0 && ie.shift(),
              (fe = mt(ie, W)),
              fe === null)
            )
              throw mt(ie)
                ? new Error(
                    "Error creating WebGL context with your selected attributes."
                  )
                : new Error("Error creating WebGL context.");
          }
          fe.getShaderPrecisionFormat === void 0 &&
            (fe.getShaderPrecisionFormat = function () {
              return { rangeMin: 1, rangeMax: 1, precision: 1 };
            });
        } catch (W) {
          throw (console.error("THREE.WebGLRenderer: " + W.message), W);
        }
        function ke() {
          (R = new _S(fe)),
            (L = new gS(fe, R, n)),
            R.init(L),
            (_e = new FM(fe, R, L)),
            (Z = new zM(fe, R, L)),
            (re = new SS()),
            (q = new AM()),
            (Q = new NM(fe, R, Z, q, L, _e, re)),
            (ee = new yS(p)),
            (S = new xS(p)),
            (H = new dS(fe, L)),
            (ye = new pS(fe, R, H, L)),
            ($ = new bS(fe, H, re, ye)),
            (J = new CS(fe, $, H, re)),
            (xe = new ES(fe, L, Q)),
            (ce = new vS(q)),
            (te = new CM(p, ee, S, R, L, ye, ce)),
            (ne = new VM(p, q)),
            (de = new PM()),
            (ue = new UM(R, L)),
            (oe = new fS(p, ee, Z, J, c, s)),
            (he = new OM(p, J, L)),
            (De = new WM(fe, re, L, Z)),
            (Le = new mS(fe, R, re, L)),
            (me = new wS(fe, R, re, L)),
            (re.programs = te.programs),
            (p.capabilities = L),
            (p.extensions = R),
            (p.properties = q),
            (p.renderLists = de),
            (p.shadowMap = he),
            (p.state = Z),
            (p.info = re);
        }
        ke();
        const Me = new HM(p, fe);
        function Mn(W) {
          W.preventDefault(),
            console.log("THREE.WebGLRenderer: Context Lost."),
            (y = !0);
        }
        function Je() {
          console.log("THREE.WebGLRenderer: Context Restored."), (y = !1);
          const W = re.autoReset,
            ie = he.enabled,
            se = he.autoUpdate,
            ae = he.needsUpdate,
            le = he.type;
          ke(),
            (re.autoReset = W),
            (he.enabled = ie),
            (he.autoUpdate = se),
            (he.needsUpdate = ae),
            (he.type = le);
        }
        function _t(W) {
          console.error(
            "THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",
            W.statusMessage
          );
        }
        function Et(W) {
          const ie = W.target;
          ie.removeEventListener("dispose", Et),
            (function (se) {
              (function (ae) {
                const le = q.get(ae).programs;
                le !== void 0 &&
                  (le.forEach(function (Se) {
                    te.releaseProgram(Se);
                  }),
                  ae.isShaderMaterial && te.releaseShaderCache(ae));
              })(se),
                q.remove(se);
            })(ie);
        }
        (this.xr = Me),
          (this.getContext = function () {
            return fe;
          }),
          (this.getContextAttributes = function () {
            return fe.getContextAttributes();
          }),
          (this.forceContextLoss = function () {
            const W = R.get("WEBGL_lose_context");
            W && W.loseContext();
          }),
          (this.forceContextRestore = function () {
            const W = R.get("WEBGL_lose_context");
            W && W.restoreContext();
          }),
          (this.getPixelRatio = function () {
            return U;
          }),
          (this.setPixelRatio = function (W) {
            W !== void 0 && ((U = W), this.setSize(N, G, !1));
          }),
          (this.getSize = function (W) {
            return W.set(N, G);
          }),
          (this.setSize = function (W, ie, se) {
            Me.isPresenting
              ? console.warn(
                  "THREE.WebGLRenderer: Can't change size while VR device is presenting."
                )
              : ((N = W),
                (G = ie),
                (e.width = Math.floor(W * U)),
                (e.height = Math.floor(ie * U)),
                se !== !1 &&
                  ((e.style.width = W + "px"), (e.style.height = ie + "px")),
                this.setViewport(0, 0, W, ie));
          }),
          (this.getDrawingBufferSize = function (W) {
            return W.set(N * U, G * U).floor();
          }),
          (this.setDrawingBufferSize = function (W, ie, se) {
            (N = W),
              (G = ie),
              (U = se),
              (e.width = Math.floor(W * se)),
              (e.height = Math.floor(ie * se)),
              this.setViewport(0, 0, W, ie);
          }),
          (this.getCurrentViewport = function (W) {
            return W.copy(w);
          }),
          (this.getViewport = function (W) {
            return W.copy(T);
          }),
          (this.setViewport = function (W, ie, se, ae) {
            W.isVector4 ? T.set(W.x, W.y, W.z, W.w) : T.set(W, ie, se, ae),
              Z.viewport(w.copy(T).multiplyScalar(U).floor());
          }),
          (this.getScissor = function (W) {
            return W.copy(O);
          }),
          (this.setScissor = function (W, ie, se, ae) {
            W.isVector4 ? O.set(W.x, W.y, W.z, W.w) : O.set(W, ie, se, ae),
              Z.scissor(M.copy(O).multiplyScalar(U).floor());
          }),
          (this.getScissorTest = function () {
            return k;
          }),
          (this.setScissorTest = function (W) {
            Z.setScissorTest((k = W));
          }),
          (this.setOpaqueSort = function (W) {
            I = W;
          }),
          (this.setTransparentSort = function (W) {
            F = W;
          }),
          (this.getClearColor = function (W) {
            return W.copy(oe.getClearColor());
          }),
          (this.setClearColor = function () {
            oe.setClearColor.apply(oe, arguments);
          }),
          (this.getClearAlpha = function () {
            return oe.getClearAlpha();
          }),
          (this.setClearAlpha = function () {
            oe.setClearAlpha.apply(oe, arguments);
          }),
          (this.clear = function (W = !0, ie = !0, se = !0) {
            let ae = 0;
            W && (ae |= 16384),
              ie && (ae |= 256),
              se && (ae |= 1024),
              fe.clear(ae);
          }),
          (this.clearColor = function () {
            this.clear(!0, !1, !1);
          }),
          (this.clearDepth = function () {
            this.clear(!1, !0, !1);
          }),
          (this.clearStencil = function () {
            this.clear(!1, !1, !0);
          }),
          (this.dispose = function () {
            e.removeEventListener("webglcontextlost", Mn, !1),
              e.removeEventListener("webglcontextrestored", Je, !1),
              e.removeEventListener("webglcontextcreationerror", _t, !1),
              de.dispose(),
              ue.dispose(),
              q.dispose(),
              ee.dispose(),
              S.dispose(),
              J.dispose(),
              ye.dispose(),
              De.dispose(),
              te.dispose(),
              Me.dispose(),
              Me.removeEventListener("sessionstart", Dt),
              Me.removeEventListener("sessionend", On),
              A && (A.dispose(), (A = null)),
              tt.stop();
          }),
          (this.renderBufferDirect = function (W, ie, se, ae, le, Se) {
            ie === null && (ie = B);
            const Ee = le.isMesh && le.matrixWorld.determinant() < 0,
              Re = (function (wt, Ar, en, Ae, dt) {
                Ar.isScene !== !0 && (Ar = B), Q.resetTextureUnits();
                const qa = Ar.fog,
                  xo = Ae.isMeshStandardMaterial ? Ar.environment : null,
                  Ql =
                    x === null
                      ? p.outputEncoding
                      : x.isXRRenderTarget === !0
                      ? x.texture.encoding
                      : 3e3,
                  Rr = (Ae.isMeshStandardMaterial ? S : ee).get(
                    Ae.envMap || xo
                  ),
                  _o =
                    Ae.vertexColors === !0 &&
                    !!en.attributes.color &&
                    en.attributes.color.itemSize === 4,
                  la = !!Ae.normalMap && !!en.attributes.tangent,
                  eu = !!en.morphAttributes.position,
                  bo = !!en.morphAttributes.normal,
                  wo = !!en.morphAttributes.color,
                  ua = Ae.toneMapped ? p.toneMapping : 0,
                  tu =
                    en.morphAttributes.position ||
                    en.morphAttributes.normal ||
                    en.morphAttributes.color,
                  $a = tu !== void 0 ? tu.length : 0,
                  Ge = q.get(Ae),
                  ca = d.state.lights;
                if (E === !0 && (z === !0 || wt !== b)) {
                  const Ct = wt === b && Ae.id === _;
                  ce.setState(Ae, wt, Ct);
                }
                let Kn = !1;
                Ae.version === Ge.__version
                  ? (Ge.needsLights &&
                      Ge.lightsStateVersion !== ca.state.version) ||
                    Ge.outputEncoding !== Ql ||
                    (dt.isInstancedMesh && Ge.instancing === !1)
                    ? (Kn = !0)
                    : dt.isInstancedMesh || Ge.instancing !== !0
                    ? dt.isSkinnedMesh && Ge.skinning === !1
                      ? (Kn = !0)
                      : dt.isSkinnedMesh || Ge.skinning !== !0
                      ? Ge.envMap !== Rr || (Ae.fog === !0 && Ge.fog !== qa)
                        ? (Kn = !0)
                        : Ge.numClippingPlanes === void 0 ||
                          (Ge.numClippingPlanes === ce.numPlanes &&
                            Ge.numIntersection === ce.numIntersection)
                        ? (Ge.vertexAlphas !== _o ||
                            Ge.vertexTangents !== la ||
                            Ge.morphTargets !== eu ||
                            Ge.morphNormals !== bo ||
                            Ge.morphColors !== wo ||
                            Ge.toneMapping !== ua ||
                            (L.isWebGL2 === !0 &&
                              Ge.morphTargetsCount !== $a)) &&
                          (Kn = !0)
                        : (Kn = !0)
                      : (Kn = !0)
                    : (Kn = !0)
                  : ((Kn = !0), (Ge.__version = Ae.version));
                let Jn = Ge.currentProgram;
                Kn === !0 && (Jn = kt(Ae, Ar, dt));
                let ha = !1,
                  Zr = !1,
                  Ya = !1;
                const zt = Jn.getUniforms(),
                  fr = Ge.uniforms;
                if (
                  (Z.useProgram(Jn.program) &&
                    ((ha = !0), (Zr = !0), (Ya = !0)),
                  Ae.id !== _ && ((_ = Ae.id), (Zr = !0)),
                  ha || b !== wt)
                ) {
                  if (
                    (zt.setValue(fe, "projectionMatrix", wt.projectionMatrix),
                    L.logarithmicDepthBuffer &&
                      zt.setValue(
                        fe,
                        "logDepthBufFC",
                        2 / (Math.log(wt.far + 1) / Math.LN2)
                      ),
                    b !== wt && ((b = wt), (Zr = !0), (Ya = !0)),
                    Ae.isShaderMaterial ||
                      Ae.isMeshPhongMaterial ||
                      Ae.isMeshToonMaterial ||
                      Ae.isMeshStandardMaterial ||
                      Ae.envMap)
                  ) {
                    const Ct = zt.map.cameraPosition;
                    Ct !== void 0 &&
                      Ct.setValue(fe, K.setFromMatrixPosition(wt.matrixWorld));
                  }
                  (Ae.isMeshPhongMaterial ||
                    Ae.isMeshToonMaterial ||
                    Ae.isMeshLambertMaterial ||
                    Ae.isMeshBasicMaterial ||
                    Ae.isMeshStandardMaterial ||
                    Ae.isShaderMaterial) &&
                    zt.setValue(
                      fe,
                      "isOrthographic",
                      wt.isOrthographicCamera === !0
                    ),
                    (Ae.isMeshPhongMaterial ||
                      Ae.isMeshToonMaterial ||
                      Ae.isMeshLambertMaterial ||
                      Ae.isMeshBasicMaterial ||
                      Ae.isMeshStandardMaterial ||
                      Ae.isShaderMaterial ||
                      Ae.isShadowMaterial ||
                      dt.isSkinnedMesh) &&
                      zt.setValue(fe, "viewMatrix", wt.matrixWorldInverse);
                }
                if (dt.isSkinnedMesh) {
                  zt.setOptional(fe, dt, "bindMatrix"),
                    zt.setOptional(fe, dt, "bindMatrixInverse");
                  const Ct = dt.skeleton;
                  Ct &&
                    (L.floatVertexTextures
                      ? (Ct.boneTexture === null && Ct.computeBoneTexture(),
                        zt.setValue(fe, "boneTexture", Ct.boneTexture, Q),
                        zt.setValue(fe, "boneTextureSize", Ct.boneTextureSize))
                      : console.warn(
                          "THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."
                        ));
                }
                const Kr = en.morphAttributes;
                (Kr.position !== void 0 ||
                  Kr.normal !== void 0 ||
                  (Kr.color !== void 0 && L.isWebGL2 === !0)) &&
                  xe.update(dt, en, Ae, Jn),
                  (Zr || Ge.receiveShadow !== dt.receiveShadow) &&
                    ((Ge.receiveShadow = dt.receiveShadow),
                    zt.setValue(fe, "receiveShadow", dt.receiveShadow)),
                  Ae.isMeshGouraudMaterial &&
                    Ae.envMap !== null &&
                    ((fr.envMap.value = Rr),
                    (fr.flipEnvMap.value =
                      Rr.isCubeTexture && Rr.isRenderTargetTexture === !1
                        ? -1
                        : 1)),
                  Zr &&
                    (zt.setValue(
                      fe,
                      "toneMappingExposure",
                      p.toneMappingExposure
                    ),
                    Ge.needsLights &&
                      ((tn = Ya),
                      ((zn = fr).ambientLightColor.needsUpdate = tn),
                      (zn.lightProbe.needsUpdate = tn),
                      (zn.directionalLights.needsUpdate = tn),
                      (zn.directionalLightShadows.needsUpdate = tn),
                      (zn.pointLights.needsUpdate = tn),
                      (zn.pointLightShadows.needsUpdate = tn),
                      (zn.spotLights.needsUpdate = tn),
                      (zn.spotLightShadows.needsUpdate = tn),
                      (zn.rectAreaLights.needsUpdate = tn),
                      (zn.hemisphereLights.needsUpdate = tn)),
                    qa && Ae.fog === !0 && ne.refreshFogUniforms(fr, qa),
                    ne.refreshMaterialUniforms(fr, Ae, U, G, A),
                    Tc.upload(fe, Ge.uniformsList, fr, Q));
                var zn, tn;
                if (
                  (Ae.isShaderMaterial &&
                    Ae.uniformsNeedUpdate === !0 &&
                    (Tc.upload(fe, Ge.uniformsList, fr, Q),
                    (Ae.uniformsNeedUpdate = !1)),
                  Ae.isSpriteMaterial && zt.setValue(fe, "center", dt.center),
                  zt.setValue(fe, "modelViewMatrix", dt.modelViewMatrix),
                  zt.setValue(fe, "normalMatrix", dt.normalMatrix),
                  zt.setValue(fe, "modelMatrix", dt.matrixWorld),
                  Ae.isShaderMaterial || Ae.isRawShaderMaterial)
                ) {
                  const Ct = Ae.uniformsGroups;
                  for (let Pr = 0, da = Ct.length; Pr < da; Pr++)
                    if (L.isWebGL2) {
                      const So = Ct[Pr];
                      De.update(So, Jn), De.bind(So, Jn);
                    } else
                      console.warn(
                        "THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2."
                      );
                }
                return Jn;
              })(W, ie, se, ae, le);
            Z.setMaterial(ae, Ee);
            let Ue = se.index;
            const Qe = se.attributes.position;
            if (Ue === null) {
              if (Qe === void 0 || Qe.count === 0) return;
            } else if (Ue.count === 0) return;
            let ze,
              Pe = 1;
            ae.wireframe === !0 &&
              ((Ue = $.getWireframeAttribute(se)), (Pe = 2)),
              ye.setup(le, ae, Re, se, Ue);
            let bt = Le;
            Ue !== null && ((ze = H.get(Ue)), (bt = me), bt.setIndex(ze));
            const Cr = Ue !== null ? Ue.count : Qe.count,
              Qt = se.drawRange.start * Pe,
              aa = se.drawRange.count * Pe,
              we = Se !== null ? Se.start * Pe : 0,
              sa = Se !== null ? Se.count * Pe : 1 / 0,
              ja = Math.max(Qt, we),
              Xa = Math.min(Cr, Qt + aa, we + sa) - 1,
              oa = Math.max(0, Xa - ja + 1);
            if (oa !== 0) {
              if (le.isMesh)
                ae.wireframe === !0
                  ? (Z.setLineWidth(ae.wireframeLinewidth * Y()), bt.setMode(1))
                  : bt.setMode(4);
              else if (le.isLine) {
                let wt = ae.linewidth;
                wt === void 0 && (wt = 1),
                  Z.setLineWidth(wt * Y()),
                  le.isLineSegments
                    ? bt.setMode(1)
                    : le.isLineLoop
                    ? bt.setMode(2)
                    : bt.setMode(3);
              } else le.isPoints ? bt.setMode(0) : le.isSprite && bt.setMode(4);
              if (le.isInstancedMesh) bt.renderInstances(ja, oa, le.count);
              else if (se.isInstancedBufferGeometry) {
                const wt = Math.min(se.instanceCount, se._maxInstanceCount);
                bt.renderInstances(ja, oa, wt);
              } else bt.render(ja, oa);
            }
          }),
          (this.compile = function (W, ie) {
            function se(ae, le, Se) {
              ae.transparent === !0 && ae.side === 2
                ? ((ae.side = 1),
                  (ae.needsUpdate = !0),
                  kt(ae, le, Se),
                  (ae.side = 0),
                  (ae.needsUpdate = !0),
                  kt(ae, le, Se),
                  (ae.side = 2))
                : kt(ae, le, Se);
            }
            (d = ue.get(W)),
              d.init(),
              g.push(d),
              W.traverseVisible(function (ae) {
                ae.isLight &&
                  ae.layers.test(ie.layers) &&
                  (d.pushLight(ae), ae.castShadow && d.pushShadow(ae));
              }),
              d.setupLights(p.physicallyCorrectLights),
              W.traverse(function (ae) {
                const le = ae.material;
                if (le)
                  if (Array.isArray(le))
                    for (let Se = 0; Se < le.length; Se++) se(le[Se], W, ae);
                  else se(le, W, ae);
              }),
              g.pop(),
              (d = null);
          });
        let Ot = null;
        function Dt() {
          tt.stop();
        }
        function On() {
          tt.start();
        }
        const tt = new __();
        function ia(W, ie, se, ae) {
          if (W.visible === !1) return;
          if (W.layers.test(ie.layers)) {
            if (W.isGroup) se = W.renderOrder;
            else if (W.isLOD) W.autoUpdate === !0 && W.update(ie);
            else if (W.isLight) d.pushLight(W), W.castShadow && d.pushShadow(W);
            else if (W.isSprite) {
              if (!W.frustumCulled || P.intersectsSprite(W)) {
                ae && K.setFromMatrixPosition(W.matrixWorld).applyMatrix4(D);
                const Se = J.update(W),
                  Ee = W.material;
                Ee.visible && h.push(W, Se, Ee, se, K.z, null);
              }
            } else if (
              (W.isMesh || W.isLine || W.isPoints) &&
              (W.isSkinnedMesh &&
                W.skeleton.frame !== re.render.frame &&
                (W.skeleton.update(), (W.skeleton.frame = re.render.frame)),
              !W.frustumCulled || P.intersectsObject(W))
            ) {
              ae && K.setFromMatrixPosition(W.matrixWorld).applyMatrix4(D);
              const Se = J.update(W),
                Ee = W.material;
              if (Array.isArray(Ee)) {
                const Re = Se.groups;
                for (let Ue = 0, Qe = Re.length; Ue < Qe; Ue++) {
                  const ze = Re[Ue],
                    Pe = Ee[ze.materialIndex];
                  Pe && Pe.visible && h.push(W, Se, Pe, se, K.z, ze);
                }
              } else Ee.visible && h.push(W, Se, Ee, se, K.z, null);
            }
          }
          const le = W.children;
          for (let Se = 0, Ee = le.length; Se < Ee; Se++)
            ia(le[Se], ie, se, ae);
        }
        function lt(W, ie, se, ae) {
          const le = W.opaque,
            Se = W.transmissive,
            Ee = W.transparent;
          d.setupLightsView(se),
            Se.length > 0 &&
              (function (Re, Ue, Qe) {
                const ze = L.isWebGL2;
                A === null &&
                  (A = new Jt(1, 1, {
                    generateMipmaps: !0,
                    type: R.has("EXT_color_buffer_half_float") ? 1016 : 1009,
                    minFilter: 1008,
                    samples: ze && a === !0 ? 4 : 0,
                  })),
                  p.getDrawingBufferSize(V),
                  ze ? A.setSize(V.x, V.y) : A.setSize(uh(V.x), uh(V.y));
                const Pe = p.getRenderTarget();
                p.setRenderTarget(A), p.clear();
                const bt = p.toneMapping;
                (p.toneMapping = 0),
                  nt(Re, Ue, Qe),
                  (p.toneMapping = bt),
                  Q.updateMultisampleRenderTarget(A),
                  Q.updateRenderTargetMipmap(A),
                  p.setRenderTarget(Pe);
              })(le, ie, se),
            ae && Z.viewport(w.copy(ae)),
            le.length > 0 && nt(le, ie, se),
            Se.length > 0 && nt(Se, ie, se),
            Ee.length > 0 && nt(Ee, ie, se),
            Z.buffers.depth.setTest(!0),
            Z.buffers.depth.setMask(!0),
            Z.buffers.color.setMask(!0),
            Z.setPolygonOffset(!1);
        }
        function nt(W, ie, se) {
          const ae = ie.isScene === !0 ? ie.overrideMaterial : null;
          for (let le = 0, Se = W.length; le < Se; le++) {
            const Ee = W[le],
              Re = Ee.object,
              Ue = Ee.geometry,
              Qe = ae === null ? Ee.material : ae,
              ze = Ee.group;
            Re.layers.test(se.layers) && dn(Re, ie, se, Ue, Qe, ze);
          }
        }
        function dn(W, ie, se, ae, le, Se) {
          W.onBeforeRender(p, ie, se, ae, le, Se),
            W.modelViewMatrix.multiplyMatrices(
              se.matrixWorldInverse,
              W.matrixWorld
            ),
            W.normalMatrix.getNormalMatrix(W.modelViewMatrix),
            le.onBeforeRender(p, ie, se, ae, W, Se),
            le.transparent === !0 && le.side === 2
              ? ((le.side = 1),
                (le.needsUpdate = !0),
                p.renderBufferDirect(se, ie, ae, le, W, Se),
                (le.side = 0),
                (le.needsUpdate = !0),
                p.renderBufferDirect(se, ie, ae, le, W, Se),
                (le.side = 2))
              : p.renderBufferDirect(se, ie, ae, le, W, Se),
            W.onAfterRender(p, ie, se, ae, le, Se);
        }
        function kt(W, ie, se) {
          ie.isScene !== !0 && (ie = B);
          const ae = q.get(W),
            le = d.state.lights,
            Se = d.state.shadowsArray,
            Ee = le.state.version,
            Re = te.getParameters(W, le.state, Se, ie, se),
            Ue = te.getProgramCacheKey(Re);
          let Qe = ae.programs;
          (ae.environment = W.isMeshStandardMaterial ? ie.environment : null),
            (ae.fog = ie.fog),
            (ae.envMap = (W.isMeshStandardMaterial ? S : ee).get(
              W.envMap || ae.environment
            )),
            Qe === void 0 &&
              (W.addEventListener("dispose", Et),
              (Qe = new Map()),
              (ae.programs = Qe));
          let ze = Qe.get(Ue);
          if (ze !== void 0) {
            if (ae.currentProgram === ze && ae.lightsStateVersion === Ee)
              return Xe(W, Re), ze;
          } else
            (Re.uniforms = te.getUniforms(W)),
              W.onBuild(se, Re, p),
              W.onBeforeCompile(Re, p),
              (ze = te.acquireProgram(Re, Ue)),
              Qe.set(Ue, ze),
              (ae.uniforms = Re.uniforms);
          const Pe = ae.uniforms;
          ((W.isShaderMaterial || W.isRawShaderMaterial) &&
            W.clipping !== !0) ||
            (Pe.clippingPlanes = ce.uniform),
            Xe(W, Re),
            (ae.needsLights = (function (Qt) {
              return (
                Qt.isMeshLambertMaterial ||
                Qt.isMeshToonMaterial ||
                Qt.isMeshPhongMaterial ||
                Qt.isMeshStandardMaterial ||
                Qt.isShadowMaterial ||
                (Qt.isShaderMaterial && Qt.lights === !0)
              );
            })(W)),
            (ae.lightsStateVersion = Ee),
            ae.needsLights &&
              ((Pe.ambientLightColor.value = le.state.ambient),
              (Pe.lightProbe.value = le.state.probe),
              (Pe.directionalLights.value = le.state.directional),
              (Pe.directionalLightShadows.value = le.state.directionalShadow),
              (Pe.spotLights.value = le.state.spot),
              (Pe.spotLightShadows.value = le.state.spotShadow),
              (Pe.rectAreaLights.value = le.state.rectArea),
              (Pe.ltc_1.value = le.state.rectAreaLTC1),
              (Pe.ltc_2.value = le.state.rectAreaLTC2),
              (Pe.pointLights.value = le.state.point),
              (Pe.pointLightShadows.value = le.state.pointShadow),
              (Pe.hemisphereLights.value = le.state.hemi),
              (Pe.directionalShadowMap.value = le.state.directionalShadowMap),
              (Pe.directionalShadowMatrix.value =
                le.state.directionalShadowMatrix),
              (Pe.spotShadowMap.value = le.state.spotShadowMap),
              (Pe.spotLightMatrix.value = le.state.spotLightMatrix),
              (Pe.spotLightMap.value = le.state.spotLightMap),
              (Pe.pointShadowMap.value = le.state.pointShadowMap),
              (Pe.pointShadowMatrix.value = le.state.pointShadowMatrix));
          const bt = ze.getUniforms(),
            Cr = Tc.seqWithValue(bt.seq, Pe);
          return (ae.currentProgram = ze), (ae.uniformsList = Cr), ze;
        }
        function Xe(W, ie) {
          const se = q.get(W);
          (se.outputEncoding = ie.outputEncoding),
            (se.instancing = ie.instancing),
            (se.skinning = ie.skinning),
            (se.morphTargets = ie.morphTargets),
            (se.morphNormals = ie.morphNormals),
            (se.morphColors = ie.morphColors),
            (se.morphTargetsCount = ie.morphTargetsCount),
            (se.numClippingPlanes = ie.numClippingPlanes),
            (se.numIntersection = ie.numClipIntersection),
            (se.vertexAlphas = ie.vertexAlphas),
            (se.vertexTangents = ie.vertexTangents),
            (se.toneMapping = ie.toneMapping);
        }
        tt.setAnimationLoop(function (W) {
          Ot && Ot(W);
        }),
          typeof self < "u" && tt.setContext(self),
          (this.setAnimationLoop = function (W) {
            (Ot = W),
              Me.setAnimationLoop(W),
              W === null ? tt.stop() : tt.start();
          }),
          Me.addEventListener("sessionstart", Dt),
          Me.addEventListener("sessionend", On),
          (this.render = function (W, ie) {
            if (ie !== void 0 && ie.isCamera !== !0)
              return void console.error(
                "THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera."
              );
            if (y === !0) return;
            W.matrixWorldAutoUpdate === !0 && W.updateMatrixWorld(),
              ie.parent === null &&
                ie.matrixWorldAutoUpdate === !0 &&
                ie.updateMatrixWorld(),
              Me.enabled === !0 &&
                Me.isPresenting === !0 &&
                (Me.cameraAutoUpdate === !0 && Me.updateCamera(ie),
                (ie = Me.getCamera())),
              W.isScene === !0 && W.onBeforeRender(p, W, ie, x),
              (d = ue.get(W, g.length)),
              d.init(),
              g.push(d),
              D.multiplyMatrices(ie.projectionMatrix, ie.matrixWorldInverse),
              P.setFromProjectionMatrix(D),
              (z = this.localClippingEnabled),
              (E = ce.init(this.clippingPlanes, z, ie)),
              (h = de.get(W, f.length)),
              h.init(),
              f.push(h),
              ia(W, ie, 0, p.sortObjects),
              h.finish(),
              p.sortObjects === !0 && h.sort(I, F),
              E === !0 && ce.beginShadows();
            const se = d.state.shadowsArray;
            if (
              (he.render(se, W, ie),
              E === !0 && ce.endShadows(),
              this.info.autoReset === !0 && this.info.reset(),
              oe.render(h, W),
              d.setupLights(p.physicallyCorrectLights),
              ie.isArrayCamera)
            ) {
              const ae = ie.cameras;
              for (let le = 0, Se = ae.length; le < Se; le++) {
                const Ee = ae[le];
                lt(h, W, Ee, Ee.viewport);
              }
            } else lt(h, W, ie);
            x !== null &&
              (Q.updateMultisampleRenderTarget(x),
              Q.updateRenderTargetMipmap(x)),
              W.isScene === !0 && W.onAfterRender(p, W, ie),
              ye.resetDefaultState(),
              (_ = -1),
              (b = null),
              g.pop(),
              (d = g.length > 0 ? g[g.length - 1] : null),
              f.pop(),
              (h = f.length > 0 ? f[f.length - 1] : null);
          }),
          (this.getActiveCubeFace = function () {
            return v;
          }),
          (this.getActiveMipmapLevel = function () {
            return m;
          }),
          (this.getRenderTarget = function () {
            return x;
          }),
          (this.setRenderTargetTextures = function (W, ie, se) {
            (q.get(W.texture).__webglTexture = ie),
              (q.get(W.depthTexture).__webglTexture = se);
            const ae = q.get(W);
            (ae.__hasExternalTextures = !0),
              ae.__hasExternalTextures &&
                ((ae.__autoAllocateDepthBuffer = se === void 0),
                ae.__autoAllocateDepthBuffer ||
                  (R.has("WEBGL_multisampled_render_to_texture") === !0 &&
                    (console.warn(
                      "THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"
                    ),
                    (ae.__useRenderToTexture = !1))));
          }),
          (this.setRenderTargetFramebuffer = function (W, ie) {
            const se = q.get(W);
            (se.__webglFramebuffer = ie),
              (se.__useDefaultFramebuffer = ie === void 0);
          }),
          (this.setRenderTarget = function (W, ie = 0, se = 0) {
            (x = W), (v = ie), (m = se);
            let ae = !0;
            if (W) {
              const Re = q.get(W);
              Re.__useDefaultFramebuffer !== void 0
                ? (Z.bindFramebuffer(36160, null), (ae = !1))
                : Re.__webglFramebuffer === void 0
                ? Q.setupRenderTarget(W)
                : Re.__hasExternalTextures &&
                  Q.rebindTextures(
                    W,
                    q.get(W.texture).__webglTexture,
                    q.get(W.depthTexture).__webglTexture
                  );
            }
            let le = null,
              Se = !1,
              Ee = !1;
            if (W) {
              const Re = W.texture;
              (Re.isData3DTexture || Re.isDataArrayTexture) && (Ee = !0);
              const Ue = q.get(W).__webglFramebuffer;
              W.isWebGLCubeRenderTarget
                ? ((le = Ue[ie]), (Se = !0))
                : (le =
                    L.isWebGL2 &&
                    W.samples > 0 &&
                    Q.useMultisampledRTT(W) === !1
                      ? q.get(W).__webglMultisampledFramebuffer
                      : Ue),
                w.copy(W.viewport),
                M.copy(W.scissor),
                (C = W.scissorTest);
            } else
              w.copy(T).multiplyScalar(U).floor(),
                M.copy(O).multiplyScalar(U).floor(),
                (C = k);
            if (
              (Z.bindFramebuffer(36160, le) &&
                L.drawBuffers &&
                ae &&
                Z.drawBuffers(W, le),
              Z.viewport(w),
              Z.scissor(M),
              Z.setScissorTest(C),
              Se)
            ) {
              const Re = q.get(W.texture);
              fe.framebufferTexture2D(
                36160,
                36064,
                34069 + ie,
                Re.__webglTexture,
                se
              );
            } else if (Ee) {
              const Re = q.get(W.texture),
                Ue = ie || 0;
              fe.framebufferTextureLayer(
                36160,
                36064,
                Re.__webglTexture,
                se || 0,
                Ue
              );
            }
            _ = -1;
          }),
          (this.readRenderTargetPixels = function (W, ie, se, ae, le, Se, Ee) {
            if (!W || !W.isWebGLRenderTarget)
              return void console.error(
                "THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget."
              );
            let Re = q.get(W).__webglFramebuffer;
            if (
              (W.isWebGLCubeRenderTarget && Ee !== void 0 && (Re = Re[Ee]), Re)
            ) {
              Z.bindFramebuffer(36160, Re);
              try {
                const Ue = W.texture,
                  Qe = Ue.format,
                  ze = Ue.type;
                if (Qe !== 1023 && _e.convert(Qe) !== fe.getParameter(35739))
                  return void console.error(
                    "THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."
                  );
                const Pe =
                  ze === 1016 &&
                  (R.has("EXT_color_buffer_half_float") ||
                    (L.isWebGL2 && R.has("EXT_color_buffer_float")));
                if (
                  !(
                    ze === 1009 ||
                    _e.convert(ze) === fe.getParameter(35738) ||
                    (ze === 1015 &&
                      (L.isWebGL2 ||
                        R.has("OES_texture_float") ||
                        R.has("WEBGL_color_buffer_float"))) ||
                    Pe
                  )
                )
                  return void console.error(
                    "THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type."
                  );
                ie >= 0 &&
                  ie <= W.width - ae &&
                  se >= 0 &&
                  se <= W.height - le &&
                  fe.readPixels(
                    ie,
                    se,
                    ae,
                    le,
                    _e.convert(Qe),
                    _e.convert(ze),
                    Se
                  );
              } finally {
                const Ue = x !== null ? q.get(x).__webglFramebuffer : null;
                Z.bindFramebuffer(36160, Ue);
              }
            }
          }),
          (this.copyFramebufferToTexture = function (W, ie, se = 0) {
            const ae = Math.pow(2, -se),
              le = Math.floor(ie.image.width * ae),
              Se = Math.floor(ie.image.height * ae);
            Q.setTexture2D(ie, 0),
              fe.copyTexSubImage2D(3553, se, 0, 0, W.x, W.y, le, Se),
              Z.unbindTexture();
          }),
          (this.copyTextureToTexture = function (W, ie, se, ae = 0) {
            const le = ie.image.width,
              Se = ie.image.height,
              Ee = _e.convert(se.format),
              Re = _e.convert(se.type);
            Q.setTexture2D(se, 0),
              fe.pixelStorei(37440, se.flipY),
              fe.pixelStorei(37441, se.premultiplyAlpha),
              fe.pixelStorei(3317, se.unpackAlignment),
              ie.isDataTexture
                ? fe.texSubImage2D(
                    3553,
                    ae,
                    W.x,
                    W.y,
                    le,
                    Se,
                    Ee,
                    Re,
                    ie.image.data
                  )
                : ie.isCompressedTexture
                ? fe.compressedTexSubImage2D(
                    3553,
                    ae,
                    W.x,
                    W.y,
                    ie.mipmaps[0].width,
                    ie.mipmaps[0].height,
                    Ee,
                    ie.mipmaps[0].data
                  )
                : fe.texSubImage2D(3553, ae, W.x, W.y, Ee, Re, ie.image),
              ae === 0 && se.generateMipmaps && fe.generateMipmap(3553),
              Z.unbindTexture();
          }),
          (this.copyTextureToTexture3D = function (W, ie, se, ae, le = 0) {
            if (p.isWebGL1Renderer)
              return void console.warn(
                "THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2."
              );
            const Se = W.max.x - W.min.x + 1,
              Ee = W.max.y - W.min.y + 1,
              Re = W.max.z - W.min.z + 1,
              Ue = _e.convert(ae.format),
              Qe = _e.convert(ae.type);
            let ze;
            if (ae.isData3DTexture) Q.setTexture3D(ae, 0), (ze = 32879);
            else {
              if (!ae.isDataArrayTexture)
                return void console.warn(
                  "THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray."
                );
              Q.setTexture2DArray(ae, 0), (ze = 35866);
            }
            fe.pixelStorei(37440, ae.flipY),
              fe.pixelStorei(37441, ae.premultiplyAlpha),
              fe.pixelStorei(3317, ae.unpackAlignment);
            const Pe = fe.getParameter(3314),
              bt = fe.getParameter(32878),
              Cr = fe.getParameter(3316),
              Qt = fe.getParameter(3315),
              aa = fe.getParameter(32877),
              we = se.isCompressedTexture ? se.mipmaps[0] : se.image;
            fe.pixelStorei(3314, we.width),
              fe.pixelStorei(32878, we.height),
              fe.pixelStorei(3316, W.min.x),
              fe.pixelStorei(3315, W.min.y),
              fe.pixelStorei(32877, W.min.z),
              se.isDataTexture || se.isData3DTexture
                ? fe.texSubImage3D(
                    ze,
                    le,
                    ie.x,
                    ie.y,
                    ie.z,
                    Se,
                    Ee,
                    Re,
                    Ue,
                    Qe,
                    we.data
                  )
                : se.isCompressedTexture
                ? (console.warn(
                    "THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."
                  ),
                  fe.compressedTexSubImage3D(
                    ze,
                    le,
                    ie.x,
                    ie.y,
                    ie.z,
                    Se,
                    Ee,
                    Re,
                    Ue,
                    we.data
                  ))
                : fe.texSubImage3D(
                    ze,
                    le,
                    ie.x,
                    ie.y,
                    ie.z,
                    Se,
                    Ee,
                    Re,
                    Ue,
                    Qe,
                    we
                  ),
              fe.pixelStorei(3314, Pe),
              fe.pixelStorei(32878, bt),
              fe.pixelStorei(3316, Cr),
              fe.pixelStorei(3315, Qt),
              fe.pixelStorei(32877, aa),
              le === 0 && ae.generateMipmaps && fe.generateMipmap(ze),
              Z.unbindTexture();
          }),
          (this.initTexture = function (W) {
            W.isCubeTexture
              ? Q.setTextureCube(W, 0)
              : W.isData3DTexture
              ? Q.setTexture3D(W, 0)
              : W.isDataArrayTexture
              ? Q.setTexture2DArray(W, 0)
              : Q.setTexture2D(W, 0),
              Z.unbindTexture();
          }),
          (this.resetState = function () {
            (v = 0), (m = 0), (x = null), Z.reset(), ye.reset();
          }),
          typeof __THREE_DEVTOOLS__ < "u" &&
            __THREE_DEVTOOLS__.dispatchEvent(
              new CustomEvent("observe", { detail: this })
            );
      }
      (class extends A_ {}.prototype.isWebGL1Renderer = !0);
      class Mp extends ot {
        constructor() {
          super(),
            (this.isScene = !0),
            (this.type = "Scene"),
            (this.background = null),
            (this.environment = null),
            (this.fog = null),
            (this.overrideMaterial = null),
            typeof __THREE_DEVTOOLS__ < "u" &&
              __THREE_DEVTOOLS__.dispatchEvent(
                new CustomEvent("observe", { detail: this })
              );
        }
        copy(e, t) {
          return (
            super.copy(e, t),
            e.background !== null && (this.background = e.background.clone()),
            e.environment !== null &&
              (this.environment = e.environment.clone()),
            e.fog !== null && (this.fog = e.fog.clone()),
            e.overrideMaterial !== null &&
              (this.overrideMaterial = e.overrideMaterial.clone()),
            (this.matrixAutoUpdate = e.matrixAutoUpdate),
            this
          );
        }
        toJSON(e) {
          const t = super.toJSON(e);
          return this.fog !== null && (t.object.fog = this.fog.toJSON()), t;
        }
        get autoUpdate() {
          return (
            console.warn(
              "THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."
            ),
            this.matrixWorldAutoUpdate
          );
        }
        set autoUpdate(e) {
          console.warn(
            "THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."
          ),
            (this.matrixWorldAutoUpdate = e);
        }
      }
      class jM {
        constructor(e, t) {
          (this.isInterleavedBuffer = !0),
            (this.array = e),
            (this.stride = t),
            (this.count = e !== void 0 ? e.length / t : 0),
            (this.usage = 35044),
            (this.updateRange = { offset: 0, count: -1 }),
            (this.version = 0),
            (this.uuid = Mr());
        }
        onUploadCallback() {}
        set needsUpdate(e) {
          e === !0 && this.version++;
        }
        setUsage(e) {
          return (this.usage = e), this;
        }
        copy(e) {
          return (
            (this.array = new e.array.constructor(e.array)),
            (this.count = e.count),
            (this.stride = e.stride),
            (this.usage = e.usage),
            this
          );
        }
        copyAt(e, t, r) {
          (e *= this.stride), (r *= t.stride);
          for (let i = 0, a = this.stride; i < a; i++)
            this.array[e + i] = t.array[r + i];
          return this;
        }
        set(e, t = 0) {
          return this.array.set(e, t), this;
        }
        clone(e) {
          e.arrayBuffers === void 0 && (e.arrayBuffers = {}),
            this.array.buffer._uuid === void 0 &&
              (this.array.buffer._uuid = Mr()),
            e.arrayBuffers[this.array.buffer._uuid] === void 0 &&
              (e.arrayBuffers[this.array.buffer._uuid] =
                this.array.slice(0).buffer);
          const t = new this.array.constructor(
              e.arrayBuffers[this.array.buffer._uuid]
            ),
            r = new this.constructor(t, this.stride);
          return r.setUsage(this.usage), r;
        }
        onUpload(e) {
          return (this.onUploadCallback = e), this;
        }
        toJSON(e) {
          return (
            e.arrayBuffers === void 0 && (e.arrayBuffers = {}),
            this.array.buffer._uuid === void 0 &&
              (this.array.buffer._uuid = Mr()),
            e.arrayBuffers[this.array.buffer._uuid] === void 0 &&
              (e.arrayBuffers[this.array.buffer._uuid] = Array.from(
                new Uint32Array(this.array.buffer)
              )),
            {
              uuid: this.uuid,
              buffer: this.array.buffer._uuid,
              type: this.array.constructor.name,
              stride: this.stride,
            }
          );
        }
      }
      const pn = new j();
      class ch {
        constructor(e, t, r, i = !1) {
          (this.isInterleavedBufferAttribute = !0),
            (this.name = ""),
            (this.data = e),
            (this.itemSize = t),
            (this.offset = r),
            (this.normalized = i === !0);
        }
        get count() {
          return this.data.count;
        }
        get array() {
          return this.data.array;
        }
        set needsUpdate(e) {
          this.data.needsUpdate = e;
        }
        applyMatrix4(e) {
          for (let t = 0, r = this.data.count; t < r; t++)
            pn.fromBufferAttribute(this, t),
              pn.applyMatrix4(e),
              this.setXYZ(t, pn.x, pn.y, pn.z);
          return this;
        }
        applyNormalMatrix(e) {
          for (let t = 0, r = this.count; t < r; t++)
            pn.fromBufferAttribute(this, t),
              pn.applyNormalMatrix(e),
              this.setXYZ(t, pn.x, pn.y, pn.z);
          return this;
        }
        transformDirection(e) {
          for (let t = 0, r = this.count; t < r; t++)
            pn.fromBufferAttribute(this, t),
              pn.transformDirection(e),
              this.setXYZ(t, pn.x, pn.y, pn.z);
          return this;
        }
        setX(e, t) {
          return (
            this.normalized && (t = et(t, this.array)),
            (this.data.array[e * this.data.stride + this.offset] = t),
            this
          );
        }
        setY(e, t) {
          return (
            this.normalized && (t = et(t, this.array)),
            (this.data.array[e * this.data.stride + this.offset + 1] = t),
            this
          );
        }
        setZ(e, t) {
          return (
            this.normalized && (t = et(t, this.array)),
            (this.data.array[e * this.data.stride + this.offset + 2] = t),
            this
          );
        }
        setW(e, t) {
          return (
            this.normalized && (t = et(t, this.array)),
            (this.data.array[e * this.data.stride + this.offset + 3] = t),
            this
          );
        }
        getX(e) {
          let t = this.data.array[e * this.data.stride + this.offset];
          return this.normalized && (t = ui(t, this.array)), t;
        }
        getY(e) {
          let t = this.data.array[e * this.data.stride + this.offset + 1];
          return this.normalized && (t = ui(t, this.array)), t;
        }
        getZ(e) {
          let t = this.data.array[e * this.data.stride + this.offset + 2];
          return this.normalized && (t = ui(t, this.array)), t;
        }
        getW(e) {
          let t = this.data.array[e * this.data.stride + this.offset + 3];
          return this.normalized && (t = ui(t, this.array)), t;
        }
        setXY(e, t, r) {
          return (
            (e = e * this.data.stride + this.offset),
            this.normalized &&
              ((t = et(t, this.array)), (r = et(r, this.array))),
            (this.data.array[e + 0] = t),
            (this.data.array[e + 1] = r),
            this
          );
        }
        setXYZ(e, t, r, i) {
          return (
            (e = e * this.data.stride + this.offset),
            this.normalized &&
              ((t = et(t, this.array)),
              (r = et(r, this.array)),
              (i = et(i, this.array))),
            (this.data.array[e + 0] = t),
            (this.data.array[e + 1] = r),
            (this.data.array[e + 2] = i),
            this
          );
        }
        setXYZW(e, t, r, i, a) {
          return (
            (e = e * this.data.stride + this.offset),
            this.normalized &&
              ((t = et(t, this.array)),
              (r = et(r, this.array)),
              (i = et(i, this.array)),
              (a = et(a, this.array))),
            (this.data.array[e + 0] = t),
            (this.data.array[e + 1] = r),
            (this.data.array[e + 2] = i),
            (this.data.array[e + 3] = a),
            this
          );
        }
        clone(e) {
          if (e === void 0) {
            console.log(
              "THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data."
            );
            const t = [];
            for (let r = 0; r < this.count; r++) {
              const i = r * this.data.stride + this.offset;
              for (let a = 0; a < this.itemSize; a++)
                t.push(this.data.array[i + a]);
            }
            return new un(
              new this.array.constructor(t),
              this.itemSize,
              this.normalized
            );
          }
          return (
            e.interleavedBuffers === void 0 && (e.interleavedBuffers = {}),
            e.interleavedBuffers[this.data.uuid] === void 0 &&
              (e.interleavedBuffers[this.data.uuid] = this.data.clone(e)),
            new ch(
              e.interleavedBuffers[this.data.uuid],
              this.itemSize,
              this.offset,
              this.normalized
            )
          );
        }
        toJSON(e) {
          if (e === void 0) {
            console.log(
              "THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data."
            );
            const t = [];
            for (let r = 0; r < this.count; r++) {
              const i = r * this.data.stride + this.offset;
              for (let a = 0; a < this.itemSize; a++)
                t.push(this.data.array[i + a]);
            }
            return {
              itemSize: this.itemSize,
              type: this.array.constructor.name,
              array: t,
              normalized: this.normalized,
            };
          }
          return (
            e.interleavedBuffers === void 0 && (e.interleavedBuffers = {}),
            e.interleavedBuffers[this.data.uuid] === void 0 &&
              (e.interleavedBuffers[this.data.uuid] = this.data.toJSON(e)),
            {
              isInterleavedBufferAttribute: !0,
              itemSize: this.itemSize,
              data: this.data.uuid,
              offset: this.offset,
              normalized: this.normalized,
            }
          );
        }
      }
      class Oh extends dr {
        constructor(e) {
          super(),
            (this.isSpriteMaterial = !0),
            (this.type = "SpriteMaterial"),
            (this.color = new Ce(16777215)),
            (this.map = null),
            (this.alphaMap = null),
            (this.rotation = 0),
            (this.sizeAttenuation = !0),
            (this.transparent = !0),
            (this.fog = !0),
            this.setValues(e);
        }
        copy(e) {
          return (
            super.copy(e),
            this.color.copy(e.color),
            (this.map = e.map),
            (this.alphaMap = e.alphaMap),
            (this.rotation = e.rotation),
            (this.sizeAttenuation = e.sizeAttenuation),
            (this.fog = e.fog),
            this
          );
        }
      }
      let hs;
      const Ho = new j(),
        ds = new j(),
        fs = new j(),
        ps = new ge(),
        Vo = new ge(),
        R_ = new Te(),
        Wu = new j(),
        Wo = new j(),
        ju = new j(),
        Gv = new ge(),
        lf = new ge(),
        Hv = new ge();
      class Km extends ot {
        constructor(e) {
          if (
            (super(),
            (this.isSprite = !0),
            (this.type = "Sprite"),
            hs === void 0)
          ) {
            hs = new Lt();
            const t = new Float32Array([
                -0.5, -0.5, 0, 0, 0, 0.5, -0.5, 0, 1, 0, 0.5, 0.5, 0, 1, 1,
                -0.5, 0.5, 0, 0, 1,
              ]),
              r = new jM(t, 5);
            hs.setIndex([0, 1, 2, 0, 2, 3]),
              hs.setAttribute("position", new ch(r, 3, 0, !1)),
              hs.setAttribute("uv", new ch(r, 2, 3, !1));
          }
          (this.geometry = hs),
            (this.material = e !== void 0 ? e : new Oh()),
            (this.center = new ge(0.5, 0.5));
        }
        raycast(e, t) {
          e.camera === null &&
            console.error(
              'THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'
            ),
            ds.setFromMatrixScale(this.matrixWorld),
            R_.copy(e.camera.matrixWorld),
            this.modelViewMatrix.multiplyMatrices(
              e.camera.matrixWorldInverse,
              this.matrixWorld
            ),
            fs.setFromMatrixPosition(this.modelViewMatrix),
            e.camera.isPerspectiveCamera &&
              this.material.sizeAttenuation === !1 &&
              ds.multiplyScalar(-fs.z);
          const r = this.material.rotation;
          let i, a;
          r !== 0 && ((a = Math.cos(r)), (i = Math.sin(r)));
          const s = this.center;
          Xu(Wu.set(-0.5, -0.5, 0), fs, s, ds, i, a),
            Xu(Wo.set(0.5, -0.5, 0), fs, s, ds, i, a),
            Xu(ju.set(0.5, 0.5, 0), fs, s, ds, i, a),
            Gv.set(0, 0),
            lf.set(1, 0),
            Hv.set(1, 1);
          let o = e.ray.intersectTriangle(Wu, Wo, ju, !1, Ho);
          if (
            o === null &&
            (Xu(Wo.set(-0.5, 0.5, 0), fs, s, ds, i, a),
            lf.set(0, 1),
            (o = e.ray.intersectTriangle(Wu, ju, Wo, !1, Ho)),
            o === null)
          )
            return;
          const l = e.ray.origin.distanceTo(Ho);
          l < e.near ||
            l > e.far ||
            t.push({
              distance: l,
              point: Ho.clone(),
              uv: Fr.getUV(Ho, Wu, Wo, ju, Gv, lf, Hv, new ge()),
              face: null,
              object: this,
            });
        }
        copy(e, t) {
          return (
            super.copy(e, t),
            e.center !== void 0 && this.center.copy(e.center),
            (this.material = e.material),
            this
          );
        }
      }
      function Xu(n, e, t, r, i, a) {
        ps.subVectors(n, t).addScalar(0.5).multiply(r),
          i !== void 0
            ? ((Vo.x = a * ps.x - i * ps.y), (Vo.y = i * ps.x + a * ps.y))
            : Vo.copy(ps),
          n.copy(e),
          (n.x += Vo.x),
          (n.y += Vo.y),
          n.applyMatrix4(R_);
      }
      const Vv = new j(),
        Wv = new Be(),
        jv = new Be(),
        XM = new j(),
        Xv = new Te();
      class qM extends xt {
        constructor(e, t) {
          super(e, t),
            (this.isSkinnedMesh = !0),
            (this.type = "SkinnedMesh"),
            (this.bindMode = "attached"),
            (this.bindMatrix = new Te()),
            (this.bindMatrixInverse = new Te());
        }
        copy(e, t) {
          return (
            super.copy(e, t),
            (this.bindMode = e.bindMode),
            this.bindMatrix.copy(e.bindMatrix),
            this.bindMatrixInverse.copy(e.bindMatrixInverse),
            (this.skeleton = e.skeleton),
            this
          );
        }
        bind(e, t) {
          (this.skeleton = e),
            t === void 0 &&
              (this.updateMatrixWorld(!0),
              this.skeleton.calculateInverses(),
              (t = this.matrixWorld)),
            this.bindMatrix.copy(t),
            this.bindMatrixInverse.copy(t).invert();
        }
        pose() {
          this.skeleton.pose();
        }
        normalizeSkinWeights() {
          const e = new Be(),
            t = this.geometry.attributes.skinWeight;
          for (let r = 0, i = t.count; r < i; r++) {
            e.fromBufferAttribute(t, r);
            const a = 1 / e.manhattanLength();
            a !== 1 / 0 ? e.multiplyScalar(a) : e.set(1, 0, 0, 0),
              t.setXYZW(r, e.x, e.y, e.z, e.w);
          }
        }
        updateMatrixWorld(e) {
          super.updateMatrixWorld(e),
            this.bindMode === "attached"
              ? this.bindMatrixInverse.copy(this.matrixWorld).invert()
              : this.bindMode === "detached"
              ? this.bindMatrixInverse.copy(this.bindMatrix).invert()
              : console.warn(
                  "THREE.SkinnedMesh: Unrecognized bindMode: " + this.bindMode
                );
        }
        boneTransform(e, t) {
          const r = this.skeleton,
            i = this.geometry;
          Wv.fromBufferAttribute(i.attributes.skinIndex, e),
            jv.fromBufferAttribute(i.attributes.skinWeight, e),
            Vv.copy(t).applyMatrix4(this.bindMatrix),
            t.set(0, 0, 0);
          for (let a = 0; a < 4; a++) {
            const s = jv.getComponent(a);
            if (s !== 0) {
              const o = Wv.getComponent(a);
              Xv.multiplyMatrices(r.bones[o].matrixWorld, r.boneInverses[o]),
                t.addScaledVector(XM.copy(Vv).applyMatrix4(Xv), s);
            }
          }
          return t.applyMatrix4(this.bindMatrixInverse);
        }
      }
      class Tp extends ot {
        constructor() {
          super(), (this.isBone = !0), (this.type = "Bone");
        }
      }
      class $M extends jt {
        constructor(
          e = null,
          t = 1,
          r = 1,
          i,
          a,
          s,
          o,
          l,
          u = 1003,
          c = 1003,
          h,
          d
        ) {
          super(null, s, o, l, u, c, i, a, h, d),
            (this.isDataTexture = !0),
            (this.image = { data: e, width: t, height: r }),
            (this.generateMipmaps = !1),
            (this.flipY = !1),
            (this.unpackAlignment = 1);
        }
      }
      const qv = new Te(),
        YM = new Te();
      class Jm {
        constructor(e = [], t = []) {
          (this.uuid = Mr()),
            (this.bones = e.slice(0)),
            (this.boneInverses = t),
            (this.boneMatrices = null),
            (this.boneTexture = null),
            (this.boneTextureSize = 0),
            (this.frame = -1),
            this.init();
        }
        init() {
          const e = this.bones,
            t = this.boneInverses;
          if (
            ((this.boneMatrices = new Float32Array(16 * e.length)),
            t.length === 0)
          )
            this.calculateInverses();
          else if (e.length !== t.length) {
            console.warn(
              "THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."
            ),
              (this.boneInverses = []);
            for (let r = 0, i = this.bones.length; r < i; r++)
              this.boneInverses.push(new Te());
          }
        }
        calculateInverses() {
          this.boneInverses.length = 0;
          for (let e = 0, t = this.bones.length; e < t; e++) {
            const r = new Te();
            this.bones[e] && r.copy(this.bones[e].matrixWorld).invert(),
              this.boneInverses.push(r);
          }
        }
        pose() {
          for (let e = 0, t = this.bones.length; e < t; e++) {
            const r = this.bones[e];
            r && r.matrixWorld.copy(this.boneInverses[e]).invert();
          }
          for (let e = 0, t = this.bones.length; e < t; e++) {
            const r = this.bones[e];
            r &&
              (r.parent && r.parent.isBone
                ? (r.matrix.copy(r.parent.matrixWorld).invert(),
                  r.matrix.multiply(r.matrixWorld))
                : r.matrix.copy(r.matrixWorld),
              r.matrix.decompose(r.position, r.quaternion, r.scale));
          }
        }
        update() {
          const e = this.bones,
            t = this.boneInverses,
            r = this.boneMatrices,
            i = this.boneTexture;
          for (let a = 0, s = e.length; a < s; a++) {
            const o = e[a] ? e[a].matrixWorld : YM;
            qv.multiplyMatrices(o, t[a]), qv.toArray(r, 16 * a);
          }
          i !== null && (i.needsUpdate = !0);
        }
        clone() {
          return new Jm(this.bones, this.boneInverses);
        }
        computeBoneTexture() {
          let e = Math.sqrt(4 * this.bones.length);
          (e = h_(e)), (e = Math.max(e, 4));
          const t = new Float32Array(e * e * 4);
          t.set(this.boneMatrices);
          const r = new $M(t, e, e, 1023, 1015);
          return (
            (r.needsUpdate = !0),
            (this.boneMatrices = t),
            (this.boneTexture = r),
            (this.boneTextureSize = e),
            this
          );
        }
        getBoneByName(e) {
          for (let t = 0, r = this.bones.length; t < r; t++) {
            const i = this.bones[t];
            if (i.name === e) return i;
          }
        }
        dispose() {
          this.boneTexture !== null &&
            (this.boneTexture.dispose(), (this.boneTexture = null));
        }
        fromJSON(e, t) {
          this.uuid = e.uuid;
          for (let r = 0, i = e.bones.length; r < i; r++) {
            const a = e.bones[r];
            let s = t[a];
            s === void 0 &&
              (console.warn("THREE.Skeleton: No bone found with UUID:", a),
              (s = new Tp())),
              this.bones.push(s),
              this.boneInverses.push(new Te().fromArray(e.boneInverses[r]));
          }
          return this.init(), this;
        }
        toJSON() {
          const e = {
            metadata: {
              version: 4.5,
              type: "Skeleton",
              generator: "Skeleton.toJSON",
            },
            bones: [],
            boneInverses: [],
          };
          e.uuid = this.uuid;
          const t = this.bones,
            r = this.boneInverses;
          for (let i = 0, a = t.length; i < a; i++) {
            const s = t[i];
            e.bones.push(s.uuid);
            const o = r[i];
            e.boneInverses.push(o.toArray());
          }
          return e;
        }
      }
      class ZM extends un {
        constructor(e, t, r, i = 1) {
          super(e, t, r),
            (this.isInstancedBufferAttribute = !0),
            (this.meshPerAttribute = i);
        }
        copy(e) {
          return (
            super.copy(e), (this.meshPerAttribute = e.meshPerAttribute), this
          );
        }
        toJSON() {
          const e = super.toJSON();
          return (
            (e.meshPerAttribute = this.meshPerAttribute),
            (e.isInstancedBufferAttribute = !0),
            e
          );
        }
      }
      class Qm extends dr {
        constructor(e) {
          super(),
            (this.isLineBasicMaterial = !0),
            (this.type = "LineBasicMaterial"),
            (this.color = new Ce(16777215)),
            (this.linewidth = 1),
            (this.linecap = "round"),
            (this.linejoin = "round"),
            (this.fog = !0),
            this.setValues(e);
        }
        copy(e) {
          return (
            super.copy(e),
            this.color.copy(e.color),
            (this.linewidth = e.linewidth),
            (this.linecap = e.linecap),
            (this.linejoin = e.linejoin),
            (this.fog = e.fog),
            this
          );
        }
      }
      const $v = new j(),
        Yv = new j(),
        Zv = new Te(),
        uf = new Ih(),
        qu = new lo();
      class P_ extends ot {
        constructor(e = new Lt(), t = new Qm()) {
          super(),
            (this.isLine = !0),
            (this.type = "Line"),
            (this.geometry = e),
            (this.material = t),
            this.updateMorphTargets();
        }
        copy(e, t) {
          return (
            super.copy(e, t),
            (this.material = e.material),
            (this.geometry = e.geometry),
            this
          );
        }
        computeLineDistances() {
          const e = this.geometry;
          if (e.index === null) {
            const t = e.attributes.position,
              r = [0];
            for (let i = 1, a = t.count; i < a; i++)
              $v.fromBufferAttribute(t, i - 1),
                Yv.fromBufferAttribute(t, i),
                (r[i] = r[i - 1]),
                (r[i] += $v.distanceTo(Yv));
            e.setAttribute("lineDistance", new yt(r, 1));
          } else
            console.warn(
              "THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry."
            );
          return this;
        }
        raycast(e, t) {
          const r = this.geometry,
            i = this.matrixWorld,
            a = e.params.Line.threshold,
            s = r.drawRange;
          if (
            (r.boundingSphere === null && r.computeBoundingSphere(),
            qu.copy(r.boundingSphere),
            qu.applyMatrix4(i),
            (qu.radius += a),
            e.ray.intersectsSphere(qu) === !1)
          )
            return;
          Zv.copy(i).invert(), uf.copy(e.ray).applyMatrix4(Zv);
          const o = a / ((this.scale.x + this.scale.y + this.scale.z) / 3),
            l = o * o,
            u = new j(),
            c = new j(),
            h = new j(),
            d = new j(),
            f = this.isLineSegments ? 2 : 1,
            g = r.index,
            p = r.attributes.position;
          if (g !== null)
            for (
              let y = Math.max(0, s.start),
                v = Math.min(g.count, s.start + s.count) - 1;
              y < v;
              y += f
            ) {
              const m = g.getX(y),
                x = g.getX(y + 1);
              if (
                (u.fromBufferAttribute(p, m),
                c.fromBufferAttribute(p, x),
                uf.distanceSqToSegment(u, c, d, h) > l)
              )
                continue;
              d.applyMatrix4(this.matrixWorld);
              const _ = e.ray.origin.distanceTo(d);
              _ < e.near ||
                _ > e.far ||
                t.push({
                  distance: _,
                  point: h.clone().applyMatrix4(this.matrixWorld),
                  index: y,
                  face: null,
                  faceIndex: null,
                  object: this,
                });
            }
          else
            for (
              let y = Math.max(0, s.start),
                v = Math.min(p.count, s.start + s.count) - 1;
              y < v;
              y += f
            ) {
              if (
                (u.fromBufferAttribute(p, y),
                c.fromBufferAttribute(p, y + 1),
                uf.distanceSqToSegment(u, c, d, h) > l)
              )
                continue;
              d.applyMatrix4(this.matrixWorld);
              const m = e.ray.origin.distanceTo(d);
              m < e.near ||
                m > e.far ||
                t.push({
                  distance: m,
                  point: h.clone().applyMatrix4(this.matrixWorld),
                  index: y,
                  face: null,
                  faceIndex: null,
                  object: this,
                });
            }
        }
        updateMorphTargets() {
          const e = this.geometry.morphAttributes,
            t = Object.keys(e);
          if (t.length > 0) {
            const r = e[t[0]];
            if (r !== void 0) {
              (this.morphTargetInfluences = []),
                (this.morphTargetDictionary = {});
              for (let i = 0, a = r.length; i < a; i++) {
                const s = r[i].name || String(i);
                this.morphTargetInfluences.push(0),
                  (this.morphTargetDictionary[s] = i);
              }
            }
          }
        }
      }
      class KM extends dr {
        constructor(e) {
          super(),
            (this.isPointsMaterial = !0),
            (this.type = "PointsMaterial"),
            (this.color = new Ce(16777215)),
            (this.map = null),
            (this.alphaMap = null),
            (this.size = 1),
            (this.sizeAttenuation = !0),
            (this.fog = !0),
            this.setValues(e);
        }
        copy(e) {
          return (
            super.copy(e),
            this.color.copy(e.color),
            (this.map = e.map),
            (this.alphaMap = e.alphaMap),
            (this.size = e.size),
            (this.sizeAttenuation = e.sizeAttenuation),
            (this.fog = e.fog),
            this
          );
        }
      }
      const Kv = new Te(),
        Ep = new Ih(),
        $u = new lo(),
        Yu = new j();
      class JM extends ot {
        constructor(e = new Lt(), t = new KM()) {
          super(),
            (this.isPoints = !0),
            (this.type = "Points"),
            (this.geometry = e),
            (this.material = t),
            this.updateMorphTargets();
        }
        copy(e, t) {
          return (
            super.copy(e, t),
            (this.material = e.material),
            (this.geometry = e.geometry),
            this
          );
        }
        raycast(e, t) {
          const r = this.geometry,
            i = this.matrixWorld,
            a = e.params.Points.threshold,
            s = r.drawRange;
          if (
            (r.boundingSphere === null && r.computeBoundingSphere(),
            $u.copy(r.boundingSphere),
            $u.applyMatrix4(i),
            ($u.radius += a),
            e.ray.intersectsSphere($u) === !1)
          )
            return;
          Kv.copy(i).invert(), Ep.copy(e.ray).applyMatrix4(Kv);
          const o = a / ((this.scale.x + this.scale.y + this.scale.z) / 3),
            l = o * o,
            u = r.index,
            c = r.attributes.position;
          if (u !== null)
            for (
              let h = Math.max(0, s.start),
                d = Math.min(u.count, s.start + s.count);
              h < d;
              h++
            ) {
              const f = u.getX(h);
              Yu.fromBufferAttribute(c, f), Jv(Yu, f, l, i, e, t, this);
            }
          else
            for (
              let h = Math.max(0, s.start),
                d = Math.min(c.count, s.start + s.count);
              h < d;
              h++
            )
              Yu.fromBufferAttribute(c, h), Jv(Yu, h, l, i, e, t, this);
        }
        updateMorphTargets() {
          const e = this.geometry.morphAttributes,
            t = Object.keys(e);
          if (t.length > 0) {
            const r = e[t[0]];
            if (r !== void 0) {
              (this.morphTargetInfluences = []),
                (this.morphTargetDictionary = {});
              for (let i = 0, a = r.length; i < a; i++) {
                const s = r[i].name || String(i);
                this.morphTargetInfluences.push(0),
                  (this.morphTargetDictionary[s] = i);
              }
            }
          }
        }
      }
      function Jv(n, e, t, r, i, a, s) {
        const o = Ep.distanceSqToPoint(n);
        if (o < t) {
          const l = new j();
          Ep.closestPointToPoint(n, l), l.applyMatrix4(r);
          const u = i.ray.origin.distanceTo(l);
          if (u < i.near || u > i.far) return;
          a.push({
            distance: u,
            distanceToRay: Math.sqrt(o),
            point: l,
            index: e,
            face: null,
            object: s,
          });
        }
      }
      class QM {
        constructor() {
          (this.type = "Curve"), (this.arcLengthDivisions = 200);
        }
        getPoint() {
          return (
            console.warn("THREE.Curve: .getPoint() not implemented."), null
          );
        }
        getPointAt(e, t) {
          const r = this.getUtoTmapping(e);
          return this.getPoint(r, t);
        }
        getPoints(e = 5) {
          const t = [];
          for (let r = 0; r <= e; r++) t.push(this.getPoint(r / e));
          return t;
        }
        getSpacedPoints(e = 5) {
          const t = [];
          for (let r = 0; r <= e; r++) t.push(this.getPointAt(r / e));
          return t;
        }
        getLength() {
          const e = this.getLengths();
          return e[e.length - 1];
        }
        getLengths(e = this.arcLengthDivisions) {
          if (
            this.cacheArcLengths &&
            this.cacheArcLengths.length === e + 1 &&
            !this.needsUpdate
          )
            return this.cacheArcLengths;
          this.needsUpdate = !1;
          const t = [];
          let r,
            i = this.getPoint(0),
            a = 0;
          t.push(0);
          for (let s = 1; s <= e; s++)
            (r = this.getPoint(s / e)),
              (a += r.distanceTo(i)),
              t.push(a),
              (i = r);
          return (this.cacheArcLengths = t), t;
        }
        updateArcLengths() {
          (this.needsUpdate = !0), this.getLengths();
        }
        getUtoTmapping(e, t) {
          const r = this.getLengths();
          let i = 0;
          const a = r.length;
          let s;
          s = t || e * r[a - 1];
          let o,
            l = 0,
            u = a - 1;
          for (; l <= u; )
            if (((i = Math.floor(l + (u - l) / 2)), (o = r[i] - s), o < 0))
              l = i + 1;
            else {
              if (!(o > 0)) {
                u = i;
                break;
              }
              u = i - 1;
            }
          if (((i = u), r[i] === s)) return i / (a - 1);
          const c = r[i];
          return (i + (s - c) / (r[i + 1] - c)) / (a - 1);
        }
        getTangent(e, t) {
          let i = e - 1e-4,
            a = e + 1e-4;
          i < 0 && (i = 0), a > 1 && (a = 1);
          const s = this.getPoint(i),
            o = this.getPoint(a),
            l = t || (s.isVector2 ? new ge() : new j());
          return l.copy(o).sub(s).normalize(), l;
        }
        getTangentAt(e, t) {
          const r = this.getUtoTmapping(e);
          return this.getTangent(r, t);
        }
        computeFrenetFrames(e, t) {
          const r = new j(),
            i = [],
            a = [],
            s = [],
            o = new j(),
            l = new Te();
          for (let f = 0; f <= e; f++) {
            const g = f / e;
            i[f] = this.getTangentAt(g, new j());
          }
          (a[0] = new j()), (s[0] = new j());
          let u = Number.MAX_VALUE;
          const c = Math.abs(i[0].x),
            h = Math.abs(i[0].y),
            d = Math.abs(i[0].z);
          c <= u && ((u = c), r.set(1, 0, 0)),
            h <= u && ((u = h), r.set(0, 1, 0)),
            d <= u && r.set(0, 0, 1),
            o.crossVectors(i[0], r).normalize(),
            a[0].crossVectors(i[0], o),
            s[0].crossVectors(i[0], a[0]);
          for (let f = 1; f <= e; f++) {
            if (
              ((a[f] = a[f - 1].clone()),
              (s[f] = s[f - 1].clone()),
              o.crossVectors(i[f - 1], i[f]),
              o.length() > Number.EPSILON)
            ) {
              o.normalize();
              const g = Math.acos(Gt(i[f - 1].dot(i[f]), -1, 1));
              a[f].applyMatrix4(l.makeRotationAxis(o, g));
            }
            s[f].crossVectors(i[f], a[f]);
          }
          if (t === !0) {
            let f = Math.acos(Gt(a[0].dot(a[e]), -1, 1));
            (f /= e), i[0].dot(o.crossVectors(a[0], a[e])) > 0 && (f = -f);
            for (let g = 1; g <= e; g++)
              a[g].applyMatrix4(l.makeRotationAxis(i[g], f * g)),
                s[g].crossVectors(i[g], a[g]);
          }
          return { tangents: i, normals: a, binormals: s };
        }
        clone() {
          return new this.constructor().copy(this);
        }
        copy(e) {
          return (this.arcLengthDivisions = e.arcLengthDivisions), this;
        }
        toJSON() {
          const e = {
            metadata: {
              version: 4.5,
              type: "Curve",
              generator: "Curve.toJSON",
            },
          };
          return (
            (e.arcLengthDivisions = this.arcLengthDivisions),
            (e.type = this.type),
            e
          );
        }
        fromJSON(e) {
          return (this.arcLengthDivisions = e.arcLengthDivisions), this;
        }
      }
      class Ba extends Lt {
        constructor(
          e = 1,
          t = 32,
          r = 16,
          i = 0,
          a = 2 * Math.PI,
          s = 0,
          o = Math.PI
        ) {
          super(),
            (this.type = "SphereGeometry"),
            (this.parameters = {
              radius: e,
              widthSegments: t,
              heightSegments: r,
              phiStart: i,
              phiLength: a,
              thetaStart: s,
              thetaLength: o,
            }),
            (t = Math.max(3, Math.floor(t))),
            (r = Math.max(2, Math.floor(r)));
          const l = Math.min(s + o, Math.PI);
          let u = 0;
          const c = [],
            h = new j(),
            d = new j(),
            f = [],
            g = [],
            p = [],
            y = [];
          for (let v = 0; v <= r; v++) {
            const m = [],
              x = v / r;
            let _ = 0;
            v == 0 && s == 0
              ? (_ = 0.5 / t)
              : v == r && l == Math.PI && (_ = -0.5 / t);
            for (let b = 0; b <= t; b++) {
              const w = b / t;
              (h.x = -e * Math.cos(i + w * a) * Math.sin(s + x * o)),
                (h.y = e * Math.cos(s + x * o)),
                (h.z = e * Math.sin(i + w * a) * Math.sin(s + x * o)),
                g.push(h.x, h.y, h.z),
                d.copy(h).normalize(),
                p.push(d.x, d.y, d.z),
                y.push(w + _, 1 - x),
                m.push(u++);
            }
            c.push(m);
          }
          for (let v = 0; v < r; v++)
            for (let m = 0; m < t; m++) {
              const x = c[v][m + 1],
                _ = c[v][m],
                b = c[v + 1][m],
                w = c[v + 1][m + 1];
              (v !== 0 || s > 0) && f.push(x, _, w),
                (v !== r - 1 || l < Math.PI) && f.push(_, b, w);
            }
          this.setIndex(f),
            this.setAttribute("position", new yt(g, 3)),
            this.setAttribute("normal", new yt(p, 3)),
            this.setAttribute("uv", new yt(y, 2));
        }
        static fromJSON(e) {
          return new Ba(
            e.radius,
            e.widthSegments,
            e.heightSegments,
            e.phiStart,
            e.phiLength,
            e.thetaStart,
            e.thetaLength
          );
        }
      }
      class Cp extends dr {
        constructor(e) {
          super(),
            (this.isMeshStandardMaterial = !0),
            (this.defines = { STANDARD: "" }),
            (this.type = "MeshStandardMaterial"),
            (this.color = new Ce(16777215)),
            (this.roughness = 1),
            (this.metalness = 0),
            (this.map = null),
            (this.lightMap = null),
            (this.lightMapIntensity = 1),
            (this.aoMap = null),
            (this.aoMapIntensity = 1),
            (this.emissive = new Ce(0)),
            (this.emissiveIntensity = 1),
            (this.emissiveMap = null),
            (this.bumpMap = null),
            (this.bumpScale = 1),
            (this.normalMap = null),
            (this.normalMapType = 0),
            (this.normalScale = new ge(1, 1)),
            (this.displacementMap = null),
            (this.displacementScale = 1),
            (this.displacementBias = 0),
            (this.roughnessMap = null),
            (this.metalnessMap = null),
            (this.alphaMap = null),
            (this.envMap = null),
            (this.envMapIntensity = 1),
            (this.wireframe = !1),
            (this.wireframeLinewidth = 1),
            (this.wireframeLinecap = "round"),
            (this.wireframeLinejoin = "round"),
            (this.flatShading = !1),
            (this.fog = !0),
            this.setValues(e);
        }
        copy(e) {
          return (
            super.copy(e),
            (this.defines = { STANDARD: "" }),
            this.color.copy(e.color),
            (this.roughness = e.roughness),
            (this.metalness = e.metalness),
            (this.map = e.map),
            (this.lightMap = e.lightMap),
            (this.lightMapIntensity = e.lightMapIntensity),
            (this.aoMap = e.aoMap),
            (this.aoMapIntensity = e.aoMapIntensity),
            this.emissive.copy(e.emissive),
            (this.emissiveMap = e.emissiveMap),
            (this.emissiveIntensity = e.emissiveIntensity),
            (this.bumpMap = e.bumpMap),
            (this.bumpScale = e.bumpScale),
            (this.normalMap = e.normalMap),
            (this.normalMapType = e.normalMapType),
            this.normalScale.copy(e.normalScale),
            (this.displacementMap = e.displacementMap),
            (this.displacementScale = e.displacementScale),
            (this.displacementBias = e.displacementBias),
            (this.roughnessMap = e.roughnessMap),
            (this.metalnessMap = e.metalnessMap),
            (this.alphaMap = e.alphaMap),
            (this.envMap = e.envMap),
            (this.envMapIntensity = e.envMapIntensity),
            (this.wireframe = e.wireframe),
            (this.wireframeLinewidth = e.wireframeLinewidth),
            (this.wireframeLinecap = e.wireframeLinecap),
            (this.wireframeLinejoin = e.wireframeLinejoin),
            (this.flatShading = e.flatShading),
            (this.fog = e.fog),
            this
          );
        }
      }
      class eT extends Cp {
        constructor(e) {
          super(),
            (this.isMeshPhysicalMaterial = !0),
            (this.defines = { STANDARD: "", PHYSICAL: "" }),
            (this.type = "MeshPhysicalMaterial"),
            (this.clearcoatMap = null),
            (this.clearcoatRoughness = 0),
            (this.clearcoatRoughnessMap = null),
            (this.clearcoatNormalScale = new ge(1, 1)),
            (this.clearcoatNormalMap = null),
            (this.ior = 1.5),
            Object.defineProperty(this, "reflectivity", {
              get: function () {
                return Gt((2.5 * (this.ior - 1)) / (this.ior + 1), 0, 1);
              },
              set: function (t) {
                this.ior = (1 + 0.4 * t) / (1 - 0.4 * t);
              },
            }),
            (this.iridescenceMap = null),
            (this.iridescenceIOR = 1.3),
            (this.iridescenceThicknessRange = [100, 400]),
            (this.iridescenceThicknessMap = null),
            (this.sheenColor = new Ce(0)),
            (this.sheenColorMap = null),
            (this.sheenRoughness = 1),
            (this.sheenRoughnessMap = null),
            (this.transmissionMap = null),
            (this.thickness = 0),
            (this.thicknessMap = null),
            (this.attenuationDistance = 0),
            (this.attenuationColor = new Ce(1, 1, 1)),
            (this.specularIntensity = 1),
            (this.specularIntensityMap = null),
            (this.specularColor = new Ce(1, 1, 1)),
            (this.specularColorMap = null),
            (this._sheen = 0),
            (this._clearcoat = 0),
            (this._iridescence = 0),
            (this._transmission = 0),
            this.setValues(e);
        }
        get sheen() {
          return this._sheen;
        }
        set sheen(e) {
          this._sheen > 0 != e > 0 && this.version++, (this._sheen = e);
        }
        get clearcoat() {
          return this._clearcoat;
        }
        set clearcoat(e) {
          this._clearcoat > 0 != e > 0 && this.version++, (this._clearcoat = e);
        }
        get iridescence() {
          return this._iridescence;
        }
        set iridescence(e) {
          this._iridescence > 0 != e > 0 && this.version++,
            (this._iridescence = e);
        }
        get transmission() {
          return this._transmission;
        }
        set transmission(e) {
          this._transmission > 0 != e > 0 && this.version++,
            (this._transmission = e);
        }
        copy(e) {
          return (
            super.copy(e),
            (this.defines = { STANDARD: "", PHYSICAL: "" }),
            (this.clearcoat = e.clearcoat),
            (this.clearcoatMap = e.clearcoatMap),
            (this.clearcoatRoughness = e.clearcoatRoughness),
            (this.clearcoatRoughnessMap = e.clearcoatRoughnessMap),
            (this.clearcoatNormalMap = e.clearcoatNormalMap),
            this.clearcoatNormalScale.copy(e.clearcoatNormalScale),
            (this.ior = e.ior),
            (this.iridescence = e.iridescence),
            (this.iridescenceMap = e.iridescenceMap),
            (this.iridescenceIOR = e.iridescenceIOR),
            (this.iridescenceThicknessRange = [...e.iridescenceThicknessRange]),
            (this.iridescenceThicknessMap = e.iridescenceThicknessMap),
            (this.sheen = e.sheen),
            this.sheenColor.copy(e.sheenColor),
            (this.sheenColorMap = e.sheenColorMap),
            (this.sheenRoughness = e.sheenRoughness),
            (this.sheenRoughnessMap = e.sheenRoughnessMap),
            (this.transmission = e.transmission),
            (this.transmissionMap = e.transmissionMap),
            (this.thickness = e.thickness),
            (this.thicknessMap = e.thicknessMap),
            (this.attenuationDistance = e.attenuationDistance),
            this.attenuationColor.copy(e.attenuationColor),
            (this.specularIntensity = e.specularIntensity),
            (this.specularIntensityMap = e.specularIntensityMap),
            this.specularColor.copy(e.specularColor),
            (this.specularColorMap = e.specularColorMap),
            this
          );
        }
      }
      class cf extends dr {
        constructor(e) {
          super(),
            (this.isMeshPhongMaterial = !0),
            (this.type = "MeshPhongMaterial"),
            (this.color = new Ce(16777215)),
            (this.specular = new Ce(1118481)),
            (this.shininess = 30),
            (this.map = null),
            (this.lightMap = null),
            (this.lightMapIntensity = 1),
            (this.aoMap = null),
            (this.aoMapIntensity = 1),
            (this.emissive = new Ce(0)),
            (this.emissiveIntensity = 1),
            (this.emissiveMap = null),
            (this.bumpMap = null),
            (this.bumpScale = 1),
            (this.normalMap = null),
            (this.normalMapType = 0),
            (this.normalScale = new ge(1, 1)),
            (this.displacementMap = null),
            (this.displacementScale = 1),
            (this.displacementBias = 0),
            (this.specularMap = null),
            (this.alphaMap = null),
            (this.envMap = null),
            (this.combine = 0),
            (this.reflectivity = 1),
            (this.refractionRatio = 0.98),
            (this.wireframe = !1),
            (this.wireframeLinewidth = 1),
            (this.wireframeLinecap = "round"),
            (this.wireframeLinejoin = "round"),
            (this.flatShading = !1),
            (this.fog = !0),
            this.setValues(e);
        }
        copy(e) {
          return (
            super.copy(e),
            this.color.copy(e.color),
            this.specular.copy(e.specular),
            (this.shininess = e.shininess),
            (this.map = e.map),
            (this.lightMap = e.lightMap),
            (this.lightMapIntensity = e.lightMapIntensity),
            (this.aoMap = e.aoMap),
            (this.aoMapIntensity = e.aoMapIntensity),
            this.emissive.copy(e.emissive),
            (this.emissiveMap = e.emissiveMap),
            (this.emissiveIntensity = e.emissiveIntensity),
            (this.bumpMap = e.bumpMap),
            (this.bumpScale = e.bumpScale),
            (this.normalMap = e.normalMap),
            (this.normalMapType = e.normalMapType),
            this.normalScale.copy(e.normalScale),
            (this.displacementMap = e.displacementMap),
            (this.displacementScale = e.displacementScale),
            (this.displacementBias = e.displacementBias),
            (this.specularMap = e.specularMap),
            (this.alphaMap = e.alphaMap),
            (this.envMap = e.envMap),
            (this.combine = e.combine),
            (this.reflectivity = e.reflectivity),
            (this.refractionRatio = e.refractionRatio),
            (this.wireframe = e.wireframe),
            (this.wireframeLinewidth = e.wireframeLinewidth),
            (this.wireframeLinecap = e.wireframeLinecap),
            (this.wireframeLinejoin = e.wireframeLinejoin),
            (this.flatShading = e.flatShading),
            (this.fog = e.fog),
            this
          );
        }
      }
      class tT extends dr {
        constructor(e) {
          super(),
            (this.isMeshLambertMaterial = !0),
            (this.type = "MeshLambertMaterial"),
            (this.color = new Ce(16777215)),
            (this.map = null),
            (this.lightMap = null),
            (this.lightMapIntensity = 1),
            (this.aoMap = null),
            (this.aoMapIntensity = 1),
            (this.emissive = new Ce(0)),
            (this.emissiveIntensity = 1),
            (this.emissiveMap = null),
            (this.bumpMap = null),
            (this.bumpScale = 1),
            (this.normalMap = null),
            (this.normalMapType = 0),
            (this.normalScale = new ge(1, 1)),
            (this.displacementMap = null),
            (this.displacementScale = 1),
            (this.displacementBias = 0),
            (this.specularMap = null),
            (this.alphaMap = null),
            (this.envMap = null),
            (this.combine = 0),
            (this.reflectivity = 1),
            (this.refractionRatio = 0.98),
            (this.wireframe = !1),
            (this.wireframeLinewidth = 1),
            (this.wireframeLinecap = "round"),
            (this.wireframeLinejoin = "round"),
            (this.flatShading = !1),
            (this.fog = !0),
            this.setValues(e);
        }
        copy(e) {
          return (
            super.copy(e),
            this.color.copy(e.color),
            (this.map = e.map),
            (this.lightMap = e.lightMap),
            (this.lightMapIntensity = e.lightMapIntensity),
            (this.aoMap = e.aoMap),
            (this.aoMapIntensity = e.aoMapIntensity),
            this.emissive.copy(e.emissive),
            (this.emissiveMap = e.emissiveMap),
            (this.emissiveIntensity = e.emissiveIntensity),
            (this.bumpMap = e.bumpMap),
            (this.bumpScale = e.bumpScale),
            (this.normalMap = e.normalMap),
            (this.normalMapType = e.normalMapType),
            this.normalScale.copy(e.normalScale),
            (this.displacementMap = e.displacementMap),
            (this.displacementScale = e.displacementScale),
            (this.displacementBias = e.displacementBias),
            (this.specularMap = e.specularMap),
            (this.alphaMap = e.alphaMap),
            (this.envMap = e.envMap),
            (this.combine = e.combine),
            (this.reflectivity = e.reflectivity),
            (this.refractionRatio = e.refractionRatio),
            (this.wireframe = e.wireframe),
            (this.wireframeLinewidth = e.wireframeLinewidth),
            (this.wireframeLinecap = e.wireframeLinecap),
            (this.wireframeLinejoin = e.wireframeLinejoin),
            (this.flatShading = e.flatShading),
            (this.fog = e.fog),
            this
          );
        }
      }
      function Di(n, e, t) {
        return L_(n)
          ? new n.constructor(n.subarray(e, t !== void 0 ? t : n.length))
          : n.slice(e, t);
      }
      function Zu(n, e, t) {
        return !n || (!t && n.constructor === e)
          ? n
          : typeof e.BYTES_PER_ELEMENT == "number"
          ? new e(n)
          : Array.prototype.slice.call(n);
      }
      function L_(n) {
        return ArrayBuffer.isView(n) && !(n instanceof DataView);
      }
      function nT(n) {
        const e = n.length,
          t = new Array(e);
        for (let r = 0; r !== e; ++r) t[r] = r;
        return (
          t.sort(function (r, i) {
            return n[r] - n[i];
          }),
          t
        );
      }
      function Qv(n, e, t) {
        const r = n.length,
          i = new n.constructor(r);
        for (let a = 0, s = 0; s !== r; ++a) {
          const o = t[a] * e;
          for (let l = 0; l !== e; ++l) i[s++] = n[o + l];
        }
        return i;
      }
      function D_(n, e, t, r) {
        let i = 1,
          a = n[0];
        for (; a !== void 0 && a[r] === void 0; ) a = n[i++];
        if (a === void 0) return;
        let s = a[r];
        if (s !== void 0)
          if (Array.isArray(s))
            do
              (s = a[r]),
                s !== void 0 && (e.push(a.time), t.push.apply(t, s)),
                (a = n[i++]);
            while (a !== void 0);
          else if (s.toArray !== void 0)
            do
              (s = a[r]),
                s !== void 0 && (e.push(a.time), s.toArray(t, t.length)),
                (a = n[i++]);
            while (a !== void 0);
          else
            do
              (s = a[r]),
                s !== void 0 && (e.push(a.time), t.push(s)),
                (a = n[i++]);
            while (a !== void 0);
      }
      class zh {
        constructor(e, t, r, i) {
          (this.parameterPositions = e),
            (this._cachedIndex = 0),
            (this.resultBuffer = i !== void 0 ? i : new t.constructor(r)),
            (this.sampleValues = t),
            (this.valueSize = r),
            (this.settings = null),
            (this.DefaultSettings_ = {});
        }
        evaluate(e) {
          const t = this.parameterPositions;
          let r = this._cachedIndex,
            i = t[r],
            a = t[r - 1];
          e: {
            t: {
              let s;
              n: {
                r: if (!(e < i)) {
                  for (let o = r + 2; ; ) {
                    if (i === void 0) {
                      if (e < a) break r;
                      return (
                        (r = t.length),
                        (this._cachedIndex = r),
                        this.copySampleValue_(r - 1)
                      );
                    }
                    if (r === o) break;
                    if (((a = i), (i = t[++r]), e < i)) break t;
                  }
                  s = t.length;
                  break n;
                }
                if (e >= a) break e;
                {
                  const o = t[1];
                  e < o && ((r = 2), (a = o));
                  for (let l = r - 2; ; ) {
                    if (a === void 0)
                      return (this._cachedIndex = 0), this.copySampleValue_(0);
                    if (r === l) break;
                    if (((i = a), (a = t[--r - 1]), e >= a)) break t;
                  }
                  (s = r), (r = 0);
                }
              }
              for (; r < s; ) {
                const o = (r + s) >>> 1;
                e < t[o] ? (s = o) : (r = o + 1);
              }
              if (((i = t[r]), (a = t[r - 1]), a === void 0))
                return (this._cachedIndex = 0), this.copySampleValue_(0);
              if (i === void 0)
                return (
                  (r = t.length),
                  (this._cachedIndex = r),
                  this.copySampleValue_(r - 1)
                );
            }
            (this._cachedIndex = r), this.intervalChanged_(r, a, i);
          }
          return this.interpolate_(r, a, e, i);
        }
        getSettings_() {
          return this.settings || this.DefaultSettings_;
        }
        copySampleValue_(e) {
          const t = this.resultBuffer,
            r = this.sampleValues,
            i = this.valueSize,
            a = e * i;
          for (let s = 0; s !== i; ++s) t[s] = r[a + s];
          return t;
        }
        interpolate_() {
          throw new Error("call to abstract method");
        }
        intervalChanged_() {}
      }
      class rT extends zh {
        constructor(e, t, r, i) {
          super(e, t, r, i),
            (this._weightPrev = -0),
            (this._offsetPrev = -0),
            (this._weightNext = -0),
            (this._offsetNext = -0),
            (this.DefaultSettings_ = { endingStart: 2400, endingEnd: 2400 });
        }
        intervalChanged_(e, t, r) {
          const i = this.parameterPositions;
          let a = e - 2,
            s = e + 1,
            o = i[a],
            l = i[s];
          if (o === void 0)
            switch (this.getSettings_().endingStart) {
              case 2401:
                (a = e), (o = 2 * t - r);
                break;
              case 2402:
                (a = i.length - 2), (o = t + i[a] - i[a + 1]);
                break;
              default:
                (a = e), (o = r);
            }
          if (l === void 0)
            switch (this.getSettings_().endingEnd) {
              case 2401:
                (s = e), (l = 2 * r - t);
                break;
              case 2402:
                (s = 1), (l = r + i[1] - i[0]);
                break;
              default:
                (s = e - 1), (l = t);
            }
          const u = 0.5 * (r - t),
            c = this.valueSize;
          (this._weightPrev = u / (t - o)),
            (this._weightNext = u / (l - r)),
            (this._offsetPrev = a * c),
            (this._offsetNext = s * c);
        }
        interpolate_(e, t, r, i) {
          const a = this.resultBuffer,
            s = this.sampleValues,
            o = this.valueSize,
            l = e * o,
            u = l - o,
            c = this._offsetPrev,
            h = this._offsetNext,
            d = this._weightPrev,
            f = this._weightNext,
            g = (r - t) / (i - t),
            p = g * g,
            y = p * g,
            v = -d * y + 2 * d * p - d * g,
            m = (1 + d) * y + (-1.5 - 2 * d) * p + (-0.5 + d) * g + 1,
            x = (-1 - f) * y + (1.5 + f) * p + 0.5 * g,
            _ = f * y - f * p;
          for (let b = 0; b !== o; ++b)
            a[b] = v * s[c + b] + m * s[u + b] + x * s[l + b] + _ * s[h + b];
          return a;
        }
      }
      class iT extends zh {
        constructor(e, t, r, i) {
          super(e, t, r, i);
        }
        interpolate_(e, t, r, i) {
          const a = this.resultBuffer,
            s = this.sampleValues,
            o = this.valueSize,
            l = e * o,
            u = l - o,
            c = (r - t) / (i - t),
            h = 1 - c;
          for (let d = 0; d !== o; ++d) a[d] = s[u + d] * h + s[l + d] * c;
          return a;
        }
      }
      class aT extends zh {
        constructor(e, t, r, i) {
          super(e, t, r, i);
        }
        interpolate_(e) {
          return this.copySampleValue_(e - 1);
        }
      }
      class Xr {
        constructor(e, t, r, i) {
          if (e === void 0)
            throw new Error("THREE.KeyframeTrack: track name is undefined");
          if (t === void 0 || t.length === 0)
            throw new Error(
              "THREE.KeyframeTrack: no keyframes in track named " + e
            );
          (this.name = e),
            (this.times = Zu(t, this.TimeBufferType)),
            (this.values = Zu(r, this.ValueBufferType)),
            this.setInterpolation(i || this.DefaultInterpolation);
        }
        static toJSON(e) {
          const t = e.constructor;
          let r;
          if (t.toJSON !== this.toJSON) r = t.toJSON(e);
          else {
            r = {
              name: e.name,
              times: Zu(e.times, Array),
              values: Zu(e.values, Array),
            };
            const i = e.getInterpolation();
            i !== e.DefaultInterpolation && (r.interpolation = i);
          }
          return (r.type = e.ValueTypeName), r;
        }
        InterpolantFactoryMethodDiscrete(e) {
          return new aT(this.times, this.values, this.getValueSize(), e);
        }
        InterpolantFactoryMethodLinear(e) {
          return new iT(this.times, this.values, this.getValueSize(), e);
        }
        InterpolantFactoryMethodSmooth(e) {
          return new rT(this.times, this.values, this.getValueSize(), e);
        }
        setInterpolation(e) {
          let t;
          switch (e) {
            case 2300:
              t = this.InterpolantFactoryMethodDiscrete;
              break;
            case 2301:
              t = this.InterpolantFactoryMethodLinear;
              break;
            case 2302:
              t = this.InterpolantFactoryMethodSmooth;
          }
          if (t === void 0) {
            const r =
              "unsupported interpolation for " +
              this.ValueTypeName +
              " keyframe track named " +
              this.name;
            if (this.createInterpolant === void 0) {
              if (e === this.DefaultInterpolation) throw new Error(r);
              this.setInterpolation(this.DefaultInterpolation);
            }
            return console.warn("THREE.KeyframeTrack:", r), this;
          }
          return (this.createInterpolant = t), this;
        }
        getInterpolation() {
          switch (this.createInterpolant) {
            case this.InterpolantFactoryMethodDiscrete:
              return 2300;
            case this.InterpolantFactoryMethodLinear:
              return 2301;
            case this.InterpolantFactoryMethodSmooth:
              return 2302;
          }
        }
        getValueSize() {
          return this.values.length / this.times.length;
        }
        shift(e) {
          if (e !== 0) {
            const t = this.times;
            for (let r = 0, i = t.length; r !== i; ++r) t[r] += e;
          }
          return this;
        }
        scale(e) {
          if (e !== 1) {
            const t = this.times;
            for (let r = 0, i = t.length; r !== i; ++r) t[r] *= e;
          }
          return this;
        }
        trim(e, t) {
          const r = this.times,
            i = r.length;
          let a = 0,
            s = i - 1;
          for (; a !== i && r[a] < e; ) ++a;
          for (; s !== -1 && r[s] > t; ) --s;
          if ((++s, a !== 0 || s !== i)) {
            a >= s && ((s = Math.max(s, 1)), (a = s - 1));
            const o = this.getValueSize();
            (this.times = Di(r, a, s)),
              (this.values = Di(this.values, a * o, s * o));
          }
          return this;
        }
        validate() {
          let e = !0;
          const t = this.getValueSize();
          t - Math.floor(t) != 0 &&
            (console.error(
              "THREE.KeyframeTrack: Invalid value size in track.",
              this
            ),
            (e = !1));
          const r = this.times,
            i = this.values,
            a = r.length;
          a === 0 &&
            (console.error("THREE.KeyframeTrack: Track is empty.", this),
            (e = !1));
          let s = null;
          for (let o = 0; o !== a; o++) {
            const l = r[o];
            if (typeof l == "number" && isNaN(l)) {
              console.error(
                "THREE.KeyframeTrack: Time is not a valid number.",
                this,
                o,
                l
              ),
                (e = !1);
              break;
            }
            if (s !== null && s > l) {
              console.error(
                "THREE.KeyframeTrack: Out of order keys.",
                this,
                o,
                l,
                s
              ),
                (e = !1);
              break;
            }
            s = l;
          }
          if (i !== void 0 && L_(i))
            for (let o = 0, l = i.length; o !== l; ++o) {
              const u = i[o];
              if (isNaN(u)) {
                console.error(
                  "THREE.KeyframeTrack: Value is not a valid number.",
                  this,
                  o,
                  u
                ),
                  (e = !1);
                break;
              }
            }
          return e;
        }
        optimize() {
          const e = Di(this.times),
            t = Di(this.values),
            r = this.getValueSize(),
            i = this.getInterpolation() === 2302,
            a = e.length - 1;
          let s = 1;
          for (let o = 1; o < a; ++o) {
            let l = !1;
            const u = e[o];
            if (u !== e[o + 1] && (o !== 1 || u !== e[0]))
              if (i) l = !0;
              else {
                const c = o * r,
                  h = c - r,
                  d = c + r;
                for (let f = 0; f !== r; ++f) {
                  const g = t[c + f];
                  if (g !== t[h + f] || g !== t[d + f]) {
                    l = !0;
                    break;
                  }
                }
              }
            if (l) {
              if (o !== s) {
                e[s] = e[o];
                const c = o * r,
                  h = s * r;
                for (let d = 0; d !== r; ++d) t[h + d] = t[c + d];
              }
              ++s;
            }
          }
          if (a > 0) {
            e[s] = e[a];
            for (let o = a * r, l = s * r, u = 0; u !== r; ++u)
              t[l + u] = t[o + u];
            ++s;
          }
          return (
            s !== e.length
              ? ((this.times = Di(e, 0, s)), (this.values = Di(t, 0, s * r)))
              : ((this.times = e), (this.values = t)),
            this
          );
        }
        clone() {
          const e = Di(this.times, 0),
            t = Di(this.values, 0),
            r = new this.constructor(this.name, e, t);
          return (r.createInterpolant = this.createInterpolant), r;
        }
      }
      (Xr.prototype.TimeBufferType = Float32Array),
        (Xr.prototype.ValueBufferType = Float32Array),
        (Xr.prototype.DefaultInterpolation = 2301);
      class ys extends Xr {}
      (ys.prototype.ValueTypeName = "bool"),
        (ys.prototype.ValueBufferType = Array),
        (ys.prototype.DefaultInterpolation = 2300),
        (ys.prototype.InterpolantFactoryMethodLinear = void 0),
        (ys.prototype.InterpolantFactoryMethodSmooth = void 0);
      class k_ extends Xr {}
      k_.prototype.ValueTypeName = "color";
      class Il extends Xr {}
      Il.prototype.ValueTypeName = "number";
      class sT extends zh {
        constructor(e, t, r, i) {
          super(e, t, r, i);
        }
        interpolate_(e, t, r, i) {
          const a = this.resultBuffer,
            s = this.sampleValues,
            o = this.valueSize,
            l = (r - t) / (i - t);
          let u = e * o;
          for (let c = u + o; u !== c; u += 4)
            ar.slerpFlat(a, 0, s, u - o, s, u, l);
          return a;
        }
      }
      class $s extends Xr {
        InterpolantFactoryMethodLinear(e) {
          return new sT(this.times, this.values, this.getValueSize(), e);
        }
      }
      ($s.prototype.ValueTypeName = "quaternion"),
        ($s.prototype.DefaultInterpolation = 2301),
        ($s.prototype.InterpolantFactoryMethodSmooth = void 0);
      class xs extends Xr {}
      (xs.prototype.ValueTypeName = "string"),
        (xs.prototype.ValueBufferType = Array),
        (xs.prototype.DefaultInterpolation = 2300),
        (xs.prototype.InterpolantFactoryMethodLinear = void 0),
        (xs.prototype.InterpolantFactoryMethodSmooth = void 0);
      class Ul extends Xr {}
      Ul.prototype.ValueTypeName = "vector";
      class oT {
        constructor(e, t = -1, r, i = 2500) {
          (this.name = e),
            (this.tracks = r),
            (this.duration = t),
            (this.blendMode = i),
            (this.uuid = Mr()),
            this.duration < 0 && this.resetDuration();
        }
        static parse(e) {
          const t = [],
            r = e.tracks,
            i = 1 / (e.fps || 1);
          for (let s = 0, o = r.length; s !== o; ++s) t.push(lT(r[s]).scale(i));
          const a = new this(e.name, e.duration, t, e.blendMode);
          return (a.uuid = e.uuid), a;
        }
        static toJSON(e) {
          const t = [],
            r = e.tracks,
            i = {
              name: e.name,
              duration: e.duration,
              tracks: t,
              uuid: e.uuid,
              blendMode: e.blendMode,
            };
          for (let a = 0, s = r.length; a !== s; ++a) t.push(Xr.toJSON(r[a]));
          return i;
        }
        static CreateFromMorphTargetSequence(e, t, r, i) {
          const a = t.length,
            s = [];
          for (let o = 0; o < a; o++) {
            let l = [],
              u = [];
            l.push((o + a - 1) % a, o, (o + 1) % a), u.push(0, 1, 0);
            const c = nT(l);
            (l = Qv(l, 1, c)),
              (u = Qv(u, 1, c)),
              i || l[0] !== 0 || (l.push(a), u.push(u[0])),
              s.push(
                new Il(".morphTargetInfluences[" + t[o].name + "]", l, u).scale(
                  1 / r
                )
              );
          }
          return new this(e, -1, s);
        }
        static findByName(e, t) {
          let r = e;
          if (!Array.isArray(e)) {
            const i = e;
            r = (i.geometry && i.geometry.animations) || i.animations;
          }
          for (let i = 0; i < r.length; i++) if (r[i].name === t) return r[i];
          return null;
        }
        static CreateClipsFromMorphTargetSequences(e, t, r) {
          const i = {},
            a = /^([\w-]*?)([\d]+)$/;
          for (let o = 0, l = e.length; o < l; o++) {
            const u = e[o],
              c = u.name.match(a);
            if (c && c.length > 1) {
              const h = c[1];
              let d = i[h];
              d || (i[h] = d = []), d.push(u);
            }
          }
          const s = [];
          for (const o in i)
            s.push(this.CreateFromMorphTargetSequence(o, i[o], t, r));
          return s;
        }
        static parseAnimation(e, t) {
          if (!e)
            return (
              console.error(
                "THREE.AnimationClip: No animation in JSONLoader data."
              ),
              null
            );
          const r = function (c, h, d, f, g) {
              if (d.length !== 0) {
                const p = [],
                  y = [];
                D_(d, p, y, f), p.length !== 0 && g.push(new c(h, p, y));
              }
            },
            i = [],
            a = e.name || "default",
            s = e.fps || 30,
            o = e.blendMode;
          let l = e.length || -1;
          const u = e.hierarchy || [];
          for (let c = 0; c < u.length; c++) {
            const h = u[c].keys;
            if (h && h.length !== 0)
              if (h[0].morphTargets) {
                const d = {};
                let f;
                for (f = 0; f < h.length; f++)
                  if (h[f].morphTargets)
                    for (let g = 0; g < h[f].morphTargets.length; g++)
                      d[h[f].morphTargets[g]] = -1;
                for (const g in d) {
                  const p = [],
                    y = [];
                  for (let v = 0; v !== h[f].morphTargets.length; ++v) {
                    const m = h[f];
                    p.push(m.time), y.push(m.morphTarget === g ? 1 : 0);
                  }
                  i.push(new Il(".morphTargetInfluence[" + g + "]", p, y));
                }
                l = d.length * s;
              } else {
                const d = ".bones[" + t[c].name + "]";
                r(Ul, d + ".position", h, "pos", i),
                  r($s, d + ".quaternion", h, "rot", i),
                  r(Ul, d + ".scale", h, "scl", i);
              }
          }
          return i.length === 0 ? null : new this(a, l, i, o);
        }
        resetDuration() {
          let e = 0;
          for (let t = 0, r = this.tracks.length; t !== r; ++t) {
            const i = this.tracks[t];
            e = Math.max(e, i.times[i.times.length - 1]);
          }
          return (this.duration = e), this;
        }
        trim() {
          for (let e = 0; e < this.tracks.length; e++)
            this.tracks[e].trim(0, this.duration);
          return this;
        }
        validate() {
          let e = !0;
          for (let t = 0; t < this.tracks.length; t++)
            e = e && this.tracks[t].validate();
          return e;
        }
        optimize() {
          for (let e = 0; e < this.tracks.length; e++)
            this.tracks[e].optimize();
          return this;
        }
        clone() {
          const e = [];
          for (let t = 0; t < this.tracks.length; t++)
            e.push(this.tracks[t].clone());
          return new this.constructor(
            this.name,
            this.duration,
            e,
            this.blendMode
          );
        }
        toJSON() {
          return this.constructor.toJSON(this);
        }
      }
      function lT(n) {
        if (n.type === void 0)
          throw new Error(
            "THREE.KeyframeTrack: track type undefined, can not parse"
          );
        const e = (function (t) {
          switch (t.toLowerCase()) {
            case "scalar":
            case "double":
            case "float":
            case "number":
            case "integer":
              return Il;
            case "vector":
            case "vector2":
            case "vector3":
            case "vector4":
              return Ul;
            case "color":
              return k_;
            case "quaternion":
              return $s;
            case "bool":
            case "boolean":
              return ys;
            case "string":
              return xs;
          }
          throw new Error("THREE.KeyframeTrack: Unsupported typeName: " + t);
        })(n.type);
        if (n.times === void 0) {
          const t = [],
            r = [];
          D_(n.keys, t, r, "value"), (n.times = t), (n.values = r);
        }
        return e.parse !== void 0
          ? e.parse(n)
          : new e(n.name, n.times, n.values, n.interpolation);
      }
      const hh = {
        enabled: !1,
        files: {},
        add: function (n, e) {
          this.enabled !== !1 && (this.files[n] = e);
        },
        get: function (n) {
          if (this.enabled !== !1) return this.files[n];
        },
        remove: function (n) {
          delete this.files[n];
        },
        clear: function () {
          this.files = {};
        },
      };
      class I_ {
        constructor(e, t, r) {
          const i = this;
          let a,
            s = !1,
            o = 0,
            l = 0;
          const u = [];
          (this.onStart = void 0),
            (this.onLoad = e),
            (this.onProgress = t),
            (this.onError = r),
            (this.itemStart = function (c) {
              l++,
                s === !1 && i.onStart !== void 0 && i.onStart(c, o, l),
                (s = !0);
            }),
            (this.itemEnd = function (c) {
              o++,
                i.onProgress !== void 0 && i.onProgress(c, o, l),
                o === l && ((s = !1), i.onLoad !== void 0 && i.onLoad());
            }),
            (this.itemError = function (c) {
              i.onError !== void 0 && i.onError(c);
            }),
            (this.resolveURL = function (c) {
              return a ? a(c) : c;
            }),
            (this.setURLModifier = function (c) {
              return (a = c), this;
            }),
            (this.addHandler = function (c, h) {
              return u.push(c, h), this;
            }),
            (this.removeHandler = function (c) {
              const h = u.indexOf(c);
              return h !== -1 && u.splice(h, 2), this;
            }),
            (this.getHandler = function (c) {
              for (let h = 0, d = u.length; h < d; h += 2) {
                const f = u[h],
                  g = u[h + 1];
                if ((f.global && (f.lastIndex = 0), f.test(c))) return g;
              }
              return null;
            });
        }
      }
      const uT = new I_();
      class Nh {
        constructor(e) {
          (this.manager = e !== void 0 ? e : uT),
            (this.crossOrigin = "anonymous"),
            (this.withCredentials = !1),
            (this.path = ""),
            (this.resourcePath = ""),
            (this.requestHeader = {});
        }
        load() {}
        loadAsync(e, t) {
          const r = this;
          return new Promise(function (i, a) {
            r.load(e, i, t, a);
          });
        }
        parse() {}
        setCrossOrigin(e) {
          return (this.crossOrigin = e), this;
        }
        setWithCredentials(e) {
          return (this.withCredentials = e), this;
        }
        setPath(e) {
          return (this.path = e), this;
        }
        setResourcePath(e) {
          return (this.resourcePath = e), this;
        }
        setRequestHeader(e) {
          return (this.requestHeader = e), this;
        }
      }
      const ii = {};
      class cT extends Error {
        constructor(e, t) {
          super(e), (this.response = t);
        }
      }
      class hT extends Nh {
        constructor(e) {
          super(e);
        }
        load(e, t, r, i) {
          e === void 0 && (e = ""),
            this.path !== void 0 && (e = this.path + e),
            (e = this.manager.resolveURL(e));
          const a = hh.get(e);
          if (a !== void 0)
            return (
              this.manager.itemStart(e),
              setTimeout(() => {
                t && t(a), this.manager.itemEnd(e);
              }, 0),
              a
            );
          if (ii[e] !== void 0)
            return void ii[e].push({ onLoad: t, onProgress: r, onError: i });
          (ii[e] = []), ii[e].push({ onLoad: t, onProgress: r, onError: i });
          const s = new Request(e, {
              headers: new Headers(this.requestHeader),
              credentials: this.withCredentials ? "include" : "same-origin",
            }),
            o = this.mimeType,
            l = this.responseType;
          fetch(s)
            .then((u) => {
              if (u.status === 200 || u.status === 0) {
                if (
                  (u.status === 0 &&
                    console.warn("THREE.FileLoader: HTTP Status 0 received."),
                  typeof ReadableStream > "u" ||
                    u.body === void 0 ||
                    u.body.getReader === void 0)
                )
                  return u;
                const c = ii[e],
                  h = u.body.getReader(),
                  d = u.headers.get("Content-Length"),
                  f = d ? parseInt(d) : 0,
                  g = f !== 0;
                let p = 0;
                const y = new ReadableStream({
                  start(v) {
                    (function m() {
                      h.read().then(({ done: x, value: _ }) => {
                        if (x) v.close();
                        else {
                          p += _.byteLength;
                          const b = new ProgressEvent("progress", {
                            lengthComputable: g,
                            loaded: p,
                            total: f,
                          });
                          for (let w = 0, M = c.length; w < M; w++) {
                            const C = c[w];
                            C.onProgress && C.onProgress(b);
                          }
                          v.enqueue(_), m();
                        }
                      });
                    })();
                  },
                });
                return new Response(y);
              }
              throw new cT(
                `fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,
                u
              );
            })
            .then((u) => {
              switch (l) {
                case "arraybuffer":
                  return u.arrayBuffer();
                case "blob":
                  return u.blob();
                case "document":
                  return u
                    .text()
                    .then((c) => new DOMParser().parseFromString(c, o));
                case "json":
                  return u.json();
                default:
                  if (o === void 0) return u.text();
                  {
                    const c = /charset="?([^;"\s]*)"?/i.exec(o),
                      h = c && c[1] ? c[1].toLowerCase() : void 0,
                      d = new TextDecoder(h);
                    return u.arrayBuffer().then((f) => d.decode(f));
                  }
              }
            })
            .then((u) => {
              hh.add(e, u);
              const c = ii[e];
              delete ii[e];
              for (let h = 0, d = c.length; h < d; h++) {
                const f = c[h];
                f.onLoad && f.onLoad(u);
              }
            })
            .catch((u) => {
              const c = ii[e];
              if (c === void 0) throw (this.manager.itemError(e), u);
              delete ii[e];
              for (let h = 0, d = c.length; h < d; h++) {
                const f = c[h];
                f.onError && f.onError(u);
              }
              this.manager.itemError(e);
            })
            .finally(() => {
              this.manager.itemEnd(e);
            }),
            this.manager.itemStart(e);
        }
        setResponseType(e) {
          return (this.responseType = e), this;
        }
        setMimeType(e) {
          return (this.mimeType = e), this;
        }
      }
      class dT extends Nh {
        constructor(e) {
          super(e);
        }
        load(e, t, r, i) {
          this.path !== void 0 && (e = this.path + e),
            (e = this.manager.resolveURL(e));
          const a = this,
            s = hh.get(e);
          if (s !== void 0)
            return (
              a.manager.itemStart(e),
              setTimeout(function () {
                t && t(s), a.manager.itemEnd(e);
              }, 0),
              s
            );
          const o = kl("img");
          function l() {
            c(), hh.add(e, this), t && t(this), a.manager.itemEnd(e);
          }
          function u(h) {
            c(), i && i(h), a.manager.itemError(e), a.manager.itemEnd(e);
          }
          function c() {
            o.removeEventListener("load", l, !1),
              o.removeEventListener("error", u, !1);
          }
          return (
            o.addEventListener("load", l, !1),
            o.addEventListener("error", u, !1),
            e.slice(0, 5) !== "data:" &&
              this.crossOrigin !== void 0 &&
              (o.crossOrigin = this.crossOrigin),
            a.manager.itemStart(e),
            (o.src = e),
            o
          );
        }
      }
      class U_ extends Nh {
        constructor(e) {
          super(e);
        }
        load(e, t, r, i) {
          const a = new jt(),
            s = new dT(this.manager);
          return (
            s.setCrossOrigin(this.crossOrigin),
            s.setPath(this.path),
            s.load(
              e,
              function (o) {
                (a.image = o), (a.needsUpdate = !0), t !== void 0 && t(a);
              },
              r,
              i
            ),
            a
          );
        }
      }
      class Fh extends ot {
        constructor(e, t = 1) {
          super(),
            (this.isLight = !0),
            (this.type = "Light"),
            (this.color = new Ce(e)),
            (this.intensity = t);
        }
        dispose() {}
        copy(e, t) {
          return (
            super.copy(e, t),
            this.color.copy(e.color),
            (this.intensity = e.intensity),
            this
          );
        }
        toJSON(e) {
          const t = super.toJSON(e);
          return (
            (t.object.color = this.color.getHex()),
            (t.object.intensity = this.intensity),
            this.groundColor !== void 0 &&
              (t.object.groundColor = this.groundColor.getHex()),
            this.distance !== void 0 && (t.object.distance = this.distance),
            this.angle !== void 0 && (t.object.angle = this.angle),
            this.decay !== void 0 && (t.object.decay = this.decay),
            this.penumbra !== void 0 && (t.object.penumbra = this.penumbra),
            this.shadow !== void 0 && (t.object.shadow = this.shadow.toJSON()),
            t
          );
        }
      }
      const e1 = new Te(),
        t1 = new j(),
        n1 = new j();
      class eg {
        constructor(e) {
          (this.camera = e),
            (this.bias = 0),
            (this.normalBias = 0),
            (this.radius = 1),
            (this.blurSamples = 8),
            (this.mapSize = new ge(512, 512)),
            (this.map = null),
            (this.mapPass = null),
            (this.matrix = new Te()),
            (this.autoUpdate = !0),
            (this.needsUpdate = !1),
            (this._frustum = new $m()),
            (this._frameExtents = new ge(1, 1)),
            (this._viewportCount = 1),
            (this._viewports = [new Be(0, 0, 1, 1)]);
        }
        getViewportCount() {
          return this._viewportCount;
        }
        getFrustum() {
          return this._frustum;
        }
        updateMatrices(e) {
          const t = this.camera,
            r = this.matrix;
          t1.setFromMatrixPosition(e.matrixWorld),
            t.position.copy(t1),
            n1.setFromMatrixPosition(e.target.matrixWorld),
            t.lookAt(n1),
            t.updateMatrixWorld(),
            e1.multiplyMatrices(t.projectionMatrix, t.matrixWorldInverse),
            this._frustum.setFromProjectionMatrix(e1),
            r.set(0.5, 0, 0, 0.5, 0, 0.5, 0, 0.5, 0, 0, 0.5, 0.5, 0, 0, 0, 1),
            r.multiply(t.projectionMatrix),
            r.multiply(t.matrixWorldInverse);
        }
        getViewport(e) {
          return this._viewports[e];
        }
        getFrameExtents() {
          return this._frameExtents;
        }
        dispose() {
          this.map && this.map.dispose(),
            this.mapPass && this.mapPass.dispose();
        }
        copy(e) {
          return (
            (this.camera = e.camera.clone()),
            (this.bias = e.bias),
            (this.radius = e.radius),
            this.mapSize.copy(e.mapSize),
            this
          );
        }
        clone() {
          return new this.constructor().copy(this);
        }
        toJSON() {
          const e = {};
          return (
            this.bias !== 0 && (e.bias = this.bias),
            this.normalBias !== 0 && (e.normalBias = this.normalBias),
            this.radius !== 1 && (e.radius = this.radius),
            (this.mapSize.x === 512 && this.mapSize.y === 512) ||
              (e.mapSize = this.mapSize.toArray()),
            (e.camera = this.camera.toJSON(!1).object),
            delete e.camera.matrix,
            e
          );
        }
      }
      class fT extends eg {
        constructor() {
          super(new ln(50, 1, 0.5, 500)),
            (this.isSpotLightShadow = !0),
            (this.focus = 1);
        }
        updateMatrices(e) {
          const t = this.camera,
            r = 2 * Dl * e.angle * this.focus,
            i = this.mapSize.width / this.mapSize.height,
            a = e.distance || t.far;
          (r === t.fov && i === t.aspect && a === t.far) ||
            ((t.fov = r),
            (t.aspect = i),
            (t.far = a),
            t.updateProjectionMatrix()),
            super.updateMatrices(e);
        }
        copy(e) {
          return super.copy(e), (this.focus = e.focus), this;
        }
      }
      class pT extends Fh {
        constructor(e, t, r = 0, i = Math.PI / 3, a = 0, s = 1) {
          super(e, t),
            (this.isSpotLight = !0),
            (this.type = "SpotLight"),
            this.position.copy(ot.DefaultUp),
            this.updateMatrix(),
            (this.target = new ot()),
            (this.distance = r),
            (this.angle = i),
            (this.penumbra = a),
            (this.decay = s),
            (this.map = null),
            (this.shadow = new fT());
        }
        get power() {
          return this.intensity * Math.PI;
        }
        set power(e) {
          this.intensity = e / Math.PI;
        }
        dispose() {
          this.shadow.dispose();
        }
        copy(e, t) {
          return (
            super.copy(e, t),
            (this.distance = e.distance),
            (this.angle = e.angle),
            (this.penumbra = e.penumbra),
            (this.decay = e.decay),
            (this.target = e.target.clone()),
            (this.shadow = e.shadow.clone()),
            this
          );
        }
      }
      const r1 = new Te(),
        jo = new j(),
        hf = new j();
      class mT extends eg {
        constructor() {
          super(new ln(90, 1, 0.5, 500)),
            (this.isPointLightShadow = !0),
            (this._frameExtents = new ge(4, 2)),
            (this._viewportCount = 6),
            (this._viewports = [
              new Be(2, 1, 1, 1),
              new Be(0, 1, 1, 1),
              new Be(3, 1, 1, 1),
              new Be(1, 1, 1, 1),
              new Be(3, 0, 1, 1),
              new Be(1, 0, 1, 1),
            ]),
            (this._cubeDirections = [
              new j(1, 0, 0),
              new j(-1, 0, 0),
              new j(0, 0, 1),
              new j(0, 0, -1),
              new j(0, 1, 0),
              new j(0, -1, 0),
            ]),
            (this._cubeUps = [
              new j(0, 1, 0),
              new j(0, 1, 0),
              new j(0, 1, 0),
              new j(0, 1, 0),
              new j(0, 0, 1),
              new j(0, 0, -1),
            ]);
        }
        updateMatrices(e, t = 0) {
          const r = this.camera,
            i = this.matrix,
            a = e.distance || r.far;
          a !== r.far && ((r.far = a), r.updateProjectionMatrix()),
            jo.setFromMatrixPosition(e.matrixWorld),
            r.position.copy(jo),
            hf.copy(r.position),
            hf.add(this._cubeDirections[t]),
            r.up.copy(this._cubeUps[t]),
            r.lookAt(hf),
            r.updateMatrixWorld(),
            i.makeTranslation(-jo.x, -jo.y, -jo.z),
            r1.multiplyMatrices(r.projectionMatrix, r.matrixWorldInverse),
            this._frustum.setFromProjectionMatrix(r1);
        }
      }
      class Os extends Fh {
        constructor(e, t, r = 0, i = 1) {
          super(e, t),
            (this.isPointLight = !0),
            (this.type = "PointLight"),
            (this.distance = r),
            (this.decay = i),
            (this.shadow = new mT());
        }
        get power() {
          return 4 * this.intensity * Math.PI;
        }
        set power(e) {
          this.intensity = e / (4 * Math.PI);
        }
        dispose() {
          this.shadow.dispose();
        }
        copy(e, t) {
          return (
            super.copy(e, t),
            (this.distance = e.distance),
            (this.decay = e.decay),
            (this.shadow = e.shadow.clone()),
            this
          );
        }
      }
      class gT extends eg {
        constructor() {
          super(new Ym(-5, 5, 5, -5, 0.5, 500)),
            (this.isDirectionalLightShadow = !0);
        }
      }
      class O_ extends Fh {
        constructor(e, t) {
          super(e, t),
            (this.isDirectionalLight = !0),
            (this.type = "DirectionalLight"),
            this.position.copy(ot.DefaultUp),
            this.updateMatrix(),
            (this.target = new ot()),
            (this.shadow = new gT());
        }
        dispose() {
          this.shadow.dispose();
        }
        copy(e) {
          return (
            super.copy(e),
            (this.target = e.target.clone()),
            (this.shadow = e.shadow.clone()),
            this
          );
        }
      }
      class z_ extends Fh {
        constructor(e, t) {
          super(e, t), (this.isAmbientLight = !0), (this.type = "AmbientLight");
        }
      }
      class tg {
        static decodeText(e) {
          if (typeof TextDecoder < "u") return new TextDecoder().decode(e);
          let t = "";
          for (let r = 0, i = e.length; r < i; r++)
            t += String.fromCharCode(e[r]);
          try {
            return decodeURIComponent(escape(t));
          } catch {
            return t;
          }
        }
        static extractUrlBase(e) {
          const t = e.lastIndexOf("/");
          return t === -1 ? "./" : e.slice(0, t + 1);
        }
        static resolveURL(e, t) {
          return typeof e != "string" || e === ""
            ? ""
            : (/^https?:\/\//i.test(t) &&
                /^\//.test(e) &&
                (t = t.replace(/(^https?:\/\/[^\/]+).*/i, "$1")),
              /^(https?:)?\/\//i.test(e) ||
              /^data:.*,.*$/i.test(e) ||
              /^blob:.*$/i.test(e)
                ? e
                : t + e);
        }
      }
      class vT extends Lt {
        constructor() {
          super(),
            (this.isInstancedBufferGeometry = !0),
            (this.type = "InstancedBufferGeometry"),
            (this.instanceCount = 1 / 0);
        }
        copy(e) {
          return super.copy(e), (this.instanceCount = e.instanceCount), this;
        }
        clone() {
          return new this.constructor().copy(this);
        }
        toJSON() {
          const e = super.toJSON(this);
          return (
            (e.instanceCount = this.instanceCount),
            (e.isInstancedBufferGeometry = !0),
            e
          );
        }
      }
      const yT = new RegExp("[\\[\\]\\.:\\/]", "g"),
        xT = "[^" + "\\[\\]\\.:\\/".replace("\\.", "") + "]",
        _T = new RegExp(
          "^" +
            /((?:WC+[\/:])*)/.source.replace("WC", "[^\\[\\]\\.:\\/]") +
            /(WCOD+)?/.source.replace("WCOD", xT) +
            /(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace(
              "WC",
              "[^\\[\\]\\.:\\/]"
            ) +
            /\.(WC+)(?:\[(.+)\])?/.source.replace("WC", "[^\\[\\]\\.:\\/]") +
            "$"
        ),
        bT = ["material", "materials", "bones", "map"];
      class He {
        constructor(e, t, r) {
          (this.path = t),
            (this.parsedPath = r || He.parseTrackName(t)),
            (this.node = He.findNode(e, this.parsedPath.nodeName) || e),
            (this.rootNode = e),
            (this.getValue = this._getValue_unbound),
            (this.setValue = this._setValue_unbound);
        }
        static create(e, t, r) {
          return e && e.isAnimationObjectGroup
            ? new He.Composite(e, t, r)
            : new He(e, t, r);
        }
        static sanitizeNodeName(e) {
          return e.replace(/\s/g, "_").replace(yT, "");
        }
        static parseTrackName(e) {
          const t = _T.exec(e);
          if (t === null)
            throw new Error("PropertyBinding: Cannot parse trackName: " + e);
          const r = {
              nodeName: t[2],
              objectName: t[3],
              objectIndex: t[4],
              propertyName: t[5],
              propertyIndex: t[6],
            },
            i = r.nodeName && r.nodeName.lastIndexOf(".");
          if (i !== void 0 && i !== -1) {
            const a = r.nodeName.substring(i + 1);
            bT.indexOf(a) !== -1 &&
              ((r.nodeName = r.nodeName.substring(0, i)), (r.objectName = a));
          }
          if (r.propertyName === null || r.propertyName.length === 0)
            throw new Error(
              "PropertyBinding: can not parse propertyName from trackName: " + e
            );
          return r;
        }
        static findNode(e, t) {
          if (
            t === void 0 ||
            t === "" ||
            t === "." ||
            t === -1 ||
            t === e.name ||
            t === e.uuid
          )
            return e;
          if (e.skeleton) {
            const r = e.skeleton.getBoneByName(t);
            if (r !== void 0) return r;
          }
          if (e.children) {
            const r = function (a) {
                for (let s = 0; s < a.length; s++) {
                  const o = a[s];
                  if (o.name === t || o.uuid === t) return o;
                  const l = r(o.children);
                  if (l) return l;
                }
                return null;
              },
              i = r(e.children);
            if (i) return i;
          }
          return null;
        }
        _getValue_unavailable() {}
        _setValue_unavailable() {}
        _getValue_direct(e, t) {
          e[t] = this.targetObject[this.propertyName];
        }
        _getValue_array(e, t) {
          const r = this.resolvedProperty;
          for (let i = 0, a = r.length; i !== a; ++i) e[t++] = r[i];
        }
        _getValue_arrayElement(e, t) {
          e[t] = this.resolvedProperty[this.propertyIndex];
        }
        _getValue_toArray(e, t) {
          this.resolvedProperty.toArray(e, t);
        }
        _setValue_direct(e, t) {
          this.targetObject[this.propertyName] = e[t];
        }
        _setValue_direct_setNeedsUpdate(e, t) {
          (this.targetObject[this.propertyName] = e[t]),
            (this.targetObject.needsUpdate = !0);
        }
        _setValue_direct_setMatrixWorldNeedsUpdate(e, t) {
          (this.targetObject[this.propertyName] = e[t]),
            (this.targetObject.matrixWorldNeedsUpdate = !0);
        }
        _setValue_array(e, t) {
          const r = this.resolvedProperty;
          for (let i = 0, a = r.length; i !== a; ++i) r[i] = e[t++];
        }
        _setValue_array_setNeedsUpdate(e, t) {
          const r = this.resolvedProperty;
          for (let i = 0, a = r.length; i !== a; ++i) r[i] = e[t++];
          this.targetObject.needsUpdate = !0;
        }
        _setValue_array_setMatrixWorldNeedsUpdate(e, t) {
          const r = this.resolvedProperty;
          for (let i = 0, a = r.length; i !== a; ++i) r[i] = e[t++];
          this.targetObject.matrixWorldNeedsUpdate = !0;
        }
        _setValue_arrayElement(e, t) {
          this.resolvedProperty[this.propertyIndex] = e[t];
        }
        _setValue_arrayElement_setNeedsUpdate(e, t) {
          (this.resolvedProperty[this.propertyIndex] = e[t]),
            (this.targetObject.needsUpdate = !0);
        }
        _setValue_arrayElement_setMatrixWorldNeedsUpdate(e, t) {
          (this.resolvedProperty[this.propertyIndex] = e[t]),
            (this.targetObject.matrixWorldNeedsUpdate = !0);
        }
        _setValue_fromArray(e, t) {
          this.resolvedProperty.fromArray(e, t);
        }
        _setValue_fromArray_setNeedsUpdate(e, t) {
          this.resolvedProperty.fromArray(e, t),
            (this.targetObject.needsUpdate = !0);
        }
        _setValue_fromArray_setMatrixWorldNeedsUpdate(e, t) {
          this.resolvedProperty.fromArray(e, t),
            (this.targetObject.matrixWorldNeedsUpdate = !0);
        }
        _getValue_unbound(e, t) {
          this.bind(), this.getValue(e, t);
        }
        _setValue_unbound(e, t) {
          this.bind(), this.setValue(e, t);
        }
        bind() {
          let e = this.node;
          const t = this.parsedPath,
            r = t.objectName,
            i = t.propertyName;
          let a = t.propertyIndex;
          if (
            (e ||
              ((e = He.findNode(this.rootNode, t.nodeName) || this.rootNode),
              (this.node = e)),
            (this.getValue = this._getValue_unavailable),
            (this.setValue = this._setValue_unavailable),
            !e)
          )
            return void console.error(
              "THREE.PropertyBinding: Trying to update node for track: " +
                this.path +
                " but it wasn't found."
            );
          if (r) {
            let u = t.objectIndex;
            switch (r) {
              case "materials":
                if (!e.material)
                  return void console.error(
                    "THREE.PropertyBinding: Can not bind to material as node does not have a material.",
                    this
                  );
                if (!e.material.materials)
                  return void console.error(
                    "THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",
                    this
                  );
                e = e.material.materials;
                break;
              case "bones":
                if (!e.skeleton)
                  return void console.error(
                    "THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",
                    this
                  );
                e = e.skeleton.bones;
                for (let c = 0; c < e.length; c++)
                  if (e[c].name === u) {
                    u = c;
                    break;
                  }
                break;
              case "map":
                if (!e.material)
                  return void console.error(
                    "THREE.PropertyBinding: Can not bind to material as node does not have a material.",
                    this
                  );
                if (!e.material.map)
                  return void console.error(
                    "THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",
                    this
                  );
                e = e.material.map;
                break;
              default:
                if (e[r] === void 0)
                  return void console.error(
                    "THREE.PropertyBinding: Can not bind to objectName of node undefined.",
                    this
                  );
                e = e[r];
            }
            if (u !== void 0) {
              if (e[u] === void 0)
                return void console.error(
                  "THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",
                  this,
                  e
                );
              e = e[u];
            }
          }
          const s = e[i];
          if (s === void 0) {
            const u = t.nodeName;
            return void console.error(
              "THREE.PropertyBinding: Trying to update property for track: " +
                u +
                "." +
                i +
                " but it wasn't found.",
              e
            );
          }
          let o = this.Versioning.None;
          (this.targetObject = e),
            e.needsUpdate !== void 0
              ? (o = this.Versioning.NeedsUpdate)
              : e.matrixWorldNeedsUpdate !== void 0 &&
                (o = this.Versioning.MatrixWorldNeedsUpdate);
          let l = this.BindingType.Direct;
          if (a !== void 0) {
            if (i === "morphTargetInfluences") {
              if (!e.geometry)
                return void console.error(
                  "THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",
                  this
                );
              if (!e.geometry.morphAttributes)
                return void console.error(
                  "THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",
                  this
                );
              e.morphTargetDictionary[a] !== void 0 &&
                (a = e.morphTargetDictionary[a]);
            }
            (l = this.BindingType.ArrayElement),
              (this.resolvedProperty = s),
              (this.propertyIndex = a);
          } else
            s.fromArray !== void 0 && s.toArray !== void 0
              ? ((l = this.BindingType.HasFromToArray),
                (this.resolvedProperty = s))
              : Array.isArray(s)
              ? ((l = this.BindingType.EntireArray),
                (this.resolvedProperty = s))
              : (this.propertyName = i);
          (this.getValue = this.GetterByBindingType[l]),
            (this.setValue = this.SetterByBindingTypeAndVersioning[l][o]);
        }
        unbind() {
          (this.node = null),
            (this.getValue = this._getValue_unbound),
            (this.setValue = this._setValue_unbound);
        }
      }
      (He.Composite = class {
        constructor(n, e, t) {
          const r = t || He.parseTrackName(e);
          (this._targetGroup = n), (this._bindings = n.subscribe_(e, r));
        }
        getValue(n, e) {
          this.bind();
          const t = this._targetGroup.nCachedObjects_,
            r = this._bindings[t];
          r !== void 0 && r.getValue(n, e);
        }
        setValue(n, e) {
          const t = this._bindings;
          for (
            let r = this._targetGroup.nCachedObjects_, i = t.length;
            r !== i;
            ++r
          )
            t[r].setValue(n, e);
        }
        bind() {
          const n = this._bindings;
          for (
            let e = this._targetGroup.nCachedObjects_, t = n.length;
            e !== t;
            ++e
          )
            n[e].bind();
        }
        unbind() {
          const n = this._bindings;
          for (
            let e = this._targetGroup.nCachedObjects_, t = n.length;
            e !== t;
            ++e
          )
            n[e].unbind();
        }
      }),
        (He.prototype.BindingType = {
          Direct: 0,
          EntireArray: 1,
          ArrayElement: 2,
          HasFromToArray: 3,
        }),
        (He.prototype.Versioning = {
          None: 0,
          NeedsUpdate: 1,
          MatrixWorldNeedsUpdate: 2,
        }),
        (He.prototype.GetterByBindingType = [
          He.prototype._getValue_direct,
          He.prototype._getValue_array,
          He.prototype._getValue_arrayElement,
          He.prototype._getValue_toArray,
        ]),
        (He.prototype.SetterByBindingTypeAndVersioning = [
          [
            He.prototype._setValue_direct,
            He.prototype._setValue_direct_setNeedsUpdate,
            He.prototype._setValue_direct_setMatrixWorldNeedsUpdate,
          ],
          [
            He.prototype._setValue_array,
            He.prototype._setValue_array_setNeedsUpdate,
            He.prototype._setValue_array_setMatrixWorldNeedsUpdate,
          ],
          [
            He.prototype._setValue_arrayElement,
            He.prototype._setValue_arrayElement_setNeedsUpdate,
            He.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate,
          ],
          [
            He.prototype._setValue_fromArray,
            He.prototype._setValue_fromArray_setNeedsUpdate,
            He.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate,
          ],
        ]);
      class Ye {
        constructor(e) {
          this.value = e;
        }
        clone() {
          return new Ye(
            this.value.clone === void 0 ? this.value : this.value.clone()
          );
        }
      }
      function i1(n, e) {
        return n.distance - e.distance;
      }
      function Ap(n, e, t, r) {
        if ((n.layers.test(e.layers) && n.raycast(e, t), r === !0)) {
          const i = n.children;
          for (let a = 0, s = i.length; a < s; a++) Ap(i[a], e, t, !0);
        }
      }
      class a1 {
        constructor(e = 1, t = 0, r = 0) {
          return (this.radius = e), (this.phi = t), (this.theta = r), this;
        }
        set(e, t, r) {
          return (this.radius = e), (this.phi = t), (this.theta = r), this;
        }
        copy(e) {
          return (
            (this.radius = e.radius),
            (this.phi = e.phi),
            (this.theta = e.theta),
            this
          );
        }
        makeSafe() {
          return (
            (this.phi = Math.max(1e-6, Math.min(Math.PI - 1e-6, this.phi))),
            this
          );
        }
        setFromVector3(e) {
          return this.setFromCartesianCoords(e.x, e.y, e.z);
        }
        setFromCartesianCoords(e, t, r) {
          return (
            (this.radius = Math.sqrt(e * e + t * t + r * r)),
            this.radius === 0
              ? ((this.theta = 0), (this.phi = 0))
              : ((this.theta = Math.atan2(e, r)),
                (this.phi = Math.acos(Gt(t / this.radius, -1, 1)))),
            this
          );
        }
        clone() {
          return new this.constructor().copy(this);
        }
      }
      class wT extends Jt {
        constructor(e, t, r) {
          console.error(
            'THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'
          ),
            super(e, t, r),
            (this.samples = 4);
        }
      }
      class Rp extends uo {
        constructor(e, t, r, i) {
          console.warn(
            "THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."
          ),
            super(e, t, r, i);
        }
      }
      typeof __THREE_DEVTOOLS__ < "u" &&
        __THREE_DEVTOOLS__.dispatchEvent(
          new CustomEvent("register", { detail: { revision: "144" } })
        ),
        typeof window < "u" &&
          (window.__THREE__
            ? console.warn(
                "WARNING: Multiple instances of Three.js being imported."
              )
            : (window.__THREE__ = "144"));
      const s1 = { type: "change" },
        df = { type: "start" },
        o1 = { type: "end" };
      class ST extends Yr {
        constructor(e, t) {
          super(),
            (this.object = e),
            (this.domElement = t),
            (this.domElement.style.touchAction = "none"),
            (this.enabled = !0),
            (this.target = new j()),
            (this.minDistance = 0),
            (this.maxDistance = 1 / 0),
            (this.minZoom = 0),
            (this.maxZoom = 1 / 0),
            (this.minPolarAngle = 0),
            (this.maxPolarAngle = Math.PI),
            (this.minAzimuthAngle = -1 / 0),
            (this.maxAzimuthAngle = 1 / 0),
            (this.enableDamping = !1),
            (this.dampingFactor = 0.05),
            (this.enableZoom = !0),
            (this.zoomSpeed = 1),
            (this.enableRotate = !0),
            (this.rotateSpeed = 1),
            (this.enablePan = !0),
            (this.panSpeed = 1),
            (this.screenSpacePanning = !0),
            (this.keyPanSpeed = 7),
            (this.autoRotate = !1),
            (this.autoRotateSpeed = 2),
            (this.keys = {
              LEFT: "ArrowLeft",
              UP: "ArrowUp",
              RIGHT: "ArrowRight",
              BOTTOM: "ArrowDown",
            }),
            (this.mouseButtons = { LEFT: nv, MIDDLE: rv, RIGHT: iv }),
            (this.touches = { ONE: av, TWO: sv }),
            (this.target0 = this.target.clone()),
            (this.position0 = this.object.position.clone()),
            (this.zoom0 = this.object.zoom),
            (this._domElementKeyEvents = null),
            (this.getPolarAngle = function () {
              return o.phi;
            }),
            (this.getAzimuthalAngle = function () {
              return o.theta;
            }),
            (this.getDistance = function () {
              return this.object.position.distanceTo(this.target);
            }),
            (this.listenToKeyEvents = function (S) {
              S.addEventListener("keydown", Z), (this._domElementKeyEvents = S);
            }),
            (this.saveState = function () {
              r.target0.copy(r.target),
                r.position0.copy(r.object.position),
                (r.zoom0 = r.object.zoom);
            }),
            (this.reset = function () {
              r.target.copy(r.target0),
                r.object.position.copy(r.position0),
                (r.object.zoom = r.zoom0),
                r.object.updateProjectionMatrix(),
                r.dispatchEvent(s1),
                r.update(),
                (a = i.NONE);
            }),
            (this.update = (function () {
              const S = new j(),
                H = new ar().setFromUnitVectors(e.up, new j(0, 1, 0)),
                $ = H.clone().invert(),
                J = new j(),
                te = new ar(),
                ne = 2 * Math.PI;
              return function () {
                const de = r.object.position;
                S.copy(de).sub(r.target),
                  S.applyQuaternion(H),
                  o.setFromVector3(S),
                  r.autoRotate &&
                    a === i.NONE &&
                    C(((2 * Math.PI) / 60 / 60) * r.autoRotateSpeed),
                  r.enableDamping
                    ? ((o.theta += l.theta * r.dampingFactor),
                      (o.phi += l.phi * r.dampingFactor))
                    : ((o.theta += l.theta), (o.phi += l.phi));
                let ue = r.minAzimuthAngle,
                  ce = r.maxAzimuthAngle;
                return (
                  isFinite(ue) &&
                    isFinite(ce) &&
                    (ue < -Math.PI ? (ue += ne) : ue > Math.PI && (ue -= ne),
                    ce < -Math.PI ? (ce += ne) : ce > Math.PI && (ce -= ne),
                    (o.theta =
                      ue <= ce
                        ? Math.max(ue, Math.min(ce, o.theta))
                        : o.theta > (ue + ce) / 2
                        ? Math.max(ue, o.theta)
                        : Math.min(ce, o.theta))),
                  (o.phi = Math.max(
                    r.minPolarAngle,
                    Math.min(r.maxPolarAngle, o.phi)
                  )),
                  o.makeSafe(),
                  (o.radius *= u),
                  (o.radius = Math.max(
                    r.minDistance,
                    Math.min(r.maxDistance, o.radius)
                  )),
                  r.enableDamping === !0
                    ? r.target.addScaledVector(c, r.dampingFactor)
                    : r.target.add(c),
                  S.setFromSpherical(o),
                  S.applyQuaternion($),
                  de.copy(r.target).add(S),
                  r.object.lookAt(r.target),
                  r.enableDamping === !0
                    ? ((l.theta *= 1 - r.dampingFactor),
                      (l.phi *= 1 - r.dampingFactor),
                      c.multiplyScalar(1 - r.dampingFactor))
                    : (l.set(0, 0, 0), c.set(0, 0, 0)),
                  (u = 1),
                  !!(
                    h ||
                    J.distanceToSquared(r.object.position) > s ||
                    8 * (1 - te.dot(r.object.quaternion)) > s
                  ) &&
                    (r.dispatchEvent(s1),
                    J.copy(r.object.position),
                    te.copy(r.object.quaternion),
                    (h = !1),
                    !0)
                );
              };
            })()),
            (this.dispose = function () {
              r.domElement.removeEventListener("contextmenu", re),
                r.domElement.removeEventListener("pointerdown", K),
                r.domElement.removeEventListener("pointercancel", R),
                r.domElement.removeEventListener("wheel", L),
                r.domElement.removeEventListener("pointermove", B),
                r.domElement.removeEventListener("pointerup", Y),
                r._domElementKeyEvents !== null &&
                  r._domElementKeyEvents.removeEventListener("keydown", Z);
            });
          const r = this,
            i = {
              NONE: -1,
              ROTATE: 0,
              DOLLY: 1,
              PAN: 2,
              TOUCH_ROTATE: 3,
              TOUCH_PAN: 4,
              TOUCH_DOLLY_PAN: 5,
              TOUCH_DOLLY_ROTATE: 6,
            };
          let a = i.NONE;
          const s = 1e-6,
            o = new a1(),
            l = new a1();
          let u = 1;
          const c = new j();
          let h = !1;
          const d = new ge(),
            f = new ge(),
            g = new ge(),
            p = new ge(),
            y = new ge(),
            v = new ge(),
            m = new ge(),
            x = new ge(),
            _ = new ge(),
            b = [],
            w = {};
          function M() {
            return Math.pow(0.95, r.zoomSpeed);
          }
          function C(S) {
            l.theta -= S;
          }
          function N(S) {
            l.phi -= S;
          }
          const G = (function () {
              const S = new j();
              return function (H, $) {
                S.setFromMatrixColumn($, 0), S.multiplyScalar(-H), c.add(S);
              };
            })(),
            U = (function () {
              const S = new j();
              return function (H, $) {
                r.screenSpacePanning === !0
                  ? S.setFromMatrixColumn($, 1)
                  : (S.setFromMatrixColumn($, 0),
                    S.crossVectors(r.object.up, S)),
                  S.multiplyScalar(H),
                  c.add(S);
              };
            })(),
            I = (function () {
              const S = new j();
              return function (H, $) {
                const J = r.domElement;
                if (r.object.isPerspectiveCamera) {
                  const te = r.object.position;
                  S.copy(te).sub(r.target);
                  let ne = S.length();
                  (ne *= Math.tan(((r.object.fov / 2) * Math.PI) / 180)),
                    G((2 * H * ne) / J.clientHeight, r.object.matrix),
                    U((2 * $ * ne) / J.clientHeight, r.object.matrix);
                } else
                  r.object.isOrthographicCamera
                    ? (G(
                        (H * (r.object.right - r.object.left)) /
                          r.object.zoom /
                          J.clientWidth,
                        r.object.matrix
                      ),
                      U(
                        ($ * (r.object.top - r.object.bottom)) /
                          r.object.zoom /
                          J.clientHeight,
                        r.object.matrix
                      ))
                    : (console.warn(
                        "WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."
                      ),
                      (r.enablePan = !1));
              };
            })();
          function F(S) {
            r.object.isPerspectiveCamera
              ? (u /= S)
              : r.object.isOrthographicCamera
              ? ((r.object.zoom = Math.max(
                  r.minZoom,
                  Math.min(r.maxZoom, r.object.zoom * S)
                )),
                r.object.updateProjectionMatrix(),
                (h = !0))
              : (console.warn(
                  "WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."
                ),
                (r.enableZoom = !1));
          }
          function T(S) {
            r.object.isPerspectiveCamera
              ? (u *= S)
              : r.object.isOrthographicCamera
              ? ((r.object.zoom = Math.max(
                  r.minZoom,
                  Math.min(r.maxZoom, r.object.zoom / S)
                )),
                r.object.updateProjectionMatrix(),
                (h = !0))
              : (console.warn(
                  "WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."
                ),
                (r.enableZoom = !1));
          }
          function O(S) {
            d.set(S.clientX, S.clientY);
          }
          function k(S) {
            p.set(S.clientX, S.clientY);
          }
          function P() {
            if (b.length === 1) d.set(b[0].pageX, b[0].pageY);
            else {
              const S = 0.5 * (b[0].pageX + b[1].pageX),
                H = 0.5 * (b[0].pageY + b[1].pageY);
              d.set(S, H);
            }
          }
          function E() {
            if (b.length === 1) p.set(b[0].pageX, b[0].pageY);
            else {
              const S = 0.5 * (b[0].pageX + b[1].pageX),
                H = 0.5 * (b[0].pageY + b[1].pageY);
              p.set(S, H);
            }
          }
          function z() {
            const S = b[0].pageX - b[1].pageX,
              H = b[0].pageY - b[1].pageY,
              $ = Math.sqrt(S * S + H * H);
            m.set(0, $);
          }
          function A(S) {
            if (b.length == 1) f.set(S.pageX, S.pageY);
            else {
              const $ = ee(S),
                J = 0.5 * (S.pageX + $.x),
                te = 0.5 * (S.pageY + $.y);
              f.set(J, te);
            }
            g.subVectors(f, d).multiplyScalar(r.rotateSpeed);
            const H = r.domElement;
            C((2 * Math.PI * g.x) / H.clientHeight),
              N((2 * Math.PI * g.y) / H.clientHeight),
              d.copy(f);
          }
          function D(S) {
            if (b.length === 1) y.set(S.pageX, S.pageY);
            else {
              const H = ee(S),
                $ = 0.5 * (S.pageX + H.x),
                J = 0.5 * (S.pageY + H.y);
              y.set($, J);
            }
            v.subVectors(y, p).multiplyScalar(r.panSpeed),
              I(v.x, v.y),
              p.copy(y);
          }
          function V(S) {
            const H = ee(S),
              $ = S.pageX - H.x,
              J = S.pageY - H.y,
              te = Math.sqrt($ * $ + J * J);
            x.set(0, te),
              _.set(0, Math.pow(x.y / m.y, r.zoomSpeed)),
              F(_.y),
              m.copy(x);
          }
          function K(S) {
            r.enabled !== !1 &&
              (b.length === 0 &&
                (r.domElement.setPointerCapture(S.pointerId),
                r.domElement.addEventListener("pointermove", B),
                r.domElement.addEventListener("pointerup", Y)),
              (function (H) {
                b.push(H);
              })(S),
              S.pointerType === "touch"
                ? (function (H) {
                    switch ((Q(H), b.length)) {
                      case 1:
                        switch (r.touches.ONE) {
                          case av:
                            if (r.enableRotate === !1) return;
                            P(), (a = i.TOUCH_ROTATE);
                            break;
                          case Y2:
                            if (r.enablePan === !1) return;
                            E(), (a = i.TOUCH_PAN);
                            break;
                          default:
                            a = i.NONE;
                        }
                        break;
                      case 2:
                        switch (r.touches.TWO) {
                          case sv:
                            if (r.enableZoom === !1 && r.enablePan === !1)
                              return;
                            r.enableZoom && z(),
                              r.enablePan && E(),
                              (a = i.TOUCH_DOLLY_PAN);
                            break;
                          case Z2:
                            if (r.enableZoom === !1 && r.enableRotate === !1)
                              return;
                            r.enableZoom && z(),
                              r.enableRotate && P(),
                              (a = i.TOUCH_DOLLY_ROTATE);
                            break;
                          default:
                            a = i.NONE;
                        }
                        break;
                      default:
                        a = i.NONE;
                    }
                    a !== i.NONE && r.dispatchEvent(df);
                  })(S)
                : (function (H) {
                    let $;
                    switch (H.button) {
                      case 0:
                        $ = r.mouseButtons.LEFT;
                        break;
                      case 1:
                        $ = r.mouseButtons.MIDDLE;
                        break;
                      case 2:
                        $ = r.mouseButtons.RIGHT;
                        break;
                      default:
                        $ = -1;
                    }
                    switch ($) {
                      case rv:
                        if (r.enableZoom === !1) return;
                        (function (J) {
                          m.set(J.clientX, J.clientY);
                        })(H),
                          (a = i.DOLLY);
                        break;
                      case nv:
                        if (H.ctrlKey || H.metaKey || H.shiftKey) {
                          if (r.enablePan === !1) return;
                          k(H), (a = i.PAN);
                        } else {
                          if (r.enableRotate === !1) return;
                          O(H), (a = i.ROTATE);
                        }
                        break;
                      case iv:
                        if (H.ctrlKey || H.metaKey || H.shiftKey) {
                          if (r.enableRotate === !1) return;
                          O(H), (a = i.ROTATE);
                        } else {
                          if (r.enablePan === !1) return;
                          k(H), (a = i.PAN);
                        }
                        break;
                      default:
                        a = i.NONE;
                    }
                    a !== i.NONE && r.dispatchEvent(df);
                  })(S));
          }
          function B(S) {
            r.enabled !== !1 &&
              (S.pointerType === "touch"
                ? (function (H) {
                    switch ((Q(H), a)) {
                      case i.TOUCH_ROTATE:
                        if (r.enableRotate === !1) return;
                        A(H), r.update();
                        break;
                      case i.TOUCH_PAN:
                        if (r.enablePan === !1) return;
                        D(H), r.update();
                        break;
                      case i.TOUCH_DOLLY_PAN:
                        if (r.enableZoom === !1 && r.enablePan === !1) return;
                        (function ($) {
                          r.enableZoom && V($), r.enablePan && D($);
                        })(H),
                          r.update();
                        break;
                      case i.TOUCH_DOLLY_ROTATE:
                        if (r.enableZoom === !1 && r.enableRotate === !1)
                          return;
                        (function ($) {
                          r.enableZoom && V($), r.enableRotate && A($);
                        })(H),
                          r.update();
                        break;
                      default:
                        a = i.NONE;
                    }
                  })(S)
                : (function (H) {
                    switch (a) {
                      case i.ROTATE:
                        if (r.enableRotate === !1) return;
                        (function ($) {
                          f.set($.clientX, $.clientY),
                            g.subVectors(f, d).multiplyScalar(r.rotateSpeed);
                          const J = r.domElement;
                          C((2 * Math.PI * g.x) / J.clientHeight),
                            N((2 * Math.PI * g.y) / J.clientHeight),
                            d.copy(f),
                            r.update();
                        })(H);
                        break;
                      case i.DOLLY:
                        if (r.enableZoom === !1) return;
                        (function ($) {
                          x.set($.clientX, $.clientY),
                            _.subVectors(x, m),
                            _.y > 0 ? F(M()) : _.y < 0 && T(M()),
                            m.copy(x),
                            r.update();
                        })(H);
                        break;
                      case i.PAN:
                        if (r.enablePan === !1) return;
                        (function ($) {
                          y.set($.clientX, $.clientY),
                            v.subVectors(y, p).multiplyScalar(r.panSpeed),
                            I(v.x, v.y),
                            p.copy(y),
                            r.update();
                        })(H);
                    }
                  })(S));
          }
          function Y(S) {
            q(S),
              b.length === 0 &&
                (r.domElement.releasePointerCapture(S.pointerId),
                r.domElement.removeEventListener("pointermove", B),
                r.domElement.removeEventListener("pointerup", Y)),
              r.dispatchEvent(o1),
              (a = i.NONE);
          }
          function R(S) {
            q(S);
          }
          function L(S) {
            r.enabled !== !1 &&
              r.enableZoom !== !1 &&
              a === i.NONE &&
              (S.preventDefault(),
              r.dispatchEvent(df),
              (function (H) {
                H.deltaY < 0 ? T(M()) : H.deltaY > 0 && F(M()), r.update();
              })(S),
              r.dispatchEvent(o1));
          }
          function Z(S) {
            r.enabled !== !1 &&
              r.enablePan !== !1 &&
              (function (H) {
                let $ = !1;
                switch (H.code) {
                  case r.keys.UP:
                    I(0, r.keyPanSpeed), ($ = !0);
                    break;
                  case r.keys.BOTTOM:
                    I(0, -r.keyPanSpeed), ($ = !0);
                    break;
                  case r.keys.LEFT:
                    I(r.keyPanSpeed, 0), ($ = !0);
                    break;
                  case r.keys.RIGHT:
                    I(-r.keyPanSpeed, 0), ($ = !0);
                }
                $ && (H.preventDefault(), r.update());
              })(S);
          }
          function re(S) {
            r.enabled !== !1 && S.preventDefault();
          }
          function q(S) {
            delete w[S.pointerId];
            for (let H = 0; H < b.length; H++)
              if (b[H].pointerId == S.pointerId) return void b.splice(H, 1);
          }
          function Q(S) {
            let H = w[S.pointerId];
            H === void 0 && ((H = new ge()), (w[S.pointerId] = H)),
              H.set(S.pageX, S.pageY);
          }
          function ee(S) {
            const H = S.pointerId === b[0].pointerId ? b[1] : b[0];
            return w[H.pointerId];
          }
          r.domElement.addEventListener("contextmenu", re),
            r.domElement.addEventListener("pointerdown", K),
            r.domElement.addEventListener("pointercancel", R),
            r.domElement.addEventListener("wheel", L, { passive: !1 }),
            this.update();
        }
      }
      var ng = {};
      Object.defineProperty(ng, "__esModule", { value: !0 });
      var Ku,
        N_ = (ng.default = void 0),
        ga = (Ku = rt.exports) && Ku.__esModule ? Ku : { default: Ku };
      function Pp(n) {
        return (
          (Pp =
            typeof Symbol == "function" && typeof Symbol.iterator == "symbol"
              ? function (e) {
                  return typeof e;
                }
              : function (e) {
                  return e &&
                    typeof Symbol == "function" &&
                    e.constructor === Symbol &&
                    e !== Symbol.prototype
                    ? "symbol"
                    : typeof e;
                }),
          Pp(n)
        );
      }
      function l1(n) {
        for (var e = 1; e < arguments.length; e++) {
          var t = arguments[e] != null ? arguments[e] : {},
            r = Object.keys(t);
          typeof Object.getOwnPropertySymbols == "function" &&
            (r = r.concat(
              Object.getOwnPropertySymbols(t).filter(function (i) {
                return Object.getOwnPropertyDescriptor(t, i).enumerable;
              })
            )),
            r.forEach(function (i) {
              Yt(n, i, t[i]);
            });
        }
        return n;
      }
      function MT(n, e) {
        if (!(n instanceof e))
          throw new TypeError("Cannot call a class as a function");
      }
      function dh(n, e) {
        return (
          (dh =
            Object.setPrototypeOf ||
            function (t, r) {
              return (t.__proto__ = r), t;
            }),
          dh(n, e)
        );
      }
      function u1(n, e) {
        for (var t = 0; t < e.length; t++) {
          var r = e[t];
          (r.enumerable = r.enumerable || !1),
            (r.configurable = !0),
            "value" in r && (r.writable = !0),
            Object.defineProperty(n, r.key, r);
        }
      }
      function c1(n, e) {
        return !e || (Pp(e) !== "object" && typeof e != "function") ? We(n) : e;
      }
      function Lp(n) {
        return (
          (Lp =
            Object.getPrototypeOf ||
            function (e) {
              return e.__proto__;
            }),
          Lp(n)
        );
      }
      function We(n) {
        if (n === void 0)
          throw new ReferenceError(
            "this hasn't been initialised - super() hasn't been called"
          );
        return n;
      }
      function Yt(n, e, t) {
        return (
          e in n
            ? Object.defineProperty(n, e, {
                value: t,
                enumerable: !0,
                configurable: !0,
                writable: !0,
              })
            : (n[e] = t),
          n
        );
      }
      var ff = {
          position: "absolute",
          left: 0,
          top: 0,
          right: 0,
          bottom: 0,
          overflow: "hidden",
          zIndex: -1,
          visibility: "hidden",
          pointerEvents: "none",
        },
        h1 = { position: "absolute", left: 0, top: 0, transition: "0s" };
      function TT(n, e) {
        for (var t = n.parentNode; t; ) {
          if (t === e) return !0;
          t = t.parentNode;
        }
        return !1;
      }
      var F_ = (function (n) {
        function e() {
          var a, s, o;
          MT(this, e);
          for (var l = arguments.length, u = new Array(l), c = 0; c < l; c++)
            u[c] = arguments[c];
          return c1(
            o,
            ((s = o = c1(this, (a = Lp(e)).call.apply(a, [this].concat(u)))),
            Yt(We(We(o)), "_expandRef", null),
            Yt(We(We(o)), "_shrinkRef", null),
            Yt(We(We(o)), "_node", null),
            Yt(We(We(o)), "_lastWidth", void 0),
            Yt(We(We(o)), "_lastHeight", void 0),
            Yt(We(We(o)), "_lastRect", void 0),
            Yt(We(We(o)), "_hasResize", !1),
            Yt(We(We(o)), "_handleScroll", function (h) {
              (o.props.onPosition || o.props.onReflow || o.props.onResize) &&
                (o._globalScollTarget(h.target) ||
                  o._refScrollTarget(h.target) ||
                  o._ancestorScollTarget(h.target)) &&
                o._reflow();
            }),
            Yt(We(We(o)), "_globalScollTarget", function (h) {
              return (
                h instanceof Node &&
                (o.props.onPosition || o.props.onReflow) &&
                (h === document ||
                  h === document.documentElement ||
                  h === document.body)
              );
            }),
            Yt(We(We(o)), "_refScrollTarget", function (h) {
              if (
                h instanceof HTMLElement &&
                (h === o._expandRef || h === o._shrinkRef)
              ) {
                var d = h.offsetWidth,
                  f = h.offsetHeight;
                if (d !== o._lastWidth || f !== o._lastHeight)
                  return (
                    (o._lastWidth = d),
                    (o._lastHeight = f),
                    o._reset(o._expandRef),
                    o._reset(o._shrinkRef),
                    !0
                  );
              }
              return !1;
            }),
            Yt(We(We(o)), "_ancestorScollTarget", function (h) {
              return (
                h instanceof Node &&
                (o.props.onPosition || o.props.onReflow) &&
                o._node &&
                TT(o._node, h)
              );
            }),
            Yt(We(We(o)), "_reflow", function () {
              if (o._node && o._node.parentNode instanceof Element) {
                var h = o._node.parentNode.getBoundingClientRect(),
                  d = !0,
                  f = !0;
                o._lastRect &&
                  ((d =
                    h.width !== o._lastRect.width ||
                    h.height !== o._lastRect.height),
                  (f =
                    h.top !== o._lastRect.top || h.left !== o._lastRect.left)),
                  (o._lastRect = h),
                  d && o.props.onResize && o.props.onResize(h),
                  f && o.props.onPosition && o.props.onPosition(h),
                  (d || f) && o.props.onReflow && o.props.onReflow(h);
              }
            }),
            Yt(We(We(o)), "_handleRef", function (h) {
              o._node = h;
            }),
            Yt(We(We(o)), "_handleExpandRef", function (h) {
              o._reset(h), (o._expandRef = h);
            }),
            Yt(We(We(o)), "_handleShrinkRef", function (h) {
              o._reset(h), (o._shrinkRef = h);
            }),
            s)
          );
        }
        var t, r, i;
        return (
          (t = e),
          (r = [
            {
              key: "componentDidMount",
              value: function () {
                this._reflow(),
                  window.addEventListener("scroll", this._handleScroll, !0),
                  (this.props.onPosition || this.props.onReflow) &&
                    (window.addEventListener("resize", this._reflow, !0),
                    (this._hasResize = !0));
              },
            },
            {
              key: "componentDidUpdate",
              value: function () {
                (!this.props.onPosition && !this.props.onReflow) ||
                this._hasResize
                  ? this.props.onPosition ||
                    this.props.onReflow ||
                    !this._hasResize ||
                    (window.removeEventListener("resize", this._reflow, !0),
                    (this._hasResize = !1))
                  : (window.addEventListener("resize", this._reflow, !0),
                    (this._hasResize = !0));
              },
            },
            {
              key: "componentWillUnmount",
              value: function () {
                window.removeEventListener("scroll", this._handleScroll, !0),
                  this._hasResize &&
                    window.removeEventListener("resize", this._reflow, !0);
              },
            },
            {
              key: "_reset",
              value: function (a) {
                a && ((a.scrollLeft = 1e5), (a.scrollTop = 1e5));
              },
            },
            {
              key: "render",
              value: function () {
                return this.props.onResize || this.props.onReflow
                  ? ga.default.createElement(
                      "div",
                      { style: ff, ref: this._handleRef },
                      ga.default.createElement(
                        "div",
                        { ref: this._handleExpandRef, style: ff },
                        ga.default.createElement("div", {
                          style: l1({}, h1, { width: 1e5, height: 1e5 }),
                        })
                      ),
                      ga.default.createElement(
                        "div",
                        { ref: this._handleShrinkRef, style: ff },
                        ga.default.createElement("div", {
                          style: l1({}, h1, { width: "200%", height: "200%" }),
                        })
                      )
                    )
                  : ga.default.createElement("noscript", {
                      ref: this._handleRef,
                    });
              },
            },
          ]) && u1(t.prototype, r),
          i && u1(t, i),
          (function (a, s) {
            if (typeof s != "function" && s !== null)
              throw new TypeError(
                "Super expression must either be null or a function"
              );
            dh(a.prototype, s && s.prototype), s && dh(a, s);
          })(e, n),
          e
        );
      })(ga.default.Component);
      Yt(F_, "displayName", "ResizeObserver");
      var ET = F_;
      N_ = ng.default = ET;
      /**
       * postprocessing v6.28.7 build Wed Aug 31 2022
       * https://github.com/pmndrs/postprocessing
       * Copyright 2015-2022 Raoul van RÃ¼schen
       * @license Zlib
       */ var B_ =
          "varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",
        CT = 0,
        AT = 1,
        RT = 2,
        PT = 3,
        LT = 4,
        DT = 5,
        kT = 6,
        IT = 7,
        UT = 8,
        G_ = 9,
        OT = 10,
        zT = 11,
        NT = 12,
        FT = 13,
        BT = 14,
        GT = 15,
        HT = 16,
        VT = 17,
        WT = 18,
        jT = 19,
        XT = 20,
        qT = 21,
        $T = 22,
        H_ = 23,
        YT = 24,
        ZT = 25,
        KT = 26,
        JT = 27,
        V_ = 28,
        QT = 29,
        e3 = 30,
        t3 = 31,
        n3 = 32,
        W_ = 0,
        Dp = 1,
        j_ = 2,
        Ve = {
          FRAGMENT_HEAD: "FRAGMENT_HEAD",
          FRAGMENT_MAIN_UV: "FRAGMENT_MAIN_UV",
          FRAGMENT_MAIN_IMAGE: "FRAGMENT_MAIN_IMAGE",
          VERTEX_HEAD: "VERTEX_HEAD",
          VERTEX_MAIN_SUPPORT: "VERTEX_MAIN_SUPPORT",
        },
        X_ = 2,
        r3 = 3,
        i3 = [
          new Float32Array([0, 0]),
          new Float32Array([0, 1, 1]),
          new Float32Array([0, 1, 1, 2]),
          new Float32Array([0, 1, 2, 2, 3]),
          new Float32Array([0, 1, 2, 3, 4, 4, 5]),
          new Float32Array([0, 1, 2, 3, 4, 5, 7, 8, 9, 10]),
        ],
        a3 = class extends hn {
          constructor(n = new Be()) {
            super({
              name: "KawaseBlurMaterial",
              uniforms: {
                inputBuffer: new Ye(null),
                texelSize: new Ye(new Be()),
                scale: new Ye(1),
                kernel: new Ye(0),
              },
              blending: 0,
              depthWrite: !1,
              depthTest: !1,
              fragmentShader: `#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
}`,
              vertexShader:
                "uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",
            }),
              (this.toneMapped = !1),
              this.setTexelSize(n.x, n.y),
              (this.kernelSize = X_);
          }
          set inputBuffer(n) {
            this.uniforms.inputBuffer.value = n;
          }
          setInputBuffer(n) {
            this.inputBuffer = n;
          }
          get kernelSequence() {
            return i3[this.kernelSize];
          }
          get scale() {
            return this.uniforms.scale.value;
          }
          set scale(n) {
            this.uniforms.scale.value = n;
          }
          getScale() {
            return this.uniforms.scale.value;
          }
          setScale(n) {
            this.uniforms.scale.value = n;
          }
          getKernel() {
            return null;
          }
          get kernel() {
            return this.uniforms.kernel.value;
          }
          set kernel(n) {
            this.uniforms.kernel.value = n;
          }
          setKernel(n) {
            this.kernel = n;
          }
          setTexelSize(n, e) {
            this.uniforms.texelSize.value.set(n, e, 0.5 * n, 0.5 * e);
          }
          setSize(n, e) {
            const t = 1 / n,
              r = 1 / e;
            this.uniforms.texelSize.value.set(t, r, 0.5 * t, 0.5 * r);
          }
        },
        q_ = class extends hn {
          constructor() {
            super({
              name: "CopyMaterial",
              uniforms: { inputBuffer: new Ye(null), opacity: new Ye(1) },
              blending: 0,
              depthWrite: !1,
              depthTest: !1,
              fragmentShader: `#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
#include <dithering_fragment>
}`,
              vertexShader: B_,
            }),
              (this.toneMapped = !1);
          }
          set inputBuffer(n) {
            this.uniforms.inputBuffer.value = n;
          }
          setInputBuffer(n) {
            this.uniforms.inputBuffer.value = n;
          }
          getOpacity(n) {
            return this.uniforms.opacity.value;
          }
          setOpacity(n) {
            this.uniforms.opacity.value = n;
          }
        },
        s3 = class extends hn {
          constructor() {
            super({
              name: "DownsamplingMaterial",
              uniforms: {
                inputBuffer: new Ye(null),
                texelSize: new Ye(new ge()),
              },
              blending: 0,
              depthWrite: !1,
              depthTest: !1,
              fragmentShader: `#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <encodings_fragment>
}`,
              vertexShader:
                "uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",
            }),
              (this.toneMapped = !1);
          }
          set inputBuffer(n) {
            this.uniforms.inputBuffer.value = n;
          }
          setSize(n, e) {
            this.uniforms.texelSize.value.set(1 / n, 1 / e);
          }
        },
        o3 = class extends hn {
          constructor(n, e, t, r, i = !1) {
            super({
              name: "EffectMaterial",
              defines: {
                THREE_REVISION: "144".replace(/\D+/g, ""),
                DEPTH_PACKING: "0",
                ENCODE_OUTPUT: "1",
              },
              uniforms: {
                inputBuffer: new Ye(null),
                depthBuffer: new Ye(null),
                resolution: new Ye(new ge()),
                texelSize: new Ye(new ge()),
                cameraNear: new Ye(0.3),
                cameraFar: new Ye(1e3),
                aspect: new Ye(1),
                time: new Ye(0),
              },
              blending: 0,
              depthWrite: !1,
              depthTest: !1,
              dithering: i,
            }),
              (this.toneMapped = !1),
              n && this.setShaderParts(n),
              e && this.setDefines(e),
              t && this.setUniforms(t),
              this.adoptCameraSettings(r);
          }
          set inputBuffer(n) {
            this.uniforms.inputBuffer.value = n;
          }
          setInputBuffer(n) {
            this.uniforms.inputBuffer.value = n;
          }
          get depthBuffer() {
            return this.uniforms.depthBuffer.value;
          }
          set depthBuffer(n) {
            this.uniforms.depthBuffer.value = n;
          }
          get depthPacking() {
            return Number(this.defines.DEPTH_PACKING);
          }
          set depthPacking(n) {
            (this.defines.DEPTH_PACKING = n.toFixed(0)),
              (this.needsUpdate = !0);
          }
          setDepthBuffer(n, e = 3200) {
            (this.depthBuffer = n), (this.depthPacking = e);
          }
          setShaderData(n) {
            this.setShaderParts(n.shaderParts),
              this.setDefines(n.defines),
              this.setUniforms(n.uniforms),
              this.setExtensions(n.extensions);
          }
          setShaderParts(n) {
            var e, t, r, i, a;
            return (
              (this.fragmentShader = `#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`
                .replace(
                  Ve.FRAGMENT_HEAD,
                  (e = n.get(Ve.FRAGMENT_HEAD)) != null ? e : ""
                )
                .replace(
                  Ve.FRAGMENT_MAIN_UV,
                  (t = n.get(Ve.FRAGMENT_MAIN_UV)) != null ? t : ""
                )
                .replace(
                  Ve.FRAGMENT_MAIN_IMAGE,
                  (r = n.get(Ve.FRAGMENT_MAIN_IMAGE)) != null ? r : ""
                )),
              (this.vertexShader =
                "uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}"
                  .replace(
                    Ve.VERTEX_HEAD,
                    (i = n.get(Ve.VERTEX_HEAD)) != null ? i : ""
                  )
                  .replace(
                    Ve.VERTEX_MAIN_SUPPORT,
                    (a = n.get(Ve.VERTEX_MAIN_SUPPORT)) != null ? a : ""
                  )),
              (this.needsUpdate = !0),
              this
            );
          }
          setDefines(n) {
            for (const e of n.entries()) this.defines[e[0]] = e[1];
            return (this.needsUpdate = !0), this;
          }
          setUniforms(n) {
            for (const e of n.entries()) this.uniforms[e[0]] = e[1];
            return this;
          }
          setExtensions(n) {
            this.extensions = {};
            for (const e of n) this.extensions[e] = !0;
            return this;
          }
          get encodeOutput() {
            return this.defines.ENCODE_OUTPUT !== void 0;
          }
          set encodeOutput(n) {
            this.encodeOutput !== n &&
              (n
                ? (this.defines.ENCODE_OUTPUT = "1")
                : delete this.defines.ENCODE_OUTPUT,
              (this.needsUpdate = !0));
          }
          isOutputEncodingEnabled(n) {
            return this.encodeOutput;
          }
          setOutputEncodingEnabled(n) {
            this.encodeOutput = n;
          }
          get time() {
            return this.uniforms.time.value;
          }
          set time(n) {
            this.uniforms.time.value = n;
          }
          setDeltaTime(n) {
            this.uniforms.time.value += n;
          }
          adoptCameraSettings(n) {
            n &&
              ((this.uniforms.cameraNear.value = n.near),
              (this.uniforms.cameraFar.value = n.far),
              n instanceof ln
                ? (this.defines.PERSPECTIVE_CAMERA = "1")
                : delete this.defines.PERSPECTIVE_CAMERA,
              (this.needsUpdate = !0));
          }
          setSize(n, e) {
            const t = this.uniforms;
            t.resolution.value.set(n, e),
              t.texelSize.value.set(1 / n, 1 / e),
              (t.aspect.value = n / e);
          }
          static get Section() {
            return Ve;
          }
        },
        l3 = class extends hn {
          constructor(n = !1, e = null) {
            super({
              name: "LuminanceMaterial",
              defines: { THREE_REVISION: "144".replace(/\D+/g, "") },
              uniforms: {
                inputBuffer: new Ye(null),
                threshold: new Ye(0),
                smoothing: new Ye(1),
                range: new Ye(null),
              },
              blending: 0,
              depthWrite: !1,
              depthTest: !1,
              fragmentShader: `#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,
              vertexShader: B_,
            }),
              (this.toneMapped = !1),
              (this.colorOutput = n),
              (this.luminanceRange = e);
          }
          set inputBuffer(n) {
            this.uniforms.inputBuffer.value = n;
          }
          setInputBuffer(n) {
            this.uniforms.inputBuffer.value = n;
          }
          get threshold() {
            return this.uniforms.threshold.value;
          }
          set threshold(n) {
            this.smoothing > 0 || n > 0
              ? (this.defines.THRESHOLD = "1")
              : delete this.defines.THRESHOLD,
              (this.uniforms.threshold.value = n);
          }
          getThreshold() {
            return this.threshold;
          }
          setThreshold(n) {
            this.threshold = n;
          }
          get smoothing() {
            return this.uniforms.smoothing.value;
          }
          set smoothing(n) {
            this.threshold > 0 || n > 0
              ? (this.defines.THRESHOLD = "1")
              : delete this.defines.THRESHOLD,
              (this.uniforms.smoothing.value = n);
          }
          getSmoothingFactor() {
            return this.smoothing;
          }
          setSmoothingFactor(n) {
            this.smoothing = n;
          }
          get useThreshold() {
            return this.threshold > 0 || this.smoothing > 0;
          }
          set useThreshold(n) {}
          get colorOutput() {
            return this.defines.COLOR !== void 0;
          }
          set colorOutput(n) {
            n ? (this.defines.COLOR = "1") : delete this.defines.COLOR,
              (this.needsUpdate = !0);
          }
          isColorOutputEnabled(n) {
            return this.colorOutput;
          }
          setColorOutputEnabled(n) {
            this.colorOutput = n;
          }
          get useRange() {
            return this.luminanceRange !== null;
          }
          set useRange(n) {
            this.luminanceRange = null;
          }
          get luminanceRange() {
            return this.uniforms.range.value;
          }
          set luminanceRange(n) {
            n !== null ? (this.defines.RANGE = "1") : delete this.defines.RANGE,
              (this.uniforms.range.value = n),
              (this.needsUpdate = !0);
          }
          getLuminanceRange() {
            return this.luminanceRange;
          }
          setLuminanceRange(n) {
            this.luminanceRange = n;
          }
        },
        u3 = class extends hn {
          constructor() {
            super({
              name: "UpsamplingMaterial",
              uniforms: {
                inputBuffer: new Ye(null),
                supportBuffer: new Ye(null),
                texelSize: new Ye(new ge()),
                radius: new Ye(0.85),
              },
              blending: 0,
              depthWrite: !1,
              depthTest: !1,
              fragmentShader: `#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <encodings_fragment>
}`,
              vertexShader:
                "uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",
            }),
              (this.toneMapped = !1);
          }
          set inputBuffer(n) {
            this.uniforms.inputBuffer.value = n;
          }
          set supportBuffer(n) {
            this.uniforms.supportBuffer.value = n;
          }
          get radius() {
            return this.uniforms.radius.value;
          }
          set radius(n) {
            this.uniforms.radius.value = n;
          }
          setSize(n, e) {
            this.uniforms.texelSize.value.set(1 / n, 1 / e);
          }
        },
        c3 = new qm(),
        va = null,
        Er = class {
          constructor(n = "Pass", e = new Mp(), t = c3) {
            (this.name = n),
              (this.renderer = null),
              (this.scene = e),
              (this.camera = t),
              (this.screen = null),
              (this.rtt = !0),
              (this.needsSwap = !0),
              (this.needsDepthTexture = !1),
              (this.enabled = !0);
          }
          get renderToScreen() {
            return !this.rtt;
          }
          set renderToScreen(n) {
            if (this.rtt === n) {
              const e = this.fullscreenMaterial;
              e !== null && (e.needsUpdate = !0), (this.rtt = !n);
            }
          }
          setRenderer(n) {
            this.renderer = n;
          }
          isEnabled() {
            return this.enabled;
          }
          setEnabled(n) {
            this.enabled = n;
          }
          get fullscreenMaterial() {
            return this.screen !== null ? this.screen.material : null;
          }
          set fullscreenMaterial(n) {
            let e = this.screen;
            e !== null
              ? (e.material = n)
              : ((e = new xt(
                  (function () {
                    if (va === null) {
                      const t = new Float32Array([
                          -1, -1, 0, 3, -1, 0, -1, 3, 0,
                        ]),
                        r = new Float32Array([0, 0, 2, 0, 0, 2]);
                      (va = new Lt()).setAttribute !== void 0
                        ? (va.setAttribute("position", new un(t, 3)),
                          va.setAttribute("uv", new un(r, 2)))
                        : (va.addAttribute("position", new un(t, 3)),
                          va.addAttribute("uv", new un(r, 2)));
                    }
                    return va;
                  })(),
                  n
                )),
                (e.frustumCulled = !1),
                this.scene === null && (this.scene = new Mp()),
                this.scene.add(e),
                (this.screen = e));
          }
          getFullscreenMaterial() {
            return this.fullscreenMaterial;
          }
          setFullscreenMaterial(n) {
            this.fullscreenMaterial = n;
          }
          getDepthTexture() {
            return null;
          }
          setDepthTexture(n, e = 3200) {}
          render(n, e, t, r, i) {
            throw new Error("Render method not implemented!");
          }
          setSize(n, e) {}
          initialize(n, e, t) {}
          dispose() {
            for (const n of Object.keys(this)) {
              const e = this[n];
              (e instanceof Jt ||
                e instanceof dr ||
                e instanceof jt ||
                e instanceof Er) &&
                this[n].dispose();
            }
          }
        },
        h3 = class extends Er {
          constructor(n, e = !0) {
            super("CopyPass"),
              (this.fullscreenMaterial = new q_()),
              (this.needsSwap = !1),
              (this.renderTarget = n),
              n === void 0 &&
                ((this.renderTarget = new Jt(1, 1, {
                  minFilter: 1006,
                  magFilter: 1006,
                  stencilBuffer: !1,
                  depthBuffer: !1,
                })),
                (this.renderTarget.texture.name = "CopyPass.Target")),
              (this.autoResize = e);
          }
          get resize() {
            return this.autoResize;
          }
          set resize(n) {
            this.autoResize = n;
          }
          get texture() {
            return this.renderTarget.texture;
          }
          getTexture() {
            return this.renderTarget.texture;
          }
          setAutoResizeEnabled(n) {
            this.autoResize = n;
          }
          render(n, e, t, r, i) {
            (this.fullscreenMaterial.inputBuffer = e.texture),
              n.setRenderTarget(this.renderToScreen ? null : this.renderTarget),
              n.render(this.scene, this.camera);
          }
          setSize(n, e) {
            this.autoResize && this.renderTarget.setSize(n, e);
          }
          initialize(n, e, t) {
            t !== void 0 &&
              ((this.renderTarget.texture.type = t),
              t !== 1009
                ? (this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH =
                    "1")
                : n.outputEncoding === 3001 &&
                  (this.renderTarget.texture.encoding = 3001));
          }
        },
        d3 = class extends Er {
          constructor() {
            super("ClearMaskPass", null, null), (this.needsSwap = !1);
          }
          render(n, e, t, r, i) {
            const a = n.state.buffers.stencil;
            a.setLocked(!1), a.setTest(!1);
          }
        },
        pf = new Ce(),
        $_ = class extends Er {
          constructor(n = !0, e = !0, t = !1) {
            super("ClearPass", null, null),
              (this.needsSwap = !1),
              (this.color = n),
              (this.depth = e),
              (this.stencil = t),
              (this.overrideClearColor = null),
              (this.overrideClearAlpha = -1);
          }
          setClearFlags(n, e, t) {
            (this.color = n), (this.depth = e), (this.stencil = t);
          }
          getOverrideClearColor() {
            return this.overrideClearColor;
          }
          setOverrideClearColor(n) {
            this.overrideClearColor = n;
          }
          getOverrideClearAlpha() {
            return this.overrideClearAlpha;
          }
          setOverrideClearAlpha(n) {
            this.overrideClearAlpha = n;
          }
          render(n, e, t, r, i) {
            const a = this.overrideClearColor,
              s = this.overrideClearAlpha,
              o = n.getClearAlpha(),
              l = a !== null,
              u = s >= 0;
            l
              ? (pf.copy(n.getClearColor(pf)), n.setClearColor(a, u ? s : o))
              : u && n.setClearAlpha(s),
              n.setRenderTarget(this.renderToScreen ? null : e),
              n.clear(this.color, this.depth, this.stencil),
              l ? n.setClearColor(pf, o) : u && n.setClearAlpha(o);
          }
        },
        Gr = class extends Yr {
          constructor(n, e = -1, t = -1, r = 1) {
            super(),
              (this.resizable = n),
              (this.baseSize = new ge(1, 1)),
              (this.preferredSize = new ge(e, t)),
              (this.target = this.preferredSize),
              (this.s = r),
              (this.effectiveSize = new ge()),
              this.addEventListener("change", () => this.updateEffectiveSize()),
              this.updateEffectiveSize();
          }
          updateEffectiveSize() {
            const n = this.baseSize,
              e = this.preferredSize,
              t = this.effectiveSize,
              r = this.scale;
            e.width !== -1
              ? (t.width = e.width)
              : e.height !== -1
              ? (t.width = Math.round(
                  e.height * (n.width / Math.max(n.height, 1))
                ))
              : (t.width = Math.round(n.width * r)),
              e.height !== -1
                ? (t.height = e.height)
                : e.width !== -1
                ? (t.height = Math.round(
                    e.width / Math.max(n.width / Math.max(n.height, 1), 1)
                  ))
                : (t.height = Math.round(n.height * r));
          }
          get width() {
            return this.effectiveSize.width;
          }
          set width(n) {
            this.preferredWidth = n;
          }
          get height() {
            return this.effectiveSize.height;
          }
          set height(n) {
            this.preferredHeight = n;
          }
          getWidth() {
            return this.width;
          }
          getHeight() {
            return this.height;
          }
          get scale() {
            return this.s;
          }
          set scale(n) {
            this.s !== n &&
              ((this.s = n),
              this.preferredSize.setScalar(-1),
              this.dispatchEvent({ type: "change" }),
              this.resizable.setSize(
                this.baseSize.width,
                this.baseSize.height
              ));
          }
          getScale() {
            return this.scale;
          }
          setScale(n) {
            this.scale = n;
          }
          get baseWidth() {
            return this.baseSize.width;
          }
          set baseWidth(n) {
            this.baseSize.width !== n &&
              ((this.baseSize.width = n),
              this.dispatchEvent({ type: "change" }),
              this.resizable.setSize(
                this.baseSize.width,
                this.baseSize.height
              ));
          }
          getBaseWidth() {
            return this.baseWidth;
          }
          setBaseWidth(n) {
            this.baseWidth = n;
          }
          get baseHeight() {
            return this.baseSize.height;
          }
          set baseHeight(n) {
            this.baseSize.height !== n &&
              ((this.baseSize.height = n),
              this.dispatchEvent({ type: "change" }),
              this.resizable.setSize(
                this.baseSize.width,
                this.baseSize.height
              ));
          }
          getBaseHeight() {
            return this.baseHeight;
          }
          setBaseHeight(n) {
            this.baseHeight = n;
          }
          setBaseSize(n, e) {
            (this.baseSize.width === n && this.baseSize.height === e) ||
              (this.baseSize.set(n, e),
              this.dispatchEvent({ type: "change" }),
              this.resizable.setSize(
                this.baseSize.width,
                this.baseSize.height
              ));
          }
          get preferredWidth() {
            return this.preferredSize.width;
          }
          set preferredWidth(n) {
            this.preferredSize.width !== n &&
              ((this.preferredSize.width = n),
              this.dispatchEvent({ type: "change" }),
              this.resizable.setSize(
                this.baseSize.width,
                this.baseSize.height
              ));
          }
          getPreferredWidth() {
            return this.preferredWidth;
          }
          setPreferredWidth(n) {
            this.preferredWidth = n;
          }
          get preferredHeight() {
            return this.preferredSize.height;
          }
          set preferredHeight(n) {
            this.preferredSize.height !== n &&
              ((this.preferredSize.height = n),
              this.dispatchEvent({ type: "change" }),
              this.resizable.setSize(
                this.baseSize.width,
                this.baseSize.height
              ));
          }
          getPreferredHeight() {
            return this.preferredHeight;
          }
          setPreferredHeight(n) {
            this.preferredHeight = n;
          }
          setPreferredSize(n, e) {
            (this.preferredSize.width === n &&
              this.preferredSize.height === e) ||
              (this.preferredSize.set(n, e),
              this.dispatchEvent({ type: "change" }),
              this.resizable.setSize(
                this.baseSize.width,
                this.baseSize.height
              ));
          }
          copy(n) {
            (this.s = n.scale),
              this.baseSize.set(n.getBaseWidth(), n.getBaseHeight()),
              this.preferredSize.set(
                n.getPreferredWidth(),
                n.getPreferredHeight()
              ),
              this.dispatchEvent({ type: "change" }),
              this.resizable.setSize(this.baseSize.width, this.baseSize.height);
          }
          static get AUTO_SIZE() {
            return -1;
          }
        },
        mf = !1,
        d1 = class {
          constructor(n = null) {
            (this.originalMaterials = new Map()),
              (this.material = null),
              (this.materials = null),
              (this.materialsBackSide = null),
              (this.materialsDoubleSide = null),
              (this.materialsFlatShaded = null),
              (this.materialsFlatShadedBackSide = null),
              (this.materialsFlatShadedDoubleSide = null),
              this.setMaterial(n),
              (this.meshCount = 0),
              (this.replaceMaterial = (e) => {
                if (e.isMesh) {
                  let t;
                  if (e.material.flatShading)
                    switch (e.material.side) {
                      case 2:
                        t = this.materialsFlatShadedDoubleSide;
                        break;
                      case 1:
                        t = this.materialsFlatShadedBackSide;
                        break;
                      default:
                        t = this.materialsFlatShaded;
                    }
                  else
                    switch (e.material.side) {
                      case 2:
                        t = this.materialsDoubleSide;
                        break;
                      case 1:
                        t = this.materialsBackSide;
                        break;
                      default:
                        t = this.materials;
                    }
                  this.originalMaterials.set(e, e.material),
                    e.isSkinnedMesh
                      ? (e.material = t[2])
                      : e.isInstancedMesh
                      ? (e.material = t[1])
                      : (e.material = t[0]),
                    ++this.meshCount;
                }
              });
          }
          setMaterial(n) {
            if ((this.disposeMaterials(), (this.material = n), n !== null)) {
              const e = (this.materials = [n.clone(), n.clone(), n.clone()]);
              for (const t of e)
                (t.uniforms = Object.assign({}, n.uniforms)), (t.side = 0);
              (e[2].skinning = !0),
                (this.materialsBackSide = e.map((t) => {
                  const r = t.clone();
                  return (
                    (r.uniforms = Object.assign({}, n.uniforms)),
                    (r.side = 1),
                    r
                  );
                })),
                (this.materialsDoubleSide = e.map((t) => {
                  const r = t.clone();
                  return (
                    (r.uniforms = Object.assign({}, n.uniforms)),
                    (r.side = 2),
                    r
                  );
                })),
                (this.materialsFlatShaded = e.map((t) => {
                  const r = t.clone();
                  return (
                    (r.uniforms = Object.assign({}, n.uniforms)),
                    (r.flatShading = !0),
                    r
                  );
                })),
                (this.materialsFlatShadedBackSide = e.map((t) => {
                  const r = t.clone();
                  return (
                    (r.uniforms = Object.assign({}, n.uniforms)),
                    (r.flatShading = !0),
                    (r.side = 1),
                    r
                  );
                })),
                (this.materialsFlatShadedDoubleSide = e.map((t) => {
                  const r = t.clone();
                  return (
                    (r.uniforms = Object.assign({}, n.uniforms)),
                    (r.flatShading = !0),
                    (r.side = 2),
                    r
                  );
                }));
            }
          }
          render(n, e, t) {
            const r = n.shadowMap.enabled;
            if (((n.shadowMap.enabled = !1), mf)) {
              const i = this.originalMaterials;
              (this.meshCount = 0),
                e.traverse(this.replaceMaterial),
                n.render(e, t);
              for (const a of i) a[0].material = a[1];
              this.meshCount !== i.size && i.clear();
            } else {
              const i = e.overrideMaterial;
              (e.overrideMaterial = this.material),
                n.render(e, t),
                (e.overrideMaterial = i);
            }
            n.shadowMap.enabled = r;
          }
          disposeMaterials() {
            if (this.material !== null) {
              const n = this.materials
                .concat(this.materialsBackSide)
                .concat(this.materialsDoubleSide)
                .concat(this.materialsFlatShaded)
                .concat(this.materialsFlatShadedBackSide)
                .concat(this.materialsFlatShadedDoubleSide);
              for (const e of n) e.dispose();
            }
          }
          dispose() {
            this.originalMaterials.clear(), this.disposeMaterials();
          }
          static get workaroundEnabled() {
            return mf;
          }
          static set workaroundEnabled(n) {
            mf = n;
          }
        },
        f3 = class extends Er {
          constructor(n, e, t = null) {
            super("RenderPass", n, e),
              (this.needsSwap = !1),
              (this.clearPass = new $_()),
              (this.overrideMaterialManager = t === null ? null : new d1(t)),
              (this.ignoreBackground = !1),
              (this.skipShadowMapUpdate = !1),
              (this.selection = null);
          }
          get renderToScreen() {
            return super.renderToScreen;
          }
          set renderToScreen(n) {
            (super.renderToScreen = n), (this.clearPass.renderToScreen = n);
          }
          get overrideMaterial() {
            const n = this.overrideMaterialManager;
            return n !== null ? n.material : null;
          }
          set overrideMaterial(n) {
            const e = this.overrideMaterialManager;
            n !== null
              ? e !== null
                ? e.setMaterial(n)
                : (this.overrideMaterialManager = new d1(n))
              : e !== null &&
                (e.dispose(), (this.overrideMaterialManager = null));
          }
          getOverrideMaterial() {
            return this.overrideMaterial;
          }
          setOverrideMaterial(n) {
            this.overrideMaterial = n;
          }
          get clear() {
            return this.clearPass.enabled;
          }
          set clear(n) {
            this.clearPass.enabled = n;
          }
          getSelection() {
            return this.selection;
          }
          setSelection(n) {
            this.selection = n;
          }
          isBackgroundDisabled() {
            return this.ignoreBackground;
          }
          setBackgroundDisabled(n) {
            this.ignoreBackground = n;
          }
          isShadowMapDisabled() {
            return this.skipShadowMapUpdate;
          }
          setShadowMapDisabled(n) {
            this.skipShadowMapUpdate = n;
          }
          getClearPass() {
            return this.clearPass;
          }
          render(n, e, t, r, i) {
            const a = this.scene,
              s = this.camera,
              o = this.selection,
              l = s.layers.mask,
              u = a.background,
              c = n.shadowMap.autoUpdate,
              h = this.renderToScreen ? null : e;
            o !== null && s.layers.set(o.getLayer()),
              this.skipShadowMapUpdate && (n.shadowMap.autoUpdate = !1),
              (this.ignoreBackground ||
                this.clearPass.overrideClearColor !== null) &&
                (a.background = null),
              this.clearPass.enabled && this.clearPass.render(n, e),
              n.setRenderTarget(h),
              this.overrideMaterialManager !== null
                ? this.overrideMaterialManager.render(n, a, s)
                : n.render(a, s),
              (s.layers.mask = l),
              (a.background = u),
              (n.shadowMap.autoUpdate = c);
          }
        };
      function f1(n, e, t) {
        for (const r of e) {
          const i = "$1" + n + r.charAt(0).toUpperCase() + r.slice(1),
            a = new RegExp("([^\\.])(\\b" + r + "\\b)", "g");
          for (const s of t.entries())
            s[1] !== null && t.set(s[0], s[1].replace(a, i));
        }
      }
      function p3(n, e, t) {
        var r, i, a, s, o;
        let l = e.getFragmentShader(),
          u = e.getVertexShader();
        const c = l !== void 0 && /mainImage/.test(l),
          h = l !== void 0 && /mainUv/.test(l);
        if (((t.attributes |= e.getAttributes()), l === void 0))
          throw new Error(`Missing fragment shader (${e.name})`);
        if (h && (t.attributes & j_) != 0)
          throw new Error(
            `Effects that transform UVs are incompatible with convolution effects (${e.name})`
          );
        if (!c && !h)
          throw new Error(
            `Could not find mainImage or mainUv function (${e.name})`
          );
        {
          const d = /\w+\s+(\w+)\([\w\s,]*\)\s*{/g,
            f = t.shaderParts;
          let g = (r = f.get(Ve.FRAGMENT_HEAD)) != null ? r : "",
            p = (i = f.get(Ve.FRAGMENT_MAIN_UV)) != null ? i : "",
            y = (a = f.get(Ve.FRAGMENT_MAIN_IMAGE)) != null ? a : "",
            v = (s = f.get(Ve.VERTEX_HEAD)) != null ? s : "",
            m = (o = f.get(Ve.VERTEX_MAIN_SUPPORT)) != null ? o : "";
          const x = new Set(),
            _ = new Set();
          if (
            (h &&
              ((p += `	${n}MainUv(UV);
`),
              (t.uvTransformation = !0)),
            u !== null && /mainSupport/.test(u))
          ) {
            const M = /mainSupport *\([\w\s]*?uv\s*?\)/.test(u);
            (m += `	${n}MainSupport(`),
              (m += M
                ? `vUv);
`
                : `);
`);
            for (const C of u.matchAll(/(?:varying\s+\w+\s+(\w*))/g))
              t.varyings.add(C[1]), x.add(C[1]), _.add(C[1]);
            for (const C of u.matchAll(d)) _.add(C[1]);
          }
          for (const M of l.matchAll(d)) _.add(M[1]);
          for (const M of e.defines.keys())
            _.add(M.replace(/\([\w\s,]*\)/g, ""));
          for (const M of e.uniforms.keys()) _.add(M);
          _.delete("while"),
            _.delete("for"),
            _.delete("if"),
            e.uniforms.forEach((M, C) =>
              t.uniforms.set(n + C.charAt(0).toUpperCase() + C.slice(1), M)
            ),
            e.defines.forEach((M, C) =>
              t.defines.set(n + C.charAt(0).toUpperCase() + C.slice(1), M)
            );
          const b = new Map([
            ["fragment", l],
            ["vertex", u],
          ]);
          f1(n, _, t.defines),
            f1(n, _, b),
            (l = b.get("fragment")),
            (u = b.get("vertex"));
          const w = e.blendMode;
          if ((t.blendModes.set(w.blendFunction, w), c)) {
            e.inputColorSpace !== null &&
              e.inputColorSpace !== t.colorSpace &&
              (y +=
                e.inputColorSpace === 3001
                  ? `color0 = LinearTosRGB(color0);
	`
                  : `color0 = sRGBToLinear(color0);
	`),
              e.outputColorSpace !== null
                ? (t.colorSpace = e.outputColorSpace)
                : e.inputColorSpace !== null &&
                  (t.colorSpace = e.inputColorSpace);
            const M = /MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;
            (y += `${n}MainImage(color0, UV, `),
              (t.attributes & Dp) != 0 &&
                M.test(l) &&
                ((y += "depth, "), (t.readDepth = !0)),
              (y += `color1);
	`);
            const C = n + "BlendOpacity";
            t.uniforms.set(C, w.opacity),
              (y += `color0 = blend${w.blendFunction}(color0, color1, ${C});

	`),
              (g += `uniform float ${C};

`);
          }
          if (
            ((g +=
              l +
              `
`),
            u !== null &&
              (v +=
                u +
                `
`),
            f.set(Ve.FRAGMENT_HEAD, g),
            f.set(Ve.FRAGMENT_MAIN_UV, p),
            f.set(Ve.FRAGMENT_MAIN_IMAGE, y),
            f.set(Ve.VERTEX_HEAD, v),
            f.set(Ve.VERTEX_MAIN_SUPPORT, m),
            e.extensions !== null)
          )
            for (const M of e.extensions) t.extensions.add(M);
        }
      }
      var m3 = class extends Er {
          constructor(n, ...e) {
            super("EffectPass"),
              (this.fullscreenMaterial = new o3(null, null, null, n)),
              (this.listener = (t) => this.handleEvent(t)),
              (this.effects = []),
              this.setEffects(e),
              (this.skipRendering = !1),
              (this.minTime = 1),
              (this.maxTime = Number.POSITIVE_INFINITY);
          }
          get encodeOutput() {
            return this.fullscreenMaterial.encodeOutput;
          }
          set encodeOutput(n) {
            this.fullscreenMaterial.encodeOutput = n;
          }
          get dithering() {
            return this.fullscreenMaterial.dithering;
          }
          set dithering(n) {
            const e = this.fullscreenMaterial;
            (e.dithering = n), (e.needsUpdate = !0);
          }
          setEffects(n) {
            for (const e of this.effects)
              e.removeEventListener("change", this.listener);
            this.effects = n.sort((e, t) => t.attributes - e.attributes);
            for (const e of this.effects)
              e.addEventListener("change", this.listener);
          }
          updateMaterial() {
            const n = new _3();
            let e = 0;
            for (const s of this.effects)
              if (s.blendMode.blendFunction === G_)
                n.attributes |= s.getAttributes() & Dp;
              else {
                if ((n.attributes & s.getAttributes() & j_) != 0)
                  throw new Error(
                    `Convolution effects cannot be merged (${s.name})`
                  );
                p3("e" + e++, s, n);
              }
            let t = n.shaderParts.get(Ve.FRAGMENT_HEAD),
              r = n.shaderParts.get(Ve.FRAGMENT_MAIN_IMAGE),
              i = n.shaderParts.get(Ve.FRAGMENT_MAIN_UV);
            const a = /\bblend\b/g;
            for (const s of n.blendModes.values())
              t +=
                s.getShaderCode().replace(a, `blend${s.blendFunction}`) +
                `
`;
            (n.attributes & Dp) != 0
              ? (n.readDepth &&
                  (r =
                    `float depth = readDepth(UV);

	` + r),
                (this.needsDepthTexture = this.getDepthTexture() === null))
              : (this.needsDepthTexture = !1),
              n.colorSpace === 3001 &&
                (r += `color0 = sRGBToLinear(color0);
	`),
              n.uvTransformation
                ? ((i =
                    `vec2 transformedUv = vUv;
` + i),
                  n.defines.set("UV", "transformedUv"))
                : n.defines.set("UV", "vUv"),
              n.shaderParts.set(Ve.FRAGMENT_HEAD, t),
              n.shaderParts.set(Ve.FRAGMENT_MAIN_IMAGE, r),
              n.shaderParts.set(Ve.FRAGMENT_MAIN_UV, i),
              n.shaderParts.forEach((s, o, l) =>
                l.set(
                  o,
                  s == null
                    ? void 0
                    : s.trim().replace(
                        /^#/,
                        `
#`
                      )
                )
              ),
              (this.skipRendering = e === 0),
              (this.needsSwap = !this.skipRendering),
              this.fullscreenMaterial.setShaderData(n);
          }
          recompile() {
            this.updateMaterial();
          }
          getDepthTexture() {
            return this.fullscreenMaterial.depthBuffer;
          }
          setDepthTexture(n, e = 3200) {
            (this.fullscreenMaterial.depthBuffer = n),
              (this.fullscreenMaterial.depthPacking = e);
            for (const t of this.effects) t.setDepthTexture(n, e);
          }
          render(n, e, t, r, i) {
            for (const a of this.effects) a.update(n, e, r);
            if (!this.skipRendering || this.renderToScreen) {
              const a = this.fullscreenMaterial;
              (a.inputBuffer = e.texture),
                (a.time += r),
                n.setRenderTarget(this.renderToScreen ? null : t),
                n.render(this.scene, this.camera);
            }
          }
          setSize(n, e) {
            this.fullscreenMaterial.setSize(n, e);
            for (const t of this.effects) t.setSize(n, e);
          }
          initialize(n, e, t) {
            this.renderer = n;
            for (const r of this.effects) r.initialize(n, e, t);
            this.updateMaterial(),
              t !== void 0 &&
                t !== 1009 &&
                (this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH =
                  "1");
          }
          dispose() {
            super.dispose();
            for (const n of this.effects)
              n.removeEventListener("change", this.listener), n.dispose();
          }
          handleEvent(n) {
            n.type === "change" && this.recompile();
          }
        },
        g3 = class extends Er {
          constructor({
            kernelSize: n = X_,
            resolutionScale: e = 0.5,
            width: t = Gr.AUTO_SIZE,
            height: r = Gr.AUTO_SIZE,
            resolutionX: i = t,
            resolutionY: a = r,
          } = {}) {
            super("KawaseBlurPass"),
              (this.renderTargetA = new Jt(1, 1, { depthBuffer: !1 })),
              (this.renderTargetA.texture.name = "Blur.Target.A"),
              (this.renderTargetB = this.renderTargetA.clone()),
              (this.renderTargetB.texture.name = "Blur.Target.B");
            const s = (this.resolution = new Gr(this, i, a, e));
            s.addEventListener("change", (o) =>
              this.setSize(s.baseWidth, s.baseHeight)
            ),
              (this.blurMaterial = new a3()),
              (this.copyMaterial = new q_());
          }
          getResolution() {
            return this.resolution;
          }
          get dithering() {
            return this.copyMaterial.dithering;
          }
          set dithering(n) {
            this.copyMaterial.dithering = n;
          }
          get kernelSize() {
            return this.blurMaterial.kernelSize;
          }
          set kernelSize(n) {
            this.blurMaterial.kernelSize = n;
          }
          get width() {
            return this.resolution.width;
          }
          set width(n) {
            this.resolution.preferredWidth = n;
          }
          get height() {
            return this.resolution.height;
          }
          set height(n) {
            this.resolution.preferredHeight = n;
          }
          get scale() {
            return this.blurMaterial.scale;
          }
          set scale(n) {
            this.blurMaterial.scale = n;
          }
          getScale() {
            return this.blurMaterial.scale;
          }
          setScale(n) {
            this.blurMaterial.scale = n;
          }
          getKernelSize() {
            return this.kernelSize;
          }
          setKernelSize(n) {
            this.kernelSize = n;
          }
          getResolutionScale() {
            return this.resolution.scale;
          }
          setResolutionScale(n) {
            this.resolution.scale = n;
          }
          render(n, e, t, r, i) {
            const a = this.scene,
              s = this.camera,
              o = this.renderTargetA,
              l = this.renderTargetB,
              u = this.blurMaterial,
              c = u.kernelSequence;
            let h = e;
            this.fullscreenMaterial = u;
            for (let d = 0, f = c.length; d < f; ++d) {
              const g = (1 & d) == 0 ? o : l;
              (u.kernel = c[d]),
                (u.inputBuffer = h.texture),
                n.setRenderTarget(g),
                n.render(a, s),
                (h = g);
            }
            (this.fullscreenMaterial = this.copyMaterial),
              (this.copyMaterial.inputBuffer = h.texture),
              n.setRenderTarget(this.renderToScreen ? null : t),
              n.render(a, s);
          }
          setSize(n, e) {
            const t = this.resolution;
            t.setBaseSize(n, e);
            const r = t.width,
              i = t.height;
            this.renderTargetA.setSize(r, i),
              this.renderTargetB.setSize(r, i),
              this.blurMaterial.setSize(n, e);
          }
          initialize(n, e, t) {
            t !== void 0 &&
              ((this.renderTargetA.texture.type = t),
              (this.renderTargetB.texture.type = t),
              t !== 1009
                ? ((this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH = "1"),
                  (this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH = "1"))
                : n.outputEncoding === 3001 &&
                  ((this.renderTargetA.texture.encoding = 3001),
                  (this.renderTargetB.texture.encoding = 3001)));
          }
          static get AUTO_SIZE() {
            return Gr.AUTO_SIZE;
          }
        },
        v3 = class extends Er {
          constructor({
            renderTarget: n,
            luminanceRange: e,
            colorOutput: t,
            resolutionScale: r = 1,
            width: i = Gr.AUTO_SIZE,
            height: a = Gr.AUTO_SIZE,
            resolutionX: s = i,
            resolutionY: o = a,
          } = {}) {
            super("LuminancePass"),
              (this.fullscreenMaterial = new l3(t, e)),
              (this.needsSwap = !1),
              (this.renderTarget = n),
              this.renderTarget === void 0 &&
                ((this.renderTarget = new Jt(1, 1, { depthBuffer: !1 })),
                (this.renderTarget.texture.name = "LuminancePass.Target"));
            const l = (this.resolution = new Gr(this, s, o, r));
            l.addEventListener("change", (u) =>
              this.setSize(l.baseWidth, l.baseHeight)
            );
          }
          get texture() {
            return this.renderTarget.texture;
          }
          getTexture() {
            return this.renderTarget.texture;
          }
          getResolution() {
            return this.resolution;
          }
          render(n, e, t, r, i) {
            (this.fullscreenMaterial.inputBuffer = e.texture),
              n.setRenderTarget(this.renderToScreen ? null : this.renderTarget),
              n.render(this.scene, this.camera);
          }
          setSize(n, e) {
            const t = this.resolution;
            t.setBaseSize(n, e), this.renderTarget.setSize(t.width, t.height);
          }
          initialize(n, e, t) {
            t !== void 0 &&
              t !== 1009 &&
              ((this.renderTarget.texture.type = t),
              (this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH =
                "1"));
          }
        },
        y3 = class extends Er {
          constructor(n, e) {
            super("MaskPass", n, e),
              (this.needsSwap = !1),
              (this.clearPass = new $_(!1, !1, !0)),
              (this.inverse = !1);
          }
          get inverted() {
            return this.inverse;
          }
          set inverted(n) {
            this.inverse = n;
          }
          get clear() {
            return this.clearPass.enabled;
          }
          set clear(n) {
            this.clearPass.enabled = n;
          }
          getClearPass() {
            return this.clearPass;
          }
          isInverted() {
            return this.inverted;
          }
          setInverted(n) {
            this.inverted = n;
          }
          render(n, e, t, r, i) {
            const a = n.getContext(),
              s = n.state.buffers,
              o = this.scene,
              l = this.camera,
              u = this.clearPass,
              c = this.inverted ? 0 : 1,
              h = 1 - c;
            s.color.setMask(!1),
              s.depth.setMask(!1),
              s.color.setLocked(!0),
              s.depth.setLocked(!0),
              s.stencil.setTest(!0),
              s.stencil.setOp(a.REPLACE, a.REPLACE, a.REPLACE),
              s.stencil.setFunc(a.ALWAYS, c, 4294967295),
              s.stencil.setClear(h),
              s.stencil.setLocked(!0),
              this.clearPass.enabled &&
                (this.renderToScreen
                  ? u.render(n, null)
                  : (u.render(n, e), u.render(n, t))),
              this.renderToScreen
                ? (n.setRenderTarget(null), n.render(o, l))
                : (n.setRenderTarget(e),
                  n.render(o, l),
                  n.setRenderTarget(t),
                  n.render(o, l)),
              s.color.setLocked(!1),
              s.depth.setLocked(!1),
              s.stencil.setLocked(!1),
              s.stencil.setFunc(a.EQUAL, 1, 4294967295),
              s.stencil.setOp(a.KEEP, a.KEEP, a.KEEP),
              s.stencil.setLocked(!0);
          }
        },
        x3 = class extends Er {
          constructor() {
            super("MipmapBlurPass"),
              (this.needsSwap = !1),
              (this.renderTarget = new Jt(1, 1, { depthBuffer: !1 })),
              (this.renderTarget.texture.name = "Upsampling.Mipmap0"),
              (this.downsamplingMipmaps = []),
              (this.upsamplingMipmaps = []),
              (this.downsamplingMaterial = new s3()),
              (this.upsamplingMaterial = new u3()),
              (this.resolution = new ge());
          }
          get texture() {
            return this.renderTarget.texture;
          }
          get levels() {
            return this.downsamplingMipmaps.length;
          }
          set levels(n) {
            if (this.levels !== n) {
              const e = this.renderTarget;
              this.dispose();
              for (let t = 0; t < n; ++t) {
                const r = e.clone();
                (r.texture.name = "Downsampling.Mipmap" + t),
                  this.downsamplingMipmaps.push(r);
              }
              this.upsamplingMipmaps.push(e);
              for (let t = 1, r = n - 1; t < r; ++t) {
                const i = e.clone();
                (i.texture.name = "Upsampling.Mipmap" + t),
                  this.upsamplingMipmaps.push(i);
              }
              this.setSize(this.resolution.x, this.resolution.y);
            }
          }
          get radius() {
            return this.upsamplingMaterial.radius;
          }
          set radius(n) {
            this.upsamplingMaterial.radius = n;
          }
          render(n, e, t, r, i) {
            const { scene: a, camera: s } = this,
              { downsamplingMaterial: o, upsamplingMaterial: l } = this,
              { downsamplingMipmaps: u, upsamplingMipmaps: c } = this;
            let h = e;
            this.fullscreenMaterial = o;
            for (let d = 0, f = u.length; d < f; ++d) {
              const g = u[d];
              o.setSize(h.width, h.height),
                (o.inputBuffer = h.texture),
                n.setRenderTarget(g),
                n.render(a, s),
                (h = g);
            }
            this.fullscreenMaterial = l;
            for (let d = c.length - 1; d >= 0; --d) {
              const f = c[d];
              l.setSize(h.width, h.height),
                (l.inputBuffer = h.texture),
                (l.supportBuffer = u[d].texture),
                n.setRenderTarget(f),
                n.render(a, s),
                (h = f);
            }
          }
          setSize(n, e) {
            const t = this.resolution;
            t.set(n, e);
            let r = t.width,
              i = t.height;
            for (let a = 0, s = this.downsamplingMipmaps.length; a < s; ++a)
              (r = Math.round(0.5 * r)),
                (i = Math.round(0.5 * i)),
                this.downsamplingMipmaps[a].setSize(r, i),
                a < this.upsamplingMipmaps.length &&
                  this.upsamplingMipmaps[a].setSize(r, i);
          }
          initialize(n, e, t) {
            if (t !== void 0) {
              const r = this.downsamplingMipmaps.concat(this.upsamplingMipmaps);
              for (const i of r) i.texture.type = t;
              if (t !== 1009)
                (this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH =
                  "1"),
                  (this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH =
                    "1");
              else if (n.outputEncoding === 3001)
                for (const i of r) i.texture.encoding = 3001;
            }
          }
          dispose() {
            super.dispose();
            for (const n of this.downsamplingMipmaps.concat(
              this.upsamplingMipmaps
            ))
              n.dispose();
          }
        },
        _3 = class {
          constructor() {
            (this.shaderParts = new Map([
              [Ve.FRAGMENT_HEAD, null],
              [Ve.FRAGMENT_MAIN_UV, null],
              [Ve.FRAGMENT_MAIN_IMAGE, null],
              [Ve.VERTEX_HEAD, null],
              [Ve.VERTEX_MAIN_SUPPORT, null],
            ])),
              (this.defines = new Map()),
              (this.uniforms = new Map()),
              (this.blendModes = new Map()),
              (this.extensions = new Set()),
              (this.attributes = W_),
              (this.varyings = new Set()),
              (this.uvTransformation = !1),
              (this.readDepth = !1),
              (this.colorSpace = 3e3);
          }
        },
        b3 = new Map([
          [
            CT,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",
          ],
          [
            AT,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",
          ],
          [
            RT,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",
          ],
          [
            PT,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",
          ],
          [
            LT,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",
          ],
          [
            DT,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",
          ],
          [
            kT,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",
          ],
          [
            IT,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",
          ],
          [
            UT,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",
          ],
          [G_, null],
          [
            OT,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",
          ],
          [
            zT,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",
          ],
          [
            NT,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",
          ],
          [
            FT,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",
          ],
          [
            BT,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",
          ],
          [
            GT,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",
          ],
          [
            HT,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",
          ],
          [
            VT,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",
          ],
          [
            WT,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",
          ],
          [
            jT,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",
          ],
          [
            XT,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",
          ],
          [
            qT,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",
          ],
          [
            $T,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",
          ],
          [
            H_,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",
          ],
          [
            YT,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",
          ],
          [
            ZT,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",
          ],
          [
            KT,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",
          ],
          [
            JT,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",
          ],
          [
            V_,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",
          ],
          [
            QT,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",
          ],
          [
            e3,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",
          ],
          [
            t3,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",
          ],
          [
            n3,
            "vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",
          ],
        ]),
        w3 = class extends Yr {
          constructor(n, e = 1) {
            super(), (this._blendFunction = n), (this.opacity = new Ye(e));
          }
          getOpacity() {
            return this.opacity.value;
          }
          setOpacity(n) {
            this.opacity.value = n;
          }
          get blendFunction() {
            return this._blendFunction;
          }
          set blendFunction(n) {
            (this._blendFunction = n), this.dispatchEvent({ type: "change" });
          }
          getBlendFunction() {
            return this.blendFunction;
          }
          setBlendFunction(n) {
            this.blendFunction = n;
          }
          getShaderCode() {
            return b3.get(this.blendFunction);
          }
        },
        S3 = class extends Yr {
          constructor(
            n,
            e,
            {
              attributes: t = W_,
              blendFunction: r = H_,
              defines: i = new Map(),
              uniforms: a = new Map(),
              extensions: s = null,
              vertexShader: o = null,
            } = {}
          ) {
            super(),
              (this.name = n),
              (this.renderer = null),
              (this.attributes = t),
              (this.fragmentShader = e),
              (this.vertexShader = o),
              (this.defines = i),
              (this.uniforms = a),
              (this.extensions = s),
              (this.blendMode = new w3(r)),
              this.blendMode.addEventListener("change", (l) =>
                this.setChanged()
              ),
              (this._inputColorSpace = 3e3),
              (this._outputColorSpace = null);
          }
          get inputColorSpace() {
            return this._inputColorSpace;
          }
          set inputColorSpace(n) {
            (this._inputColorSpace = n), this.setChanged();
          }
          get outputColorSpace() {
            return this._outputColorSpace;
          }
          set outputColorSpace(n) {
            (this._outputColorSpace = n), this.setChanged();
          }
          getName() {
            return this.name;
          }
          setRenderer(n) {
            this.renderer = n;
          }
          getDefines() {
            return this.defines;
          }
          getUniforms() {
            return this.uniforms;
          }
          getExtensions() {
            return this.extensions;
          }
          getBlendMode() {
            return this.blendMode;
          }
          getAttributes() {
            return this.attributes;
          }
          setAttributes(n) {
            (this.attributes = n), this.setChanged();
          }
          getFragmentShader() {
            return this.fragmentShader;
          }
          setFragmentShader(n) {
            (this.fragmentShader = n), this.setChanged();
          }
          getVertexShader() {
            return this.vertexShader;
          }
          setVertexShader(n) {
            (this.vertexShader = n), this.setChanged();
          }
          setChanged() {
            this.dispatchEvent({ type: "change" });
          }
          setDepthTexture(n, e = 3200) {}
          update(n, e, t) {}
          setSize(n, e) {}
          initialize(n, e, t) {}
          dispose() {
            for (const n of Object.keys(this)) {
              const e = this[n];
              (e instanceof Jt ||
                e instanceof dr ||
                e instanceof jt ||
                e instanceof Er) &&
                this[n].dispose();
            }
          }
        },
        M3 = class extends S3 {
          constructor({
            blendFunction: n = V_,
            luminanceThreshold: e = 0.9,
            luminanceSmoothing: t = 0.025,
            mipmapBlur: r = !1,
            intensity: i = 1,
            radius: a = 0.85,
            levels: s = 8,
            kernelSize: o = r3,
            resolutionScale: l = 0.5,
            width: u = Gr.AUTO_SIZE,
            height: c = Gr.AUTO_SIZE,
            resolutionX: h = u,
            resolutionY: d = c,
          } = {}) {
            super(
              "BloomEffect",
              `#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv)*intensity;}`,
              {
                blendFunction: n,
                uniforms: new Map([
                  ["map", new Ye(null)],
                  ["intensity", new Ye(i)],
                ]),
              }
            ),
              (this.renderTarget = new Jt(1, 1, { depthBuffer: !1 })),
              (this.renderTarget.texture.name = "Bloom.Target"),
              (this.blurPass = new g3({ kernelSize: o })),
              (this.luminancePass = new v3({ colorOutput: !0 })),
              (this.luminanceMaterial.threshold = e),
              (this.luminanceMaterial.smoothing = t),
              (this.mipmapBlurPass = new x3()),
              (this.mipmapBlurPass.enabled = r),
              (this.mipmapBlurPass.radius = a),
              (this.mipmapBlurPass.levels = s),
              (this.uniforms.get("map").value = r
                ? this.mipmapBlurPass.texture
                : this.renderTarget.texture);
            const f = (this.resolution = new Gr(this, h, d, l));
            f.addEventListener("change", (g) =>
              this.setSize(f.baseWidth, f.baseHeight)
            );
          }
          get texture() {
            return this.mipmapBlurPass.enabled
              ? this.mipmapBlurPass.texture
              : this.renderTarget.texture;
          }
          getTexture() {
            return this.texture;
          }
          getResolution() {
            return this.resolution;
          }
          getBlurPass() {
            return this.blurPass;
          }
          getLuminancePass() {
            return this.luminancePass;
          }
          get luminanceMaterial() {
            return this.luminancePass.fullscreenMaterial;
          }
          getLuminanceMaterial() {
            return this.luminancePass.fullscreenMaterial;
          }
          get width() {
            return this.resolution.width;
          }
          set width(n) {
            this.resolution.preferredWidth = n;
          }
          get height() {
            return this.resolution.height;
          }
          set height(n) {
            this.resolution.preferredHeight = n;
          }
          get dithering() {
            return this.blurPass.dithering;
          }
          set dithering(n) {
            this.blurPass.dithering = n;
          }
          get kernelSize() {
            return this.blurPass.kernelSize;
          }
          set kernelSize(n) {
            this.blurPass.kernelSize = n;
          }
          get distinction() {
            return console.warn(this.name, "distinction was removed"), 1;
          }
          set distinction(n) {
            console.warn(this.name, "distinction was removed");
          }
          get intensity() {
            return this.uniforms.get("intensity").value;
          }
          set intensity(n) {
            this.uniforms.get("intensity").value = n;
          }
          getIntensity() {
            return this.intensity;
          }
          setIntensity(n) {
            this.intensity = n;
          }
          getResolutionScale() {
            return this.resolution.scale;
          }
          setResolutionScale(n) {
            this.resolution.scale = n;
          }
          update(n, e, t) {
            const r = this.renderTarget,
              i = this.luminancePass;
            i.enabled
              ? (i.render(n, e),
                this.mipmapBlurPass.enabled
                  ? this.mipmapBlurPass.render(n, i.renderTarget)
                  : this.blurPass.render(n, i.renderTarget, r))
              : this.mipmapBlurPass.enabled
              ? this.mipmapBlurPass.render(n, e)
              : this.blurPass.render(n, e, r);
          }
          setSize(n, e) {
            const t = this.resolution;
            t.setBaseSize(n, e),
              this.renderTarget.setSize(t.width, t.height),
              this.blurPass.resolution.copy(t),
              this.luminancePass.setSize(n, e),
              this.mipmapBlurPass.setSize(n, e);
          }
          initialize(n, e, t) {
            this.blurPass.initialize(n, e, t),
              this.luminancePass.initialize(n, e, t),
              this.mipmapBlurPass.initialize(n, e, t),
              t !== void 0 &&
                ((this.renderTarget.texture.type = t),
                n.outputEncoding === 3001 &&
                  (this.renderTarget.texture.encoding = 3001));
          }
        };
      new j(), new Te(), new Ce(), new j(), new j();
      var ol = {
          Linear: {
            None: function (n) {
              return n;
            },
          },
          Quadratic: {
            In: function (n) {
              return n * n;
            },
            Out: function (n) {
              return n * (2 - n);
            },
            InOut: function (n) {
              return (n *= 2) < 1 ? 0.5 * n * n : -0.5 * (--n * (n - 2) - 1);
            },
          },
          Cubic: {
            In: function (n) {
              return n * n * n;
            },
            Out: function (n) {
              return --n * n * n + 1;
            },
            InOut: function (n) {
              return (n *= 2) < 1
                ? 0.5 * n * n * n
                : 0.5 * ((n -= 2) * n * n + 2);
            },
          },
          Quartic: {
            In: function (n) {
              return n * n * n * n;
            },
            Out: function (n) {
              return 1 - --n * n * n * n;
            },
            InOut: function (n) {
              return (n *= 2) < 1
                ? 0.5 * n * n * n * n
                : -0.5 * ((n -= 2) * n * n * n - 2);
            },
          },
          Quintic: {
            In: function (n) {
              return n * n * n * n * n;
            },
            Out: function (n) {
              return --n * n * n * n * n + 1;
            },
            InOut: function (n) {
              return (n *= 2) < 1
                ? 0.5 * n * n * n * n * n
                : 0.5 * ((n -= 2) * n * n * n * n + 2);
            },
          },
          Sinusoidal: {
            In: function (n) {
              return 1 - Math.cos((n * Math.PI) / 2);
            },
            Out: function (n) {
              return Math.sin((n * Math.PI) / 2);
            },
            InOut: function (n) {
              return 0.5 * (1 - Math.cos(Math.PI * n));
            },
          },
          Exponential: {
            In: function (n) {
              return n === 0 ? 0 : Math.pow(1024, n - 1);
            },
            Out: function (n) {
              return n === 1 ? 1 : 1 - Math.pow(2, -10 * n);
            },
            InOut: function (n) {
              return n === 0
                ? 0
                : n === 1
                ? 1
                : (n *= 2) < 1
                ? 0.5 * Math.pow(1024, n - 1)
                : 0.5 * (2 - Math.pow(2, -10 * (n - 1)));
            },
          },
          Circular: {
            In: function (n) {
              return 1 - Math.sqrt(1 - n * n);
            },
            Out: function (n) {
              return Math.sqrt(1 - --n * n);
            },
            InOut: function (n) {
              return (n *= 2) < 1
                ? -0.5 * (Math.sqrt(1 - n * n) - 1)
                : 0.5 * (Math.sqrt(1 - (n -= 2) * n) + 1);
            },
          },
          Elastic: {
            In: function (n) {
              return n === 0
                ? 0
                : n === 1
                ? 1
                : -Math.pow(2, 10 * (n - 1)) *
                  Math.sin(5 * (n - 1.1) * Math.PI);
            },
            Out: function (n) {
              return n === 0
                ? 0
                : n === 1
                ? 1
                : Math.pow(2, -10 * n) * Math.sin(5 * (n - 0.1) * Math.PI) + 1;
            },
            InOut: function (n) {
              return n === 0
                ? 0
                : n === 1
                ? 1
                : (n *= 2) < 1
                ? -0.5 *
                  Math.pow(2, 10 * (n - 1)) *
                  Math.sin(5 * (n - 1.1) * Math.PI)
                : 0.5 *
                    Math.pow(2, -10 * (n - 1)) *
                    Math.sin(5 * (n - 1.1) * Math.PI) +
                  1;
            },
          },
          Back: {
            In: function (n) {
              var e = 1.70158;
              return n * n * ((e + 1) * n - e);
            },
            Out: function (n) {
              var e = 1.70158;
              return --n * n * ((e + 1) * n + e) + 1;
            },
            InOut: function (n) {
              var e = 2.5949095;
              return (n *= 2) < 1
                ? n * n * ((e + 1) * n - e) * 0.5
                : 0.5 * ((n -= 2) * n * ((e + 1) * n + e) + 2);
            },
          },
          Bounce: {
            In: function (n) {
              return 1 - ol.Bounce.Out(1 - n);
            },
            Out: function (n) {
              return n < 1 / 2.75
                ? 7.5625 * n * n
                : n < 2 / 2.75
                ? 7.5625 * (n -= 1.5 / 2.75) * n + 0.75
                : n < 2.5 / 2.75
                ? 7.5625 * (n -= 2.25 / 2.75) * n + 0.9375
                : 7.5625 * (n -= 2.625 / 2.75) * n + 0.984375;
            },
            InOut: function (n) {
              return n < 0.5
                ? 0.5 * ol.Bounce.In(2 * n)
                : 0.5 * ol.Bounce.Out(2 * n - 1) + 0.5;
            },
          },
        },
        Ta =
          typeof self > "u" && typeof process < "u" && process.hrtime
            ? function () {
                var n = process.hrtime();
                return 1e3 * n[0] + n[1] / 1e6;
              }
            : typeof self < "u" &&
              self.performance !== void 0 &&
              self.performance.now !== void 0
            ? self.performance.now.bind(self.performance)
            : Date.now !== void 0
            ? Date.now
            : function () {
                return new Date().getTime();
              },
        Y_ = (function () {
          function n() {
            (this._tweens = {}), (this._tweensAddedDuringUpdate = {});
          }
          return (
            (n.prototype.getAll = function () {
              var e = this;
              return Object.keys(this._tweens).map(function (t) {
                return e._tweens[t];
              });
            }),
            (n.prototype.removeAll = function () {
              this._tweens = {};
            }),
            (n.prototype.add = function (e) {
              (this._tweens[e.getId()] = e),
                (this._tweensAddedDuringUpdate[e.getId()] = e);
            }),
            (n.prototype.remove = function (e) {
              delete this._tweens[e.getId()],
                delete this._tweensAddedDuringUpdate[e.getId()];
            }),
            (n.prototype.update = function (e, t) {
              e === void 0 && (e = Ta()), t === void 0 && (t = !1);
              var r = Object.keys(this._tweens);
              if (r.length === 0) return !1;
              for (; r.length > 0; ) {
                this._tweensAddedDuringUpdate = {};
                for (var i = 0; i < r.length; i++) {
                  var a = this._tweens[r[i]],
                    s = !t;
                  a && a.update(e, s) === !1 && !t && delete this._tweens[r[i]];
                }
                r = Object.keys(this._tweensAddedDuringUpdate);
              }
              return !0;
            }),
            n
          );
        })(),
        zs = {
          Linear: function (n, e) {
            var t = n.length - 1,
              r = t * e,
              i = Math.floor(r),
              a = zs.Utils.Linear;
            return e < 0
              ? a(n[0], n[1], r)
              : e > 1
              ? a(n[t], n[t - 1], t - r)
              : a(n[i], n[i + 1 > t ? t : i + 1], r - i);
          },
          Bezier: function (n, e) {
            for (
              var t = 0,
                r = n.length - 1,
                i = Math.pow,
                a = zs.Utils.Bernstein,
                s = 0;
              s <= r;
              s++
            )
              t += i(1 - e, r - s) * i(e, s) * n[s] * a(r, s);
            return t;
          },
          CatmullRom: function (n, e) {
            var t = n.length - 1,
              r = t * e,
              i = Math.floor(r),
              a = zs.Utils.CatmullRom;
            return n[0] === n[t]
              ? (e < 0 && (i = Math.floor((r = t * (1 + e)))),
                a(
                  n[(i - 1 + t) % t],
                  n[i],
                  n[(i + 1) % t],
                  n[(i + 2) % t],
                  r - i
                ))
              : e < 0
              ? n[0] - (a(n[0], n[0], n[1], n[1], -r) - n[0])
              : e > 1
              ? n[t] - (a(n[t], n[t], n[t - 1], n[t - 1], r - t) - n[t])
              : a(
                  n[i ? i - 1 : 0],
                  n[i],
                  n[t < i + 1 ? t : i + 1],
                  n[t < i + 2 ? t : i + 2],
                  r - i
                );
          },
          Utils: {
            Linear: function (n, e, t) {
              return (e - n) * t + n;
            },
            Bernstein: function (n, e) {
              var t = zs.Utils.Factorial;
              return t(n) / t(e) / t(n - e);
            },
            Factorial: (function () {
              var n = [1];
              return function (e) {
                var t = 1;
                if (n[e]) return n[e];
                for (var r = e; r > 1; r--) t *= r;
                return (n[e] = t), t;
              };
            })(),
            CatmullRom: function (n, e, t, r, i) {
              var a = 0.5 * (t - n),
                s = 0.5 * (r - e),
                o = i * i;
              return (
                (2 * e - 2 * t + a + s) * (i * o) +
                (-3 * e + 3 * t - 2 * a - s) * o +
                a * i +
                e
              );
            },
          },
        },
        rg = (function () {
          function n() {}
          return (
            (n.nextId = function () {
              return n._nextId++;
            }),
            (n._nextId = 0),
            n
          );
        })(),
        Z_ = new Y_(),
        T3 = (function () {
          function n(e, t) {
            t === void 0 && (t = Z_),
              (this._object = e),
              (this._group = t),
              (this._isPaused = !1),
              (this._pauseStart = 0),
              (this._valuesStart = {}),
              (this._valuesEnd = {}),
              (this._valuesStartRepeat = {}),
              (this._duration = 1e3),
              (this._initialRepeat = 0),
              (this._repeat = 0),
              (this._yoyo = !1),
              (this._isPlaying = !1),
              (this._reversed = !1),
              (this._delayTime = 0),
              (this._startTime = 0),
              (this._easingFunction = ol.Linear.None),
              (this._interpolationFunction = zs.Linear),
              (this._chainedTweens = []),
              (this._onStartCallbackFired = !1),
              (this._id = rg.nextId()),
              (this._isChainStopped = !1),
              (this._goToEnd = !1);
          }
          return (
            (n.prototype.getId = function () {
              return this._id;
            }),
            (n.prototype.isPlaying = function () {
              return this._isPlaying;
            }),
            (n.prototype.isPaused = function () {
              return this._isPaused;
            }),
            (n.prototype.to = function (e, t) {
              return (
                (this._valuesEnd = Object.create(e)),
                t !== void 0 && (this._duration = t),
                this
              );
            }),
            (n.prototype.duration = function (e) {
              return (this._duration = e), this;
            }),
            (n.prototype.start = function (e) {
              if (this._isPlaying) return this;
              if (
                (this._group && this._group.add(this),
                (this._repeat = this._initialRepeat),
                this._reversed)
              )
                for (var t in ((this._reversed = !1), this._valuesStartRepeat))
                  this._swapEndStartRepeatValues(t),
                    (this._valuesStart[t] = this._valuesStartRepeat[t]);
              return (
                (this._isPlaying = !0),
                (this._isPaused = !1),
                (this._onStartCallbackFired = !1),
                (this._isChainStopped = !1),
                (this._startTime =
                  e !== void 0
                    ? typeof e == "string"
                      ? Ta() + parseFloat(e)
                      : e
                    : Ta()),
                (this._startTime += this._delayTime),
                this._setupProperties(
                  this._object,
                  this._valuesStart,
                  this._valuesEnd,
                  this._valuesStartRepeat
                ),
                this
              );
            }),
            (n.prototype._setupProperties = function (e, t, r, i) {
              for (var a in r) {
                var s = e[a],
                  o = Array.isArray(s),
                  l = o ? "array" : typeof s,
                  u = !o && Array.isArray(r[a]);
                if (l !== "undefined" && l !== "function") {
                  if (u) {
                    var c = r[a];
                    if (c.length === 0) continue;
                    (c = c.map(this._handleRelativeValue.bind(this, s))),
                      (r[a] = [s].concat(c));
                  }
                  if ((l !== "object" && !o) || !s || u)
                    t[a] === void 0 && (t[a] = s),
                      o || (t[a] *= 1),
                      (i[a] = u ? r[a].slice().reverse() : t[a] || 0);
                  else {
                    for (var h in ((t[a] = o ? [] : {}), s)) t[a][h] = s[h];
                    (i[a] = o ? [] : {}),
                      this._setupProperties(s, t[a], r[a], i[a]);
                  }
                }
              }
            }),
            (n.prototype.stop = function () {
              return (
                this._isChainStopped ||
                  ((this._isChainStopped = !0), this.stopChainedTweens()),
                this._isPlaying
                  ? (this._group && this._group.remove(this),
                    (this._isPlaying = !1),
                    (this._isPaused = !1),
                    this._onStopCallback && this._onStopCallback(this._object),
                    this)
                  : this
              );
            }),
            (n.prototype.end = function () {
              return (this._goToEnd = !0), this.update(1 / 0), this;
            }),
            (n.prototype.pause = function (e) {
              return (
                e === void 0 && (e = Ta()),
                this._isPaused ||
                  !this._isPlaying ||
                  ((this._isPaused = !0),
                  (this._pauseStart = e),
                  this._group && this._group.remove(this)),
                this
              );
            }),
            (n.prototype.resume = function (e) {
              return (
                e === void 0 && (e = Ta()),
                this._isPaused && this._isPlaying
                  ? ((this._isPaused = !1),
                    (this._startTime += e - this._pauseStart),
                    (this._pauseStart = 0),
                    this._group && this._group.add(this),
                    this)
                  : this
              );
            }),
            (n.prototype.stopChainedTweens = function () {
              for (var e = 0, t = this._chainedTweens.length; e < t; e++)
                this._chainedTweens[e].stop();
              return this;
            }),
            (n.prototype.group = function (e) {
              return (this._group = e), this;
            }),
            (n.prototype.delay = function (e) {
              return (this._delayTime = e), this;
            }),
            (n.prototype.repeat = function (e) {
              return (this._initialRepeat = e), (this._repeat = e), this;
            }),
            (n.prototype.repeatDelay = function (e) {
              return (this._repeatDelayTime = e), this;
            }),
            (n.prototype.yoyo = function (e) {
              return (this._yoyo = e), this;
            }),
            (n.prototype.easing = function (e) {
              return (this._easingFunction = e), this;
            }),
            (n.prototype.interpolation = function (e) {
              return (this._interpolationFunction = e), this;
            }),
            (n.prototype.chain = function () {
              for (var e = [], t = 0; t < arguments.length; t++)
                e[t] = arguments[t];
              return (this._chainedTweens = e), this;
            }),
            (n.prototype.onStart = function (e) {
              return (this._onStartCallback = e), this;
            }),
            (n.prototype.onUpdate = function (e) {
              return (this._onUpdateCallback = e), this;
            }),
            (n.prototype.onRepeat = function (e) {
              return (this._onRepeatCallback = e), this;
            }),
            (n.prototype.onComplete = function (e) {
              return (this._onCompleteCallback = e), this;
            }),
            (n.prototype.onStop = function (e) {
              return (this._onStopCallback = e), this;
            }),
            (n.prototype.update = function (e, t) {
              if (
                (e === void 0 && (e = Ta()),
                t === void 0 && (t = !0),
                this._isPaused)
              )
                return !0;
              var r,
                i,
                a = this._startTime + this._duration;
              if (!this._goToEnd && !this._isPlaying) {
                if (e > a) return !1;
                t && this.start(e);
              }
              if (((this._goToEnd = !1), e < this._startTime)) return !0;
              this._onStartCallbackFired === !1 &&
                (this._onStartCallback && this._onStartCallback(this._object),
                (this._onStartCallbackFired = !0)),
                (i = (e - this._startTime) / this._duration),
                (i = this._duration === 0 || i > 1 ? 1 : i);
              var s = this._easingFunction(i);
              if (
                (this._updateProperties(
                  this._object,
                  this._valuesStart,
                  this._valuesEnd,
                  s
                ),
                this._onUpdateCallback &&
                  this._onUpdateCallback(this._object, i),
                i === 1)
              ) {
                if (this._repeat > 0) {
                  for (r in (isFinite(this._repeat) && this._repeat--,
                  this._valuesStartRepeat))
                    this._yoyo ||
                      typeof this._valuesEnd[r] != "string" ||
                      (this._valuesStartRepeat[r] =
                        this._valuesStartRepeat[r] +
                        parseFloat(this._valuesEnd[r])),
                      this._yoyo && this._swapEndStartRepeatValues(r),
                      (this._valuesStart[r] = this._valuesStartRepeat[r]);
                  return (
                    this._yoyo && (this._reversed = !this._reversed),
                    this._repeatDelayTime !== void 0
                      ? (this._startTime = e + this._repeatDelayTime)
                      : (this._startTime = e + this._delayTime),
                    this._onRepeatCallback &&
                      this._onRepeatCallback(this._object),
                    !0
                  );
                }
                this._onCompleteCallback &&
                  this._onCompleteCallback(this._object);
                for (var o = 0, l = this._chainedTweens.length; o < l; o++)
                  this._chainedTweens[o].start(
                    this._startTime + this._duration
                  );
                return (this._isPlaying = !1), !1;
              }
              return !0;
            }),
            (n.prototype._updateProperties = function (e, t, r, i) {
              for (var a in r)
                if (t[a] !== void 0) {
                  var s = t[a] || 0,
                    o = r[a],
                    l = Array.isArray(e[a]),
                    u = Array.isArray(o);
                  !l && u
                    ? (e[a] = this._interpolationFunction(o, i))
                    : typeof o == "object" && o
                    ? this._updateProperties(e[a], s, o, i)
                    : typeof (o = this._handleRelativeValue(s, o)) ==
                        "number" && (e[a] = s + (o - s) * i);
                }
            }),
            (n.prototype._handleRelativeValue = function (e, t) {
              return typeof t != "string"
                ? t
                : t.charAt(0) === "+" || t.charAt(0) === "-"
                ? e + parseFloat(t)
                : parseFloat(t);
            }),
            (n.prototype._swapEndStartRepeatValues = function (e) {
              var t = this._valuesStartRepeat[e],
                r = this._valuesEnd[e];
              (this._valuesStartRepeat[e] =
                typeof r == "string"
                  ? this._valuesStartRepeat[e] + parseFloat(r)
                  : this._valuesEnd[e]),
                (this._valuesEnd[e] = t);
            }),
            n
          );
        })(),
        E3 = rg.nextId,
        qr = Z_,
        C3 = qr.getAll.bind(qr),
        A3 = qr.removeAll.bind(qr),
        R3 = qr.add.bind(qr),
        P3 = qr.remove.bind(qr),
        L3 = qr.update.bind(qr),
        ci = {
          Easing: ol,
          Group: Y_,
          Interpolation: zs,
          now: Ta,
          Sequence: rg,
          nextId: E3,
          Tween: T3,
          VERSION: "18.6.4",
          getAll: C3,
          removeAll: A3,
          add: R3,
          remove: P3,
          update: L3,
        },
        Bh = { exports: {} },
        $e = {},
        Xt = typeof Symbol == "function" && Symbol.for,
        kp = Xt ? Symbol.for("react.element") : 60103,
        Ip = Xt ? Symbol.for("react.portal") : 60106,
        Ec = Xt ? Symbol.for("react.fragment") : 60107,
        Cc = Xt ? Symbol.for("react.strict_mode") : 60108,
        Ac = Xt ? Symbol.for("react.profiler") : 60114,
        Rc = Xt ? Symbol.for("react.provider") : 60109,
        Pc = Xt ? Symbol.for("react.context") : 60110,
        Up = Xt ? Symbol.for("react.async_mode") : 60111,
        fh = Xt ? Symbol.for("react.concurrent_mode") : 60111,
        Lc = Xt ? Symbol.for("react.forward_ref") : 60112,
        Dc = Xt ? Symbol.for("react.suspense") : 60113,
        D3 = Xt ? Symbol.for("react.suspense_list") : 60120,
        kc = Xt ? Symbol.for("react.memo") : 60115,
        Ic = Xt ? Symbol.for("react.lazy") : 60116,
        k3 = Xt ? Symbol.for("react.block") : 60121,
        I3 = Xt ? Symbol.for("react.fundamental") : 60117,
        U3 = Xt ? Symbol.for("react.responder") : 60118,
        O3 = Xt ? Symbol.for("react.scope") : 60119;
      function Hn(n) {
        if (typeof n == "object" && n !== null) {
          var e = n.$$typeof;
          switch (e) {
            case kp:
              switch ((n = n.type)) {
                case Up:
                case fh:
                case Ec:
                case Ac:
                case Cc:
                case Dc:
                  return n;
                default:
                  switch ((n = n && n.$$typeof)) {
                    case Pc:
                    case Lc:
                    case Ic:
                    case kc:
                    case Rc:
                      return n;
                    default:
                      return e;
                  }
              }
            case Ip:
              return e;
          }
        }
      }
      function p1(n) {
        return Hn(n) === fh;
      }
      function z3(n) {
        function e(A, D, V, K, B) {
          for (
            var Y,
              R,
              L,
              Z,
              re,
              q = 0,
              Q = 0,
              ee = 0,
              S = 0,
              H = 0,
              $ = 0,
              J = (L = Y = 0),
              te = 0,
              ne = 0,
              de = 0,
              ue = 0,
              ce = V.length,
              he = ce - 1,
              oe = "",
              xe = "",
              Le = "",
              me = "";
            te < ce;

          ) {
            if (
              ((R = V.charCodeAt(te)),
              te === he &&
                Q + S + ee + q !== 0 &&
                (Q !== 0 && (R = Q === 47 ? 10 : 47),
                (S = ee = q = 0),
                ce++,
                he++),
              Q + S + ee + q === 0)
            ) {
              if (
                te === he &&
                (0 < ne && (oe = oe.replace(h, "")), 0 < oe.trim().length)
              ) {
                switch (R) {
                  case 32:
                  case 9:
                  case 59:
                  case 13:
                  case 10:
                    break;
                  default:
                    oe += V.charAt(te);
                }
                R = 59;
              }
              switch (R) {
                case 123:
                  for (
                    Y = (oe = oe.trim()).charCodeAt(0), L = 1, ue = ++te;
                    te < ce;

                  ) {
                    switch ((R = V.charCodeAt(te))) {
                      case 123:
                        L++;
                        break;
                      case 125:
                        L--;
                        break;
                      case 47:
                        switch ((R = V.charCodeAt(te + 1))) {
                          case 42:
                          case 47:
                            e: {
                              for (J = te + 1; J < he; ++J)
                                switch (V.charCodeAt(J)) {
                                  case 47:
                                    if (
                                      R === 42 &&
                                      V.charCodeAt(J - 1) === 42 &&
                                      te + 2 !== J
                                    ) {
                                      te = J + 1;
                                      break e;
                                    }
                                    break;
                                  case 10:
                                    if (R === 47) {
                                      te = J + 1;
                                      break e;
                                    }
                                }
                              te = J;
                            }
                        }
                        break;
                      case 91:
                        R++;
                      case 40:
                        R++;
                      case 34:
                      case 39:
                        for (; te++ < he && V.charCodeAt(te) !== R; );
                    }
                    if (L === 0) break;
                    te++;
                  }
                  if (
                    ((L = V.substring(ue, te)),
                    Y === 0 &&
                      (Y = (oe = oe.replace(c, "").trim()).charCodeAt(0)),
                    Y === 64)
                  ) {
                    switch (
                      (0 < ne && (oe = oe.replace(h, "")),
                      (R = oe.charCodeAt(1)))
                    ) {
                      case 100:
                      case 109:
                      case 115:
                      case 45:
                        ne = D;
                        break;
                      default:
                        ne = O;
                    }
                    if (
                      ((ue = (L = e(D, ne, L, R, B + 1)).length),
                      0 < P &&
                        ((re = o(
                          3,
                          L,
                          (ne = t(O, oe, de)),
                          D,
                          I,
                          U,
                          ue,
                          R,
                          B,
                          K
                        )),
                        (oe = ne.join("")),
                        re !== void 0 &&
                          (ue = (L = re.trim()).length) === 0 &&
                          ((R = 0), (L = ""))),
                      0 < ue)
                    )
                      switch (R) {
                        case 115:
                          oe = oe.replace(b, s);
                        case 100:
                        case 109:
                        case 45:
                          L = oe + "{" + L + "}";
                          break;
                        case 107:
                          (L = (oe = oe.replace(v, "$1 $2")) + "{" + L + "}"),
                            (L =
                              T === 1 || (T === 2 && a("@" + L, 3))
                                ? "@-webkit-" + L + "@" + L
                                : "@" + L);
                          break;
                        default:
                          (L = oe + L), K === 112 && ((xe += L), (L = ""));
                      }
                    else L = "";
                  } else L = e(D, t(D, oe, de), L, K, B + 1);
                  (Le += L),
                    (L = de = ne = J = Y = 0),
                    (oe = ""),
                    (R = V.charCodeAt(++te));
                  break;
                case 125:
                case 59:
                  if (
                    1 <
                    (ue = (oe = (0 < ne ? oe.replace(h, "") : oe).trim())
                      .length)
                  )
                    switch (
                      (J === 0 &&
                        ((Y = oe.charCodeAt(0)),
                        Y === 45 || (96 < Y && 123 > Y)) &&
                        (ue = (oe = oe.replace(" ", ":")).length),
                      0 < P &&
                        (re = o(1, oe, D, A, I, U, xe.length, K, B, K)) !==
                          void 0 &&
                        (ue = (oe = re.trim()).length) === 0 &&
                        (oe = "\0\0"),
                      (Y = oe.charCodeAt(0)),
                      (R = oe.charCodeAt(1)),
                      Y)
                    ) {
                      case 0:
                        break;
                      case 64:
                        if (R === 105 || R === 99) {
                          me += oe + V.charAt(te);
                          break;
                        }
                      default:
                        oe.charCodeAt(ue - 1) !== 58 &&
                          (xe += i(oe, Y, R, oe.charCodeAt(2)));
                    }
                  (de = ne = J = Y = 0), (oe = ""), (R = V.charCodeAt(++te));
              }
            }
            switch (R) {
              case 13:
              case 10:
                Q === 47
                  ? (Q = 0)
                  : 1 + Y === 0 &&
                    K !== 107 &&
                    0 < oe.length &&
                    ((ne = 1), (oe += "\0")),
                  0 < P * z && o(0, oe, D, A, I, U, xe.length, K, B, K),
                  (U = 1),
                  I++;
                break;
              case 59:
              case 125:
                if (Q + S + ee + q === 0) {
                  U++;
                  break;
                }
              default:
                switch ((U++, (Z = V.charAt(te)), R)) {
                  case 9:
                  case 32:
                    if (S + q + Q === 0)
                      switch (H) {
                        case 44:
                        case 58:
                        case 9:
                        case 32:
                          Z = "";
                          break;
                        default:
                          R !== 32 && (Z = " ");
                      }
                    break;
                  case 0:
                    Z = "\\0";
                    break;
                  case 12:
                    Z = "\\f";
                    break;
                  case 11:
                    Z = "\\v";
                    break;
                  case 38:
                    S + Q + q === 0 && ((ne = de = 1), (Z = "\f" + Z));
                    break;
                  case 108:
                    if (S + Q + q + F === 0 && 0 < J)
                      switch (te - J) {
                        case 2:
                          H === 112 && V.charCodeAt(te - 3) === 58 && (F = H);
                        case 8:
                          $ === 111 && (F = $);
                      }
                    break;
                  case 58:
                    S + Q + q === 0 && (J = te);
                    break;
                  case 44:
                    Q + ee + S + q === 0 && ((ne = 1), (Z += "\r"));
                    break;
                  case 34:
                  case 39:
                    Q === 0 && (S = S === R ? 0 : S === 0 ? R : S);
                    break;
                  case 91:
                    S + Q + ee === 0 && q++;
                    break;
                  case 93:
                    S + Q + ee === 0 && q--;
                    break;
                  case 41:
                    S + Q + q === 0 && ee--;
                    break;
                  case 40:
                    S + Q + q === 0 &&
                      (Y === 0 && (2 * H + 3 * $ == 533 || (Y = 1)), ee++);
                    break;
                  case 64:
                    Q + ee + S + q + J + L === 0 && (L = 1);
                    break;
                  case 42:
                  case 47:
                    if (!(0 < S + q + ee))
                      switch (Q) {
                        case 0:
                          switch (2 * R + 3 * V.charCodeAt(te + 1)) {
                            case 235:
                              Q = 47;
                              break;
                            case 220:
                              (ue = te), (Q = 42);
                          }
                          break;
                        case 42:
                          R === 47 &&
                            H === 42 &&
                            ue + 2 !== te &&
                            (V.charCodeAt(ue + 2) === 33 &&
                              (xe += V.substring(ue, te + 1)),
                            (Z = ""),
                            (Q = 0));
                      }
                }
                Q === 0 && (oe += Z);
            }
            ($ = H), (H = R), te++;
          }
          if (0 < (ue = xe.length)) {
            if (
              ((ne = D),
              0 < P &&
                (re = o(2, xe, ne, A, I, U, ue, K, B, K)) !== void 0 &&
                (xe = re).length === 0)
            )
              return me + xe + Le;
            if (((xe = ne.join(",") + "{" + xe + "}"), T * F != 0)) {
              switch ((T !== 2 || a(xe, 2) || (F = 0), F)) {
                case 111:
                  xe = xe.replace(x, ":-moz-$1") + xe;
                  break;
                case 112:
                  xe =
                    xe.replace(m, "::-webkit-input-$1") +
                    xe.replace(m, "::-moz-$1") +
                    xe.replace(m, ":-ms-input-$1") +
                    xe;
              }
              F = 0;
            }
          }
          return me + xe + Le;
        }
        function t(A, D, V) {
          var K = D.trim().split(p);
          D = K;
          var B = K.length,
            Y = A.length;
          switch (Y) {
            case 0:
            case 1:
              var R = 0;
              for (A = Y === 0 ? "" : A[0] + " "; R < B; ++R)
                D[R] = r(A, D[R], V).trim();
              break;
            default:
              var L = (R = 0);
              for (D = []; R < B; ++R)
                for (var Z = 0; Z < Y; ++Z)
                  D[L++] = r(A[Z] + " ", K[R], V).trim();
          }
          return D;
        }
        function r(A, D, V) {
          var K = D.charCodeAt(0);
          switch ((33 > K && (K = (D = D.trim()).charCodeAt(0)), K)) {
            case 38:
              return D.replace(y, "$1" + A.trim());
            case 58:
              return A.trim() + D.replace(y, "$1" + A.trim());
            default:
              if (0 < 1 * V && 0 < D.indexOf("\f"))
                return D.replace(
                  y,
                  (A.charCodeAt(0) === 58 ? "" : "$1") + A.trim()
                );
          }
          return A + D;
        }
        function i(A, D, V, K) {
          var B = A + ";",
            Y = 2 * D + 3 * V + 4 * K;
          if (Y === 944) {
            A = B.indexOf(":", 9) + 1;
            var R = B.substring(A, B.length - 1).trim();
            return (
              (R = B.substring(0, A).trim() + R + ";"),
              T === 1 || (T === 2 && a(R, 1)) ? "-webkit-" + R + R : R
            );
          }
          if (T === 0 || (T === 2 && !a(B, 1))) return B;
          switch (Y) {
            case 1015:
              return B.charCodeAt(10) === 97 ? "-webkit-" + B + B : B;
            case 951:
              return B.charCodeAt(3) === 116 ? "-webkit-" + B + B : B;
            case 963:
              return B.charCodeAt(5) === 110 ? "-webkit-" + B + B : B;
            case 1009:
              if (B.charCodeAt(4) !== 100) break;
            case 969:
            case 942:
              return "-webkit-" + B + B;
            case 978:
              return "-webkit-" + B + "-moz-" + B + B;
            case 1019:
            case 983:
              return "-webkit-" + B + "-moz-" + B + "-ms-" + B + B;
            case 883:
              if (B.charCodeAt(8) === 45) return "-webkit-" + B + B;
              if (0 < B.indexOf("image-set(", 11))
                return B.replace(G, "$1-webkit-$2") + B;
              break;
            case 932:
              if (B.charCodeAt(4) === 45)
                switch (B.charCodeAt(5)) {
                  case 103:
                    return (
                      "-webkit-box-" +
                      B.replace("-grow", "") +
                      "-webkit-" +
                      B +
                      "-ms-" +
                      B.replace("grow", "positive") +
                      B
                    );
                  case 115:
                    return (
                      "-webkit-" +
                      B +
                      "-ms-" +
                      B.replace("shrink", "negative") +
                      B
                    );
                  case 98:
                    return (
                      "-webkit-" +
                      B +
                      "-ms-" +
                      B.replace("basis", "preferred-size") +
                      B
                    );
                }
              return "-webkit-" + B + "-ms-" + B + B;
            case 964:
              return "-webkit-" + B + "-ms-flex-" + B + B;
            case 1023:
              if (B.charCodeAt(8) !== 99) break;
              return (
                "-webkit-box-pack" +
                (R = B.substring(B.indexOf(":", 15))
                  .replace("flex-", "")
                  .replace("space-between", "justify")) +
                "-webkit-" +
                B +
                "-ms-flex-pack" +
                R +
                B
              );
            case 1005:
              return f.test(B)
                ? B.replace(d, ":-webkit-") + B.replace(d, ":-moz-") + B
                : B;
            case 1e3:
              switch (
                ((D = (R = B.substring(13).trim()).indexOf("-") + 1),
                R.charCodeAt(0) + R.charCodeAt(D))
              ) {
                case 226:
                  R = B.replace(_, "tb");
                  break;
                case 232:
                  R = B.replace(_, "tb-rl");
                  break;
                case 220:
                  R = B.replace(_, "lr");
                  break;
                default:
                  return B;
              }
              return "-webkit-" + B + "-ms-" + R + B;
            case 1017:
              if (B.indexOf("sticky", 9) === -1) break;
            case 975:
              switch (
                ((D = (B = A).length - 10),
                (Y =
                  (R = (B.charCodeAt(D) === 33 ? B.substring(0, D) : B)
                    .substring(A.indexOf(":", 7) + 1)
                    .trim()).charCodeAt(0) +
                  (0 | R.charCodeAt(7))))
              ) {
                case 203:
                  if (111 > R.charCodeAt(8)) break;
                case 115:
                  B = B.replace(R, "-webkit-" + R) + ";" + B;
                  break;
                case 207:
                case 102:
                  B =
                    B.replace(
                      R,
                      "-webkit-" + (102 < Y ? "inline-" : "") + "box"
                    ) +
                    ";" +
                    B.replace(R, "-webkit-" + R) +
                    ";" +
                    B.replace(R, "-ms-" + R + "box") +
                    ";" +
                    B;
              }
              return B + ";";
            case 938:
              if (B.charCodeAt(5) === 45)
                switch (B.charCodeAt(6)) {
                  case 105:
                    return (
                      (R = B.replace("-items", "")),
                      "-webkit-" + B + "-webkit-box-" + R + "-ms-flex-" + R + B
                    );
                  case 115:
                    return (
                      "-webkit-" + B + "-ms-flex-item-" + B.replace(M, "") + B
                    );
                  default:
                    return (
                      "-webkit-" +
                      B +
                      "-ms-flex-line-pack" +
                      B.replace("align-content", "").replace(M, "") +
                      B
                    );
                }
              break;
            case 973:
            case 989:
              if (B.charCodeAt(3) !== 45 || B.charCodeAt(4) === 122) break;
            case 931:
            case 953:
              if (N.test(A) === !0)
                return (R = A.substring(A.indexOf(":") + 1)).charCodeAt(0) ===
                  115
                  ? i(A.replace("stretch", "fill-available"), D, V, K).replace(
                      ":fill-available",
                      ":stretch"
                    )
                  : B.replace(R, "-webkit-" + R) +
                      B.replace(R, "-moz-" + R.replace("fill-", "")) +
                      B;
              break;
            case 962:
              if (
                ((B =
                  "-webkit-" +
                  B +
                  (B.charCodeAt(5) === 102 ? "-ms-" + B : "") +
                  B),
                V + K === 211 &&
                  B.charCodeAt(13) === 105 &&
                  0 < B.indexOf("transform", 10))
              )
                return (
                  B.substring(0, B.indexOf(";", 27) + 1).replace(
                    g,
                    "$1-webkit-$2"
                  ) + B
                );
          }
          return B;
        }
        function a(A, D) {
          var V = A.indexOf(D === 1 ? ":" : "{"),
            K = A.substring(0, D !== 3 ? V : 10);
          return (
            (V = A.substring(V + 1, A.length - 1)),
            E(D !== 2 ? K : K.replace(C, "$1"), V, D)
          );
        }
        function s(A, D) {
          var V = i(D, D.charCodeAt(0), D.charCodeAt(1), D.charCodeAt(2));
          return V !== D + ";"
            ? V.replace(w, " or ($1)").substring(4)
            : "(" + D + ")";
        }
        function o(A, D, V, K, B, Y, R, L, Z, re) {
          for (var q, Q = 0, ee = D; Q < P; ++Q)
            switch ((q = k[Q].call(u, A, ee, V, K, B, Y, R, L, Z, re))) {
              case void 0:
              case !1:
              case !0:
              case null:
                break;
              default:
                ee = q;
            }
          if (ee !== D) return ee;
        }
        function l(A) {
          return (
            (A = A.prefix) !== void 0 &&
              ((E = null),
              A
                ? typeof A != "function"
                  ? (T = 1)
                  : ((T = 2), (E = A))
                : (T = 0)),
            l
          );
        }
        function u(A, D) {
          var V = A;
          if ((33 > V.charCodeAt(0) && (V = V.trim()), (V = [V]), 0 < P)) {
            var K = o(-1, D, V, V, I, U, 0, 0, 0, 0);
            K !== void 0 && typeof K == "string" && (D = K);
          }
          var B = e(O, V, D, 0, 0);
          return (
            0 < P &&
              (K = o(-2, B, V, V, I, U, B.length, 0, 0, 0)) !== void 0 &&
              (B = K),
            (F = 0),
            (U = I = 1),
            B
          );
        }
        var c = /^\0+/g,
          h = /[\0\r\f]/g,
          d = /: */g,
          f = /zoo|gra/,
          g = /([,: ])(transform)/g,
          p = /,\r+?/g,
          y = /([\t\r\n ])*\f?&/g,
          v = /@(k\w+)\s*(\S*)\s*/,
          m = /::(place)/g,
          x = /:(read-only)/g,
          _ = /[svh]\w+-[tblr]{2}/,
          b = /\(\s*(.*)\s*\)/g,
          w = /([\s\S]*?);/g,
          M = /-self|flex-/g,
          C = /[^]*?(:[rp][el]a[\w-]+)[^]*/,
          N = /stretch|:\s*\w+\-(?:conte|avail)/,
          G = /([^-])(image-set\()/,
          U = 1,
          I = 1,
          F = 0,
          T = 1,
          O = [],
          k = [],
          P = 0,
          E = null,
          z = 0;
        return (
          (u.use = function A(D) {
            switch (D) {
              case void 0:
              case null:
                P = k.length = 0;
                break;
              default:
                if (typeof D == "function") k[P++] = D;
                else if (typeof D == "object")
                  for (var V = 0, K = D.length; V < K; ++V) A(D[V]);
                else z = 0 | !!D;
            }
            return A;
          }),
          (u.set = l),
          n !== void 0 && l(n),
          u
        );
      }
      ($e.AsyncMode = Up),
        ($e.ConcurrentMode = fh),
        ($e.ContextConsumer = Pc),
        ($e.ContextProvider = Rc),
        ($e.Element = kp),
        ($e.ForwardRef = Lc),
        ($e.Fragment = Ec),
        ($e.Lazy = Ic),
        ($e.Memo = kc),
        ($e.Portal = Ip),
        ($e.Profiler = Ac),
        ($e.StrictMode = Cc),
        ($e.Suspense = Dc),
        ($e.isAsyncMode = function (n) {
          return p1(n) || Hn(n) === Up;
        }),
        ($e.isConcurrentMode = p1),
        ($e.isContextConsumer = function (n) {
          return Hn(n) === Pc;
        }),
        ($e.isContextProvider = function (n) {
          return Hn(n) === Rc;
        }),
        ($e.isElement = function (n) {
          return typeof n == "object" && n !== null && n.$$typeof === kp;
        }),
        ($e.isForwardRef = function (n) {
          return Hn(n) === Lc;
        }),
        ($e.isFragment = function (n) {
          return Hn(n) === Ec;
        }),
        ($e.isLazy = function (n) {
          return Hn(n) === Ic;
        }),
        ($e.isMemo = function (n) {
          return Hn(n) === kc;
        }),
        ($e.isPortal = function (n) {
          return Hn(n) === Ip;
        }),
        ($e.isProfiler = function (n) {
          return Hn(n) === Ac;
        }),
        ($e.isStrictMode = function (n) {
          return Hn(n) === Cc;
        }),
        ($e.isSuspense = function (n) {
          return Hn(n) === Dc;
        }),
        ($e.isValidElementType = function (n) {
          return (
            typeof n == "string" ||
            typeof n == "function" ||
            n === Ec ||
            n === fh ||
            n === Ac ||
            n === Cc ||
            n === Dc ||
            n === D3 ||
            (typeof n == "object" &&
              n !== null &&
              (n.$$typeof === Ic ||
                n.$$typeof === kc ||
                n.$$typeof === Rc ||
                n.$$typeof === Pc ||
                n.$$typeof === Lc ||
                n.$$typeof === I3 ||
                n.$$typeof === U3 ||
                n.$$typeof === O3 ||
                n.$$typeof === k3))
          );
        }),
        ($e.typeOf = Hn),
        (Bh.exports = $e);
      var N3 = {
        animationIterationCount: 1,
        borderImageOutset: 1,
        borderImageSlice: 1,
        borderImageWidth: 1,
        boxFlex: 1,
        boxFlexGroup: 1,
        boxOrdinalGroup: 1,
        columnCount: 1,
        columns: 1,
        flex: 1,
        flexGrow: 1,
        flexPositive: 1,
        flexShrink: 1,
        flexNegative: 1,
        flexOrder: 1,
        gridRow: 1,
        gridRowEnd: 1,
        gridRowSpan: 1,
        gridRowStart: 1,
        gridColumn: 1,
        gridColumnEnd: 1,
        gridColumnSpan: 1,
        gridColumnStart: 1,
        msGridRow: 1,
        msGridRowSpan: 1,
        msGridColumn: 1,
        msGridColumnSpan: 1,
        fontWeight: 1,
        lineHeight: 1,
        opacity: 1,
        order: 1,
        orphans: 1,
        tabSize: 1,
        widows: 1,
        zIndex: 1,
        zoom: 1,
        WebkitLineClamp: 1,
        fillOpacity: 1,
        floodOpacity: 1,
        stopOpacity: 1,
        strokeDasharray: 1,
        strokeDashoffset: 1,
        strokeMiterlimit: 1,
        strokeOpacity: 1,
        strokeWidth: 1,
      };
      function F3(n) {
        var e = Object.create(null);
        return function (t) {
          return e[t] === void 0 && (e[t] = n(t)), e[t];
        };
      }
      var B3 =
          /^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,
        m1 = F3(function (n) {
          return (
            B3.test(n) ||
            (n.charCodeAt(0) === 111 &&
              n.charCodeAt(1) === 110 &&
              n.charCodeAt(2) < 91)
          );
        }),
        Op = Bh.exports,
        G3 = {
          childContextTypes: !0,
          contextType: !0,
          contextTypes: !0,
          defaultProps: !0,
          displayName: !0,
          getDefaultProps: !0,
          getDerivedStateFromError: !0,
          getDerivedStateFromProps: !0,
          mixins: !0,
          propTypes: !0,
          type: !0,
        },
        H3 = {
          name: !0,
          length: !0,
          prototype: !0,
          caller: !0,
          callee: !0,
          arguments: !0,
          arity: !0,
        },
        K_ = {
          $$typeof: !0,
          compare: !0,
          defaultProps: !0,
          displayName: !0,
          propTypes: !0,
          type: !0,
        },
        zp = {};
      function g1(n) {
        return Op.isMemo(n) ? K_ : zp[n.$$typeof] || G3;
      }
      (zp[Op.ForwardRef] = {
        $$typeof: !0,
        render: !0,
        defaultProps: !0,
        displayName: !0,
        propTypes: !0,
      }),
        (zp[Op.Memo] = K_);
      var V3 = Object.defineProperty,
        W3 = Object.getOwnPropertyNames,
        v1 = Object.getOwnPropertySymbols,
        j3 = Object.getOwnPropertyDescriptor,
        X3 = Object.getPrototypeOf,
        y1 = Object.prototype,
        q3 = function n(e, t, r) {
          if (typeof t != "string") {
            if (y1) {
              var i = X3(t);
              i && i !== y1 && n(e, i, r);
            }
            var a = W3(t);
            v1 && (a = a.concat(v1(t)));
            for (var s = g1(e), o = g1(t), l = 0; l < a.length; ++l) {
              var u = a[l];
              if (!(H3[u] || (r && r[u]) || (o && o[u]) || (s && s[u]))) {
                var c = j3(t, u);
                try {
                  V3(e, u, c);
                } catch {}
              }
            }
          }
          return e;
        };
      function Hr() {
        return (Hr =
          Object.assign ||
          function (n) {
            for (var e = 1; e < arguments.length; e++) {
              var t = arguments[e];
              for (var r in t)
                Object.prototype.hasOwnProperty.call(t, r) && (n[r] = t[r]);
            }
            return n;
          }).apply(this, arguments);
      }
      var x1 = function (n, e) {
          for (var t = [n[0]], r = 0, i = e.length; r < i; r += 1)
            t.push(e[r], n[r + 1]);
          return t;
        },
        Np = function (n) {
          return (
            n !== null &&
            typeof n == "object" &&
            (n.toString ? n.toString() : Object.prototype.toString.call(n)) ===
              "[object Object]" &&
            !Bh.exports.typeOf(n)
          );
        },
        ph = Object.freeze([]),
        Zi = Object.freeze({});
      function Ol(n) {
        return typeof n == "function";
      }
      function _1(n) {
        return n.displayName || n.name || "Component";
      }
      function ig(n) {
        return n && typeof n.styledComponentId == "string";
      }
      var no =
          (typeof process < "u" &&
            (process.env.REACT_APP_SC_ATTR || process.env.SC_ATTR)) ||
          "data-styled",
        ag = typeof window < "u" && "HTMLElement" in window,
        $3 = Boolean(
          typeof SC_DISABLE_SPEEDY == "boolean"
            ? SC_DISABLE_SPEEDY
            : typeof process < "u" &&
              process.env.REACT_APP_SC_DISABLE_SPEEDY !== void 0 &&
              process.env.REACT_APP_SC_DISABLE_SPEEDY !== ""
            ? process.env.REACT_APP_SC_DISABLE_SPEEDY !== "false" &&
              process.env.REACT_APP_SC_DISABLE_SPEEDY
            : typeof process < "u" &&
              process.env.SC_DISABLE_SPEEDY !== void 0 &&
              process.env.SC_DISABLE_SPEEDY !== "" &&
              process.env.SC_DISABLE_SPEEDY !== "false" &&
              process.env.SC_DISABLE_SPEEDY
        ),
        Y3 = {};
      function Zl(n) {
        for (
          var e = arguments.length, t = new Array(e > 1 ? e - 1 : 0), r = 1;
          r < e;
          r++
        )
          t[r - 1] = arguments[r];
        throw new Error(
          "An error occurred. See https://git.io/JUIaE#" +
            n +
            " for more information." +
            (t.length > 0 ? " Args: " + t.join(", ") : "")
        );
      }
      var Z3 = (function () {
          function n(t) {
            (this.groupSizes = new Uint32Array(512)),
              (this.length = 512),
              (this.tag = t);
          }
          var e = n.prototype;
          return (
            (e.indexOfGroup = function (t) {
              for (var r = 0, i = 0; i < t; i++) r += this.groupSizes[i];
              return r;
            }),
            (e.insertRules = function (t, r) {
              if (t >= this.groupSizes.length) {
                for (var i = this.groupSizes, a = i.length, s = a; t >= s; )
                  (s <<= 1) < 0 && Zl(16, "" + t);
                (this.groupSizes = new Uint32Array(s)),
                  this.groupSizes.set(i),
                  (this.length = s);
                for (var o = a; o < s; o++) this.groupSizes[o] = 0;
              }
              for (
                var l = this.indexOfGroup(t + 1), u = 0, c = r.length;
                u < c;
                u++
              )
                this.tag.insertRule(l, r[u]) && (this.groupSizes[t]++, l++);
            }),
            (e.clearGroup = function (t) {
              if (t < this.length) {
                var r = this.groupSizes[t],
                  i = this.indexOfGroup(t),
                  a = i + r;
                this.groupSizes[t] = 0;
                for (var s = i; s < a; s++) this.tag.deleteRule(i);
              }
            }),
            (e.getGroup = function (t) {
              var r = "";
              if (t >= this.length || this.groupSizes[t] === 0) return r;
              for (
                var i = this.groupSizes[t],
                  a = this.indexOfGroup(t),
                  s = a + i,
                  o = a;
                o < s;
                o++
              )
                r +=
                  this.tag.getRule(o) +
                  `/*!sc*/
`;
              return r;
            }),
            n
          );
        })(),
        Uc = new Map(),
        mh = new Map(),
        ll = 1,
        Ju = function (n) {
          if (Uc.has(n)) return Uc.get(n);
          for (; mh.has(ll); ) ll++;
          var e = ll++;
          return Uc.set(n, e), mh.set(e, n), e;
        },
        K3 = function (n) {
          return mh.get(n);
        },
        J3 = function (n, e) {
          e >= ll && (ll = e + 1), Uc.set(n, e), mh.set(e, n);
        },
        Q3 = "style[" + no + '][data-styled-version="5.3.5"]',
        eE = new RegExp(
          "^" + no + '\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'
        ),
        tE = function (n, e, t) {
          for (var r, i = t.split(","), a = 0, s = i.length; a < s; a++)
            (r = i[a]) && n.registerName(e, r);
        },
        nE = function (n, e) {
          for (
            var t = (e.textContent || "").split(`/*!sc*/
`),
              r = [],
              i = 0,
              a = t.length;
            i < a;
            i++
          ) {
            var s = t[i].trim();
            if (s) {
              var o = s.match(eE);
              if (o) {
                var l = 0 | parseInt(o[1], 10),
                  u = o[2];
                l !== 0 &&
                  (J3(u, l), tE(n, u, o[3]), n.getTag().insertRules(l, r)),
                  (r.length = 0);
              } else r.push(s);
            }
          }
        },
        J_ = function (n) {
          var e = document.head,
            t = n || e,
            r = document.createElement("style"),
            i = (function (o) {
              for (var l = o.childNodes, u = l.length; u >= 0; u--) {
                var c = l[u];
                if (c && c.nodeType === 1 && c.hasAttribute(no)) return c;
              }
            })(t),
            a = i !== void 0 ? i.nextSibling : null;
          r.setAttribute(no, "active"),
            r.setAttribute("data-styled-version", "5.3.5");
          var s =
            typeof window < "u" && window.__webpack_nonce__ !== void 0
              ? window.__webpack_nonce__
              : null;
          return s && r.setAttribute("nonce", s), t.insertBefore(r, a), r;
        },
        rE = (function () {
          function n(t) {
            var r = (this.element = J_(t));
            r.appendChild(document.createTextNode("")),
              (this.sheet = (function (i) {
                if (i.sheet) return i.sheet;
                for (
                  var a = document.styleSheets, s = 0, o = a.length;
                  s < o;
                  s++
                ) {
                  var l = a[s];
                  if (l.ownerNode === i) return l;
                }
                Zl(17);
              })(r)),
              (this.length = 0);
          }
          var e = n.prototype;
          return (
            (e.insertRule = function (t, r) {
              try {
                return this.sheet.insertRule(r, t), this.length++, !0;
              } catch {
                return !1;
              }
            }),
            (e.deleteRule = function (t) {
              this.sheet.deleteRule(t), this.length--;
            }),
            (e.getRule = function (t) {
              var r = this.sheet.cssRules[t];
              return r !== void 0 && typeof r.cssText == "string"
                ? r.cssText
                : "";
            }),
            n
          );
        })(),
        iE = (function () {
          function n(t) {
            var r = (this.element = J_(t));
            (this.nodes = r.childNodes), (this.length = 0);
          }
          var e = n.prototype;
          return (
            (e.insertRule = function (t, r) {
              if (t <= this.length && t >= 0) {
                var i = document.createTextNode(r),
                  a = this.nodes[t];
                return (
                  this.element.insertBefore(i, a || null), this.length++, !0
                );
              }
              return !1;
            }),
            (e.deleteRule = function (t) {
              this.element.removeChild(this.nodes[t]), this.length--;
            }),
            (e.getRule = function (t) {
              return t < this.length ? this.nodes[t].textContent : "";
            }),
            n
          );
        })(),
        aE = (function () {
          function n(t) {
            (this.rules = []), (this.length = 0);
          }
          var e = n.prototype;
          return (
            (e.insertRule = function (t, r) {
              return (
                t <= this.length &&
                (this.rules.splice(t, 0, r), this.length++, !0)
              );
            }),
            (e.deleteRule = function (t) {
              this.rules.splice(t, 1), this.length--;
            }),
            (e.getRule = function (t) {
              return t < this.length ? this.rules[t] : "";
            }),
            n
          );
        })(),
        b1 = ag,
        sE = { isServer: !ag, useCSSOMInjection: !$3 },
        gh = (function () {
          function n(t, r, i) {
            t === void 0 && (t = Zi),
              r === void 0 && (r = {}),
              (this.options = Hr({}, sE, {}, t)),
              (this.gs = r),
              (this.names = new Map(i)),
              (this.server = !!t.isServer),
              !this.server &&
                ag &&
                b1 &&
                ((b1 = !1),
                (function (a) {
                  for (
                    var s = document.querySelectorAll(Q3), o = 0, l = s.length;
                    o < l;
                    o++
                  ) {
                    var u = s[o];
                    u &&
                      u.getAttribute(no) !== "active" &&
                      (nE(a, u), u.parentNode && u.parentNode.removeChild(u));
                  }
                })(this));
          }
          n.registerId = function (t) {
            return Ju(t);
          };
          var e = n.prototype;
          return (
            (e.reconstructWithOptions = function (t, r) {
              return (
                r === void 0 && (r = !0),
                new n(
                  Hr({}, this.options, {}, t),
                  this.gs,
                  (r && this.names) || void 0
                )
              );
            }),
            (e.allocateGSInstance = function (t) {
              return (this.gs[t] = (this.gs[t] || 0) + 1);
            }),
            (e.getTag = function () {
              return (
                this.tag ||
                (this.tag =
                  ((i = (r = this.options).isServer),
                  (a = r.useCSSOMInjection),
                  (s = r.target),
                  (t = i ? new aE(s) : a ? new rE(s) : new iE(s)),
                  new Z3(t)))
              );
              var t, r, i, a, s;
            }),
            (e.hasNameForId = function (t, r) {
              return this.names.has(t) && this.names.get(t).has(r);
            }),
            (e.registerName = function (t, r) {
              if ((Ju(t), this.names.has(t))) this.names.get(t).add(r);
              else {
                var i = new Set();
                i.add(r), this.names.set(t, i);
              }
            }),
            (e.insertRules = function (t, r, i) {
              this.registerName(t, r), this.getTag().insertRules(Ju(t), i);
            }),
            (e.clearNames = function (t) {
              this.names.has(t) && this.names.get(t).clear();
            }),
            (e.clearRules = function (t) {
              this.getTag().clearGroup(Ju(t)), this.clearNames(t);
            }),
            (e.clearTag = function () {
              this.tag = void 0;
            }),
            (e.toString = function () {
              return (function (t) {
                for (
                  var r = t.getTag(), i = r.length, a = "", s = 0;
                  s < i;
                  s++
                ) {
                  var o = K3(s);
                  if (o !== void 0) {
                    var l = t.names.get(o),
                      u = r.getGroup(s);
                    if (l && u && l.size) {
                      var c = no + ".g" + s + '[id="' + o + '"]',
                        h = "";
                      l !== void 0 &&
                        l.forEach(function (d) {
                          d.length > 0 && (h += d + ",");
                        }),
                        (a +=
                          "" +
                          u +
                          c +
                          '{content:"' +
                          h +
                          `"}/*!sc*/
`);
                    }
                  }
                }
                return a;
              })(this);
            }),
            n
          );
        })(),
        oE = /(a)(d)/gi,
        w1 = function (n) {
          return String.fromCharCode(n + (n > 25 ? 39 : 97));
        };
      function Fp(n) {
        var e,
          t = "";
        for (e = Math.abs(n); e > 52; e = (e / 52) | 0) t = w1(e % 52) + t;
        return (w1(e % 52) + t).replace(oE, "$1-$2");
      }
      var Ns = function (n, e) {
          for (var t = e.length; t; ) n = (33 * n) ^ e.charCodeAt(--t);
          return n;
        },
        Q_ = function (n) {
          return Ns(5381, n);
        };
      function eb(n) {
        for (var e = 0; e < n.length; e += 1) {
          var t = n[e];
          if (Ol(t) && !ig(t)) return !1;
        }
        return !0;
      }
      var lE = Q_("5.3.5"),
        uE = (function () {
          function n(e, t, r) {
            (this.rules = e),
              (this.staticRulesId = ""),
              (this.isStatic = (r === void 0 || r.isStatic) && eb(e)),
              (this.componentId = t),
              (this.baseHash = Ns(lE, t)),
              (this.baseStyle = r),
              gh.registerId(t);
          }
          return (
            (n.prototype.generateAndInjectStyles = function (e, t, r) {
              var i = this.componentId,
                a = [];
              if (
                (this.baseStyle &&
                  a.push(this.baseStyle.generateAndInjectStyles(e, t, r)),
                this.isStatic && !r.hash)
              )
                if (this.staticRulesId && t.hasNameForId(i, this.staticRulesId))
                  a.push(this.staticRulesId);
                else {
                  var s = Ga(this.rules, e, t, r).join(""),
                    o = Fp(Ns(this.baseHash, s) >>> 0);
                  if (!t.hasNameForId(i, o)) {
                    var l = r(s, "." + o, void 0, i);
                    t.insertRules(i, o, l);
                  }
                  a.push(o), (this.staticRulesId = o);
                }
              else {
                for (
                  var u = this.rules.length,
                    c = Ns(this.baseHash, r.hash),
                    h = "",
                    d = 0;
                  d < u;
                  d++
                ) {
                  var f = this.rules[d];
                  if (typeof f == "string") h += f;
                  else if (f) {
                    var g = Ga(f, e, t, r),
                      p = Array.isArray(g) ? g.join("") : g;
                    (c = Ns(c, p + d)), (h += p);
                  }
                }
                if (h) {
                  var y = Fp(c >>> 0);
                  if (!t.hasNameForId(i, y)) {
                    var v = r(h, "." + y, void 0, i);
                    t.insertRules(i, y, v);
                  }
                  a.push(y);
                }
              }
              return a.join(" ");
            }),
            n
          );
        })(),
        cE = /^\s*\/\/.*$/gm,
        hE = [":", "[", ".", "#"],
        tb = Wl.createContext();
      tb.Consumer;
      var nb = Wl.createContext(),
        dE = (nb.Consumer, new gh()),
        Bp = (function (n) {
          var e,
            t,
            r,
            i,
            a = n === void 0 ? Zi : n,
            s = a.options,
            o = s === void 0 ? Zi : s,
            l = a.plugins,
            u = l === void 0 ? ph : l,
            c = new z3(o),
            h = [],
            d = (function (p) {
              function y(v) {
                if (v)
                  try {
                    p(v + "}");
                  } catch {}
              }
              return function (v, m, x, _, b, w, M, C, N, G) {
                switch (v) {
                  case 1:
                    if (N === 0 && m.charCodeAt(0) === 64)
                      return p(m + ";"), "";
                    break;
                  case 2:
                    if (C === 0) return m + "/*|*/";
                    break;
                  case 3:
                    switch (C) {
                      case 102:
                      case 112:
                        return p(x[0] + m), "";
                      default:
                        return m + (G === 0 ? "/*|*/" : "");
                    }
                  case -2:
                    m.split("/*|*/}").forEach(y);
                }
              };
            })(function (p) {
              h.push(p);
            }),
            f = function (p, y, v) {
              return (y === 0 && hE.indexOf(v[t.length]) !== -1) || v.match(i)
                ? p
                : "." + e;
            };
          function g(p, y, v, m) {
            m === void 0 && (m = "&");
            var x = p.replace(cE, ""),
              _ = y && v ? v + " " + y + " { " + x + " }" : x;
            return (
              (e = m),
              (t = y),
              (r = new RegExp("\\" + t + "\\b", "g")),
              (i = new RegExp("(\\" + t + "\\b){2,}")),
              c(v || !y ? "" : y, _)
            );
          }
          return (
            c.use(
              [].concat(u, [
                function (p, y, v) {
                  p === 2 &&
                    v.length &&
                    v[0].lastIndexOf(t) > 0 &&
                    (v[0] = v[0].replace(r, f));
                },
                d,
                function (p) {
                  if (p === -2) {
                    var y = h;
                    return (h = []), y;
                  }
                },
              ])
            ),
            (g.hash = u.length
              ? u
                  .reduce(function (p, y) {
                    return y.name || Zl(15), Ns(p, y.name);
                  }, 5381)
                  .toString()
              : ""),
            g
          );
        })();
      function rb() {
        return rt.exports.useContext(tb) || dE;
      }
      function ib() {
        return rt.exports.useContext(nb) || Bp;
      }
      var ab = (function () {
          function n(e, t) {
            var r = this;
            (this.inject = function (i, a) {
              a === void 0 && (a = Bp);
              var s = r.name + a.hash;
              i.hasNameForId(r.id, s) ||
                i.insertRules(r.id, s, a(r.rules, s, "@keyframes"));
            }),
              (this.toString = function () {
                return Zl(12, String(r.name));
              }),
              (this.name = e),
              (this.id = "sc-keyframes-" + e),
              (this.rules = t);
          }
          return (
            (n.prototype.getName = function (e) {
              return e === void 0 && (e = Bp), this.name + e.hash;
            }),
            n
          );
        })(),
        fE = /([A-Z])/,
        pE = /([A-Z])/g,
        mE = /^ms-/,
        gE = function (n) {
          return "-" + n.toLowerCase();
        };
      function S1(n) {
        return fE.test(n) ? n.replace(pE, gE).replace(mE, "-ms-") : n;
      }
      var M1 = function (n) {
        return n == null || n === !1 || n === "";
      };
      function Ga(n, e, t, r) {
        if (Array.isArray(n)) {
          for (var i, a = [], s = 0, o = n.length; s < o; s += 1)
            (i = Ga(n[s], e, t, r)) !== "" &&
              (Array.isArray(i) ? a.push.apply(a, i) : a.push(i));
          return a;
        }
        return M1(n)
          ? ""
          : ig(n)
          ? "." + n.styledComponentId
          : Ol(n)
          ? typeof (l = n) != "function" ||
            (l.prototype && l.prototype.isReactComponent) ||
            !e
            ? n
            : Ga(n(e), e, t, r)
          : n instanceof ab
          ? t
            ? (n.inject(t, r), n.getName(r))
            : n
          : Np(n)
          ? (function u(c, h) {
              var d,
                f,
                g = [];
              for (var p in c)
                c.hasOwnProperty(p) &&
                  !M1(c[p]) &&
                  ((Array.isArray(c[p]) && c[p].isCss) || Ol(c[p])
                    ? g.push(S1(p) + ":", c[p], ";")
                    : Np(c[p])
                    ? g.push.apply(g, u(c[p], p))
                    : g.push(
                        S1(p) +
                          ": " +
                          ((d = p),
                          ((f = c[p]) == null ||
                          typeof f == "boolean" ||
                          f === ""
                            ? ""
                            : typeof f != "number" || f === 0 || d in N3
                            ? String(f).trim()
                            : f + "px") + ";")
                      ));
              return h ? [h + " {"].concat(g, ["}"]) : g;
            })(n)
          : n.toString();
        var l;
      }
      var T1 = function (n) {
        return Array.isArray(n) && (n.isCss = !0), n;
      };
      function sg(n) {
        for (
          var e = arguments.length, t = new Array(e > 1 ? e - 1 : 0), r = 1;
          r < e;
          r++
        )
          t[r - 1] = arguments[r];
        return Ol(n) || Np(n)
          ? T1(Ga(x1(ph, [n].concat(t))))
          : t.length === 0 && n.length === 1 && typeof n[0] == "string"
          ? n
          : T1(Ga(x1(n, t)));
      }
      var sb = function (n, e, t) {
          return (
            t === void 0 && (t = Zi),
            (n.theme !== t.theme && n.theme) || e || t.theme
          );
        },
        vE = /[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,
        yE = /(^-|-$)/g;
      function gf(n) {
        return n.replace(vE, "-").replace(yE, "");
      }
      var og = function (n) {
        return Fp(Q_(n) >>> 0);
      };
      function Qu(n) {
        return typeof n == "string" && !0;
      }
      var Gp = function (n) {
          return (
            typeof n == "function" ||
            (typeof n == "object" && n !== null && !Array.isArray(n))
          );
        },
        xE = function (n) {
          return n !== "__proto__" && n !== "constructor" && n !== "prototype";
        };
      function _E(n, e, t) {
        var r = n[t];
        Gp(e) && Gp(r) ? ob(r, e) : (n[t] = e);
      }
      function ob(n) {
        for (
          var e = arguments.length, t = new Array(e > 1 ? e - 1 : 0), r = 1;
          r < e;
          r++
        )
          t[r - 1] = arguments[r];
        for (var i = 0, a = t; i < a.length; i++) {
          var s = a[i];
          if (Gp(s)) for (var o in s) xE(o) && _E(n, s[o], o);
        }
        return n;
      }
      var lg = Wl.createContext();
      lg.Consumer;
      var vf = {};
      function lb(n, e, t) {
        var r = ig(n),
          i = !Qu(n),
          a = e.attrs,
          s = a === void 0 ? ph : a,
          o = e.componentId,
          l =
            o === void 0
              ? (function (m, x) {
                  var _ = typeof m != "string" ? "sc" : gf(m);
                  vf[_] = (vf[_] || 0) + 1;
                  var b = _ + "-" + og("5.3.5" + _ + vf[_]);
                  return x ? x + "-" + b : b;
                })(e.displayName, e.parentComponentId)
              : o,
          u = e.displayName,
          c =
            u === void 0
              ? (function (m) {
                  return Qu(m) ? "styled." + m : "Styled(" + _1(m) + ")";
                })(n)
              : u,
          h =
            e.displayName && e.componentId
              ? gf(e.displayName) + "-" + e.componentId
              : e.componentId || l,
          d =
            r && n.attrs
              ? Array.prototype.concat(n.attrs, s).filter(Boolean)
              : s,
          f = e.shouldForwardProp;
        r &&
          n.shouldForwardProp &&
          (f = e.shouldForwardProp
            ? function (m, x, _) {
                return (
                  n.shouldForwardProp(m, x, _) && e.shouldForwardProp(m, x, _)
                );
              }
            : n.shouldForwardProp);
        var g,
          p = new uE(t, h, r ? n.componentStyle : void 0),
          y = p.isStatic && s.length === 0,
          v = function (m, x) {
            return (function (_, b, w, M) {
              var C = _.attrs,
                N = _.componentStyle,
                G = _.defaultProps,
                U = _.foldedComponentIds,
                I = _.shouldForwardProp,
                F = _.styledComponentId,
                T = _.target,
                O = (function (Y, R, L) {
                  Y === void 0 && (Y = Zi);
                  var Z = Hr({}, R, { theme: Y }),
                    re = {};
                  return (
                    L.forEach(function (q) {
                      var Q,
                        ee,
                        S,
                        H = q;
                      for (Q in (Ol(H) && (H = H(Z)), H))
                        Z[Q] = re[Q] =
                          Q === "className"
                            ? ((ee = re[Q]),
                              (S = H[Q]),
                              ee && S ? ee + " " + S : ee || S)
                            : H[Q];
                    }),
                    [Z, re]
                  );
                })(sb(b, rt.exports.useContext(lg), G) || Zi, b, C),
                k = O[0],
                P = O[1],
                E = (function (Y, R, L, Z) {
                  var re = rb(),
                    q = ib();
                  return R
                    ? Y.generateAndInjectStyles(Zi, re, q)
                    : Y.generateAndInjectStyles(L, re, q);
                })(N, M, k),
                z = w,
                A = P.$as || b.$as || P.as || b.as || T,
                D = Qu(A),
                V = P !== b ? Hr({}, b, {}, P) : b,
                K = {};
              for (var B in V)
                B[0] !== "$" &&
                  B !== "as" &&
                  (B === "forwardedAs"
                    ? (K.as = V[B])
                    : (I ? I(B, m1, A) : !D || m1(B)) && (K[B] = V[B]));
              return (
                b.style &&
                  P.style !== b.style &&
                  (K.style = Hr({}, b.style, {}, P.style)),
                (K.className = Array.prototype
                  .concat(U, F, E !== F ? E : null, b.className, P.className)
                  .filter(Boolean)
                  .join(" ")),
                (K.ref = z),
                rt.exports.createElement(A, K)
              );
            })(g, m, x, y);
          };
        return (
          (v.displayName = c),
          ((g = Wl.forwardRef(v)).attrs = d),
          (g.componentStyle = p),
          (g.displayName = c),
          (g.shouldForwardProp = f),
          (g.foldedComponentIds = r
            ? Array.prototype.concat(n.foldedComponentIds, n.styledComponentId)
            : ph),
          (g.styledComponentId = h),
          (g.target = r ? n.target : n),
          (g.withComponent = function (m) {
            var x = e.componentId,
              _ = (function (w, M) {
                if (w == null) return {};
                var C,
                  N,
                  G = {},
                  U = Object.keys(w);
                for (N = 0; N < U.length; N++)
                  (C = U[N]), M.indexOf(C) >= 0 || (G[C] = w[C]);
                return G;
              })(e, ["componentId"]),
              b = x && x + "-" + (Qu(m) ? m : gf(_1(m)));
            return lb(m, Hr({}, _, { attrs: d, componentId: b }), t);
          }),
          Object.defineProperty(g, "defaultProps", {
            get: function () {
              return this._foldedDefaultProps;
            },
            set: function (m) {
              this._foldedDefaultProps = r ? ob({}, n.defaultProps, m) : m;
            },
          }),
          (g.toString = function () {
            return "." + g.styledComponentId;
          }),
          i &&
            q3(g, n, {
              attrs: !0,
              componentStyle: !0,
              displayName: !0,
              foldedComponentIds: !0,
              shouldForwardProp: !0,
              styledComponentId: !0,
              target: !0,
              withComponent: !0,
            }),
          g
        );
      }
      var Hp = function (n) {
        return (function e(t, r, i) {
          if ((i === void 0 && (i = Zi), !Bh.exports.isValidElementType(r)))
            return Zl(1, String(r));
          var a = function () {
            return t(r, i, sg.apply(void 0, arguments));
          };
          return (
            (a.withConfig = function (s) {
              return e(t, r, Hr({}, i, {}, s));
            }),
            (a.attrs = function (s) {
              return e(
                t,
                r,
                Hr({}, i, {
                  attrs: Array.prototype.concat(i.attrs, s).filter(Boolean),
                })
              );
            }),
            a
          );
        })(lb, n);
      };
      [
        "a",
        "abbr",
        "address",
        "area",
        "article",
        "aside",
        "audio",
        "b",
        "base",
        "bdi",
        "bdo",
        "big",
        "blockquote",
        "body",
        "br",
        "button",
        "canvas",
        "caption",
        "cite",
        "code",
        "col",
        "colgroup",
        "data",
        "datalist",
        "dd",
        "del",
        "details",
        "dfn",
        "dialog",
        "div",
        "dl",
        "dt",
        "em",
        "embed",
        "fieldset",
        "figcaption",
        "figure",
        "footer",
        "form",
        "h1",
        "h2",
        "h3",
        "h4",
        "h5",
        "h6",
        "head",
        "header",
        "hgroup",
        "hr",
        "html",
        "i",
        "iframe",
        "img",
        "input",
        "ins",
        "kbd",
        "keygen",
        "label",
        "legend",
        "li",
        "link",
        "main",
        "map",
        "mark",
        "marquee",
        "menu",
        "menuitem",
        "meta",
        "meter",
        "nav",
        "noscript",
        "object",
        "ol",
        "optgroup",
        "option",
        "output",
        "p",
        "param",
        "picture",
        "pre",
        "progress",
        "q",
        "rp",
        "rt",
        "ruby",
        "s",
        "samp",
        "script",
        "section",
        "select",
        "small",
        "source",
        "span",
        "strong",
        "style",
        "sub",
        "summary",
        "sup",
        "table",
        "tbody",
        "td",
        "textarea",
        "tfoot",
        "th",
        "thead",
        "time",
        "title",
        "tr",
        "track",
        "u",
        "ul",
        "var",
        "video",
        "wbr",
        "circle",
        "clipPath",
        "defs",
        "ellipse",
        "foreignObject",
        "g",
        "image",
        "line",
        "linearGradient",
        "marker",
        "mask",
        "path",
        "pattern",
        "polygon",
        "polyline",
        "radialGradient",
        "rect",
        "stop",
        "svg",
        "text",
        "textPath",
        "tspan",
      ].forEach(function (n) {
        Hp[n] = Hp(n);
      });
      var bE = (function () {
        function n(t, r) {
          (this.rules = t),
            (this.componentId = r),
            (this.isStatic = eb(t)),
            gh.registerId(this.componentId + 1);
        }
        var e = n.prototype;
        return (
          (e.createStyles = function (t, r, i, a) {
            var s = a(Ga(this.rules, r, i, a).join(""), ""),
              o = this.componentId + t;
            i.insertRules(o, o, s);
          }),
          (e.removeStyles = function (t, r) {
            r.clearRules(this.componentId + t);
          }),
          (e.renderStyles = function (t, r, i, a) {
            t > 2 && gh.registerId(this.componentId + t),
              this.removeStyles(t, i),
              this.createStyles(t, r, i, a);
          }),
          n
        );
      })();
      const Sn = Hp,
        ug =
          "" +
          new URL("assets/BentonSans-Regular.44272a31.ttf", import.meta.url)
            .href,
        wE = (function (n) {
          for (
            var e = arguments.length, t = new Array(e > 1 ? e - 1 : 0), r = 1;
            r < e;
            r++
          )
            t[r - 1] = arguments[r];
          var i = sg.apply(void 0, [n].concat(t)),
            a = "sc-global-" + og(JSON.stringify(i)),
            s = new bE(i, a);
          function o(u) {
            var c = rb(),
              h = ib(),
              d = rt.exports.useContext(lg),
              f = rt.exports.useRef(c.allocateGSInstance(a)).current;
            return (
              c.server && l(f, u, c, d, h),
              rt.exports.useLayoutEffect(
                function () {
                  if (!c.server)
                    return (
                      l(f, u, c, d, h),
                      function () {
                        return s.removeStyles(f, c);
                      }
                    );
                },
                [f, u, c, d, h]
              ),
              null
            );
          }
          function l(u, c, h, d, f) {
            if (s.isStatic) s.renderStyles(u, Y3, h, f);
            else {
              var g = Hr({}, c, { theme: sb(c, d, o.defaultProps) });
              s.renderStyles(u, g, h, f);
            }
          }
          return Wl.memo(o);
        })`
  @font-face {
    font-family: 'Benton Sans';
    src: url(${ug});
  }
  body {
    font-family: 'Benton Sans';
  }
`,
        cg = Sn.div`
  position: relative;
  width: 100%;
  height: 100%;
  margin: 0px;
  padding: 0px;
`,
        SE = Sn(cg)`
  background-repeat: no-repeat;
  background-position: 50% 50%;
  background: rgb(16,18,22);

  .loading-debug{
    width: 48px;
    height: 16px;
    position: absolute;
    bottom: 16px;
    left: 16px;
    top: auto;
    right: auto;
    color: #FFF;
    font-size: 14px;
    line-height: 16px;
    z-index: 999;
  }
`,
        ME = Sn(cg)`
  position: absolute;
  z-index: 10;
  top: 0px;
  right: 0px;
  bottom: 0px;
  left: 0px;
  margin: auto;
`,
        ub = `
  transition: opacity linear 0.3;
  opacity: 0.75;
  &:hover{ opacity: 1.0 }
`,
        E1 = "" + new URL("assets/arrow.c59f8fa9.svg", import.meta.url).href,
        cb = c_(),
        C1 = cb
          ? Sn.div`
    position: absolute;
    z-index: 99;
    top: 0px;
    bottom: 0px;
    ${(n) => (n.side === "L" ? "left: 0px;" : "right: 0px;")}
    margin: auto;
    width: 36px;
    height: 36px;
    text-align: center;
    cursor: pointer;
    transform: scaleX(${(n) => (n.side === "L" ? -1 : 1)});
    background-image: url(${E1});
    background-repeat: no-repeat;
    background-position: center;
    background-size: 75% 75%;
  `
          : Sn.div`
    position: absolute;
    z-index: 99;
    top: 0px;
    bottom: 0px;
    ${(n) => (n.side === "L" ? "left: 0;" : "right: 0;")}
    margin: auto;
    width: 64px;
    height: 64px;
    text-align: center;
    cursor: pointer;
    transform: scaleX(${(n) => (n.side === "L" ? -1 : 1)});
    background-image: url(${E1});
    background-repeat: no-repeat;
    background-position: center;
    background-size: 30% 30%;
    ${ub}
  `,
        TE = cb
          ? Sn.div`
    width: 36px;
    height: 36px;
    position: absolute;
    z-index: 99;
    top: 96px;
    right: 16px;
    left: auto;
    bottom: auto;
    margin: auto;
    background-image: url(${
      "" + new URL("assets/close_btn.77d5f48b.svg", import.meta.url).href
    });
    background-repeat: no-repeat;
    background-position: center;
    background-size: 60% 60%;
    cursor: pointer;
  `
          : Sn.div`
    width: 64px;
    height: 64px;
    position: absolute;
    z-index: 99;
    top: 105px;
    right: 40px;
    left: auto;
    bottom: auto;
    margin: auto;
    background-image: url(${
      "" + new URL("assets/close_btn.77d5f48b.svg", import.meta.url).href
    });
    background-repeat: no-repeat;
    background-position: center;
    background-size: 30% 30%;
    cursor: pointer;
    ${ub}
  `,
        EE = Sn(cg)`
  position: absolute;
  z-index: 999;
  top: 0px;
  right: 0px;
  bottom: 0px;
  left: 0px;
  pointer-events: none;
  margin: auto;
  background-color: #000;
  background-repeat: no-repeat;
  background-position: center;
  background-size: cover;
  transition: opacity 0.3s linear;
`,
        CE = Sn.div`
  width: 160px;
  height: 160px;
  border-radius: 80px;
  background-color: rgba(255,255,255,0.8);
  position: absolute;
  top: 0px;
  right: 0px;
  bottom: 0px;
  left: 0px;
  margin: auto;
  pointer-events: auto;
  cursor: pointer;

  #sub-droplet-label {
    position: absolute;
    top: auto;
    bottom: -24px;
    left: -16px;
    right: -16px;
    margin: auto;
    text-align: center;
    font-size: 12px;
    color: #FFF;
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
    height: 18px;
    line-height: 18px;
  }
`,
        AE = Sn.div`
  position: absolute;
  top: 80px;
  right: 0px;
  left: 0px;
  bottom: auto;
  width: 100%;
  height: 33%;
  overflow-y: hidden;
  overflow-x: scroll;
  scrollbar-width: none;  /* Firefox */
  -ms-overflow-style: none;  /* IE and Edge */
  padding: 0px;
  z-index: 99;
  font-family: 'Benton Sans';

  &::-webkit-scrollbar { display: none; }
`,
        RE = Sn.div`
  height: 100%;
  display: flex;
  flex-wrap: nowrap;
  width: fit-content;
  padding: 0px calc( (100% - 480px) * 0.5 );
`,
        PE = Sn.div`
  height: 100%;
  width: 480px;
  flex: none;
  margin: 0px 4px;
  color: #FFF;
  text-align: center;
  padding: 16px;
  display: flex;
  flex-direction: column;
  backdrop-filter: blur(5px);
  box-sizing: border-box;
  transition: filter 1s ease-in-out;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.5);

  .exhibit-item-fill {
    width: 100%;
    height: auto;
    flex: 1;
  }

  .exhibit-name {
    padding: 0px;
    margin: 0px;
    font-size: 27px;
    line-height: 36px;
    flex: none;
  }

  .exhibit-theme {
    padding: 0px;
    margin: 0px;
    font-size: 14px;
    line-height: 18px;
    flex: none;
  }
`,
        LE = (function (n) {
          for (
            var e = arguments.length, t = new Array(e > 1 ? e - 1 : 0), r = 1;
            r < e;
            r++
          )
            t[r - 1] = arguments[r];
          var i = sg.apply(void 0, [n].concat(t)).join(""),
            a = og(i);
          return new ab(a, i);
        })`
  from { opacity: 0.0; }
  to { opacity: 1.0; }
`,
        DE = Sn.div`
  width: 2.6px;
  height: 0px;
  position: absolute;
  left: 0px;
  right: 0px;
  top: calc( 33% + 100px );
  bottom: auto;
  margin: auto;
  z-index: 99;
  background: rgb(255,255,255);
  background: linear-gradient(0deg, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 80%, rgba(255,255,255,0) 98%);
  pointer-events: none;

  animation: ${LE} 0.3s linear;
`,
        kE = Sn.div`
  position: absolute;
  top: 0px;
  left: 0px;
  width: 240px;
  height: 24px;
  line-height: 24px;
  padding-left: 24px;
  color: #fff;
  font-size: 11px;
`,
        IE = Sn.div`
  position: absolute;
  top: 0px;
  bottom: auto;
  left: -7px;
  right: auto;
  width: 15px;
  height: 15px;
  box-sizing: content-box;
  margin: auto;
  border: solid 1px #fff;
  border-radius: 10px;
`,
        Un = c_(),
        Gh = Un ? 90 : 64,
        hb = Un ? 34 : 32,
        Hh = Un ? 8 : 4,
        Ht = Math.PI,
        Vr = {
          font: ug,
          color: 16777215,
          anchorX: "0%",
          anchorY: "50%",
          textAlign: "left",
          renderOrder: 999,
          whiteSpace: "normal",
        },
        UE = new j(0, 2, 0).multiplyScalar(1),
        OE = 1 * (Un ? -0.425 : -0.375),
        zE = 1 * (Un ? 0.05 : 0.038),
        NE = 1 * (Un ? 0.072 : 0.045),
        FE = 1 * (Un ? 0.36 : 0.4),
        hg = (Un ? new j(0, 25, 22) : new j(0, 12, 28)).multiplyScalar(1),
        BE = 1 * (Un ? 68 : 48),
        Vp = new j(0, -8, 0).multiplyScalar(1),
        A1 = Un ? 16.5 : 24,
        R1 = 0.65 * Ht,
        db = new j(Math.sin(R1) * A1, 1.25, Math.cos(R1) * A1),
        P1 = new j(0, 0, 0),
        L1 = Ht / 9,
        Wp = Un ? new j(0, 0, 24) : new j(-9, 3.5, 17),
        ul = Un ? [Wp, new j(0, 0, -21.8)] : [Wp, new j(-2, 0, -24)],
        Oc = new Ce(7829367),
        ec = new Ce(16777215),
        fb = new j(0.6, 0.25, 0.6),
        pb = Un ? new xn(0, 0, 0) : new xn(-0.05 * Ht, -0.1 * Ht, 0),
        GE = Un ? 0.004 : 0.01,
        HE = {
          method: "POST",
          headers: { "Content-Type": "application/x-www-form-urlencoded" },
          body: "action=home_json2",
        };
      function dg() {
        var n,
          e = 0,
          t = [],
          r = 0,
          i = 0,
          a = d(function (y) {
            i || o(1, y);
          }),
          s = d(function (y) {
            i || o(-1, y);
          });
        function o(y, v) {
          i++;
          var m = 0;
          try {
            v === p && f();
            var x = y > 0 && h(v);
            x
              ? x.call(
                  v,
                  d(function (_) {
                    m++, o(1, _);
                  }),
                  d(function (_) {
                    m++, o(-1, _);
                  })
                )
              : ((e = y), (n = v), l());
          } catch (_) {
            e || m || o(-1, _);
          }
        }
        function l() {
          r || (setTimeout(u, 0), (r = 1));
        }
        function u() {
          var y = t;
          (r = 0), (t = []), y.forEach(c);
        }
        function c(y) {
          y();
        }
        function h(y) {
          var v = y && (g(y) || typeof y == "object") && y.then;
          return g(v) && v;
        }
        function d(y) {
          var v = 0;
          return function () {
            for (var m = [], x = arguments.length; x--; ) m[x] = arguments[x];
            v++ || y.apply(this, m);
          };
        }
        function f() {
          throw new TypeError("Chaining cycle detected");
        }
        var g = function (y) {
            return typeof y == "function";
          },
          p = {
            then: function (y, v) {
              var m = dg();
              return (
                t.push(function () {
                  var x = e > 0 ? y : v;
                  if (g(x))
                    try {
                      var _ = x(n);
                      _ === m && f();
                      var b = h(_);
                      b ? b.call(_, m.resolve, m.reject) : m.resolve(_);
                    } catch (w) {
                      m.reject(w);
                    }
                  else m[e > 0 ? "resolve" : "reject"](n);
                }),
                e && l(),
                m
              );
            },
            resolve: a,
            reject: s,
          };
        return p;
      }
      function mb() {
        var n,
          e,
          t = new Promise(function (r, i) {
            (n = r), (e = i);
          });
        return { then: t.then.bind(t), resolve: n, reject: e };
      }
      dg.all = mb.all = function (n) {
        var e = 0,
          t = [],
          r = gi();
        return (
          n.length === 0
            ? r.resolve([])
            : n.forEach(function (i, a) {
                var s = gi();
                s.resolve(i),
                  s.then(function (o) {
                    e++, (t[a] = o), e === n.length && r.resolve(t);
                  }, r.reject);
              }),
          r
        );
      };
      var gi = typeof Promise == "function" ? mb : dg;
      function VE() {
        var n = Object.create(null);
        function e(r, i) {
          var a = r.id,
            s = r.name,
            o = r.dependencies;
          o === void 0 && (o = []);
          var l = r.init;
          l === void 0 && (l = function () {});
          var u = r.getTransferables;
          if ((u === void 0 && (u = null), !n[a]))
            try {
              (o = o.map(function (h) {
                return (
                  h &&
                    h.isWorkerModule &&
                    (e(h, function (d) {
                      if (d instanceof Error) throw d;
                    }),
                    (h = n[h.id].value)),
                  h
                );
              })),
                (l = t("<" + s + ">.init", l)),
                u && (u = t("<" + s + ">.getTransferables", u));
              var c = null;
              typeof l == "function"
                ? (c = l.apply(void 0, o))
                : console.error(
                    "worker module init function failed to rehydrate"
                  ),
                (n[a] = { id: a, value: c, getTransferables: u }),
                i(c);
            } catch (h) {
              (h && h.noLog) || console.error(h), i(h);
            }
        }
        function t(r, i) {
          var a = void 0;
          self.troikaDefine = function (o) {
            return (a = o);
          };
          var s = URL.createObjectURL(
            new Blob(
              [
                "/** " +
                  r.replace(/\*/g, "") +
                  ` **/

troikaDefine(
` +
                  i +
                  `
)`,
              ],
              { type: "application/javascript" }
            )
          );
          try {
            importScripts(s);
          } catch (o) {
            console.error(o);
          }
          return URL.revokeObjectURL(s), delete self.troikaDefine, a;
        }
        self.addEventListener("message", function (r) {
          var i = r.data,
            a = i.messageId,
            s = i.action,
            o = i.data;
          try {
            s === "registerModule" &&
              e(o, function (l) {
                l instanceof Error
                  ? postMessage({ messageId: a, success: !1, error: l.message })
                  : postMessage({
                      messageId: a,
                      success: !0,
                      result: { isCallable: typeof l == "function" },
                    });
              }),
              s === "callModule" &&
                (function (l, u) {
                  var c,
                    h = l.id,
                    d = l.args;
                  (n[h] && typeof n[h].value == "function") ||
                    u(
                      new Error(
                        "Worker module " +
                          h +
                          ": not found or its 'init' did not return a function"
                      )
                    );
                  try {
                    var f = (c = n[h]).value.apply(c, d);
                    f && typeof f.then == "function"
                      ? f.then(g, function (p) {
                          return u(p instanceof Error ? p : new Error("" + p));
                        })
                      : g(f);
                  } catch (p) {
                    u(p);
                  }
                  function g(p) {
                    try {
                      var y = n[h].getTransferables && n[h].getTransferables(p);
                      (y && Array.isArray(y) && y.length) || (y = void 0),
                        u(p, y);
                    } catch (v) {
                      console.error(v), u(v);
                    }
                  }
                })(o, function (l, u) {
                  l instanceof Error
                    ? postMessage({
                        messageId: a,
                        success: !1,
                        error: l.message,
                      })
                    : postMessage(
                        { messageId: a, success: !0, result: l },
                        u || void 0
                      );
                });
          } catch (l) {
            postMessage({ messageId: a, success: !1, error: l.stack });
          }
        });
      }
      var gb = function () {
          var n = !1;
          if (typeof window < "u" && window.document !== void 0)
            try {
              new Worker(
                URL.createObjectURL(
                  new Blob([""], { type: "application/javascript" })
                )
              ).terminate(),
                (n = !0);
            } catch (e) {
              console.log(
                "Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: [" +
                  e.message +
                  "]"
              );
            }
          return (
            (gb = function () {
              return n;
            }),
            n
          );
        },
        WE = 0,
        jE = 0,
        yf = !1,
        cl = Object.create(null),
        hl = Object.create(null),
        xf = Object.create(null);
      function ho(n) {
        if (!((n && typeof n.init == "function") || yf))
          throw new Error("requires `options.init` function");
        var e = n.dependencies,
          t = n.init,
          r = n.getTransferables,
          i = n.workerId;
        if (!gb())
          return (function (u) {
            var c = function () {
              for (var h = [], d = arguments.length; d--; ) h[d] = arguments[d];
              return c._getInitResult().then(function (f) {
                if (typeof f == "function") return f.apply(void 0, h);
                throw new Error(
                  "Worker module function was called but `init` did not return a callable function"
                );
              });
            };
            return (
              (c._getInitResult = function () {
                var h = u.dependencies,
                  d = u.init;
                h = Array.isArray(h)
                  ? h.map(function (g) {
                      return g && g._getInitResult ? g._getInitResult() : g;
                    })
                  : [];
                var f = gi.all(h).then(function (g) {
                  return d.apply(null, g);
                });
                return (
                  (c._getInitResult = function () {
                    return f;
                  }),
                  f
                );
              }),
              c
            );
          })(n);
        i == null && (i = "#default");
        var a = "workerModule" + ++WE,
          s = n.name || a,
          o = null;
        function l() {
          for (var u = [], c = arguments.length; c--; ) u[c] = arguments[c];
          if (!o) {
            o = D1(i, "registerModule", l.workerModuleData);
            var h = function () {
              (o = null), hl[i].delete(h);
            };
            (hl[i] || (hl[i] = new Set())).add(h);
          }
          return o.then(function (d) {
            if (d.isCallable) return D1(i, "callModule", { id: a, args: u });
            throw new Error(
              "Worker module function was called but `init` did not return a callable function"
            );
          });
        }
        return (
          (e =
            e &&
            e.map(function (u) {
              return (
                typeof u != "function" ||
                  u.workerModuleData ||
                  ((yf = !0),
                  (u = ho({
                    workerId: i,
                    name: "<" + s + "> function dependency: " + u.name,
                    init:
                      `function(){return (
` +
                      zc(u) +
                      `
)}`,
                  })),
                  (yf = !1)),
                u && u.workerModuleData && (u = u.workerModuleData),
                u
              );
            })),
          (l.workerModuleData = {
            isWorkerModule: !0,
            id: a,
            name: s,
            dependencies: e,
            init: zc(t),
            getTransferables: r && zc(r),
          }),
          l
        );
      }
      function zc(n) {
        var e = n.toString();
        return (
          !/^function/.test(e) && /^\w+\s*\(/.test(e) && (e = "function " + e),
          e
        );
      }
      function D1(n, e, t) {
        var r = gi(),
          i = ++jE;
        return (
          (xf[i] = function (a) {
            a.success
              ? r.resolve(a.result)
              : r.reject(
                  new Error("Error in worker " + e + " call: " + a.error)
                );
          }),
          (function (a) {
            var s = cl[a];
            if (!s) {
              var o = zc(VE);
              (s = cl[a] =
                new Worker(
                  URL.createObjectURL(
                    new Blob(
                      [
                        "/** Worker Module Bootstrap: " +
                          a.replace(/\*/g, "") +
                          ` **/

;(` +
                          o +
                          ")()",
                      ],
                      { type: "application/javascript" }
                    )
                  )
                )).onmessage = function (l) {
                var u = l.data,
                  c = u.messageId,
                  h = xf[c];
                if (!h)
                  throw new Error(
                    "WorkerModule response with empty or unknown messageId"
                  );
                delete xf[c], h(u);
              };
            }
            return s;
          })(n).postMessage({ messageId: i, action: e, data: t }),
          r
        );
      }
      var XE = ho({
        name: "Thenable",
        dependencies: [gi],
        init: function (n) {
          return n;
        },
      });
      function vb() {
        var n = (function (e) {
          function t(I, F, T, O, k, P, E, z) {
            var A = 1 - E;
            (z.x = A * A * I + 2 * A * E * T + E * E * k),
              (z.y = A * A * F + 2 * A * E * O + E * E * P);
          }
          function r(I, F, T, O, k, P, E, z, A, D) {
            var V = 1 - A;
            (D.x =
              V * V * V * I +
              3 * V * V * A * T +
              3 * V * A * A * k +
              A * A * A * E),
              (D.y =
                V * V * V * F +
                3 * V * V * A * O +
                3 * V * A * A * P +
                A * A * A * z);
          }
          function i(I, F) {
            for (
              var T, O, k, P, E, z = /([MLQCZ])([^MLQCZ]*)/g;
              (T = z.exec(I));

            ) {
              var A = T[2]
                .replace(/^\s*|\s*$/g, "")
                .split(/[,\s]+/)
                .map(function (D) {
                  return parseFloat(D);
                });
              switch (T[1]) {
                case "M":
                  (P = O = A[0]), (E = k = A[1]);
                  break;
                case "L":
                  (A[0] === P && A[1] === E) ||
                    F("L", P, E, (P = A[0]), (E = A[1]));
                  break;
                case "Q":
                  F("Q", P, E, (P = A[2]), (E = A[3]), A[0], A[1]);
                  break;
                case "C":
                  F("C", P, E, (P = A[4]), (E = A[5]), A[0], A[1], A[2], A[3]);
                  break;
                case "Z":
                  (P === O && E === k) || F("L", P, E, O, k);
              }
            }
          }
          function a(I, F, T) {
            T === void 0 && (T = 16);
            var O = { x: 0, y: 0 };
            i(I, function (k, P, E, z, A, D, V, K, B) {
              switch (k) {
                case "L":
                  F(P, E, z, A);
                  break;
                case "Q":
                  for (var Y = P, R = E, L = 1; L < T; L++)
                    t(P, E, D, V, z, A, L / (T - 1), O),
                      F(Y, R, O.x, O.y),
                      (Y = O.x),
                      (R = O.y);
                  break;
                case "C":
                  for (var Z = P, re = E, q = 1; q < T; q++)
                    r(P, E, D, V, K, B, z, A, q / (T - 1), O),
                      F(Z, re, O.x, O.y),
                      (Z = O.x),
                      (re = O.y);
              }
            });
          }
          var s =
              "precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",
            o = new WeakMap(),
            l = {
              premultipliedAlpha: !1,
              preserveDrawingBuffer: !0,
              antialias: !1,
              depth: !1,
            };
          function u(I, F) {
            var T = I.getContext ? I.getContext("webgl", l) : I,
              O = o.get(T);
            if (!O) {
              let V = function (Y) {
                  var R = P[Y];
                  if (!R && !(R = P[Y] = T.getExtension(Y)))
                    throw new Error(Y + " not supported");
                  return R;
                },
                K = function (Y, R) {
                  var L = T.createShader(R);
                  return T.shaderSource(L, Y), T.compileShader(L), L;
                },
                B = function () {
                  (P = {}), (E = {}), (z = {}), (A = -1), (D.length = 0);
                };
              var k =
                  typeof WebGL2RenderingContext < "u" &&
                  T instanceof WebGL2RenderingContext,
                P = {},
                E = {},
                z = {},
                A = -1,
                D = [];
              T.canvas.addEventListener(
                "webglcontextlost",
                function (Y) {
                  B(), Y.preventDefault();
                },
                !1
              ),
                o.set(
                  T,
                  (O = {
                    gl: T,
                    isWebGL2: k,
                    getExtension: V,
                    withProgram: function (Y, R, L, Z) {
                      if (!E[Y]) {
                        var re = {},
                          q = {},
                          Q = T.createProgram();
                        T.attachShader(Q, K(R, T.VERTEX_SHADER)),
                          T.attachShader(Q, K(L, T.FRAGMENT_SHADER)),
                          T.linkProgram(Q),
                          (E[Y] = {
                            program: Q,
                            transaction: function (ee) {
                              T.useProgram(Q),
                                ee({
                                  setUniform: function (S, H) {
                                    for (
                                      var $ = [], J = arguments.length - 2;
                                      J-- > 0;

                                    )
                                      $[J] = arguments[J + 2];
                                    var te =
                                      q[H] ||
                                      (q[H] = T.getUniformLocation(Q, H));
                                    T["uniform" + S].apply(T, [te].concat($));
                                  },
                                  setAttribute: function (S, H, $, J, te) {
                                    var ne = re[S];
                                    ne ||
                                      (ne = re[S] =
                                        {
                                          buf: T.createBuffer(),
                                          loc: T.getAttribLocation(Q, S),
                                          data: null,
                                        }),
                                      T.bindBuffer(T.ARRAY_BUFFER, ne.buf),
                                      T.vertexAttribPointer(
                                        ne.loc,
                                        H,
                                        T.FLOAT,
                                        !1,
                                        0,
                                        0
                                      ),
                                      T.enableVertexAttribArray(ne.loc),
                                      k
                                        ? T.vertexAttribDivisor(ne.loc, J)
                                        : V(
                                            "ANGLE_instanced_arrays"
                                          ).vertexAttribDivisorANGLE(ne.loc, J),
                                      te !== ne.data &&
                                        (T.bufferData(T.ARRAY_BUFFER, te, $),
                                        (ne.data = te));
                                  },
                                });
                            },
                          });
                      }
                      E[Y].transaction(Z);
                    },
                    withTexture: function (Y, R) {
                      A++;
                      try {
                        T.activeTexture(T.TEXTURE0 + A);
                        var L = z[Y];
                        L ||
                          ((L = z[Y] = T.createTexture()),
                          T.bindTexture(T.TEXTURE_2D, L),
                          T.texParameteri(
                            T.TEXTURE_2D,
                            T.TEXTURE_MIN_FILTER,
                            T.NEAREST
                          ),
                          T.texParameteri(
                            T.TEXTURE_2D,
                            T.TEXTURE_MAG_FILTER,
                            T.NEAREST
                          )),
                          T.bindTexture(T.TEXTURE_2D, L),
                          R(L, A);
                      } finally {
                        A--;
                      }
                    },
                    withTextureFramebuffer: function (Y, R, L) {
                      var Z = T.createFramebuffer();
                      D.push(Z),
                        T.bindFramebuffer(T.FRAMEBUFFER, Z),
                        T.activeTexture(T.TEXTURE0 + R),
                        T.bindTexture(T.TEXTURE_2D, Y),
                        T.framebufferTexture2D(
                          T.FRAMEBUFFER,
                          T.COLOR_ATTACHMENT0,
                          T.TEXTURE_2D,
                          Y,
                          0
                        );
                      try {
                        L(Z);
                      } finally {
                        T.deleteFramebuffer(Z),
                          T.bindFramebuffer(
                            T.FRAMEBUFFER,
                            D[--D.length - 1] || null
                          );
                      }
                    },
                    handleContextLoss: B,
                  })
                );
            }
            F(O);
          }
          function c(I, F, T, O, k, P, E, z) {
            E === void 0 && (E = 15),
              z === void 0 && (z = null),
              u(I, function (A) {
                var D = A.gl,
                  V = A.withProgram;
                (0, A.withTexture)("copy", function (K, B) {
                  D.texImage2D(
                    D.TEXTURE_2D,
                    0,
                    D.RGBA,
                    k,
                    P,
                    0,
                    D.RGBA,
                    D.UNSIGNED_BYTE,
                    F
                  ),
                    V(
                      "copy",
                      s,
                      "precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",
                      function (Y) {
                        var R = Y.setUniform;
                        (0, Y.setAttribute)(
                          "aUV",
                          2,
                          D.STATIC_DRAW,
                          0,
                          new Float32Array([0, 0, 2, 0, 0, 2])
                        ),
                          R("1i", "image", B),
                          D.bindFramebuffer(D.FRAMEBUFFER, z || null),
                          D.disable(D.BLEND),
                          D.colorMask(8 & E, 4 & E, 2 & E, 1 & E),
                          D.viewport(T, O, k, P),
                          D.scissor(T, O, k, P),
                          D.drawArrays(D.TRIANGLES, 0, 3);
                      }
                    );
                });
              });
          }
          var h = Object.freeze({
            __proto__: null,
            withWebGLContext: u,
            renderImageData: c,
            resizeWebGLCanvasWithoutClearing: function (I, F, T) {
              var O = I.width,
                k = I.height;
              u(I, function (P) {
                var E = P.gl,
                  z = new Uint8Array(O * k * 4);
                E.readPixels(0, 0, O, k, E.RGBA, E.UNSIGNED_BYTE, z),
                  (I.width = F),
                  (I.height = T),
                  c(E, z, 0, 0, O, k);
              });
            },
          });
          function d(I, F, T, O, k, P) {
            P === void 0 && (P = 1);
            var E = new Uint8Array(I * F),
              z = O[2] - O[0],
              A = O[3] - O[1],
              D = [];
            a(T, function (L, Z, re, q) {
              D.push({
                x1: L,
                y1: Z,
                x2: re,
                y2: q,
                minX: Math.min(L, re),
                minY: Math.min(Z, q),
                maxX: Math.max(L, re),
                maxY: Math.max(Z, q),
              });
            }),
              D.sort(function (L, Z) {
                return L.maxX - Z.maxX;
              });
            for (var V = 0; V < I; V++)
              for (var K = 0; K < F; K++) {
                var B = R(
                    O[0] + (z * (V + 0.5)) / I,
                    O[1] + (A * (K + 0.5)) / F
                  ),
                  Y = Math.pow(1 - Math.abs(B) / k, P) / 2;
                B < 0 && (Y = 1 - Y),
                  (Y = Math.max(0, Math.min(255, Math.round(255 * Y)))),
                  (E[K * I + V] = Y);
              }
            return E;
            function R(L, Z) {
              for (var re = 1 / 0, q = 1 / 0, Q = D.length; Q--; ) {
                var ee = D[Q];
                if (ee.maxX + q <= L) break;
                if (L + q > ee.minX && Z - q < ee.maxY && Z + q > ee.minY) {
                  var S = p(L, Z, ee.x1, ee.y1, ee.x2, ee.y2);
                  S < re && ((re = S), (q = Math.sqrt(re)));
                }
              }
              return (
                (function (H, $) {
                  for (var J = 0, te = D.length; te--; ) {
                    var ne = D[te];
                    if (ne.maxX <= H) break;
                    ne.y1 > $ != ne.y2 > $ &&
                      H <
                        ((ne.x2 - ne.x1) * ($ - ne.y1)) / (ne.y2 - ne.y1) +
                          ne.x1 &&
                      (J += ne.y1 < ne.y2 ? 1 : -1);
                  }
                  return J !== 0;
                })(L, Z) && (q = -q),
                q
              );
            }
          }
          function f(I, F, T, O, k, P, E, z, A, D) {
            P === void 0 && (P = 1),
              z === void 0 && (z = 0),
              A === void 0 && (A = 0),
              D === void 0 && (D = 0),
              g(I, F, T, O, k, P, E, null, z, A, D);
          }
          function g(I, F, T, O, k, P, E, z, A, D, V) {
            P === void 0 && (P = 1),
              A === void 0 && (A = 0),
              D === void 0 && (D = 0),
              V === void 0 && (V = 0);
            for (
              var K = d(I, F, T, O, k, P),
                B = new Uint8Array(4 * K.length),
                Y = 0;
              Y < K.length;
              Y++
            )
              B[4 * Y + V] = K[Y];
            c(E, B, A, D, I, F, 1 << (3 - V), z);
          }
          function p(I, F, T, O, k, P) {
            var E = k - T,
              z = P - O,
              A = E * E + z * z,
              D = A
                ? Math.max(0, Math.min(1, ((I - T) * E + (F - O) * z) / A))
                : 0,
              V = I - (T + D * E),
              K = F - (O + D * z);
            return V * V + K * K;
          }
          var y = Object.freeze({
              __proto__: null,
              generate: d,
              generateIntoCanvas: f,
              generateIntoFramebuffer: g,
            }),
            v = new Float32Array([0, 0, 2, 0, 0, 2]),
            m = null,
            x = !1,
            _ = {},
            b = new WeakMap();
          function w(I) {
            if (!x && !G(I)) throw new Error("WebGL generation not supported");
          }
          function M(I, F, T, O, k, P, E) {
            if (
              (P === void 0 && (P = 1),
              E === void 0 && (E = null),
              !E && !(E = m))
            ) {
              var z =
                typeof OffscreenCanvas == "function"
                  ? new OffscreenCanvas(1, 1)
                  : typeof document < "u"
                  ? document.createElement("canvas")
                  : null;
              if (!z)
                throw new Error("OffscreenCanvas or DOM canvas not supported");
              E = m = z.getContext("webgl", { depth: !1 });
            }
            w(E);
            var A = new Uint8Array(I * F * 4);
            u(E, function (B) {
              var Y = B.gl,
                R = B.withTexture,
                L = B.withTextureFramebuffer;
              R("readable", function (Z, re) {
                Y.texImage2D(
                  Y.TEXTURE_2D,
                  0,
                  Y.RGBA,
                  I,
                  F,
                  0,
                  Y.RGBA,
                  Y.UNSIGNED_BYTE,
                  null
                ),
                  L(Z, re, function (q) {
                    N(I, F, T, O, k, P, Y, q, 0, 0, 0),
                      Y.readPixels(0, 0, I, F, Y.RGBA, Y.UNSIGNED_BYTE, A);
                  });
              });
            });
            for (
              var D = new Uint8Array(I * F), V = 0, K = 0;
              V < A.length;
              V += 4
            )
              D[K++] = A[V];
            return D;
          }
          function C(I, F, T, O, k, P, E, z, A, D) {
            P === void 0 && (P = 1),
              z === void 0 && (z = 0),
              A === void 0 && (A = 0),
              D === void 0 && (D = 0),
              N(I, F, T, O, k, P, E, null, z, A, D);
          }
          function N(I, F, T, O, k, P, E, z, A, D, V) {
            P === void 0 && (P = 1),
              A === void 0 && (A = 0),
              D === void 0 && (D = 0),
              V === void 0 && (V = 0),
              w(E);
            var K = [];
            a(T, function (B, Y, R, L) {
              K.push(B, Y, R, L);
            }),
              (K = new Float32Array(K)),
              u(E, function (B) {
                var Y = B.gl,
                  R = B.isWebGL2,
                  L = B.getExtension,
                  Z = B.withProgram,
                  re = B.withTexture,
                  q = B.withTextureFramebuffer,
                  Q = B.handleContextLoss;
                if (
                  (re("rawDistances", function (ee, S) {
                    (I === ee._lastWidth && F === ee._lastHeight) ||
                      Y.texImage2D(
                        Y.TEXTURE_2D,
                        0,
                        Y.RGBA,
                        (ee._lastWidth = I),
                        (ee._lastHeight = F),
                        0,
                        Y.RGBA,
                        Y.UNSIGNED_BYTE,
                        null
                      ),
                      Z(
                        "main",
                        "precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",
                        "precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",
                        function (H) {
                          var $ = H.setAttribute,
                            J = H.setUniform,
                            te = !R && L("ANGLE_instanced_arrays"),
                            ne = !R && L("EXT_blend_minmax");
                          $("aUV", 2, Y.STATIC_DRAW, 0, v),
                            $("aLineSegment", 4, Y.DYNAMIC_DRAW, 1, K),
                            J.apply(void 0, ["4f", "uGlyphBounds"].concat(O)),
                            J("1f", "uMaxDistance", k),
                            J("1f", "uExponent", P),
                            q(ee, S, function (de) {
                              Y.enable(Y.BLEND),
                                Y.colorMask(!0, !0, !0, !0),
                                Y.viewport(0, 0, I, F),
                                Y.scissor(0, 0, I, F),
                                Y.blendFunc(Y.ONE, Y.ONE),
                                Y.blendEquationSeparate(
                                  Y.FUNC_ADD,
                                  R ? Y.MAX : ne.MAX_EXT
                                ),
                                Y.clear(Y.COLOR_BUFFER_BIT),
                                R
                                  ? Y.drawArraysInstanced(
                                      Y.TRIANGLES,
                                      0,
                                      3,
                                      K.length / 4
                                    )
                                  : te.drawArraysInstancedANGLE(
                                      Y.TRIANGLES,
                                      0,
                                      3,
                                      K.length / 4
                                    );
                            });
                        }
                      ),
                      Z(
                        "post",
                        s,
                        "precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",
                        function (H) {
                          H.setAttribute("aUV", 2, Y.STATIC_DRAW, 0, v),
                            H.setUniform("1i", "tex", S),
                            Y.bindFramebuffer(Y.FRAMEBUFFER, z),
                            Y.disable(Y.BLEND),
                            Y.colorMask(V === 0, V === 1, V === 2, V === 3),
                            Y.viewport(A, D, I, F),
                            Y.scissor(A, D, I, F),
                            Y.drawArrays(Y.TRIANGLES, 0, 3);
                        }
                      );
                  }),
                  Y.isContextLost())
                )
                  throw (Q(), new Error("webgl context lost"));
              });
          }
          function G(I) {
            var F = I && I !== m ? I.canvas || I : _,
              T = b.get(F);
            if (T === void 0) {
              x = !0;
              var O = null;
              try {
                var k = [
                    97, 106, 97, 61, 99, 137, 118, 80, 80, 118, 137, 99, 61, 97,
                    106, 97,
                  ],
                  P = M(
                    4,
                    4,
                    "M8,8L16,8L24,24L16,24Z",
                    [0, 0, 32, 32],
                    24,
                    1,
                    I
                  );
                (T =
                  P &&
                  k.length === P.length &&
                  P.every(function (E, z) {
                    return E === k[z];
                  })),
                  T || ((O = "bad trial run results"), console.info(k, P));
              } catch (E) {
                (T = !1), (O = E.message);
              }
              O && console.warn("WebGL SDF generation not supported:", O),
                (x = !1),
                b.set(F, T);
            }
            return T;
          }
          var U = Object.freeze({
            __proto__: null,
            generate: M,
            generateIntoCanvas: C,
            generateIntoFramebuffer: N,
            isSupported: G,
          });
          return (
            (e.forEachPathCommand = i),
            (e.generate = function (I, F, T, O, k, P) {
              k === void 0 && (k = Math.max(O[2] - O[0], O[3] - O[1]) / 2),
                P === void 0 && (P = 1);
              try {
                return M.apply(U, arguments);
              } catch (E) {
                return (
                  console.info(
                    "WebGL SDF generation failed, falling back to JS",
                    E
                  ),
                  d.apply(y, arguments)
                );
              }
            }),
            (e.generateIntoCanvas = function (I, F, T, O, k, P, E, z, A, D) {
              k === void 0 && (k = Math.max(O[2] - O[0], O[3] - O[1]) / 2),
                P === void 0 && (P = 1),
                z === void 0 && (z = 0),
                A === void 0 && (A = 0),
                D === void 0 && (D = 0);
              try {
                return C.apply(U, arguments);
              } catch (V) {
                return (
                  console.info(
                    "WebGL SDF generation failed, falling back to JS",
                    V
                  ),
                  f.apply(y, arguments)
                );
              }
            }),
            (e.javascript = y),
            (e.pathToLineSegments = a),
            (e.webgl = U),
            (e.webglUtils = h),
            Object.defineProperty(e, "__esModule", { value: !0 }),
            e
          );
        })({});
        return n;
      }
      const yb = /\bvoid\s+main\s*\(\s*\)\s*{/g;
      function jp(n) {
        return n.replace(/^[ \t]*#include +<([\w\d./]+)>/gm, function (e, t) {
          let r = Ie[t];
          return r ? jp(r) : e;
        });
      }
      const qt = [];
      for (let n = 0; n < 256; n++)
        qt[n] = (n < 16 ? "0" : "") + n.toString(16);
      const ya =
          Object.assign ||
          function () {
            let n = arguments[0];
            for (let e = 1, t = arguments.length; e < t; e++) {
              let r = arguments[e];
              if (r) for (let i in r) r.hasOwnProperty(i) && (n[i] = r[i]);
            }
            return n;
          },
        qE = Date.now(),
        k1 = new WeakMap(),
        I1 = new Map();
      let $E = 1e10;
      function Xp(n, e) {
        const t = (function (u) {
          const c = JSON.stringify(u, YE);
          let h = O1.get(c);
          return h == null && O1.set(c, (h = ++ZE)), h;
        })(e);
        let r = k1.get(n);
        if ((r || k1.set(n, (r = Object.create(null))), r[t]))
          return new r[t]();
        const i = `_onBeforeCompile${t}`,
          a = function (u) {
            n.onBeforeCompile.call(this, u);
            const c =
              this.customProgramCacheKey() +
              "|" +
              u.vertexShader +
              "|" +
              u.fragmentShader;
            let h = I1[c];
            if (!h) {
              const d = (function (
                { vertexShader: f, fragmentShader: g },
                p,
                y
              ) {
                let {
                  vertexDefs: v,
                  vertexMainIntro: m,
                  vertexMainOutro: x,
                  vertexTransform: _,
                  fragmentDefs: b,
                  fragmentMainIntro: w,
                  fragmentMainOutro: M,
                  fragmentColorTransform: C,
                  customRewriter: N,
                  timeUniform: G,
                } = p;
                if (
                  ((v = v || ""),
                  (m = m || ""),
                  (x = x || ""),
                  (b = b || ""),
                  (w = w || ""),
                  (M = M || ""),
                  (_ || N) && (f = jp(f)),
                  (C || N) &&
                    (g = jp(
                      (g = g.replace(
                        /^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,
                        `
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`
                      ))
                    )),
                  N)
                ) {
                  let U = N({ vertexShader: f, fragmentShader: g });
                  (f = U.vertexShader), (g = U.fragmentShader);
                }
                if (C) {
                  let U = [];
                  (g = g.replace(
                    /^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,
                    (I) => (U.push(I), "")
                  )),
                    (M = `${C}
${U.join(`
`)}
${M}`);
                }
                if (G) {
                  const U = `
uniform float ${G};
`;
                  (v = U + v), (b = U + b);
                }
                return (
                  _ &&
                    ((v = `${v}
void troikaVertexTransform${y}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${_}
}
`),
                    (m = `
troika_position_${y} = vec3(position);
troika_normal_${y} = vec3(normal);
troika_uv_${y} = vec2(uv);
troikaVertexTransform${y}(troika_position_${y}, troika_normal_${y}, troika_uv_${y});
${m}
`),
                    (f = (f = `vec3 troika_position_${y};
vec3 troika_normal_${y};
vec2 troika_uv_${y};
${f}
`).replace(/\b(position|normal|uv)\b/g, (U, I, F, T) =>
                      /\battribute\s+vec[23]\s+$/.test(T.substr(0, F))
                        ? I
                        : `troika_${I}_${y}`
                    ))),
                  (f = U1(f, y, v, m, x)),
                  (g = U1(g, y, b, w, M)),
                  { vertexShader: f, fragmentShader: g }
                );
              })(u, e, t);
              h = I1[c] = d;
            }
            (u.vertexShader = h.vertexShader),
              (u.fragmentShader = h.fragmentShader),
              ya(u.uniforms, this.uniforms),
              e.timeUniform &&
                (u.uniforms[e.timeUniform] = {
                  get value() {
                    return Date.now() - qE;
                  },
                }),
              this[i] && this[i](u);
          },
          s = function () {
            return o(e.chained ? n : n.clone());
          },
          o = function (u) {
            const c = Object.create(u, l);
            return (
              Object.defineProperty(c, "baseMaterial", { value: n }),
              Object.defineProperty(c, "id", { value: $E++ }),
              (c.uuid = (function () {
                const h = (4294967295 * Math.random()) | 0,
                  d = (4294967295 * Math.random()) | 0,
                  f = (4294967295 * Math.random()) | 0,
                  g = (4294967295 * Math.random()) | 0;
                return (
                  qt[255 & h] +
                  qt[(h >> 8) & 255] +
                  qt[(h >> 16) & 255] +
                  qt[(h >> 24) & 255] +
                  "-" +
                  qt[255 & d] +
                  qt[(d >> 8) & 255] +
                  "-" +
                  qt[((d >> 16) & 15) | 64] +
                  qt[(d >> 24) & 255] +
                  "-" +
                  qt[(63 & f) | 128] +
                  qt[(f >> 8) & 255] +
                  "-" +
                  qt[(f >> 16) & 255] +
                  qt[(f >> 24) & 255] +
                  qt[255 & g] +
                  qt[(g >> 8) & 255] +
                  qt[(g >> 16) & 255] +
                  qt[(g >> 24) & 255]
                ).toUpperCase();
              })()),
              (c.uniforms = ya({}, u.uniforms, e.uniforms)),
              (c.defines = ya({}, u.defines, e.defines)),
              (c.defines[`TROIKA_DERIVED_MATERIAL_${t}`] = ""),
              (c.extensions = ya({}, u.extensions, e.extensions)),
              (c._listeners = void 0),
              c
            );
          },
          l = {
            constructor: { value: s },
            isDerivedMaterial: { value: !0 },
            customProgramCacheKey: {
              writable: !0,
              configurable: !0,
              value: function () {
                return n.customProgramCacheKey() + "|" + t;
              },
            },
            onBeforeCompile: {
              get: () => a,
              set(u) {
                this[i] = u;
              },
            },
            copy: {
              writable: !0,
              configurable: !0,
              value: function (u) {
                return (
                  n.copy.call(this, u),
                  n.isShaderMaterial ||
                    n.isDerivedMaterial ||
                    (ya(this.extensions, u.extensions),
                    ya(this.defines, u.defines),
                    ya(this.uniforms, y_.clone(u.uniforms))),
                  this
                );
              },
            },
            clone: {
              writable: !0,
              configurable: !0,
              value: function () {
                const u = new n.constructor();
                return o(u).copy(this);
              },
            },
            getDepthMaterial: {
              writable: !0,
              configurable: !0,
              value: function () {
                let u = this._depthMaterial;
                return (
                  u ||
                    ((u = this._depthMaterial =
                      Xp(
                        n.isDerivedMaterial
                          ? n.getDepthMaterial()
                          : new T_({ depthPacking: 3201 }),
                        e
                      )),
                    (u.defines.IS_DEPTH_MATERIAL = ""),
                    (u.uniforms = this.uniforms)),
                  u
                );
              },
            },
            getDistanceMaterial: {
              writable: !0,
              configurable: !0,
              value: function () {
                let u = this._distanceMaterial;
                return (
                  u ||
                    ((u = this._distanceMaterial =
                      Xp(
                        n.isDerivedMaterial
                          ? n.getDistanceMaterial()
                          : new E_(),
                        e
                      )),
                    (u.defines.IS_DISTANCE_MATERIAL = ""),
                    (u.uniforms = this.uniforms)),
                  u
                );
              },
            },
            dispose: {
              writable: !0,
              configurable: !0,
              value() {
                const { _depthMaterial: u, _distanceMaterial: c } = this;
                u && u.dispose(), c && c.dispose(), n.dispose.call(this);
              },
            },
          };
        return (r[t] = s), new s();
      }
      function U1(n, e, t, r, i) {
        return (
          (r || i || t) &&
            ((n = n.replace(
              yb,
              `
${t}
void troikaOrigMain${e}() {`
            )),
            (n += `
void main() {
  ${r}
  troikaOrigMain${e}();
  ${i}
}`)),
          n
        );
      }
      function YE(n, e) {
        return n === "uniforms"
          ? void 0
          : typeof e == "function"
          ? e.toString()
          : e;
      }
      let ZE = 0;
      const O1 = new Map(),
        Pa = () => (self.performance || Date).now(),
        Vh = vb();
      let z1;
      const KE = (function () {
          const n = [];
          let e = 0;
          function t() {
            const r = Pa();
            for (; n.length && Pa() - r < 5; ) n.shift()();
            e = n.length ? setTimeout(t, 0) : 0;
          }
          return (...r) => {
            const i = gi();
            return (
              n.push(() => {
                const a = Pa();
                try {
                  Vh.webgl.generateIntoCanvas(...r),
                    i.resolve({ timing: Pa() - a });
                } catch (s) {
                  i.reject(s);
                }
              }),
              e || (e = setTimeout(t, 0)),
              i
            );
          };
        })(),
        N1 = (function () {
          const n = {};
          let e = 0;
          return function (t, r, i, a, s, o, l, u, c, h) {
            const d = "TroikaTextSDFGenerator_JS_" + (e++ % 4);
            let f = n[d];
            return (
              f ||
                (f = n[d] =
                  {
                    workerModule: ho({
                      name: d,
                      workerId: d,
                      dependencies: [vb, Pa],
                      init(g, p) {
                        const y = g().javascript.generate;
                        return function (...v) {
                          const m = p();
                          return { textureData: y(...v), timing: p() - m };
                        };
                      },
                      getTransferables: (g) => [g.textureData.buffer],
                    }),
                    requests: 0,
                    idleTimer: null,
                  }),
              f.requests++,
              clearTimeout(f.idleTimer),
              f
                .workerModule(t, r, i, a, s, o)
                .then(({ textureData: g, timing: p }) => {
                  const y = Pa(),
                    v = new Uint8Array(4 * g.length);
                  for (let m = 0; m < g.length; m++) v[4 * m + h] = g[m];
                  return (
                    Vh.webglUtils.renderImageData(
                      l,
                      v,
                      u,
                      c,
                      t,
                      r,
                      1 << (3 - h)
                    ),
                    (p += Pa() - y),
                    --f.requests == 0 &&
                      (f.idleTimer = setTimeout(() => {
                        (function (m) {
                          hl[m] &&
                            hl[m].forEach(function (x) {
                              x();
                            }),
                            cl[m] && (cl[m].terminate(), delete cl[m]);
                        })(d);
                      }, 2e3)),
                    { timing: p }
                  );
                })
            );
          };
        })(),
        JE = Vh.webglUtils.resizeWebGLCanvasWithoutClearing;
      /*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/ const QE = ho({
          name: "Typr Font Parser",
          dependencies: [
            function () {
              return (
                typeof window > "u" && (self.window = self),
                (function (n) {
                  var e = {
                    parse: function (i) {
                      var a = e._bin,
                        s = new Uint8Array(i);
                      if (a.readASCII(s, 0, 4) == "ttcf") {
                        var o = 4;
                        a.readUshort(s, o),
                          (o += 2),
                          a.readUshort(s, o),
                          (o += 2);
                        var l = a.readUint(s, o);
                        o += 4;
                        for (var u = [], c = 0; c < l; c++) {
                          var h = a.readUint(s, o);
                          (o += 4), u.push(e._readFont(s, h));
                        }
                        return u;
                      }
                      return [e._readFont(s, 0)];
                    },
                    _readFont: function (i, a) {
                      var s = e._bin,
                        o = a;
                      s.readFixed(i, a), (a += 4);
                      var l = s.readUshort(i, a);
                      (a += 2),
                        s.readUshort(i, a),
                        (a += 2),
                        s.readUshort(i, a),
                        (a += 2),
                        s.readUshort(i, a),
                        (a += 2);
                      for (
                        var u = [
                            "cmap",
                            "head",
                            "hhea",
                            "maxp",
                            "hmtx",
                            "name",
                            "OS/2",
                            "post",
                            "loca",
                            "glyf",
                            "kern",
                            "CFF ",
                            "GPOS",
                            "GSUB",
                            "SVG ",
                          ],
                          c = { _data: i, _offset: o },
                          h = {},
                          d = 0;
                        d < l;
                        d++
                      ) {
                        var f = s.readASCII(i, a, 4);
                        (a += 4), s.readUint(i, a), (a += 4);
                        var g = s.readUint(i, a);
                        a += 4;
                        var p = s.readUint(i, a);
                        (a += 4), (h[f] = { offset: g, length: p });
                      }
                      for (d = 0; d < u.length; d++) {
                        var y = u[d];
                        h[y] &&
                          (c[y.trim()] = e[y.trim()].parse(
                            i,
                            h[y].offset,
                            h[y].length,
                            c
                          ));
                      }
                      return c;
                    },
                    _tabOffset: function (i, a, s) {
                      for (
                        var o = e._bin,
                          l = o.readUshort(i, s + 4),
                          u = s + 12,
                          c = 0;
                        c < l;
                        c++
                      ) {
                        var h = o.readASCII(i, u, 4);
                        (u += 4), o.readUint(i, u), (u += 4);
                        var d = o.readUint(i, u);
                        if (((u += 4), o.readUint(i, u), (u += 4), h == a))
                          return d;
                      }
                      return 0;
                    },
                  };
                  (e._bin = {
                    readFixed: function (i, a) {
                      return (
                        ((i[a] << 8) | i[a + 1]) +
                        ((i[a + 2] << 8) | i[a + 3]) / 65540
                      );
                    },
                    readF2dot14: function (i, a) {
                      return e._bin.readShort(i, a) / 16384;
                    },
                    readInt: function (i, a) {
                      return e._bin._view(i).getInt32(a);
                    },
                    readInt8: function (i, a) {
                      return e._bin._view(i).getInt8(a);
                    },
                    readShort: function (i, a) {
                      return e._bin._view(i).getInt16(a);
                    },
                    readUshort: function (i, a) {
                      return e._bin._view(i).getUint16(a);
                    },
                    readUshorts: function (i, a, s) {
                      for (var o = [], l = 0; l < s; l++)
                        o.push(e._bin.readUshort(i, a + 2 * l));
                      return o;
                    },
                    readUint: function (i, a) {
                      return e._bin._view(i).getUint32(a);
                    },
                    readUint64: function (i, a) {
                      return (
                        4294967296 * e._bin.readUint(i, a) +
                        e._bin.readUint(i, a + 4)
                      );
                    },
                    readASCII: function (i, a, s) {
                      for (var o = "", l = 0; l < s; l++)
                        o += String.fromCharCode(i[a + l]);
                      return o;
                    },
                    readUnicode: function (i, a, s) {
                      for (var o = "", l = 0; l < s; l++) {
                        var u = (i[a++] << 8) | i[a++];
                        o += String.fromCharCode(u);
                      }
                      return o;
                    },
                    _tdec:
                      typeof window < "u" && window.TextDecoder
                        ? new window.TextDecoder()
                        : null,
                    readUTF8: function (i, a, s) {
                      var o = e._bin._tdec;
                      return o && a == 0 && s == i.length
                        ? o.decode(i)
                        : e._bin.readASCII(i, a, s);
                    },
                    readBytes: function (i, a, s) {
                      for (var o = [], l = 0; l < s; l++) o.push(i[a + l]);
                      return o;
                    },
                    readASCIIArray: function (i, a, s) {
                      for (var o = [], l = 0; l < s; l++)
                        o.push(String.fromCharCode(i[a + l]));
                      return o;
                    },
                    _view: function (i) {
                      return (
                        i._dataView ||
                        (i._dataView = i.buffer
                          ? new DataView(i.buffer, i.byteOffset, i.byteLength)
                          : new DataView(new Uint8Array(i).buffer))
                      );
                    },
                  }),
                    (e._lctf = {}),
                    (e._lctf.parse = function (i, a, s, o, l) {
                      var u = e._bin,
                        c = {},
                        h = a;
                      u.readFixed(i, a), (a += 4);
                      var d = u.readUshort(i, a);
                      a += 2;
                      var f = u.readUshort(i, a);
                      a += 2;
                      var g = u.readUshort(i, a);
                      return (
                        (a += 2),
                        (c.scriptList = e._lctf.readScriptList(i, h + d)),
                        (c.featureList = e._lctf.readFeatureList(i, h + f)),
                        (c.lookupList = e._lctf.readLookupList(i, h + g, l)),
                        c
                      );
                    }),
                    (e._lctf.readLookupList = function (i, a, s) {
                      var o = e._bin,
                        l = a,
                        u = [],
                        c = o.readUshort(i, a);
                      a += 2;
                      for (var h = 0; h < c; h++) {
                        var d = o.readUshort(i, a);
                        a += 2;
                        var f = e._lctf.readLookupTable(i, l + d, s);
                        u.push(f);
                      }
                      return u;
                    }),
                    (e._lctf.readLookupTable = function (i, a, s) {
                      var o = e._bin,
                        l = a,
                        u = { tabs: [] };
                      (u.ltype = o.readUshort(i, a)),
                        (a += 2),
                        (u.flag = o.readUshort(i, a)),
                        (a += 2);
                      var c = o.readUshort(i, a);
                      a += 2;
                      for (var h = u.ltype, d = 0; d < c; d++) {
                        var f = o.readUshort(i, a);
                        a += 2;
                        var g = s(i, h, l + f, u);
                        u.tabs.push(g);
                      }
                      return u;
                    }),
                    (e._lctf.numOfOnes = function (i) {
                      for (var a = 0, s = 0; s < 32; s++)
                        ((i >>> s) & 1) != 0 && a++;
                      return a;
                    }),
                    (e._lctf.readClassDef = function (i, a) {
                      var s = e._bin,
                        o = [],
                        l = s.readUshort(i, a);
                      if (((a += 2), l == 1)) {
                        var u = s.readUshort(i, a);
                        a += 2;
                        var c = s.readUshort(i, a);
                        a += 2;
                        for (var h = 0; h < c; h++)
                          o.push(u + h),
                            o.push(u + h),
                            o.push(s.readUshort(i, a)),
                            (a += 2);
                      }
                      if (l == 2) {
                        var d = s.readUshort(i, a);
                        for (a += 2, h = 0; h < d; h++)
                          o.push(s.readUshort(i, a)),
                            (a += 2),
                            o.push(s.readUshort(i, a)),
                            (a += 2),
                            o.push(s.readUshort(i, a)),
                            (a += 2);
                      }
                      return o;
                    }),
                    (e._lctf.getInterval = function (i, a) {
                      for (var s = 0; s < i.length; s += 3) {
                        var o = i[s],
                          l = i[s + 1];
                        if ((i[s + 2], o <= a && a <= l)) return s;
                      }
                      return -1;
                    }),
                    (e._lctf.readCoverage = function (i, a) {
                      var s = e._bin,
                        o = {};
                      (o.fmt = s.readUshort(i, a)), (a += 2);
                      var l = s.readUshort(i, a);
                      return (
                        (a += 2),
                        o.fmt == 1 && (o.tab = s.readUshorts(i, a, l)),
                        o.fmt == 2 && (o.tab = s.readUshorts(i, a, 3 * l)),
                        o
                      );
                    }),
                    (e._lctf.coverageIndex = function (i, a) {
                      var s = i.tab;
                      if (i.fmt == 1) return s.indexOf(a);
                      if (i.fmt == 2) {
                        var o = e._lctf.getInterval(s, a);
                        if (o != -1) return s[o + 2] + (a - s[o]);
                      }
                      return -1;
                    }),
                    (e._lctf.readFeatureList = function (i, a) {
                      var s = e._bin,
                        o = a,
                        l = [],
                        u = s.readUshort(i, a);
                      a += 2;
                      for (var c = 0; c < u; c++) {
                        var h = s.readASCII(i, a, 4);
                        a += 4;
                        var d = s.readUshort(i, a);
                        a += 2;
                        var f = e._lctf.readFeatureTable(i, o + d);
                        (f.tag = h.trim()), l.push(f);
                      }
                      return l;
                    }),
                    (e._lctf.readFeatureTable = function (i, a) {
                      var s = e._bin,
                        o = a,
                        l = {},
                        u = s.readUshort(i, a);
                      (a += 2), u > 0 && (l.featureParams = o + u);
                      var c = s.readUshort(i, a);
                      (a += 2), (l.tab = []);
                      for (var h = 0; h < c; h++)
                        l.tab.push(s.readUshort(i, a + 2 * h));
                      return l;
                    }),
                    (e._lctf.readScriptList = function (i, a) {
                      var s = e._bin,
                        o = a,
                        l = {},
                        u = s.readUshort(i, a);
                      a += 2;
                      for (var c = 0; c < u; c++) {
                        var h = s.readASCII(i, a, 4);
                        a += 4;
                        var d = s.readUshort(i, a);
                        (a += 2),
                          (l[h.trim()] = e._lctf.readScriptTable(i, o + d));
                      }
                      return l;
                    }),
                    (e._lctf.readScriptTable = function (i, a) {
                      var s = e._bin,
                        o = a,
                        l = {},
                        u = s.readUshort(i, a);
                      (a += 2),
                        (l.default = e._lctf.readLangSysTable(i, o + u));
                      var c = s.readUshort(i, a);
                      a += 2;
                      for (var h = 0; h < c; h++) {
                        var d = s.readASCII(i, a, 4);
                        a += 4;
                        var f = s.readUshort(i, a);
                        (a += 2),
                          (l[d.trim()] = e._lctf.readLangSysTable(i, o + f));
                      }
                      return l;
                    }),
                    (e._lctf.readLangSysTable = function (i, a) {
                      var s = e._bin,
                        o = {};
                      s.readUshort(i, a),
                        (a += 2),
                        (o.reqFeature = s.readUshort(i, a)),
                        (a += 2);
                      var l = s.readUshort(i, a);
                      return (a += 2), (o.features = s.readUshorts(i, a, l)), o;
                    }),
                    (e.CFF = {}),
                    (e.CFF.parse = function (i, a, s) {
                      var o = e._bin;
                      (i = new Uint8Array(i.buffer, a, s))[(a = 0)],
                        i[++a],
                        i[++a],
                        i[++a],
                        a++;
                      var l = [];
                      a = e.CFF.readIndex(i, a, l);
                      for (var u = [], c = 0; c < l.length - 1; c++)
                        u.push(o.readASCII(i, a + l[c], l[c + 1] - l[c]));
                      a += l[l.length - 1];
                      var h = [];
                      a = e.CFF.readIndex(i, a, h);
                      var d = [];
                      for (c = 0; c < h.length - 1; c++)
                        d.push(e.CFF.readDict(i, a + h[c], a + h[c + 1]));
                      a += h[h.length - 1];
                      var f = d[0],
                        g = [];
                      a = e.CFF.readIndex(i, a, g);
                      var p = [];
                      for (c = 0; c < g.length - 1; c++)
                        p.push(o.readASCII(i, a + g[c], g[c + 1] - g[c]));
                      if (
                        ((a += g[g.length - 1]),
                        e.CFF.readSubrs(i, a, f),
                        f.CharStrings)
                      ) {
                        (a = f.CharStrings),
                          (g = []),
                          (a = e.CFF.readIndex(i, a, g));
                        var y = [];
                        for (c = 0; c < g.length - 1; c++)
                          y.push(o.readBytes(i, a + g[c], g[c + 1] - g[c]));
                        f.CharStrings = y;
                      }
                      if (f.ROS) {
                        a = f.FDArray;
                        var v = [];
                        for (
                          a = e.CFF.readIndex(i, a, v), f.FDArray = [], c = 0;
                          c < v.length - 1;
                          c++
                        ) {
                          var m = e.CFF.readDict(i, a + v[c], a + v[c + 1]);
                          e.CFF._readFDict(i, m, p), f.FDArray.push(m);
                        }
                        (a += v[v.length - 1]),
                          (a = f.FDSelect),
                          (f.FDSelect = []);
                        var x = i[a];
                        if ((a++, x != 3)) throw x;
                        var _ = o.readUshort(i, a);
                        for (a += 2, c = 0; c < _ + 1; c++)
                          f.FDSelect.push(o.readUshort(i, a), i[a + 2]),
                            (a += 3);
                      }
                      return (
                        f.Encoding &&
                          (f.Encoding = e.CFF.readEncoding(
                            i,
                            f.Encoding,
                            f.CharStrings.length
                          )),
                        f.charset &&
                          (f.charset = e.CFF.readCharset(
                            i,
                            f.charset,
                            f.CharStrings.length
                          )),
                        e.CFF._readFDict(i, f, p),
                        f
                      );
                    }),
                    (e.CFF._readFDict = function (i, a, s) {
                      var o;
                      for (var l in (a.Private &&
                        ((o = a.Private[1]),
                        (a.Private = e.CFF.readDict(i, o, o + a.Private[0])),
                        a.Private.Subrs &&
                          e.CFF.readSubrs(i, o + a.Private.Subrs, a.Private)),
                      a))
                        [
                          "FamilyName",
                          "FontName",
                          "FullName",
                          "Notice",
                          "version",
                          "Copyright",
                        ].indexOf(l) != -1 && (a[l] = s[a[l] - 426 + 35]);
                    }),
                    (e.CFF.readSubrs = function (i, a, s) {
                      var o = e._bin,
                        l = [];
                      a = e.CFF.readIndex(i, a, l);
                      var u,
                        c = l.length;
                      (u = c < 1240 ? 107 : c < 33900 ? 1131 : 32768),
                        (s.Bias = u),
                        (s.Subrs = []);
                      for (var h = 0; h < l.length - 1; h++)
                        s.Subrs.push(o.readBytes(i, a + l[h], l[h + 1] - l[h]));
                    }),
                    (e.CFF.tableSE = [
                      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 3, 4, 5, 6,
                      7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21,
                      22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
                      36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49,
                      50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63,
                      64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77,
                      78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91,
                      92, 93, 94, 95, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                      0, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107,
                      108, 109, 110, 0, 111, 112, 113, 114, 0, 115, 116, 117,
                      118, 119, 120, 121, 122, 0, 123, 0, 124, 125, 126, 127,
                      128, 129, 130, 131, 0, 132, 133, 0, 134, 135, 136, 137, 0,
                      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 138, 0, 139,
                      0, 0, 0, 0, 140, 141, 142, 143, 0, 0, 0, 0, 0, 144, 0, 0,
                      0, 145, 0, 0, 146, 147, 148, 149, 0, 0, 0, 0,
                    ]),
                    (e.CFF.glyphByUnicode = function (i, a) {
                      for (var s = 0; s < i.charset.length; s++)
                        if (i.charset[s] == a) return s;
                      return -1;
                    }),
                    (e.CFF.glyphBySE = function (i, a) {
                      return a < 0 || a > 255
                        ? -1
                        : e.CFF.glyphByUnicode(i, e.CFF.tableSE[a]);
                    }),
                    (e.CFF.readEncoding = function (i, a, s) {
                      e._bin;
                      var o = [".notdef"],
                        l = i[a];
                      if ((a++, l != 0))
                        throw "error: unknown encoding format: " + l;
                      var u = i[a];
                      a++;
                      for (var c = 0; c < u; c++) o.push(i[a + c]);
                      return o;
                    }),
                    (e.CFF.readCharset = function (i, a, s) {
                      var o = e._bin,
                        l = [".notdef"],
                        u = i[a];
                      if ((a++, u == 0))
                        for (var c = 0; c < s; c++) {
                          var h = o.readUshort(i, a);
                          (a += 2), l.push(h);
                        }
                      else {
                        if (u != 1 && u != 2) throw "error: format: " + u;
                        for (; l.length < s; ) {
                          (h = o.readUshort(i, a)), (a += 2);
                          var d = 0;
                          for (
                            u == 1
                              ? ((d = i[a]), a++)
                              : ((d = o.readUshort(i, a)), (a += 2)),
                              c = 0;
                            c <= d;
                            c++
                          )
                            l.push(h), h++;
                        }
                      }
                      return l;
                    }),
                    (e.CFF.readIndex = function (i, a, s) {
                      var o = e._bin,
                        l = o.readUshort(i, a) + 1,
                        u = i[(a += 2)];
                      if ((a++, u == 1))
                        for (var c = 0; c < l; c++) s.push(i[a + c]);
                      else if (u == 2)
                        for (c = 0; c < l; c++)
                          s.push(o.readUshort(i, a + 2 * c));
                      else if (u == 3)
                        for (c = 0; c < l; c++)
                          s.push(16777215 & o.readUint(i, a + 3 * c - 1));
                      else if (l != 1)
                        throw "unsupported offset size: " + u + ", count: " + l;
                      return (a += l * u) - 1;
                    }),
                    (e.CFF.getCharString = function (i, a, s) {
                      var o = e._bin,
                        l = i[a],
                        u = i[a + 1];
                      i[a + 2], i[a + 3], i[a + 4];
                      var c = 1,
                        h = null,
                        d = null;
                      l <= 20 && ((h = l), (c = 1)),
                        l == 12 && ((h = 100 * l + u), (c = 2)),
                        21 <= l && l <= 27 && ((h = l), (c = 1)),
                        l == 28 && ((d = o.readShort(i, a + 1)), (c = 3)),
                        29 <= l && l <= 31 && ((h = l), (c = 1)),
                        32 <= l && l <= 246 && ((d = l - 139), (c = 1)),
                        247 <= l &&
                          l <= 250 &&
                          ((d = 256 * (l - 247) + u + 108), (c = 2)),
                        251 <= l &&
                          l <= 254 &&
                          ((d = 256 * -(l - 251) - u - 108), (c = 2)),
                        l == 255 &&
                          ((d = o.readInt(i, a + 1) / 65535), (c = 5)),
                        (s.val = d != null ? d : "o" + h),
                        (s.size = c);
                    }),
                    (e.CFF.readCharString = function (i, a, s) {
                      for (var o = a + s, l = e._bin, u = []; a < o; ) {
                        var c = i[a],
                          h = i[a + 1];
                        i[a + 2], i[a + 3], i[a + 4];
                        var d = 1,
                          f = null,
                          g = null;
                        c <= 20 && ((f = c), (d = 1)),
                          c == 12 && ((f = 100 * c + h), (d = 2)),
                          (c != 19 && c != 20) || ((f = c), (d = 2)),
                          21 <= c && c <= 27 && ((f = c), (d = 1)),
                          c == 28 && ((g = l.readShort(i, a + 1)), (d = 3)),
                          29 <= c && c <= 31 && ((f = c), (d = 1)),
                          32 <= c && c <= 246 && ((g = c - 139), (d = 1)),
                          247 <= c &&
                            c <= 250 &&
                            ((g = 256 * (c - 247) + h + 108), (d = 2)),
                          251 <= c &&
                            c <= 254 &&
                            ((g = 256 * -(c - 251) - h - 108), (d = 2)),
                          c == 255 &&
                            ((g = l.readInt(i, a + 1) / 65535), (d = 5)),
                          u.push(g != null ? g : "o" + f),
                          (a += d);
                      }
                      return u;
                    }),
                    (e.CFF.readDict = function (i, a, s) {
                      for (var o = e._bin, l = {}, u = []; a < s; ) {
                        var c = i[a],
                          h = i[a + 1];
                        i[a + 2], i[a + 3], i[a + 4];
                        var d = 1,
                          f = null,
                          g = null;
                        if (
                          (c == 28 && ((g = o.readShort(i, a + 1)), (d = 3)),
                          c == 29 && ((g = o.readInt(i, a + 1)), (d = 5)),
                          32 <= c && c <= 246 && ((g = c - 139), (d = 1)),
                          247 <= c &&
                            c <= 250 &&
                            ((g = 256 * (c - 247) + h + 108), (d = 2)),
                          251 <= c &&
                            c <= 254 &&
                            ((g = 256 * -(c - 251) - h - 108), (d = 2)),
                          c == 255)
                        )
                          throw (
                            ((g = o.readInt(i, a + 1) / 65535),
                            (d = 5),
                            "unknown number")
                          );
                        if (c == 30) {
                          var p = [];
                          for (d = 1; ; ) {
                            var y = i[a + d];
                            d++;
                            var v = y >> 4,
                              m = 15 & y;
                            if (
                              (v != 15 && p.push(v),
                              m != 15 && p.push(m),
                              m == 15)
                            )
                              break;
                          }
                          for (
                            var x = "",
                              _ = [
                                0,
                                1,
                                2,
                                3,
                                4,
                                5,
                                6,
                                7,
                                8,
                                9,
                                ".",
                                "e",
                                "e-",
                                "reserved",
                                "-",
                                "endOfNumber",
                              ],
                              b = 0;
                            b < p.length;
                            b++
                          )
                            x += _[p[b]];
                          g = parseFloat(x);
                        }
                        c <= 21 &&
                          ((f = [
                            "version",
                            "Notice",
                            "FullName",
                            "FamilyName",
                            "Weight",
                            "FontBBox",
                            "BlueValues",
                            "OtherBlues",
                            "FamilyBlues",
                            "FamilyOtherBlues",
                            "StdHW",
                            "StdVW",
                            "escape",
                            "UniqueID",
                            "XUID",
                            "charset",
                            "Encoding",
                            "CharStrings",
                            "Private",
                            "Subrs",
                            "defaultWidthX",
                            "nominalWidthX",
                          ][c]),
                          (d = 1),
                          c == 12 &&
                            ((f = [
                              "Copyright",
                              "isFixedPitch",
                              "ItalicAngle",
                              "UnderlinePosition",
                              "UnderlineThickness",
                              "PaintType",
                              "CharstringType",
                              "FontMatrix",
                              "StrokeWidth",
                              "BlueScale",
                              "BlueShift",
                              "BlueFuzz",
                              "StemSnapH",
                              "StemSnapV",
                              "ForceBold",
                              0,
                              0,
                              "LanguageGroup",
                              "ExpansionFactor",
                              "initialRandomSeed",
                              "SyntheticBase",
                              "PostScript",
                              "BaseFontName",
                              "BaseFontBlend",
                              0,
                              0,
                              0,
                              0,
                              0,
                              0,
                              "ROS",
                              "CIDFontVersion",
                              "CIDFontRevision",
                              "CIDFontType",
                              "CIDCount",
                              "UIDBase",
                              "FDArray",
                              "FDSelect",
                              "FontName",
                            ][h]),
                            (d = 2))),
                          f != null
                            ? ((l[f] = u.length == 1 ? u[0] : u), (u = []))
                            : u.push(g),
                          (a += d);
                      }
                      return l;
                    }),
                    (e.cmap = {}),
                    (e.cmap.parse = function (i, a, s) {
                      (i = new Uint8Array(i.buffer, a, s)), (a = 0);
                      var o = e._bin,
                        l = {};
                      o.readUshort(i, a), (a += 2);
                      var u = o.readUshort(i, a);
                      a += 2;
                      var c = [];
                      l.tables = [];
                      for (var h = 0; h < u; h++) {
                        var d = o.readUshort(i, a);
                        a += 2;
                        var f = o.readUshort(i, a);
                        a += 2;
                        var g = o.readUint(i, a);
                        a += 4;
                        var p = "p" + d + "e" + f,
                          y = c.indexOf(g);
                        if (y == -1) {
                          var v;
                          (y = l.tables.length), c.push(g);
                          var m = o.readUshort(i, g);
                          m == 0
                            ? (v = e.cmap.parse0(i, g))
                            : m == 4
                            ? (v = e.cmap.parse4(i, g))
                            : m == 6
                            ? (v = e.cmap.parse6(i, g))
                            : m == 12
                            ? (v = e.cmap.parse12(i, g))
                            : console.debug("unknown format: " + m, d, f, g),
                            l.tables.push(v);
                        }
                        if (l[p] != null)
                          throw "multiple tables for one platform+encoding";
                        l[p] = y;
                      }
                      return l;
                    }),
                    (e.cmap.parse0 = function (i, a) {
                      var s = e._bin,
                        o = {};
                      (o.format = s.readUshort(i, a)), (a += 2);
                      var l = s.readUshort(i, a);
                      (a += 2), s.readUshort(i, a), (a += 2), (o.map = []);
                      for (var u = 0; u < l - 6; u++) o.map.push(i[a + u]);
                      return o;
                    }),
                    (e.cmap.parse4 = function (i, a) {
                      var s = e._bin,
                        o = a,
                        l = {};
                      (l.format = s.readUshort(i, a)), (a += 2);
                      var u = s.readUshort(i, a);
                      (a += 2), s.readUshort(i, a), (a += 2);
                      var c = s.readUshort(i, a);
                      a += 2;
                      var h = c / 2;
                      (l.searchRange = s.readUshort(i, a)),
                        (a += 2),
                        (l.entrySelector = s.readUshort(i, a)),
                        (a += 2),
                        (l.rangeShift = s.readUshort(i, a)),
                        (a += 2),
                        (l.endCount = s.readUshorts(i, a, h)),
                        (a += 2 * h),
                        (a += 2),
                        (l.startCount = s.readUshorts(i, a, h)),
                        (a += 2 * h),
                        (l.idDelta = []);
                      for (var d = 0; d < h; d++)
                        l.idDelta.push(s.readShort(i, a)), (a += 2);
                      for (
                        l.idRangeOffset = s.readUshorts(i, a, h),
                          a += 2 * h,
                          l.glyphIdArray = [];
                        a < o + u;

                      )
                        l.glyphIdArray.push(s.readUshort(i, a)), (a += 2);
                      return l;
                    }),
                    (e.cmap.parse6 = function (i, a) {
                      var s = e._bin,
                        o = {};
                      (o.format = s.readUshort(i, a)),
                        (a += 2),
                        s.readUshort(i, a),
                        (a += 2),
                        s.readUshort(i, a),
                        (a += 2),
                        (o.firstCode = s.readUshort(i, a)),
                        (a += 2);
                      var l = s.readUshort(i, a);
                      (a += 2), (o.glyphIdArray = []);
                      for (var u = 0; u < l; u++)
                        o.glyphIdArray.push(s.readUshort(i, a)), (a += 2);
                      return o;
                    }),
                    (e.cmap.parse12 = function (i, a) {
                      var s = e._bin,
                        o = {};
                      (o.format = s.readUshort(i, a)),
                        (a += 2),
                        (a += 2),
                        s.readUint(i, a),
                        (a += 4),
                        s.readUint(i, a),
                        (a += 4);
                      var l = s.readUint(i, a);
                      (a += 4), (o.groups = []);
                      for (var u = 0; u < l; u++) {
                        var c = a + 12 * u,
                          h = s.readUint(i, c + 0),
                          d = s.readUint(i, c + 4),
                          f = s.readUint(i, c + 8);
                        o.groups.push([h, d, f]);
                      }
                      return o;
                    }),
                    (e.glyf = {}),
                    (e.glyf.parse = function (i, a, s, o) {
                      for (var l = [], u = 0; u < o.maxp.numGlyphs; u++)
                        l.push(null);
                      return l;
                    }),
                    (e.glyf._parseGlyf = function (i, a) {
                      var s = e._bin,
                        o = i._data,
                        l = e._tabOffset(o, "glyf", i._offset) + i.loca[a];
                      if (i.loca[a] == i.loca[a + 1]) return null;
                      var u = {};
                      if (
                        ((u.noc = s.readShort(o, l)),
                        (l += 2),
                        (u.xMin = s.readShort(o, l)),
                        (l += 2),
                        (u.yMin = s.readShort(o, l)),
                        (l += 2),
                        (u.xMax = s.readShort(o, l)),
                        (l += 2),
                        (u.yMax = s.readShort(o, l)),
                        (l += 2),
                        u.xMin >= u.xMax || u.yMin >= u.yMax)
                      )
                        return null;
                      if (u.noc > 0) {
                        u.endPts = [];
                        for (var c = 0; c < u.noc; c++)
                          u.endPts.push(s.readUshort(o, l)), (l += 2);
                        var h = s.readUshort(o, l);
                        if (((l += 2), o.length - l < h)) return null;
                        (u.instructions = s.readBytes(o, l, h)), (l += h);
                        var d = u.endPts[u.noc - 1] + 1;
                        for (u.flags = [], c = 0; c < d; c++) {
                          var f = o[l];
                          if ((l++, u.flags.push(f), (8 & f) != 0)) {
                            var g = o[l];
                            l++;
                            for (var p = 0; p < g; p++) u.flags.push(f), c++;
                          }
                        }
                        for (u.xs = [], c = 0; c < d; c++) {
                          var y = (2 & u.flags[c]) != 0,
                            v = (16 & u.flags[c]) != 0;
                          y
                            ? (u.xs.push(v ? o[l] : -o[l]), l++)
                            : v
                            ? u.xs.push(0)
                            : (u.xs.push(s.readShort(o, l)), (l += 2));
                        }
                        for (u.ys = [], c = 0; c < d; c++)
                          (y = (4 & u.flags[c]) != 0),
                            (v = (32 & u.flags[c]) != 0),
                            y
                              ? (u.ys.push(v ? o[l] : -o[l]), l++)
                              : v
                              ? u.ys.push(0)
                              : (u.ys.push(s.readShort(o, l)), (l += 2));
                        var m = 0,
                          x = 0;
                        for (c = 0; c < d; c++)
                          (m += u.xs[c]),
                            (x += u.ys[c]),
                            (u.xs[c] = m),
                            (u.ys[c] = x);
                      } else {
                        var _;
                        u.parts = [];
                        do {
                          (_ = s.readUshort(o, l)), (l += 2);
                          var b = {
                            m: { a: 1, b: 0, c: 0, d: 1, tx: 0, ty: 0 },
                            p1: -1,
                            p2: -1,
                          };
                          if (
                            (u.parts.push(b),
                            (b.glyphIndex = s.readUshort(o, l)),
                            (l += 2),
                            1 & _)
                          ) {
                            var w = s.readShort(o, l);
                            l += 2;
                            var M = s.readShort(o, l);
                            l += 2;
                          } else
                            (w = s.readInt8(o, l)),
                              l++,
                              (M = s.readInt8(o, l)),
                              l++;
                          2 & _
                            ? ((b.m.tx = w), (b.m.ty = M))
                            : ((b.p1 = w), (b.p2 = M)),
                            8 & _
                              ? ((b.m.a = b.m.d = s.readF2dot14(o, l)),
                                (l += 2))
                              : 64 & _
                              ? ((b.m.a = s.readF2dot14(o, l)),
                                (l += 2),
                                (b.m.d = s.readF2dot14(o, l)),
                                (l += 2))
                              : 128 & _ &&
                                ((b.m.a = s.readF2dot14(o, l)),
                                (l += 2),
                                (b.m.b = s.readF2dot14(o, l)),
                                (l += 2),
                                (b.m.c = s.readF2dot14(o, l)),
                                (l += 2),
                                (b.m.d = s.readF2dot14(o, l)),
                                (l += 2));
                        } while (32 & _);
                        if (256 & _) {
                          var C = s.readUshort(o, l);
                          for (l += 2, u.instr = [], c = 0; c < C; c++)
                            u.instr.push(o[l]), l++;
                        }
                      }
                      return u;
                    }),
                    (e.GPOS = {}),
                    (e.GPOS.parse = function (i, a, s, o) {
                      return e._lctf.parse(i, a, s, o, e.GPOS.subt);
                    }),
                    (e.GPOS.subt = function (i, a, s, o) {
                      var l = e._bin,
                        u = s,
                        c = {};
                      if (
                        ((c.fmt = l.readUshort(i, s)),
                        (s += 2),
                        a == 1 ||
                          a == 2 ||
                          a == 3 ||
                          a == 7 ||
                          (a == 8 && c.fmt <= 2))
                      ) {
                        var h = l.readUshort(i, s);
                        (s += 2), (c.coverage = e._lctf.readCoverage(i, h + u));
                      }
                      if (a == 1 && c.fmt == 1) {
                        var d = l.readUshort(i, s);
                        s += 2;
                        var f = e._lctf.numOfOnes(d);
                        d != 0 && (c.pos = e.GPOS.readValueRecord(i, s, d));
                      } else if (a == 2 && c.fmt >= 1 && c.fmt <= 2) {
                        (d = l.readUshort(i, s)), (s += 2);
                        var g = l.readUshort(i, s);
                        (s += 2), (f = e._lctf.numOfOnes(d));
                        var p = e._lctf.numOfOnes(g);
                        if (c.fmt == 1) {
                          c.pairsets = [];
                          var y = l.readUshort(i, s);
                          s += 2;
                          for (var v = 0; v < y; v++) {
                            var m = u + l.readUshort(i, s);
                            s += 2;
                            var x = l.readUshort(i, m);
                            m += 2;
                            for (var _ = [], b = 0; b < x; b++) {
                              var w = l.readUshort(i, m);
                              (m += 2),
                                d != 0 &&
                                  ((I = e.GPOS.readValueRecord(i, m, d)),
                                  (m += 2 * f)),
                                g != 0 &&
                                  ((F = e.GPOS.readValueRecord(i, m, g)),
                                  (m += 2 * p)),
                                _.push({ gid2: w, val1: I, val2: F });
                            }
                            c.pairsets.push(_);
                          }
                        }
                        if (c.fmt == 2) {
                          var M = l.readUshort(i, s);
                          s += 2;
                          var C = l.readUshort(i, s);
                          s += 2;
                          var N = l.readUshort(i, s);
                          s += 2;
                          var G = l.readUshort(i, s);
                          for (
                            s += 2,
                              c.classDef1 = e._lctf.readClassDef(i, u + M),
                              c.classDef2 = e._lctf.readClassDef(i, u + C),
                              c.matrix = [],
                              v = 0;
                            v < N;
                            v++
                          ) {
                            var U = [];
                            for (b = 0; b < G; b++) {
                              var I = null,
                                F = null;
                              d != 0 &&
                                ((I = e.GPOS.readValueRecord(i, s, d)),
                                (s += 2 * f)),
                                g != 0 &&
                                  ((F = e.GPOS.readValueRecord(i, s, g)),
                                  (s += 2 * p)),
                                U.push({ val1: I, val2: F });
                            }
                            c.matrix.push(U);
                          }
                        }
                      } else {
                        if (a == 9 && c.fmt == 1) {
                          var T = l.readUshort(i, s);
                          s += 2;
                          var O = l.readUint(i, s);
                          if (((s += 4), o.ltype == 9)) o.ltype = T;
                          else if (o.ltype != T)
                            throw "invalid extension substitution";
                          return e.GPOS.subt(i, o.ltype, u + O);
                        }
                        console.debug(
                          "unsupported GPOS table LookupType",
                          a,
                          "format",
                          c.fmt
                        );
                      }
                      return c;
                    }),
                    (e.GPOS.readValueRecord = function (i, a, s) {
                      var o = e._bin,
                        l = [];
                      return (
                        l.push(1 & s ? o.readShort(i, a) : 0),
                        (a += 1 & s ? 2 : 0),
                        l.push(2 & s ? o.readShort(i, a) : 0),
                        (a += 2 & s ? 2 : 0),
                        l.push(4 & s ? o.readShort(i, a) : 0),
                        (a += 4 & s ? 2 : 0),
                        l.push(8 & s ? o.readShort(i, a) : 0),
                        (a += 8 & s ? 2 : 0),
                        l
                      );
                    }),
                    (e.GSUB = {}),
                    (e.GSUB.parse = function (i, a, s, o) {
                      return e._lctf.parse(i, a, s, o, e.GSUB.subt);
                    }),
                    (e.GSUB.subt = function (i, a, s, o) {
                      var l = e._bin,
                        u = s,
                        c = {};
                      if (
                        ((c.fmt = l.readUshort(i, s)),
                        (s += 2),
                        a != 1 && a != 4 && a != 5 && a != 6)
                      )
                        return null;
                      if (
                        a == 1 ||
                        a == 4 ||
                        (a == 5 && c.fmt <= 2) ||
                        (a == 6 && c.fmt <= 2)
                      ) {
                        var h = l.readUshort(i, s);
                        (s += 2), (c.coverage = e._lctf.readCoverage(i, u + h));
                      }
                      if (a == 1 && c.fmt >= 1 && c.fmt <= 2) {
                        if (c.fmt == 1) (c.delta = l.readShort(i, s)), (s += 2);
                        else if (c.fmt == 2) {
                          var d = l.readUshort(i, s);
                          (s += 2),
                            (c.newg = l.readUshorts(i, s, d)),
                            (s += 2 * c.newg.length);
                        }
                      } else if (a == 4) {
                        (c.vals = []), (d = l.readUshort(i, s)), (s += 2);
                        for (var f = 0; f < d; f++) {
                          var g = l.readUshort(i, s);
                          (s += 2),
                            c.vals.push(e.GSUB.readLigatureSet(i, u + g));
                        }
                      } else if (a == 5 && c.fmt == 2) {
                        if (c.fmt == 2) {
                          var p = l.readUshort(i, s);
                          (s += 2),
                            (c.cDef = e._lctf.readClassDef(i, u + p)),
                            (c.scset = []);
                          var y = l.readUshort(i, s);
                          for (s += 2, f = 0; f < y; f++) {
                            var v = l.readUshort(i, s);
                            (s += 2),
                              c.scset.push(
                                v == 0 ? null : e.GSUB.readSubClassSet(i, u + v)
                              );
                          }
                        }
                      } else if (a == 6 && c.fmt == 3) {
                        if (c.fmt == 3) {
                          for (f = 0; f < 3; f++) {
                            (d = l.readUshort(i, s)), (s += 2);
                            for (var m = [], x = 0; x < d; x++)
                              m.push(
                                e._lctf.readCoverage(
                                  i,
                                  u + l.readUshort(i, s + 2 * x)
                                )
                              );
                            (s += 2 * d),
                              f == 0 && (c.backCvg = m),
                              f == 1 && (c.inptCvg = m),
                              f == 2 && (c.ahedCvg = m);
                          }
                          (d = l.readUshort(i, s)),
                            (s += 2),
                            (c.lookupRec = e.GSUB.readSubstLookupRecords(
                              i,
                              s,
                              d
                            ));
                        }
                      } else {
                        if (a == 7 && c.fmt == 1) {
                          var _ = l.readUshort(i, s);
                          s += 2;
                          var b = l.readUint(i, s);
                          if (((s += 4), o.ltype == 9)) o.ltype = _;
                          else if (o.ltype != _)
                            throw "invalid extension substitution";
                          return e.GSUB.subt(i, o.ltype, u + b);
                        }
                        console.debug(
                          "unsupported GSUB table LookupType",
                          a,
                          "format",
                          c.fmt
                        );
                      }
                      return c;
                    }),
                    (e.GSUB.readSubClassSet = function (i, a) {
                      var s = e._bin.readUshort,
                        o = a,
                        l = [],
                        u = s(i, a);
                      a += 2;
                      for (var c = 0; c < u; c++) {
                        var h = s(i, a);
                        (a += 2), l.push(e.GSUB.readSubClassRule(i, o + h));
                      }
                      return l;
                    }),
                    (e.GSUB.readSubClassRule = function (i, a) {
                      var s = e._bin.readUshort,
                        o = {},
                        l = s(i, a),
                        u = s(i, (a += 2));
                      (a += 2), (o.input = []);
                      for (var c = 0; c < l - 1; c++)
                        o.input.push(s(i, a)), (a += 2);
                      return (
                        (o.substLookupRecords = e.GSUB.readSubstLookupRecords(
                          i,
                          a,
                          u
                        )),
                        o
                      );
                    }),
                    (e.GSUB.readSubstLookupRecords = function (i, a, s) {
                      for (var o = e._bin.readUshort, l = [], u = 0; u < s; u++)
                        l.push(o(i, a), o(i, a + 2)), (a += 4);
                      return l;
                    }),
                    (e.GSUB.readChainSubClassSet = function (i, a) {
                      var s = e._bin,
                        o = a,
                        l = [],
                        u = s.readUshort(i, a);
                      a += 2;
                      for (var c = 0; c < u; c++) {
                        var h = s.readUshort(i, a);
                        (a += 2),
                          l.push(e.GSUB.readChainSubClassRule(i, o + h));
                      }
                      return l;
                    }),
                    (e.GSUB.readChainSubClassRule = function (i, a) {
                      for (
                        var s = e._bin,
                          o = {},
                          l = ["backtrack", "input", "lookahead"],
                          u = 0;
                        u < l.length;
                        u++
                      ) {
                        var c = s.readUshort(i, a);
                        (a += 2),
                          u == 1 && c--,
                          (o[l[u]] = s.readUshorts(i, a, c)),
                          (a += 2 * o[l[u]].length);
                      }
                      return (
                        (c = s.readUshort(i, a)),
                        (a += 2),
                        (o.subst = s.readUshorts(i, a, 2 * c)),
                        (a += 2 * o.subst.length),
                        o
                      );
                    }),
                    (e.GSUB.readLigatureSet = function (i, a) {
                      var s = e._bin,
                        o = a,
                        l = [],
                        u = s.readUshort(i, a);
                      a += 2;
                      for (var c = 0; c < u; c++) {
                        var h = s.readUshort(i, a);
                        (a += 2), l.push(e.GSUB.readLigature(i, o + h));
                      }
                      return l;
                    }),
                    (e.GSUB.readLigature = function (i, a) {
                      var s = e._bin,
                        o = { chain: [] };
                      (o.nglyph = s.readUshort(i, a)), (a += 2);
                      var l = s.readUshort(i, a);
                      a += 2;
                      for (var u = 0; u < l - 1; u++)
                        o.chain.push(s.readUshort(i, a)), (a += 2);
                      return o;
                    }),
                    (e.head = {}),
                    (e.head.parse = function (i, a, s) {
                      var o = e._bin,
                        l = {};
                      return (
                        o.readFixed(i, a),
                        (a += 4),
                        (l.fontRevision = o.readFixed(i, a)),
                        (a += 4),
                        o.readUint(i, a),
                        (a += 4),
                        o.readUint(i, a),
                        (a += 4),
                        (l.flags = o.readUshort(i, a)),
                        (a += 2),
                        (l.unitsPerEm = o.readUshort(i, a)),
                        (a += 2),
                        (l.created = o.readUint64(i, a)),
                        (a += 8),
                        (l.modified = o.readUint64(i, a)),
                        (a += 8),
                        (l.xMin = o.readShort(i, a)),
                        (a += 2),
                        (l.yMin = o.readShort(i, a)),
                        (a += 2),
                        (l.xMax = o.readShort(i, a)),
                        (a += 2),
                        (l.yMax = o.readShort(i, a)),
                        (a += 2),
                        (l.macStyle = o.readUshort(i, a)),
                        (a += 2),
                        (l.lowestRecPPEM = o.readUshort(i, a)),
                        (a += 2),
                        (l.fontDirectionHint = o.readShort(i, a)),
                        (a += 2),
                        (l.indexToLocFormat = o.readShort(i, a)),
                        (a += 2),
                        (l.glyphDataFormat = o.readShort(i, a)),
                        (a += 2),
                        l
                      );
                    }),
                    (e.hhea = {}),
                    (e.hhea.parse = function (i, a, s) {
                      var o = e._bin,
                        l = {};
                      return (
                        o.readFixed(i, a),
                        (a += 4),
                        (l.ascender = o.readShort(i, a)),
                        (a += 2),
                        (l.descender = o.readShort(i, a)),
                        (a += 2),
                        (l.lineGap = o.readShort(i, a)),
                        (a += 2),
                        (l.advanceWidthMax = o.readUshort(i, a)),
                        (a += 2),
                        (l.minLeftSideBearing = o.readShort(i, a)),
                        (a += 2),
                        (l.minRightSideBearing = o.readShort(i, a)),
                        (a += 2),
                        (l.xMaxExtent = o.readShort(i, a)),
                        (a += 2),
                        (l.caretSlopeRise = o.readShort(i, a)),
                        (a += 2),
                        (l.caretSlopeRun = o.readShort(i, a)),
                        (a += 2),
                        (l.caretOffset = o.readShort(i, a)),
                        (a += 2),
                        (a += 8),
                        (l.metricDataFormat = o.readShort(i, a)),
                        (a += 2),
                        (l.numberOfHMetrics = o.readUshort(i, a)),
                        (a += 2),
                        l
                      );
                    }),
                    (e.hmtx = {}),
                    (e.hmtx.parse = function (i, a, s, o) {
                      for (
                        var l = e._bin,
                          u = { aWidth: [], lsBearing: [] },
                          c = 0,
                          h = 0,
                          d = 0;
                        d < o.maxp.numGlyphs;
                        d++
                      )
                        d < o.hhea.numberOfHMetrics &&
                          ((c = l.readUshort(i, a)),
                          (a += 2),
                          (h = l.readShort(i, a)),
                          (a += 2)),
                          u.aWidth.push(c),
                          u.lsBearing.push(h);
                      return u;
                    }),
                    (e.kern = {}),
                    (e.kern.parse = function (i, a, s, o) {
                      var l = e._bin,
                        u = l.readUshort(i, a);
                      if (((a += 2), u == 1))
                        return e.kern.parseV1(i, a - 2, s, o);
                      var c = l.readUshort(i, a);
                      a += 2;
                      for (
                        var h = { glyph1: [], rval: [] }, d = 0;
                        d < c;
                        d++
                      ) {
                        (a += 2), (s = l.readUshort(i, a)), (a += 2);
                        var f = l.readUshort(i, a);
                        a += 2;
                        var g = f >>> 8;
                        if ((g &= 15) != 0)
                          throw "unknown kern table format: " + g;
                        a = e.kern.readFormat0(i, a, h);
                      }
                      return h;
                    }),
                    (e.kern.parseV1 = function (i, a, s, o) {
                      var l = e._bin;
                      l.readFixed(i, a), (a += 4);
                      var u = l.readUint(i, a);
                      a += 4;
                      for (
                        var c = { glyph1: [], rval: [] }, h = 0;
                        h < u;
                        h++
                      ) {
                        l.readUint(i, a), (a += 4);
                        var d = l.readUshort(i, a);
                        (a += 2), l.readUshort(i, a), (a += 2);
                        var f = d >>> 8;
                        if ((f &= 15) != 0)
                          throw "unknown kern table format: " + f;
                        a = e.kern.readFormat0(i, a, c);
                      }
                      return c;
                    }),
                    (e.kern.readFormat0 = function (i, a, s) {
                      var o = e._bin,
                        l = -1,
                        u = o.readUshort(i, a);
                      (a += 2),
                        o.readUshort(i, a),
                        (a += 2),
                        o.readUshort(i, a),
                        (a += 2),
                        o.readUshort(i, a),
                        (a += 2);
                      for (var c = 0; c < u; c++) {
                        var h = o.readUshort(i, a);
                        a += 2;
                        var d = o.readUshort(i, a);
                        a += 2;
                        var f = o.readShort(i, a);
                        (a += 2),
                          h != l &&
                            (s.glyph1.push(h),
                            s.rval.push({ glyph2: [], vals: [] }));
                        var g = s.rval[s.rval.length - 1];
                        g.glyph2.push(d), g.vals.push(f), (l = h);
                      }
                      return a;
                    }),
                    (e.loca = {}),
                    (e.loca.parse = function (i, a, s, o) {
                      var l = e._bin,
                        u = [],
                        c = o.head.indexToLocFormat,
                        h = o.maxp.numGlyphs + 1;
                      if (c == 0)
                        for (var d = 0; d < h; d++)
                          u.push(l.readUshort(i, a + (d << 1)) << 1);
                      if (c == 1)
                        for (d = 0; d < h; d++)
                          u.push(l.readUint(i, a + (d << 2)));
                      return u;
                    }),
                    (e.maxp = {}),
                    (e.maxp.parse = function (i, a, s) {
                      var o = e._bin,
                        l = {},
                        u = o.readUint(i, a);
                      return (
                        (a += 4),
                        (l.numGlyphs = o.readUshort(i, a)),
                        (a += 2),
                        u == 65536 &&
                          ((l.maxPoints = o.readUshort(i, a)),
                          (a += 2),
                          (l.maxContours = o.readUshort(i, a)),
                          (a += 2),
                          (l.maxCompositePoints = o.readUshort(i, a)),
                          (a += 2),
                          (l.maxCompositeContours = o.readUshort(i, a)),
                          (a += 2),
                          (l.maxZones = o.readUshort(i, a)),
                          (a += 2),
                          (l.maxTwilightPoints = o.readUshort(i, a)),
                          (a += 2),
                          (l.maxStorage = o.readUshort(i, a)),
                          (a += 2),
                          (l.maxFunctionDefs = o.readUshort(i, a)),
                          (a += 2),
                          (l.maxInstructionDefs = o.readUshort(i, a)),
                          (a += 2),
                          (l.maxStackElements = o.readUshort(i, a)),
                          (a += 2),
                          (l.maxSizeOfInstructions = o.readUshort(i, a)),
                          (a += 2),
                          (l.maxComponentElements = o.readUshort(i, a)),
                          (a += 2),
                          (l.maxComponentDepth = o.readUshort(i, a)),
                          (a += 2)),
                        l
                      );
                    }),
                    (e.name = {}),
                    (e.name.parse = function (i, a, s) {
                      var o = e._bin,
                        l = {};
                      o.readUshort(i, a), (a += 2);
                      var u = o.readUshort(i, a);
                      (a += 2), o.readUshort(i, a);
                      for (
                        var c,
                          h = [
                            "copyright",
                            "fontFamily",
                            "fontSubfamily",
                            "ID",
                            "fullName",
                            "version",
                            "postScriptName",
                            "trademark",
                            "manufacturer",
                            "designer",
                            "description",
                            "urlVendor",
                            "urlDesigner",
                            "licence",
                            "licenceURL",
                            "---",
                            "typoFamilyName",
                            "typoSubfamilyName",
                            "compatibleFull",
                            "sampleText",
                            "postScriptCID",
                            "wwsFamilyName",
                            "wwsSubfamilyName",
                            "lightPalette",
                            "darkPalette",
                          ],
                          d = (a += 2),
                          f = 0;
                        f < u;
                        f++
                      ) {
                        var g = o.readUshort(i, a);
                        a += 2;
                        var p = o.readUshort(i, a);
                        a += 2;
                        var y = o.readUshort(i, a);
                        a += 2;
                        var v = o.readUshort(i, a);
                        a += 2;
                        var m = o.readUshort(i, a);
                        a += 2;
                        var x = o.readUshort(i, a);
                        a += 2;
                        var _,
                          b = h[v],
                          w = d + 12 * u + x;
                        if (g == 0) _ = o.readUnicode(i, w, m / 2);
                        else if (g == 3 && p == 0)
                          _ = o.readUnicode(i, w, m / 2);
                        else if (p == 0) _ = o.readASCII(i, w, m);
                        else if (p == 1) _ = o.readUnicode(i, w, m / 2);
                        else if (p == 3) _ = o.readUnicode(i, w, m / 2);
                        else {
                          if (g != 1)
                            throw (
                              "unknown encoding " + p + ", platformID: " + g
                            );
                          (_ = o.readASCII(i, w, m)),
                            console.debug(
                              "reading unknown MAC encoding " + p + " as ASCII"
                            );
                        }
                        var M = "p" + g + "," + y.toString(16);
                        l[M] == null && (l[M] = {}),
                          (l[M][b !== void 0 ? b : v] = _),
                          (l[M]._lang = y);
                      }
                      for (var C in l)
                        if (l[C].postScriptName != null && l[C]._lang == 1033)
                          return l[C];
                      for (var C in l)
                        if (l[C].postScriptName != null && l[C]._lang == 0)
                          return l[C];
                      for (var C in l)
                        if (l[C].postScriptName != null && l[C]._lang == 3084)
                          return l[C];
                      for (var C in l)
                        if (l[C].postScriptName != null) return l[C];
                      for (var C in l) {
                        c = C;
                        break;
                      }
                      return (
                        console.debug(
                          "returning name table with languageID " + l[c]._lang
                        ),
                        l[c]
                      );
                    }),
                    (e["OS/2"] = {}),
                    (e["OS/2"].parse = function (i, a, s) {
                      var o = e._bin.readUshort(i, a);
                      a += 2;
                      var l = {};
                      if (o == 0) e["OS/2"].version0(i, a, l);
                      else if (o == 1) e["OS/2"].version1(i, a, l);
                      else if (o == 2 || o == 3 || o == 4)
                        e["OS/2"].version2(i, a, l);
                      else {
                        if (o != 5) throw "unknown OS/2 table version: " + o;
                        e["OS/2"].version5(i, a, l);
                      }
                      return l;
                    }),
                    (e["OS/2"].version0 = function (i, a, s) {
                      var o = e._bin;
                      return (
                        (s.xAvgCharWidth = o.readShort(i, a)),
                        (a += 2),
                        (s.usWeightClass = o.readUshort(i, a)),
                        (a += 2),
                        (s.usWidthClass = o.readUshort(i, a)),
                        (a += 2),
                        (s.fsType = o.readUshort(i, a)),
                        (a += 2),
                        (s.ySubscriptXSize = o.readShort(i, a)),
                        (a += 2),
                        (s.ySubscriptYSize = o.readShort(i, a)),
                        (a += 2),
                        (s.ySubscriptXOffset = o.readShort(i, a)),
                        (a += 2),
                        (s.ySubscriptYOffset = o.readShort(i, a)),
                        (a += 2),
                        (s.ySuperscriptXSize = o.readShort(i, a)),
                        (a += 2),
                        (s.ySuperscriptYSize = o.readShort(i, a)),
                        (a += 2),
                        (s.ySuperscriptXOffset = o.readShort(i, a)),
                        (a += 2),
                        (s.ySuperscriptYOffset = o.readShort(i, a)),
                        (a += 2),
                        (s.yStrikeoutSize = o.readShort(i, a)),
                        (a += 2),
                        (s.yStrikeoutPosition = o.readShort(i, a)),
                        (a += 2),
                        (s.sFamilyClass = o.readShort(i, a)),
                        (a += 2),
                        (s.panose = o.readBytes(i, a, 10)),
                        (a += 10),
                        (s.ulUnicodeRange1 = o.readUint(i, a)),
                        (a += 4),
                        (s.ulUnicodeRange2 = o.readUint(i, a)),
                        (a += 4),
                        (s.ulUnicodeRange3 = o.readUint(i, a)),
                        (a += 4),
                        (s.ulUnicodeRange4 = o.readUint(i, a)),
                        (a += 4),
                        (s.achVendID = [
                          o.readInt8(i, a),
                          o.readInt8(i, a + 1),
                          o.readInt8(i, a + 2),
                          o.readInt8(i, a + 3),
                        ]),
                        (a += 4),
                        (s.fsSelection = o.readUshort(i, a)),
                        (a += 2),
                        (s.usFirstCharIndex = o.readUshort(i, a)),
                        (a += 2),
                        (s.usLastCharIndex = o.readUshort(i, a)),
                        (a += 2),
                        (s.sTypoAscender = o.readShort(i, a)),
                        (a += 2),
                        (s.sTypoDescender = o.readShort(i, a)),
                        (a += 2),
                        (s.sTypoLineGap = o.readShort(i, a)),
                        (a += 2),
                        (s.usWinAscent = o.readUshort(i, a)),
                        (a += 2),
                        (s.usWinDescent = o.readUshort(i, a)),
                        a + 2
                      );
                    }),
                    (e["OS/2"].version1 = function (i, a, s) {
                      var o = e._bin;
                      return (
                        (a = e["OS/2"].version0(i, a, s)),
                        (s.ulCodePageRange1 = o.readUint(i, a)),
                        (a += 4),
                        (s.ulCodePageRange2 = o.readUint(i, a)),
                        a + 4
                      );
                    }),
                    (e["OS/2"].version2 = function (i, a, s) {
                      var o = e._bin;
                      return (
                        (a = e["OS/2"].version1(i, a, s)),
                        (s.sxHeight = o.readShort(i, a)),
                        (a += 2),
                        (s.sCapHeight = o.readShort(i, a)),
                        (a += 2),
                        (s.usDefault = o.readUshort(i, a)),
                        (a += 2),
                        (s.usBreak = o.readUshort(i, a)),
                        (a += 2),
                        (s.usMaxContext = o.readUshort(i, a)),
                        a + 2
                      );
                    }),
                    (e["OS/2"].version5 = function (i, a, s) {
                      var o = e._bin;
                      return (
                        (a = e["OS/2"].version2(i, a, s)),
                        (s.usLowerOpticalPointSize = o.readUshort(i, a)),
                        (a += 2),
                        (s.usUpperOpticalPointSize = o.readUshort(i, a)),
                        a + 2
                      );
                    }),
                    (e.post = {}),
                    (e.post.parse = function (i, a, s) {
                      var o = e._bin,
                        l = {};
                      return (
                        (l.version = o.readFixed(i, a)),
                        (a += 4),
                        (l.italicAngle = o.readFixed(i, a)),
                        (a += 4),
                        (l.underlinePosition = o.readShort(i, a)),
                        (a += 2),
                        (l.underlineThickness = o.readShort(i, a)),
                        (a += 2),
                        l
                      );
                    }),
                    e == null && (e = {}),
                    e.U == null && (e.U = {}),
                    (e.U.codeToGlyph = function (i, a) {
                      var s = i.cmap,
                        o = -1;
                      if (
                        (s.p0e4 != null
                          ? (o = s.p0e4)
                          : s.p3e1 != null
                          ? (o = s.p3e1)
                          : s.p1e0 != null
                          ? (o = s.p1e0)
                          : s.p0e3 != null && (o = s.p0e3),
                        o == -1)
                      )
                        throw "no familiar platform and encoding!";
                      var l = s.tables[o];
                      if (l.format == 0)
                        return a >= l.map.length ? 0 : l.map[a];
                      if (l.format == 4) {
                        for (var u = -1, c = 0; c < l.endCount.length; c++)
                          if (a <= l.endCount[c]) {
                            u = c;
                            break;
                          }
                        return u == -1 || l.startCount[u] > a
                          ? 0
                          : 65535 &
                              (l.idRangeOffset[u] != 0
                                ? l.glyphIdArray[
                                    a -
                                      l.startCount[u] +
                                      (l.idRangeOffset[u] >> 1) -
                                      (l.idRangeOffset.length - u)
                                  ]
                                : a + l.idDelta[u]);
                      }
                      if (l.format == 12) {
                        if (a > l.groups[l.groups.length - 1][1]) return 0;
                        for (c = 0; c < l.groups.length; c++) {
                          var h = l.groups[c];
                          if (h[0] <= a && a <= h[1]) return h[2] + (a - h[0]);
                        }
                        return 0;
                      }
                      throw "unknown cmap table format " + l.format;
                    }),
                    (e.U.glyphToPath = function (i, a) {
                      var s = { cmds: [], crds: [] };
                      if (i.SVG && i.SVG.entries[a]) {
                        var o = i.SVG.entries[a];
                        return o == null
                          ? s
                          : (typeof o == "string" &&
                              ((o = e.SVG.toPath(o)), (i.SVG.entries[a] = o)),
                            o);
                      }
                      if (i.CFF) {
                        var l = {
                            x: 0,
                            y: 0,
                            stack: [],
                            nStems: 0,
                            haveWidth: !1,
                            width: i.CFF.Private
                              ? i.CFF.Private.defaultWidthX
                              : 0,
                            open: !1,
                          },
                          u = i.CFF,
                          c = i.CFF.Private;
                        if (u.ROS) {
                          for (var h = 0; u.FDSelect[h + 2] <= a; ) h += 2;
                          c = u.FDArray[u.FDSelect[h + 1]].Private;
                        }
                        e.U._drawCFF(i.CFF.CharStrings[a], l, u, c, s);
                      } else i.glyf && e.U._drawGlyf(a, i, s);
                      return s;
                    }),
                    (e.U._drawGlyf = function (i, a, s) {
                      var o = a.glyf[i];
                      o == null && (o = a.glyf[i] = e.glyf._parseGlyf(a, i)),
                        o != null &&
                          (o.noc > -1
                            ? e.U._simpleGlyph(o, s)
                            : e.U._compoGlyph(o, a, s));
                    }),
                    (e.U._simpleGlyph = function (i, a) {
                      for (var s = 0; s < i.noc; s++) {
                        for (
                          var o = s == 0 ? 0 : i.endPts[s - 1] + 1,
                            l = i.endPts[s],
                            u = o;
                          u <= l;
                          u++
                        ) {
                          var c = u == o ? l : u - 1,
                            h = u == l ? o : u + 1,
                            d = 1 & i.flags[u],
                            f = 1 & i.flags[c],
                            g = 1 & i.flags[h],
                            p = i.xs[u],
                            y = i.ys[u];
                          if (u == o)
                            if (d) {
                              if (!f) {
                                e.U.P.moveTo(a, p, y);
                                continue;
                              }
                              e.U.P.moveTo(a, i.xs[c], i.ys[c]);
                            } else
                              f
                                ? e.U.P.moveTo(a, i.xs[c], i.ys[c])
                                : e.U.P.moveTo(
                                    a,
                                    (i.xs[c] + p) / 2,
                                    (i.ys[c] + y) / 2
                                  );
                          d
                            ? f && e.U.P.lineTo(a, p, y)
                            : g
                            ? e.U.P.qcurveTo(a, p, y, i.xs[h], i.ys[h])
                            : e.U.P.qcurveTo(
                                a,
                                p,
                                y,
                                (p + i.xs[h]) / 2,
                                (y + i.ys[h]) / 2
                              );
                        }
                        e.U.P.closePath(a);
                      }
                    }),
                    (e.U._compoGlyph = function (i, a, s) {
                      for (var o = 0; o < i.parts.length; o++) {
                        var l = { cmds: [], crds: [] },
                          u = i.parts[o];
                        e.U._drawGlyf(u.glyphIndex, a, l);
                        for (var c = u.m, h = 0; h < l.crds.length; h += 2) {
                          var d = l.crds[h],
                            f = l.crds[h + 1];
                          s.crds.push(d * c.a + f * c.b + c.tx),
                            s.crds.push(d * c.c + f * c.d + c.ty);
                        }
                        for (h = 0; h < l.cmds.length; h++)
                          s.cmds.push(l.cmds[h]);
                      }
                    }),
                    (e.U._getGlyphClass = function (i, a) {
                      var s = e._lctf.getInterval(a, i);
                      return s == -1 ? 0 : a[s + 2];
                    }),
                    (e.U.getPairAdjustment = function (i, a, s) {
                      var o = 0,
                        l = !1;
                      if (i.GPOS)
                        for (
                          var u = i.GPOS,
                            c = u.lookupList,
                            h = u.featureList,
                            d = [],
                            f = 0;
                          f < h.length;
                          f++
                        ) {
                          var g = h[f];
                          if (g.tag == "kern") {
                            l = !0;
                            for (var p = 0; p < g.tab.length; p++)
                              if (!d[g.tab[p]]) {
                                d[g.tab[p]] = !0;
                                for (
                                  var y = c[g.tab[p]], v = 0;
                                  v < y.tabs.length;
                                  v++
                                )
                                  if (y.tabs[v] != null) {
                                    var m,
                                      x = y.tabs[v];
                                    if (
                                      (!x.coverage ||
                                        (m = e._lctf.coverageIndex(
                                          x.coverage,
                                          a
                                        )) != -1) &&
                                      y.ltype != 1
                                    ) {
                                      if (y.ltype == 2) {
                                        var _;
                                        if (x.fmt == 1) {
                                          var b = x.pairsets[m];
                                          for (f = 0; f < b.length; f++)
                                            b[f].gid2 == s && (_ = b[f]);
                                        } else if (x.fmt == 2) {
                                          var w = e.U._getGlyphClass(
                                              a,
                                              x.classDef1
                                            ),
                                            M = e.U._getGlyphClass(
                                              s,
                                              x.classDef2
                                            );
                                          _ = x.matrix[w][M];
                                        }
                                        _ &&
                                          _.val1 &&
                                          _.val1[2] &&
                                          (o += _.val1[2]),
                                          _ &&
                                            _.val2 &&
                                            _.val2[0] &&
                                            (o += _.val2[0]);
                                      }
                                    }
                                  }
                              }
                          }
                        }
                      if (i.kern && !l) {
                        var C = i.kern.glyph1.indexOf(a);
                        if (C != -1) {
                          var N = i.kern.rval[C].glyph2.indexOf(s);
                          N != -1 && (o += i.kern.rval[C].vals[N]);
                        }
                      }
                      return o;
                    }),
                    (e.U._applySubs = function (i, a, s, o) {
                      for (
                        var l = i.length - a - 1, u = 0;
                        u < s.tabs.length;
                        u++
                      )
                        if (s.tabs[u] != null) {
                          var c,
                            h = s.tabs[u];
                          if (
                            !h.coverage ||
                            (c = e._lctf.coverageIndex(h.coverage, i[a])) != -1
                          ) {
                            if (s.ltype == 1)
                              i[a],
                                h.fmt == 1
                                  ? (i[a] = i[a] + h.delta)
                                  : (i[a] = h.newg[c]);
                            else if (s.ltype == 4)
                              for (
                                var d = h.vals[c], f = 0;
                                f < d.length;
                                f++
                              ) {
                                var g = d[f],
                                  p = g.chain.length;
                                if (!(p > l)) {
                                  for (var y = !0, v = 0, m = 0; m < p; m++) {
                                    for (; i[a + v + (1 + m)] == -1; ) v++;
                                    g.chain[m] != i[a + v + (1 + m)] &&
                                      (y = !1);
                                  }
                                  if (y) {
                                    for (i[a] = g.nglyph, m = 0; m < p + v; m++)
                                      i[a + m + 1] = -1;
                                    break;
                                  }
                                }
                              }
                            else if (s.ltype == 5 && h.fmt == 2)
                              for (
                                var x = e._lctf.getInterval(h.cDef, i[a]),
                                  _ = h.cDef[x + 2],
                                  b = h.scset[_],
                                  w = 0;
                                w < b.length;
                                w++
                              ) {
                                var M = b[w],
                                  C = M.input;
                                if (!(C.length > l)) {
                                  for (y = !0, m = 0; m < C.length; m++) {
                                    var N = e._lctf.getInterval(
                                      h.cDef,
                                      i[a + 1 + m]
                                    );
                                    if (x == -1 && h.cDef[N + 2] != C[m]) {
                                      y = !1;
                                      break;
                                    }
                                  }
                                  if (y) {
                                    var G = M.substLookupRecords;
                                    for (f = 0; f < G.length; f += 2)
                                      G[f], G[f + 1];
                                  }
                                }
                              }
                            else if (s.ltype == 6 && h.fmt == 3) {
                              if (
                                !e.U._glsCovered(
                                  i,
                                  h.backCvg,
                                  a - h.backCvg.length
                                ) ||
                                !e.U._glsCovered(i, h.inptCvg, a) ||
                                !e.U._glsCovered(
                                  i,
                                  h.ahedCvg,
                                  a + h.inptCvg.length
                                )
                              )
                                continue;
                              var U = h.lookupRec;
                              for (w = 0; w < U.length; w += 2) {
                                x = U[w];
                                var I = o[U[w + 1]];
                                e.U._applySubs(i, a + x, I, o);
                              }
                            }
                          }
                        }
                    }),
                    (e.U._glsCovered = function (i, a, s) {
                      for (var o = 0; o < a.length; o++)
                        if (e._lctf.coverageIndex(a[o], i[s + o]) == -1)
                          return !1;
                      return !0;
                    }),
                    (e.U.glyphsToPath = function (i, a, s) {
                      for (
                        var o = { cmds: [], crds: [] }, l = 0, u = 0;
                        u < a.length;
                        u++
                      ) {
                        var c = a[u];
                        if (c != -1) {
                          for (
                            var h =
                                u < a.length - 1 && a[u + 1] != -1
                                  ? a[u + 1]
                                  : 0,
                              d = e.U.glyphToPath(i, c),
                              f = 0;
                            f < d.crds.length;
                            f += 2
                          )
                            o.crds.push(d.crds[f] + l),
                              o.crds.push(d.crds[f + 1]);
                          for (
                            s && o.cmds.push(s), f = 0;
                            f < d.cmds.length;
                            f++
                          )
                            o.cmds.push(d.cmds[f]);
                          s && o.cmds.push("X"),
                            (l += i.hmtx.aWidth[c]),
                            u < a.length - 1 &&
                              (l += e.U.getPairAdjustment(i, c, h));
                        }
                      }
                      return o;
                    }),
                    (e.U.P = {}),
                    (e.U.P.moveTo = function (i, a, s) {
                      i.cmds.push("M"), i.crds.push(a, s);
                    }),
                    (e.U.P.lineTo = function (i, a, s) {
                      i.cmds.push("L"), i.crds.push(a, s);
                    }),
                    (e.U.P.curveTo = function (i, a, s, o, l, u, c) {
                      i.cmds.push("C"), i.crds.push(a, s, o, l, u, c);
                    }),
                    (e.U.P.qcurveTo = function (i, a, s, o, l) {
                      i.cmds.push("Q"), i.crds.push(a, s, o, l);
                    }),
                    (e.U.P.closePath = function (i) {
                      i.cmds.push("Z");
                    }),
                    (e.U._drawCFF = function (i, a, s, o, l) {
                      for (
                        var u = a.stack,
                          c = a.nStems,
                          h = a.haveWidth,
                          d = a.width,
                          f = a.open,
                          g = 0,
                          p = a.x,
                          y = a.y,
                          v = 0,
                          m = 0,
                          x = 0,
                          _ = 0,
                          b = 0,
                          w = 0,
                          M = 0,
                          C = 0,
                          N = 0,
                          G = 0,
                          U = { val: 0, size: 0 };
                        g < i.length;

                      ) {
                        e.CFF.getCharString(i, g, U);
                        var I = U.val;
                        if (((g += U.size), I == "o1" || I == "o18"))
                          u.length % 2 != 0 &&
                            !h &&
                            (d = u.shift() + o.nominalWidthX),
                            (c += u.length >> 1),
                            (u.length = 0),
                            (h = !0);
                        else if (I == "o3" || I == "o23")
                          u.length % 2 != 0 &&
                            !h &&
                            (d = u.shift() + o.nominalWidthX),
                            (c += u.length >> 1),
                            (u.length = 0),
                            (h = !0);
                        else if (I == "o4")
                          u.length > 1 &&
                            !h &&
                            ((d = u.shift() + o.nominalWidthX), (h = !0)),
                            f && e.U.P.closePath(l),
                            (y += u.pop()),
                            e.U.P.moveTo(l, p, y),
                            (f = !0);
                        else if (I == "o5")
                          for (; u.length > 0; )
                            (p += u.shift()),
                              (y += u.shift()),
                              e.U.P.lineTo(l, p, y);
                        else if (I == "o6" || I == "o7")
                          for (
                            var F = u.length, T = I == "o6", O = 0;
                            O < F;
                            O++
                          ) {
                            var k = u.shift();
                            T ? (p += k) : (y += k),
                              (T = !T),
                              e.U.P.lineTo(l, p, y);
                          }
                        else if (I == "o8" || I == "o24") {
                          F = u.length;
                          for (var P = 0; P + 6 <= F; )
                            (v = p + u.shift()),
                              (m = y + u.shift()),
                              (x = v + u.shift()),
                              (_ = m + u.shift()),
                              (p = x + u.shift()),
                              (y = _ + u.shift()),
                              e.U.P.curveTo(l, v, m, x, _, p, y),
                              (P += 6);
                          I == "o24" &&
                            ((p += u.shift()),
                            (y += u.shift()),
                            e.U.P.lineTo(l, p, y));
                        } else {
                          if (I == "o11") break;
                          if (
                            I == "o1234" ||
                            I == "o1235" ||
                            I == "o1236" ||
                            I == "o1237"
                          )
                            I == "o1234" &&
                              ((m = y),
                              (x = (v = p + u.shift()) + u.shift()),
                              (G = _ = m + u.shift()),
                              (w = _),
                              (C = y),
                              (p =
                                (M =
                                  (b = (N = x + u.shift()) + u.shift()) +
                                  u.shift()) + u.shift()),
                              e.U.P.curveTo(l, v, m, x, _, N, G),
                              e.U.P.curveTo(l, b, w, M, C, p, y)),
                              I == "o1235" &&
                                ((v = p + u.shift()),
                                (m = y + u.shift()),
                                (x = v + u.shift()),
                                (_ = m + u.shift()),
                                (N = x + u.shift()),
                                (G = _ + u.shift()),
                                (b = N + u.shift()),
                                (w = G + u.shift()),
                                (M = b + u.shift()),
                                (C = w + u.shift()),
                                (p = M + u.shift()),
                                (y = C + u.shift()),
                                u.shift(),
                                e.U.P.curveTo(l, v, m, x, _, N, G),
                                e.U.P.curveTo(l, b, w, M, C, p, y)),
                              I == "o1236" &&
                                ((v = p + u.shift()),
                                (m = y + u.shift()),
                                (x = v + u.shift()),
                                (G = _ = m + u.shift()),
                                (w = _),
                                (M =
                                  (b = (N = x + u.shift()) + u.shift()) +
                                  u.shift()),
                                (C = w + u.shift()),
                                (p = M + u.shift()),
                                e.U.P.curveTo(l, v, m, x, _, N, G),
                                e.U.P.curveTo(l, b, w, M, C, p, y)),
                              I == "o1237" &&
                                ((v = p + u.shift()),
                                (m = y + u.shift()),
                                (x = v + u.shift()),
                                (_ = m + u.shift()),
                                (N = x + u.shift()),
                                (G = _ + u.shift()),
                                (b = N + u.shift()),
                                (w = G + u.shift()),
                                (M = b + u.shift()),
                                (C = w + u.shift()),
                                Math.abs(M - p) > Math.abs(C - y)
                                  ? (p = M + u.shift())
                                  : (y = C + u.shift()),
                                e.U.P.curveTo(l, v, m, x, _, N, G),
                                e.U.P.curveTo(l, b, w, M, C, p, y));
                          else if (I == "o14") {
                            if (
                              (u.length > 0 &&
                                !h &&
                                ((d = u.shift() + s.nominalWidthX), (h = !0)),
                              u.length == 4)
                            ) {
                              var E = u.shift(),
                                z = u.shift(),
                                A = u.shift(),
                                D = u.shift(),
                                V = e.CFF.glyphBySE(s, A),
                                K = e.CFF.glyphBySE(s, D);
                              e.U._drawCFF(s.CharStrings[V], a, s, o, l),
                                (a.x = E),
                                (a.y = z),
                                e.U._drawCFF(s.CharStrings[K], a, s, o, l);
                            }
                            f && (e.U.P.closePath(l), (f = !1));
                          } else if (I == "o19" || I == "o20")
                            u.length % 2 != 0 &&
                              !h &&
                              (d = u.shift() + o.nominalWidthX),
                              (c += u.length >> 1),
                              (u.length = 0),
                              (h = !0),
                              (g += (c + 7) >> 3);
                          else if (I == "o21")
                            u.length > 2 &&
                              !h &&
                              ((d = u.shift() + o.nominalWidthX), (h = !0)),
                              (y += u.pop()),
                              (p += u.pop()),
                              f && e.U.P.closePath(l),
                              e.U.P.moveTo(l, p, y),
                              (f = !0);
                          else if (I == "o22")
                            u.length > 1 &&
                              !h &&
                              ((d = u.shift() + o.nominalWidthX), (h = !0)),
                              (p += u.pop()),
                              f && e.U.P.closePath(l),
                              e.U.P.moveTo(l, p, y),
                              (f = !0);
                          else if (I == "o25") {
                            for (; u.length > 6; )
                              (p += u.shift()),
                                (y += u.shift()),
                                e.U.P.lineTo(l, p, y);
                            (v = p + u.shift()),
                              (m = y + u.shift()),
                              (x = v + u.shift()),
                              (_ = m + u.shift()),
                              (p = x + u.shift()),
                              (y = _ + u.shift()),
                              e.U.P.curveTo(l, v, m, x, _, p, y);
                          } else if (I == "o26")
                            for (
                              u.length % 2 && (p += u.shift());
                              u.length > 0;

                            )
                              (v = p),
                                (m = y + u.shift()),
                                (p = x = v + u.shift()),
                                (y = (_ = m + u.shift()) + u.shift()),
                                e.U.P.curveTo(l, v, m, x, _, p, y);
                          else if (I == "o27")
                            for (
                              u.length % 2 && (y += u.shift());
                              u.length > 0;

                            )
                              (m = y),
                                (x = (v = p + u.shift()) + u.shift()),
                                (_ = m + u.shift()),
                                (p = x + u.shift()),
                                (y = _),
                                e.U.P.curveTo(l, v, m, x, _, p, y);
                          else if (I == "o10" || I == "o29") {
                            var B = I == "o10" ? o : s;
                            if (u.length == 0)
                              console.debug("error: empty stack");
                            else {
                              var Y = u.pop(),
                                R = B.Subrs[Y + B.Bias];
                              (a.x = p),
                                (a.y = y),
                                (a.nStems = c),
                                (a.haveWidth = h),
                                (a.width = d),
                                (a.open = f),
                                e.U._drawCFF(R, a, s, o, l),
                                (p = a.x),
                                (y = a.y),
                                (c = a.nStems),
                                (h = a.haveWidth),
                                (d = a.width),
                                (f = a.open);
                            }
                          } else if (I == "o30" || I == "o31") {
                            var L = u.length,
                              Z = ((P = 0), I == "o31");
                            for (P += L - (F = -3 & L); P < F; )
                              Z
                                ? ((m = y),
                                  (x = (v = p + u.shift()) + u.shift()),
                                  (y = (_ = m + u.shift()) + u.shift()),
                                  F - P == 5
                                    ? ((p = x + u.shift()), P++)
                                    : (p = x),
                                  (Z = !1))
                                : ((v = p),
                                  (m = y + u.shift()),
                                  (x = v + u.shift()),
                                  (_ = m + u.shift()),
                                  (p = x + u.shift()),
                                  F - P == 5
                                    ? ((y = _ + u.shift()), P++)
                                    : (y = _),
                                  (Z = !0)),
                                e.U.P.curveTo(l, v, m, x, _, p, y),
                                (P += 4);
                          } else {
                            if ((I + "").charAt(0) == "o")
                              throw (
                                (console.debug("Unknown operation: " + I, i), I)
                              );
                            u.push(I);
                          }
                        }
                      }
                      (a.x = p),
                        (a.y = y),
                        (a.nStems = c),
                        (a.haveWidth = h),
                        (a.width = d),
                        (a.open = f);
                    });
                  var t = e,
                    r = { Typr: t };
                  return (
                    (n.Typr = t),
                    (n.default = r),
                    Object.defineProperty(n, "__esModule", { value: !0 }),
                    n
                  );
                })({}).Typr
              );
            },
            function () {
              return (function (n) {
                var e = Uint8Array,
                  t = Uint16Array,
                  r = Uint32Array,
                  i = new e([
                    0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3,
                    4, 4, 4, 4, 5, 5, 5, 5, 0, 0, 0, 0,
                  ]),
                  a = new e([
                    0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8,
                    9, 9, 10, 10, 11, 11, 12, 12, 13, 13, 0, 0,
                  ]),
                  s = new e([
                    16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14,
                    1, 15,
                  ]),
                  o = function (I, F) {
                    for (var T = new t(31), O = 0; O < 31; ++O)
                      T[O] = F += 1 << I[O - 1];
                    var k = new r(T[30]);
                    for (O = 1; O < 30; ++O)
                      for (var P = T[O]; P < T[O + 1]; ++P)
                        k[P] = ((P - T[O]) << 5) | O;
                    return [T, k];
                  },
                  l = o(i, 2),
                  u = l[0],
                  c = l[1];
                (u[28] = 258), (c[258] = 28);
                for (
                  var h = o(a, 0)[0], d = new t(32768), f = 0;
                  f < 32768;
                  ++f
                ) {
                  var g = ((43690 & f) >>> 1) | ((21845 & f) << 1);
                  (g =
                    ((61680 &
                      (g = ((52428 & g) >>> 2) | ((13107 & g) << 2))) >>>
                      4) |
                    ((3855 & g) << 4)),
                    (d[f] = (((65280 & g) >>> 8) | ((255 & g) << 8)) >>> 1);
                }
                var p = function (I, F, T) {
                    for (var O = I.length, k = 0, P = new t(F); k < O; ++k)
                      ++P[I[k] - 1];
                    var E,
                      z = new t(F);
                    for (k = 0; k < F; ++k) z[k] = (z[k - 1] + P[k - 1]) << 1;
                    if (T) {
                      E = new t(1 << F);
                      var A = 15 - F;
                      for (k = 0; k < O; ++k)
                        if (I[k])
                          for (
                            var D = (k << 4) | I[k],
                              V = F - I[k],
                              K = z[I[k] - 1]++ << V,
                              B = K | ((1 << V) - 1);
                            K <= B;
                            ++K
                          )
                            E[d[K] >>> A] = D;
                    } else
                      for (E = new t(O), k = 0; k < O; ++k)
                        I[k] && (E[k] = d[z[I[k] - 1]++] >>> (15 - I[k]));
                    return E;
                  },
                  y = new e(288);
                for (f = 0; f < 144; ++f) y[f] = 8;
                for (f = 144; f < 256; ++f) y[f] = 9;
                for (f = 256; f < 280; ++f) y[f] = 7;
                for (f = 280; f < 288; ++f) y[f] = 8;
                var v = new e(32);
                for (f = 0; f < 32; ++f) v[f] = 5;
                var m = p(y, 9, 1),
                  x = p(v, 5, 1),
                  _ = function (I) {
                    for (var F = I[0], T = 1; T < I.length; ++T)
                      I[T] > F && (F = I[T]);
                    return F;
                  },
                  b = function (I, F, T) {
                    var O = (F / 8) | 0;
                    return ((I[O] | (I[O + 1] << 8)) >> (7 & F)) & T;
                  },
                  w = function (I, F) {
                    var T = (F / 8) | 0;
                    return (
                      (I[T] | (I[T + 1] << 8) | (I[T + 2] << 16)) >> (7 & F)
                    );
                  },
                  M = [
                    "unexpected EOF",
                    "invalid block type",
                    "invalid length/literal",
                    "invalid distance",
                    "stream finished",
                    "no stream handler",
                    ,
                    "no callback",
                    "invalid UTF-8 data",
                    "extra field too long",
                    "date not in range 1980-2099",
                    "filename too long",
                    "stream finishing",
                    "invalid zip data",
                  ],
                  C = function (I, F, T) {
                    var O = new Error(F || M[I]);
                    if (
                      ((O.code = I),
                      Error.captureStackTrace && Error.captureStackTrace(O, C),
                      !T)
                    )
                      throw O;
                    return O;
                  },
                  N = function (I, F, T) {
                    var O = I.length;
                    if (!O || (T && !T.l && O < 5)) return F || new e(0);
                    var k = !F || T,
                      P = !T || T.i;
                    T || (T = {}), F || (F = new e(3 * O));
                    var E,
                      z = function (Je) {
                        var _t = F.length;
                        if (Je > _t) {
                          var Et = new e(Math.max(2 * _t, Je));
                          Et.set(F), (F = Et);
                        }
                      },
                      A = T.f || 0,
                      D = T.p || 0,
                      V = T.b || 0,
                      K = T.l,
                      B = T.d,
                      Y = T.m,
                      R = T.n,
                      L = 8 * O;
                    do {
                      if (!K) {
                        T.f = A = b(I, D, 1);
                        var Z = b(I, D + 1, 3);
                        if (((D += 3), !Z)) {
                          var re =
                              I[
                                (ue = (((E = D) / 8) | 0) + (7 & E && 1) + 4) -
                                  4
                              ] |
                              (I[ue - 3] << 8),
                            q = ue + re;
                          if (q > O) {
                            P && C(0);
                            break;
                          }
                          k && z(V + re),
                            F.set(I.subarray(ue, q), V),
                            (T.b = V += re),
                            (T.p = D = 8 * q);
                          continue;
                        }
                        if (Z == 1) (K = m), (B = x), (Y = 9), (R = 5);
                        else if (Z == 2) {
                          var Q = b(I, D, 31) + 257,
                            ee = b(I, D + 10, 15) + 4,
                            S = Q + b(I, D + 5, 31) + 1;
                          D += 14;
                          for (
                            var H = new e(S), $ = new e(19), J = 0;
                            J < ee;
                            ++J
                          )
                            $[s[J]] = b(I, D + 3 * J, 7);
                          D += 3 * ee;
                          var te = _($),
                            ne = (1 << te) - 1,
                            de = p($, te, 1);
                          for (J = 0; J < S; ) {
                            var ue,
                              ce = de[b(I, D, ne)];
                            if (((D += 15 & ce), (ue = ce >>> 4) < 16))
                              H[J++] = ue;
                            else {
                              var he = 0,
                                oe = 0;
                              for (
                                ue == 16
                                  ? ((oe = 3 + b(I, D, 3)),
                                    (D += 2),
                                    (he = H[J - 1]))
                                  : ue == 17
                                  ? ((oe = 3 + b(I, D, 7)), (D += 3))
                                  : ue == 18 &&
                                    ((oe = 11 + b(I, D, 127)), (D += 7));
                                oe--;

                              )
                                H[J++] = he;
                            }
                          }
                          var xe = H.subarray(0, Q),
                            Le = H.subarray(Q);
                          (Y = _(xe)),
                            (R = _(Le)),
                            (K = p(xe, Y, 1)),
                            (B = p(Le, R, 1));
                        } else C(1);
                        if (D > L) {
                          P && C(0);
                          break;
                        }
                      }
                      k && z(V + 131072);
                      for (
                        var me = (1 << Y) - 1, _e = (1 << R) - 1, ye = D;
                        ;
                        ye = D
                      ) {
                        var De = (he = K[w(I, D) & me]) >>> 4;
                        if ((D += 15 & he) > L) {
                          P && C(0);
                          break;
                        }
                        if ((he || C(2), De < 256)) F[V++] = De;
                        else {
                          if (De == 256) {
                            (ye = D), (K = null);
                            break;
                          }
                          var fe = De - 254;
                          if (De > 264) {
                            var mt = i[(J = De - 257)];
                            (fe = b(I, D, (1 << mt) - 1) + u[J]), (D += mt);
                          }
                          var ke = B[w(I, D) & _e],
                            Me = ke >>> 4;
                          if (
                            (ke || C(3),
                            (D += 15 & ke),
                            (Le = h[Me]),
                            Me > 3 &&
                              ((mt = a[Me]),
                              (Le += w(I, D) & ((1 << mt) - 1)),
                              (D += mt)),
                            D > L)
                          ) {
                            P && C(0);
                            break;
                          }
                          k && z(V + 131072);
                          for (var Mn = V + fe; V < Mn; V += 4)
                            (F[V] = F[V - Le]),
                              (F[V + 1] = F[V + 1 - Le]),
                              (F[V + 2] = F[V + 2 - Le]),
                              (F[V + 3] = F[V + 3 - Le]);
                          V = Mn;
                        }
                      }
                      (T.l = K),
                        (T.p = ye),
                        (T.b = V),
                        K && ((A = 1), (T.m = Y), (T.d = B), (T.n = R));
                    } while (!A);
                    return V == F.length
                      ? F
                      : (function (Je, _t, Et) {
                          (_t == null || _t < 0) && (_t = 0),
                            (Et == null || Et > Je.length) && (Et = Je.length);
                          var Ot = new (
                            Je instanceof t ? t : Je instanceof r ? r : e
                          )(Et - _t);
                          return Ot.set(Je.subarray(_t, Et)), Ot;
                        })(F, 0, V);
                  },
                  G = new e(0),
                  U = typeof TextDecoder < "u" && new TextDecoder();
                try {
                  U.decode(G, { stream: !0 });
                } catch {}
                return (
                  (n.convert_streams = function (I) {
                    var F = new DataView(I),
                      T = 0;
                    function O() {
                      var Q = F.getUint16(T);
                      return (T += 2), Q;
                    }
                    function k() {
                      var Q = F.getUint32(T);
                      return (T += 4), Q;
                    }
                    function P(Q) {
                      re.setUint16(q, Q), (q += 2);
                    }
                    function E(Q) {
                      re.setUint32(q, Q), (q += 4);
                    }
                    for (
                      var z = {
                          signature: k(),
                          flavor: k(),
                          length: k(),
                          numTables: O(),
                          reserved: O(),
                          totalSfntSize: k(),
                          majorVersion: O(),
                          minorVersion: O(),
                          metaOffset: k(),
                          metaLength: k(),
                          metaOrigLength: k(),
                          privOffset: k(),
                          privLength: k(),
                        },
                        A = 0;
                      Math.pow(2, A) <= z.numTables;

                    )
                      A++;
                    A--;
                    for (
                      var D = 16 * Math.pow(2, A),
                        V = 16 * z.numTables - D,
                        K = 12,
                        B = [],
                        Y = 0;
                      Y < z.numTables;
                      Y++
                    )
                      B.push({
                        tag: k(),
                        offset: k(),
                        compLength: k(),
                        origLength: k(),
                        origChecksum: k(),
                      }),
                        (K += 16);
                    var R,
                      L = new Uint8Array(
                        12 +
                          16 * B.length +
                          B.reduce(function (Q, ee) {
                            return Q + ee.origLength + 4;
                          }, 0)
                      ),
                      Z = L.buffer,
                      re = new DataView(Z),
                      q = 0;
                    return (
                      E(z.flavor),
                      P(z.numTables),
                      P(D),
                      P(A),
                      P(V),
                      B.forEach(function (Q) {
                        E(Q.tag),
                          E(Q.origChecksum),
                          E(K),
                          E(Q.origLength),
                          (Q.outOffset = K),
                          (K += Q.origLength) % 4 != 0 && (K += 4 - (K % 4));
                      }),
                      B.forEach(function (Q) {
                        var ee,
                          S = I.slice(Q.offset, Q.offset + Q.compLength);
                        if (Q.compLength != Q.origLength) {
                          var H = new Uint8Array(Q.origLength);
                          (ee = new Uint8Array(S, 2)), N(ee, H);
                        } else H = new Uint8Array(S);
                        L.set(H, Q.outOffset);
                        var $ = 0;
                        (K = Q.outOffset + Q.origLength) % 4 != 0 &&
                          ($ = 4 - (K % 4)),
                          L.set(
                            new Uint8Array($).buffer,
                            Q.outOffset + Q.origLength
                          ),
                          (R = K + $);
                      }),
                      Z.slice(0, R)
                    );
                  }),
                  Object.defineProperty(n, "__esModule", { value: !0 }),
                  n
                );
              })({}).convert_streams;
            },
            function (n, e) {
              const t = { M: 2, L: 2, Q: 4, C: 6, Z: 0 },
                r = {
                  C: "18g,ca,368,1kz",
                  D: "17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",
                  R: "17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",
                  L: "x9u,jff,a,fd,jv",
                  T: "4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n",
                };
              let i;
              function a(u) {
                if (!i) {
                  const c = { R: 2, L: 1, D: 4, C: 16, U: 32, T: 8 };
                  i = new Map();
                  for (let h in r) {
                    let d = 0;
                    r[h].split(",").forEach((f) => {
                      let [g, p] = f.split("+");
                      (g = parseInt(g, 36)),
                        (p = p ? parseInt(p, 36) : 0),
                        i.set((d += g), c[h]);
                      for (let y = p; y--; ) i.set(++d, c[h]);
                    });
                  }
                }
                return i.get(u) || 32;
              }
              const s = [null, "isol", "init", "fina", "medi"];
              function o(u) {
                const c = new Uint8Array(u.length);
                let h = 32,
                  d = 1,
                  f = -1;
                for (let g = 0; g < u.length; g++) {
                  const p = u.codePointAt(g);
                  let y = 0 | a(p),
                    v = 1;
                  8 & y ||
                    (21 & h
                      ? 22 & y
                        ? ((v = 3), (d !== 1 && d !== 3) || c[f]++)
                        : 33 & y && ((d !== 2 && d !== 4) || c[f]--)
                      : 34 & h && ((d !== 2 && d !== 4) || c[f]--),
                    (d = c[g] = v),
                    (h = y),
                    (f = g),
                    p > 65535 && g++);
                }
                return c;
              }
              function l(u) {
                const c = Object.create(null),
                  h = {
                    unitsPerEm: u.head.unitsPerEm,
                    ascender: u.hhea.ascender,
                    descender: u.hhea.descender,
                    forEachGlyph(d, f, g, p) {
                      let y = 0;
                      const v = (1 / h.unitsPerEm) * f,
                        m = (function (b, w) {
                          const M = [];
                          for (let N = 0; N < w.length; N++) {
                            const G = w.codePointAt(N);
                            G > 65535 && N++, M.push(n.U.codeToGlyph(b, G));
                          }
                          const C = b.GSUB;
                          if (C) {
                            const { lookupList: N, featureList: G } = C;
                            let U;
                            const I =
                                /^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,
                              F = [];
                            G.forEach((T) => {
                              if (I.test(T.tag))
                                for (let O = 0; O < T.tab.length; O++) {
                                  if (F[T.tab[O]]) continue;
                                  F[T.tab[O]] = !0;
                                  const k = N[T.tab[O]],
                                    P = /^(isol|init|fina|medi)$/.test(T.tag);
                                  P && !U && (U = o(w));
                                  for (let E = 0; E < M.length; E++)
                                    (U && P && s[U[E]] !== T.tag) ||
                                      n.U._applySubs(M, E, k, N);
                                }
                            });
                          }
                          return M;
                        })(u, d);
                      let x = 0,
                        _ = -1;
                      return (
                        m.forEach((b, w) => {
                          if (b !== -1) {
                            let M = c[b];
                            if (!M) {
                              const { cmds: C, crds: N } = n.U.glyphToPath(
                                u,
                                b
                              );
                              let G,
                                U,
                                I,
                                F,
                                T = "",
                                O = 0;
                              for (let k = 0, P = C.length; k < P; k++) {
                                const E = t[C[k]];
                                T += C[k];
                                for (let z = 1; z <= E; z++)
                                  T += (z > 1 ? "," : "") + N[O++];
                              }
                              if (N.length) {
                                (G = U = 1 / 0), (I = F = -1 / 0);
                                for (let k = 0, P = N.length; k < P; k += 2) {
                                  let E = N[k],
                                    z = N[k + 1];
                                  E < G && (G = E),
                                    z < U && (U = z),
                                    E > I && (I = E),
                                    z > F && (F = z);
                                }
                              } else G = I = U = F = 0;
                              M = c[b] = {
                                index: b,
                                advanceWidth: u.hmtx.aWidth[b],
                                xMin: G,
                                yMin: U,
                                xMax: I,
                                yMax: F,
                                path: T,
                                pathCommandCount: C.length,
                              };
                            }
                            _ !== -1 &&
                              (y += n.U.getPairAdjustment(u, _, b) * v),
                              p.call(null, M, y, x),
                              M.advanceWidth && (y += M.advanceWidth * v),
                              g && (y += g * f),
                              (_ = b);
                          }
                          x += d.codePointAt(x) > 65535 ? 2 : 1;
                        }),
                        y
                      );
                    },
                  };
                return h;
              }
              return function (u) {
                const c = new Uint8Array(u, 0, 4),
                  h = n._bin.readASCII(c, 0, 4);
                if (h === "wOFF") u = e(u);
                else if (h === "wOF2")
                  throw new Error("woff2 fonts not supported");
                return l(n.parse(u)[0]);
              };
            },
          ],
          init: (n, e, t) => t(n(), e()),
        }),
        Fs = {
          defaultFontURL:
            "https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",
          sdfGlyphSize: 64,
          sdfMargin: 1 / 16,
          sdfExponent: 9,
          textureWidth: 2048,
        },
        eC = new Ce();
      function ms() {
        return (self.performance || Date).now();
      }
      const F1 = Object.create(null);
      function xb(n, e) {
        n = (function (h, d) {
          for (let f in d) d.hasOwnProperty(f) && (h[f] = d[f]);
          return h;
        })({}, n);
        const t = ms();
        if (
          ((n.font = (function (h) {
            return (
              tc ||
                (tc = typeof document > "u" ? {} : document.createElement("a")),
              (tc.href = h),
              tc.href
            );
          })(n.font || Fs.defaultFontURL)),
          (n.text = "" + n.text),
          (n.sdfGlyphSize = n.sdfGlyphSize || Fs.sdfGlyphSize),
          n.colorRanges != null)
        ) {
          let h = {};
          for (let d in n.colorRanges)
            if (n.colorRanges.hasOwnProperty(d)) {
              let f = n.colorRanges[d];
              typeof f != "number" && (f = eC.set(f).getHex()), (h[d] = f);
            }
          n.colorRanges = h;
        }
        Object.freeze(n);
        const { textureWidth: r, sdfExponent: i } = Fs,
          { sdfGlyphSize: a } = n,
          s = (r / a) * 4;
        let o = F1[a];
        if (!o) {
          const h = document.createElement("canvas");
          (h.width = r),
            (h.height = (256 * a) / s),
            (o = F1[a] =
              {
                glyphCount: 0,
                sdfGlyphSize: a,
                sdfCanvas: h,
                sdfTexture: new jt(h, void 0, void 0, void 0, 1006, 1006),
                contextLost: !1,
                glyphsByFont: new Map(),
              }),
            (o.sdfTexture.generateMipmaps = !1),
            (function (d) {
              const f = d.sdfCanvas;
              f.addEventListener("webglcontextlost", (g) => {
                console.log("Context Lost", g),
                  g.preventDefault(),
                  (d.contextLost = !0);
              }),
                f.addEventListener("webglcontextrestored", (g) => {
                  console.log("Context Restored", g), (d.contextLost = !1);
                  const p = [];
                  d.glyphsByFont.forEach((y) => {
                    y.forEach((v) => {
                      p.push(B1(v, d, !0));
                    });
                  }),
                    gi.all(p).then(() => {
                      G1(d), (d.sdfTexture.needsUpdate = !0);
                    });
                });
            })(o);
        }
        const { sdfTexture: l, sdfCanvas: u } = o;
        let c = o.glyphsByFont.get(n.font);
        c || o.glyphsByFont.set(n.font, (c = new Map())),
          nC(n).then((h) => {
            const {
                glyphIds: d,
                glyphPositions: f,
                fontSize: g,
                unitsPerEm: p,
                timings: y,
              } = h,
              v = [],
              m = new Float32Array(4 * d.length),
              x = g / p;
            let _ = 0,
              b = 0;
            const w = ms();
            d.forEach((U, I) => {
              let F = c.get(U);
              if (!F) {
                const { path: P, pathBounds: E } = h.glyphData[U],
                  z =
                    (Math.max(E[2] - E[0], E[3] - E[1]) / a) *
                    (Fs.sdfMargin * a + 0.5),
                  A = o.glyphCount++,
                  D = [E[0] - z, E[1] - z, E[2] + z, E[3] + z];
                c.set(U, (F = { path: P, atlasIndex: A, sdfViewBox: D })),
                  v.push(F);
              }
              const { sdfViewBox: T } = F,
                O = f[b++],
                k = f[b++];
              (m[_++] = O + T[0] * x),
                (m[_++] = k + T[1] * x),
                (m[_++] = O + T[2] * x),
                (m[_++] = k + T[3] * x),
                (d[I] = F.atlasIndex);
            }),
              (y.quads = (y.quads || 0) + (ms() - w));
            const M = ms();
            y.sdf = {};
            const C = u.height,
              N = Math.ceil(o.glyphCount / s),
              G = Math.pow(2, Math.ceil(Math.log2(N * a)));
            G > C &&
              (console.info(`Increasing SDF texture size ${C}->${G}`),
              JE(u, r, G),
              l.dispose()),
              gi
                .all(
                  v.map((U) =>
                    B1(U, o, n.gpuAccelerateSDF).then(({ timing: I }) => {
                      y.sdf[U.atlasIndex] = I;
                    })
                  )
                )
                .then(() => {
                  v.length && !o.contextLost && (G1(o), (l.needsUpdate = !0)),
                    (y.sdfTotal = ms() - M),
                    (y.total = ms() - t),
                    e(
                      Object.freeze({
                        parameters: n,
                        sdfTexture: l,
                        sdfGlyphSize: a,
                        sdfExponent: i,
                        glyphBounds: m,
                        glyphAtlasIndices: d,
                        glyphColors: h.glyphColors,
                        caretPositions: h.caretPositions,
                        caretHeight: h.caretHeight,
                        chunkedBounds: h.chunkedBounds,
                        ascender: h.ascender,
                        descender: h.descender,
                        lineHeight: h.lineHeight,
                        topBaseline: h.topBaseline,
                        blockBounds: h.blockBounds,
                        visibleBounds: h.visibleBounds,
                        timings: h.timings,
                        get totalBounds() {
                          return (
                            console.log(
                              "totalBounds deprecated, use blockBounds instead"
                            ),
                            h.blockBounds
                          );
                        },
                        get totalBlockSize() {
                          console.log(
                            "totalBlockSize deprecated, use blockBounds instead"
                          );
                          const [U, I, F, T] = h.blockBounds;
                          return [F - U, T - I];
                        },
                      })
                    );
                });
          }),
          gi.all([]).then(() => {
            var h;
            o.contextLost ||
              (h = u)._warm ||
              (Vh.webgl.isSupported(h), (h._warm = !0));
          });
      }
      function B1(
        { path: n, atlasIndex: e, sdfViewBox: t },
        { sdfGlyphSize: r, sdfCanvas: i, contextLost: a },
        s
      ) {
        if (a) return Promise.resolve({ timing: -1 });
        const { textureWidth: o, sdfExponent: l } = Fs,
          u = Math.max(t[2] - t[0], t[3] - t[1]),
          c = Math.floor(e / 4);
        return (function (h, d, f, g, p, y, v, m, x, _, b = !0) {
          return b
            ? KE(h, d, f, g, p, y, v, m, x, _).then(
                null,
                (w) => (
                  z1 ||
                    (console.warn(
                      "WebGL SDF generation failed, falling back to JS",
                      w
                    ),
                    (z1 = !0)),
                  N1(h, d, f, g, p, y, v, m, x, _)
                )
              )
            : N1(h, d, f, g, p, y, v, m, x, _);
        })(
          r,
          r,
          n,
          t,
          u,
          l,
          i,
          (c % (o / r)) * r,
          Math.floor(c / (o / r)) * r,
          e % 4,
          s
        );
      }
      let tc;
      function G1(n) {
        if (typeof createImageBitmap != "function") {
          console.info("Safari<15: applying SDF canvas workaround");
          const { sdfCanvas: e, sdfTexture: t } = n,
            { width: r, height: i } = e,
            a = n.sdfCanvas.getContext("webgl");
          let s = t.image.data;
          (s && s.length === r * i * 4) ||
            ((s = new Uint8Array(r * i * 4)),
            (t.image = { width: r, height: i, data: s }),
            (t.flipY = !1),
            (t.isDataTexture = !0)),
            a.readPixels(0, 0, r, i, a.RGBA, a.UNSIGNED_BYTE, s);
        }
      }
      const tC = ho({
          name: "Typesetter",
          dependencies: [
            Fs,
            QE,
            function (n, e, t) {
              const { defaultFontURL: r } = t,
                i = Object.create(null),
                a = 1 / 0,
                s =
                  /[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,
                o =
                  /[\s\-\u007C\u00AD\u2010\u2012-\u2014\u2027\u2056\u2E17\u2E40]/;
              function l(p, y) {
                p || (p = r);
                let v = i[p];
                v
                  ? v.pending
                    ? v.pending.push(y)
                    : y(v)
                  : ((i[p] = { pending: [y] }),
                    (function (m, x) {
                      (function _() {
                        const b = (w) => {
                          console.error(
                            `Failure loading font ${m}${
                              m === r ? "" : "; trying fallback"
                            }`,
                            w
                          ),
                            m !== r && ((m = r), _());
                        };
                        try {
                          const w = new XMLHttpRequest();
                          w.open("get", m, !0),
                            (w.responseType = "arraybuffer"),
                            (w.onload = function () {
                              if (w.status >= 400) b(new Error(w.statusText));
                              else if (w.status > 0)
                                try {
                                  const M = n(w.response);
                                  x(M);
                                } catch (M) {
                                  b(M);
                                }
                            }),
                            (w.onerror = b),
                            w.send();
                        } catch (w) {
                          b(w);
                        }
                      })();
                    })(p, (m) => {
                      let x = i[p].pending;
                      (i[p] = m), x.forEach((_) => _(m));
                    }));
              }
              function u(
                {
                  text: p = "",
                  font: y = r,
                  sdfGlyphSize: v = 64,
                  fontSize: m = 1,
                  letterSpacing: x = 0,
                  lineHeight: _ = "normal",
                  maxWidth: b = a,
                  direction: w,
                  textAlign: M = "left",
                  textIndent: C = 0,
                  whiteSpace: N = "normal",
                  overflowWrap: G = "normal",
                  anchorX: U = 0,
                  anchorY: I = 0,
                  includeCaretPositions: F = !1,
                  chunkedBoundsSize: T = 8192,
                  colorRanges: O = null,
                },
                k,
                P = !1
              ) {
                const E = d(),
                  z = { fontLoad: 0, typesetting: 0 };
                p.indexOf("\r") > -1 &&
                  (console.info(
                    "Typesetter: got text with \\r chars; normalizing to \\n"
                  ),
                  (p = p
                    .replace(
                      /\r\n/g,
                      `
`
                    )
                    .replace(
                      /\r/g,
                      `
`
                    ))),
                  (m = +m),
                  (x = +x),
                  (b = +b),
                  (_ = _ || "normal"),
                  (C = +C),
                  l(y, (A) => {
                    const D = isFinite(b);
                    let V = null,
                      K = null,
                      B = null,
                      Y = null,
                      R = null,
                      L = null,
                      Z = null,
                      re = 0,
                      q = 0,
                      Q = N !== "nowrap";
                    const { ascender: ee, descender: S, unitsPerEm: H } = A;
                    z.fontLoad = d() - E;
                    const $ = d(),
                      J = m / H;
                    _ === "normal" && (_ = (ee - S) / H);
                    const te = ((_ *= m) - (ee - S) * J) / 2,
                      ne = -(ee * J + te),
                      de = Math.min(_, (ee - S) * J),
                      ue = ((ee + S) / 2) * J - de / 2;
                    let ce = C,
                      he = new f();
                    const oe = [he];
                    A.forEachGlyph(p, m, x, (me, _e, ye) => {
                      const De = p.charAt(ye),
                        fe = me.advanceWidth * J,
                        mt = he.count;
                      let ke;
                      if (
                        ("isEmpty" in me ||
                          ((me.isWhitespace = !!De && /\s/.test(De)),
                          (me.canBreakAfter = !!De && o.test(De)),
                          (me.isEmpty =
                            me.xMin === me.xMax ||
                            me.yMin === me.yMax ||
                            s.test(De))),
                        me.isWhitespace || me.isEmpty || q++,
                        Q && D && !me.isWhitespace && _e + fe + ce > b && mt)
                      ) {
                        if (he.glyphAt(mt - 1).glyphObj.canBreakAfter)
                          (ke = new f()), (ce = -_e);
                        else
                          for (let Mn = mt; Mn--; ) {
                            if (Mn === 0 && G === "break-word") {
                              (ke = new f()), (ce = -_e);
                              break;
                            }
                            if (he.glyphAt(Mn).glyphObj.canBreakAfter) {
                              ke = he.splitAt(Mn + 1);
                              const Je = ke.glyphAt(0).x;
                              ce -= Je;
                              for (let _t = ke.count; _t--; )
                                ke.glyphAt(_t).x -= Je;
                              break;
                            }
                          }
                        ke &&
                          ((he.isSoftWrapped = !0),
                          (he = ke),
                          oe.push(he),
                          (re = b));
                      }
                      let Me = he.glyphAt(he.count);
                      (Me.glyphObj = me),
                        (Me.x = _e + ce),
                        (Me.width = fe),
                        (Me.charIndex = ye),
                        De ===
                          `
` && ((he = new f()), oe.push(he), (ce = -(_e + fe + x * m) + C));
                    }),
                      oe.forEach((me) => {
                        for (let _e = me.count; _e--; ) {
                          let {
                            glyphObj: ye,
                            x: De,
                            width: fe,
                          } = me.glyphAt(_e);
                          if (!ye.isWhitespace)
                            return (
                              (me.width = De + fe),
                              void (me.width > re && (re = me.width))
                            );
                        }
                      });
                    let xe = 0,
                      Le = 0;
                    if (
                      (U &&
                        (typeof U == "number"
                          ? (xe = -U)
                          : typeof U == "string" &&
                            (xe =
                              -re *
                              (U === "left"
                                ? 0
                                : U === "center"
                                ? 0.5
                                : U === "right"
                                ? 1
                                : c(U)))),
                      I)
                    ) {
                      if (typeof I == "number") Le = -I;
                      else if (typeof I == "string") {
                        let me = oe.length * _;
                        Le =
                          I === "top"
                            ? 0
                            : I === "top-baseline"
                            ? -ne
                            : I === "middle"
                            ? me / 2
                            : I === "bottom"
                            ? me
                            : I === "bottom-baseline"
                            ? me - te + S * J
                            : c(I) * me;
                      }
                    }
                    if (!P) {
                      const me = e.getEmbeddingLevels(p, w);
                      (V = new Uint16Array(q)),
                        (K = new Float32Array(2 * q)),
                        (B = {}),
                        (L = [a, a, -1 / 0, -1 / 0]),
                        (Z = []);
                      let _e = ne;
                      F && (R = new Float32Array(3 * p.length)),
                        O && (Y = new Uint8Array(3 * q));
                      let ye,
                        De,
                        fe = 0,
                        mt = -1,
                        ke = -1;
                      if (
                        (oe.forEach((Me, Mn) => {
                          let { count: Je, width: _t } = Me;
                          if (Je > 0) {
                            let Et = 0;
                            for (
                              let lt = Je;
                              lt-- && Me.glyphAt(lt).glyphObj.isWhitespace;

                            )
                              Et++;
                            let Ot = 0,
                              Dt = 0;
                            if (M === "center") Ot = (re - _t) / 2;
                            else if (M === "right") Ot = re - _t;
                            else if (M === "justify" && Me.isSoftWrapped) {
                              let lt = 0;
                              for (let nt = Je - Et; nt--; )
                                Me.glyphAt(nt).glyphObj.isWhitespace && lt++;
                              Dt = (re - _t) / lt;
                            }
                            if (Dt || Ot) {
                              let lt = 0;
                              for (let nt = 0; nt < Je; nt++) {
                                let dn = Me.glyphAt(nt);
                                const kt = dn.glyphObj;
                                (dn.x += Ot + lt),
                                  Dt !== 0 &&
                                    kt.isWhitespace &&
                                    nt < Je - Et &&
                                    ((lt += Dt), (dn.width += Dt));
                              }
                            }
                            const On = e.getReorderSegments(
                              p,
                              me,
                              Me.glyphAt(0).charIndex,
                              Me.glyphAt(Me.count - 1).charIndex
                            );
                            for (let lt = 0; lt < On.length; lt++) {
                              const [nt, dn] = On[lt];
                              let kt = 1 / 0,
                                Xe = -1 / 0;
                              for (let W = 0; W < Je; W++)
                                if (Me.glyphAt(W).charIndex >= nt) {
                                  let ie = W,
                                    se = W;
                                  for (; se < Je; se++) {
                                    let ae = Me.glyphAt(se);
                                    if (ae.charIndex > dn) break;
                                    se < Je - Et &&
                                      ((kt = Math.min(kt, ae.x)),
                                      (Xe = Math.max(Xe, ae.x + ae.width)));
                                  }
                                  for (let ae = ie; ae < se; ae++) {
                                    const le = Me.glyphAt(ae);
                                    le.x = Xe - (le.x + le.width - kt);
                                  }
                                  break;
                                }
                            }
                            let tt;
                            const ia = (lt) => (tt = lt);
                            for (let lt = 0; lt < Je; lt++) {
                              let nt = Me.glyphAt(lt);
                              tt = nt.glyphObj;
                              const dn = tt.index,
                                kt = 1 & me.levels[nt.charIndex];
                              if (kt) {
                                const Xe = e.getMirroredCharacter(
                                  p[nt.charIndex]
                                );
                                Xe && A.forEachGlyph(Xe, 0, 0, ia);
                              }
                              if (F) {
                                const { charIndex: Xe } = nt,
                                  W = nt.x + xe,
                                  ie = nt.x + nt.width + xe;
                                (R[3 * Xe] = kt ? ie : W),
                                  (R[3 * Xe + 1] = kt ? W : ie),
                                  (R[3 * Xe + 2] = _e + ue + Le);
                                const se = Xe - mt;
                                se > 1 && h(R, mt, se), (mt = Xe);
                              }
                              if (O) {
                                const { charIndex: Xe } = nt;
                                for (; Xe > ke; )
                                  ke++, O.hasOwnProperty(ke) && (De = O[ke]);
                              }
                              if (!tt.isWhitespace && !tt.isEmpty) {
                                const Xe = fe++;
                                B[dn] ||
                                  (B[dn] = {
                                    path: tt.path,
                                    pathBounds: [
                                      tt.xMin,
                                      tt.yMin,
                                      tt.xMax,
                                      tt.yMax,
                                    ],
                                  });
                                const W = nt.x + xe,
                                  ie = _e + Le;
                                (K[2 * Xe] = W), (K[2 * Xe + 1] = ie);
                                const se = W + tt.xMin * J,
                                  ae = ie + tt.yMin * J,
                                  le = W + tt.xMax * J,
                                  Se = ie + tt.yMax * J;
                                se < L[0] && (L[0] = se),
                                  ae < L[1] && (L[1] = ae),
                                  le > L[2] && (L[2] = le),
                                  Se > L[3] && (L[3] = Se),
                                  Xe % T == 0 &&
                                    ((ye = {
                                      start: Xe,
                                      end: Xe,
                                      rect: [a, a, -1 / 0, -1 / 0],
                                    }),
                                    Z.push(ye)),
                                  ye.end++;
                                const Ee = ye.rect;
                                if (
                                  (se < Ee[0] && (Ee[0] = se),
                                  ae < Ee[1] && (Ee[1] = ae),
                                  le > Ee[2] && (Ee[2] = le),
                                  Se > Ee[3] && (Ee[3] = Se),
                                  (V[Xe] = dn),
                                  O)
                                ) {
                                  const Re = 3 * Xe;
                                  (Y[Re] = (De >> 16) & 255),
                                    (Y[Re + 1] = (De >> 8) & 255),
                                    (Y[Re + 2] = 255 & De);
                                }
                              }
                            }
                          }
                          _e -= _;
                        }),
                        R)
                      ) {
                        const Me = p.length - mt;
                        Me > 1 && h(R, mt, Me);
                      }
                    }
                    (z.typesetting = d() - $),
                      k({
                        glyphIds: V,
                        glyphPositions: K,
                        glyphData: B,
                        caretPositions: R,
                        caretHeight: de,
                        glyphColors: Y,
                        chunkedBounds: Z,
                        fontSize: m,
                        unitsPerEm: H,
                        ascender: ee * J,
                        descender: S * J,
                        lineHeight: _,
                        topBaseline: ne,
                        blockBounds: [xe, Le - oe.length * _, xe + re, Le],
                        visibleBounds: L,
                        timings: z,
                      });
                  });
              }
              function c(p) {
                let y = p.match(/^([\d.]+)%$/),
                  v = y ? parseFloat(y[1]) : NaN;
                return isNaN(v) ? 0 : v / 100;
              }
              function h(p, y, v) {
                const m = p[3 * y],
                  x = p[3 * y + 1],
                  _ = p[3 * y + 2],
                  b = (x - m) / v;
                for (let w = 0; w < v; w++) {
                  const M = 3 * (y + w);
                  (p[M] = m + b * w),
                    (p[M + 1] = m + b * (w + 1)),
                    (p[M + 2] = _);
                }
              }
              function d() {
                return (self.performance || Date).now();
              }
              function f() {
                this.data = [];
              }
              const g = ["glyphObj", "x", "width", "charIndex"];
              return (
                (f.prototype = {
                  width: 0,
                  isSoftWrapped: !1,
                  get count() {
                    return Math.ceil(this.data.length / g.length);
                  },
                  glyphAt(p) {
                    let y = f.flyweight;
                    return (y.data = this.data), (y.index = p), y;
                  },
                  splitAt(p) {
                    let y = new f();
                    return (y.data = this.data.splice(p * g.length)), y;
                  },
                }),
                (f.flyweight = g.reduce(
                  (p, y, v, m) => (
                    Object.defineProperty(p, y, {
                      get() {
                        return this.data[this.index * g.length + v];
                      },
                      set(x) {
                        this.data[this.index * g.length + v] = x;
                      },
                    }),
                    p
                  ),
                  { data: null, index: 0 }
                )),
                {
                  typeset: u,
                  measure: function (p, y) {
                    u(
                      p,
                      (v) => {
                        const [m, x, _, b] = v.blockBounds;
                        y({ width: _ - m, height: b - x });
                      },
                      { metricsOnly: !0 }
                    );
                  },
                  loadFont: l,
                }
              );
            },
            function () {
              var n = (function (e) {
                var t = {
                    R: "13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",
                    EN: "1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",
                    ES: "17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",
                    ET: "z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",
                    AN: "16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",
                    CS: "18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",
                    B: "a,3,f+2,2v,690",
                    S: "9,2,k",
                    WS: "c,k,4f4,1vk+a,u,1j,335",
                    ON: "x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",
                    BN: "0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",
                    NSM: "lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",
                    AL: "16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",
                    LRO: "6ct",
                    RLO: "6cu",
                    LRE: "6cq",
                    RLE: "6cr",
                    PDF: "6cs",
                    LRI: "6ee",
                    RLI: "6ef",
                    FSI: "6eg",
                    PDI: "6eh",
                  },
                  r = {},
                  i = {};
                (r.L = 1),
                  (i[1] = "L"),
                  Object.keys(t).forEach(function (ee, S) {
                    (r[ee] = 1 << (S + 1)), (i[r[ee]] = ee);
                  }),
                  Object.freeze(r);
                var a = r.LRI | r.RLI | r.FSI,
                  s = r.L | r.R | r.AL,
                  o = r.B | r.S | r.WS | r.ON | r.FSI | r.LRI | r.RLI | r.PDI,
                  l = r.BN | r.RLE | r.LRE | r.RLO | r.LRO | r.PDF,
                  u = r.S | r.WS | r.B | a | r.PDI | l,
                  c = null;
                function h(ee) {
                  return (
                    (function () {
                      if (!c) {
                        c = new Map();
                        var S = function ($) {
                          if (t.hasOwnProperty($)) {
                            var J = 0;
                            t[$].split(",").forEach(function (te) {
                              var ne = te.split("+"),
                                de = ne[0],
                                ue = ne[1];
                              (de = parseInt(de, 36)),
                                (ue = ue ? parseInt(ue, 36) : 0),
                                c.set((J += de), r[$]);
                              for (var ce = 0; ce < ue; ce++) c.set(++J, r[$]);
                            });
                          }
                        };
                        for (var H in t) S(H);
                      }
                    })(),
                    c.get(ee.codePointAt(0)) || r.L
                  );
                }
                var d,
                  f,
                  g,
                  p =
                    "14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",
                  y =
                    "6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye";
                function v(ee, S) {
                  var H,
                    $ = 0,
                    J = new Map(),
                    te = S && new Map();
                  return (
                    ee.split(",").forEach(function ne(de) {
                      if (de.indexOf("+") !== -1)
                        for (var ue = +de; ue--; ) ne(H);
                      else {
                        H = de;
                        var ce = de.split(">"),
                          he = ce[0],
                          oe = ce[1];
                        (he = String.fromCodePoint(($ += parseInt(he, 36)))),
                          (oe = String.fromCodePoint(($ += parseInt(oe, 36)))),
                          J.set(he, oe),
                          S && te.set(oe, he);
                      }
                    }),
                    { map: J, reverseMap: te }
                  );
                }
                function m() {
                  if (!d) {
                    var ee = v(p, !0),
                      S = ee.map,
                      H = ee.reverseMap;
                    (d = S), (f = H), (g = v(y, !1).map);
                  }
                }
                function x(ee) {
                  return m(), d.get(ee) || null;
                }
                function _(ee) {
                  return m(), f.get(ee) || null;
                }
                function b(ee) {
                  return m(), g.get(ee) || null;
                }
                var w = r.L,
                  M = r.R,
                  C = r.EN,
                  N = r.ES,
                  G = r.ET,
                  U = r.AN,
                  I = r.CS,
                  F = r.B,
                  T = r.S,
                  O = r.ON,
                  k = r.BN,
                  P = r.NSM,
                  E = r.AL,
                  z = r.LRO,
                  A = r.RLO,
                  D = r.LRE,
                  V = r.RLE,
                  K = r.PDF,
                  B = r.LRI,
                  Y = r.RLI,
                  R = r.FSI,
                  L = r.PDI,
                  Z;
                function re(ee) {
                  return (
                    (function () {
                      if (!Z) {
                        var S = v(
                            "14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",
                            !0
                          ),
                          H = S.map;
                        S.reverseMap.forEach(function ($, J) {
                          H.set(J, $);
                        }),
                          (Z = H);
                      }
                    })(),
                    Z.get(ee) || null
                  );
                }
                function q(ee, S, H, $) {
                  var J = ee.length;
                  (H = Math.max(0, H == null ? 0 : +H)),
                    ($ = Math.min(J - 1, $ == null ? J - 1 : +$));
                  var te = [];
                  return (
                    S.paragraphs.forEach(function (ne) {
                      var de = Math.max(H, ne.start),
                        ue = Math.min($, ne.end);
                      if (de < ue) {
                        for (
                          var ce = S.levels.slice(de, ue + 1), he = ue;
                          he >= de && h(ee[he]) & u;
                          he--
                        )
                          ce[he] = ne.level;
                        for (
                          var oe = ne.level, xe = 1 / 0, Le = 0;
                          Le < ce.length;
                          Le++
                        ) {
                          var me = ce[Le];
                          me > oe && (oe = me), me < xe && (xe = 1 | me);
                        }
                        for (var _e = oe; _e >= xe; _e--)
                          for (var ye = 0; ye < ce.length; ye++)
                            if (ce[ye] >= _e) {
                              for (
                                var De = ye;
                                ye + 1 < ce.length && ce[ye + 1] >= _e;

                              )
                                ye++;
                              ye > De && te.push([De + H, ye + H]);
                            }
                      }
                    }),
                    te
                  );
                }
                function Q(ee, S, H, $) {
                  for (
                    var J = q(ee, S, H, $), te = [], ne = 0;
                    ne < ee.length;
                    ne++
                  )
                    te[ne] = ne;
                  return (
                    J.forEach(function (de) {
                      for (
                        var ue = de[0],
                          ce = de[1],
                          he = te.slice(ue, ce + 1),
                          oe = he.length;
                        oe--;

                      )
                        te[ce - oe] = he[oe];
                    }),
                    te
                  );
                }
                return (
                  (e.closingToOpeningBracket = _),
                  (e.getBidiCharType = h),
                  (e.getBidiCharTypeName = function (ee) {
                    return i[h(ee)];
                  }),
                  (e.getCanonicalBracket = b),
                  (e.getEmbeddingLevels = function (ee, S) {
                    for (
                      var H = new Uint32Array(ee.length), $ = 0;
                      $ < ee.length;
                      $++
                    )
                      H[$] = h(ee[$]);
                    var J = new Map();
                    function te(nn, pr) {
                      var Tn = H[nn];
                      (H[nn] = pr),
                        J.set(Tn, J.get(Tn) - 1),
                        Tn & o && J.set(o, J.get(o) - 1),
                        J.set(pr, (J.get(pr) || 0) + 1),
                        pr & o && J.set(o, (J.get(o) || 0) + 1);
                    }
                    for (
                      var ne = new Uint8Array(ee.length),
                        de = new Map(),
                        ue = [],
                        ce = null,
                        he = 0;
                      he < ee.length;
                      he++
                    )
                      ce ||
                        ue.push(
                          (ce = {
                            start: he,
                            end: ee.length - 1,
                            level:
                              S === "rtl" ? 1 : S === "ltr" ? 0 : Pg(he, !1),
                          })
                        ),
                        H[he] & F && ((ce.end = he), (ce = null));
                    for (
                      var oe = V | D | A | z | a | L | K | F,
                        xe = function (nn) {
                          return nn + (1 & nn ? 1 : 2);
                        },
                        Le = function (nn) {
                          return nn + (1 & nn ? 2 : 1);
                        },
                        me = 0;
                      me < ue.length;
                      me++
                    ) {
                      var _e = [
                          {
                            _level: (ce = ue[me]).level,
                            _override: 0,
                            _isolate: 0,
                          },
                        ],
                        ye = void 0,
                        De = 0,
                        fe = 0,
                        mt = 0;
                      J.clear();
                      for (var ke = ce.start; ke <= ce.end; ke++) {
                        var Me = H[ke];
                        if (
                          ((ye = _e[_e.length - 1]),
                          J.set(Me, (J.get(Me) || 0) + 1),
                          Me & o && J.set(o, (J.get(o) || 0) + 1),
                          Me & oe)
                        )
                          if (Me & (V | D)) {
                            ne[ke] = ye._level;
                            var Mn = (Me === V ? Le : xe)(ye._level);
                            Mn <= 125 && !De && !fe
                              ? _e.push({
                                  _level: Mn,
                                  _override: 0,
                                  _isolate: 0,
                                })
                              : De || fe++;
                          } else if (Me & (A | z)) {
                            ne[ke] = ye._level;
                            var Je = (Me === A ? Le : xe)(ye._level);
                            Je <= 125 && !De && !fe
                              ? _e.push({
                                  _level: Je,
                                  _override: Me & A ? M : w,
                                  _isolate: 0,
                                })
                              : De || fe++;
                          } else if (Me & a) {
                            Me & R && (Me = Pg(ke + 1, !0) === 1 ? Y : B),
                              (ne[ke] = ye._level),
                              ye._override && te(ke, ye._override);
                            var _t = (Me === Y ? Le : xe)(ye._level);
                            _t <= 125 && De === 0 && fe === 0
                              ? (mt++,
                                _e.push({
                                  _level: _t,
                                  _override: 0,
                                  _isolate: 1,
                                  _isolInitIndex: ke,
                                }))
                              : De++;
                          } else if (Me & L) {
                            if (De > 0) De--;
                            else if (mt > 0) {
                              for (fe = 0; !_e[_e.length - 1]._isolate; )
                                _e.pop();
                              var Et = _e[_e.length - 1]._isolInitIndex;
                              Et != null && (de.set(Et, ke), de.set(ke, Et)),
                                _e.pop(),
                                mt--;
                            }
                            (ye = _e[_e.length - 1]),
                              (ne[ke] = ye._level),
                              ye._override && te(ke, ye._override);
                          } else
                            Me & K
                              ? (De === 0 &&
                                  (fe > 0
                                    ? fe--
                                    : !ye._isolate &&
                                      _e.length > 1 &&
                                      (_e.pop(), (ye = _e[_e.length - 1]))),
                                (ne[ke] = ye._level))
                              : Me & F && (ne[ke] = ce.level);
                        else
                          (ne[ke] = ye._level),
                            ye._override && Me !== k && te(ke, ye._override);
                      }
                      for (
                        var Ot = [], Dt = null, On = ce.start;
                        On <= ce.end;
                        On++
                      ) {
                        var tt = H[On];
                        if (!(tt & l)) {
                          var ia = ne[On],
                            lt = tt & a,
                            nt = tt === L;
                          Dt && ia === Dt._level
                            ? ((Dt._end = On), (Dt._endsWithIsolInit = lt))
                            : Ot.push(
                                (Dt = {
                                  _start: On,
                                  _end: On,
                                  _level: ia,
                                  _startsWithPDI: nt,
                                  _endsWithIsolInit: lt,
                                })
                              );
                        }
                      }
                      for (var dn = [], kt = 0; kt < Ot.length; kt++) {
                        var Xe = Ot[kt];
                        if (
                          !Xe._startsWithPDI ||
                          (Xe._startsWithPDI && !de.has(Xe._start))
                        ) {
                          for (
                            var W = [(Dt = Xe)], ie = void 0;
                            Dt &&
                            Dt._endsWithIsolInit &&
                            (ie = de.get(Dt._end)) != null;

                          )
                            for (var se = kt + 1; se < Ot.length; se++)
                              if (Ot[se]._start === ie) {
                                W.push((Dt = Ot[se]));
                                break;
                              }
                          for (var ae = [], le = 0; le < W.length; le++)
                            for (
                              var Se = W[le], Ee = Se._start;
                              Ee <= Se._end;
                              Ee++
                            )
                              ae.push(Ee);
                          for (
                            var Re = ne[ae[0]], Ue = ce.level, Qe = ae[0] - 1;
                            Qe >= 0;
                            Qe--
                          )
                            if (!(H[Qe] & l)) {
                              Ue = ne[Qe];
                              break;
                            }
                          var ze = ae[ae.length - 1],
                            Pe = ne[ze],
                            bt = ce.level;
                          if (!(H[ze] & a)) {
                            for (var Cr = ze + 1; Cr <= ce.end; Cr++)
                              if (!(H[Cr] & l)) {
                                bt = ne[Cr];
                                break;
                              }
                          }
                          dn.push({
                            _seqIndices: ae,
                            _sosType: Math.max(Ue, Re) % 2 ? M : w,
                            _eosType: Math.max(bt, Pe) % 2 ? M : w,
                          });
                        }
                      }
                      for (var Qt = 0; Qt < dn.length; Qt++) {
                        var aa = dn[Qt],
                          we = aa._seqIndices,
                          sa = aa._sosType,
                          ja = aa._eosType;
                        if (J.get(P))
                          for (var Xa = 0; Xa < we.length; Xa++) {
                            var oa = we[Xa];
                            if (H[oa] & P) {
                              for (var wt = sa, Ar = Xa - 1; Ar >= 0; Ar--)
                                if (!(H[we[Ar]] & l)) {
                                  wt = H[we[Ar]];
                                  break;
                                }
                              te(oa, wt & (a | L) ? O : wt);
                            }
                          }
                        if (J.get(C))
                          for (var en = 0; en < we.length; en++) {
                            var Ae = we[en];
                            if (H[Ae] & C)
                              for (var dt = en - 1; dt >= -1; dt--) {
                                var qa = dt === -1 ? sa : H[we[dt]];
                                if (qa & s) {
                                  qa === E && te(Ae, U);
                                  break;
                                }
                              }
                          }
                        if (J.get(E))
                          for (var xo = 0; xo < we.length; xo++) {
                            var Ql = we[xo];
                            H[Ql] & E && te(Ql, M);
                          }
                        if (J.get(N) || J.get(I))
                          for (var Rr = 1; Rr < we.length - 1; Rr++) {
                            var _o = we[Rr];
                            if (H[_o] & (N | I)) {
                              for (
                                var la = 0, eu = 0, bo = Rr - 1;
                                bo >= 0 && (la = H[we[bo]]) & l;
                                bo--
                              );
                              for (
                                var wo = Rr + 1;
                                wo < we.length && (eu = H[we[wo]]) & l;
                                wo++
                              );
                              la === eu &&
                                (H[_o] === N ? la === C : la & (C | U)) &&
                                te(_o, la);
                            }
                          }
                        if (J.get(C))
                          for (var ua = 0; ua < we.length; ua++) {
                            var tu = we[ua];
                            if (H[tu] & C) {
                              for (
                                var $a = ua - 1;
                                $a >= 0 && H[we[$a]] & (G | l);
                                $a--
                              )
                                te(we[$a], C);
                              for (
                                var Ge = ua + 1;
                                Ge < we.length && H[we[Ge]] & (G | l);
                                Ge++
                              )
                                te(we[Ge], C);
                            }
                          }
                        if (J.get(G) || J.get(N) || J.get(I))
                          for (var ca = 0; ca < we.length; ca++) {
                            var Kn = we[ca];
                            if (H[Kn] & (G | N | I)) {
                              te(Kn, O);
                              for (
                                var Jn = ca - 1;
                                Jn >= 0 && H[we[Jn]] & l;
                                Jn--
                              )
                                te(we[Jn], O);
                              for (
                                var ha = ca + 1;
                                ha < we.length && H[we[ha]] & l;
                                ha++
                              )
                                te(we[ha], O);
                            }
                          }
                        if (J.get(C))
                          for (var Zr = 0, Ya = sa; Zr < we.length; Zr++) {
                            var zt = we[Zr],
                              fr = H[zt];
                            fr & C
                              ? Ya === w && te(zt, w)
                              : fr & s && (Ya = fr);
                          }
                        if (J.get(o)) {
                          for (
                            var Kr = M | C | U,
                              zn = Kr | w,
                              tn = [],
                              Ct = [],
                              Pr = 0;
                            Pr < we.length;
                            Pr++
                          )
                            if (H[we[Pr]] & o) {
                              var da = ee[we[Pr]],
                                So = void 0;
                              if (x(da) !== null) {
                                if (!(Ct.length < 63)) break;
                                Ct.push({ char: da, seqIndex: Pr });
                              } else if ((So = _(da)) !== null)
                                for (var Mo = Ct.length - 1; Mo >= 0; Mo--) {
                                  var Wh = Ct[Mo].char;
                                  if (
                                    Wh === So ||
                                    Wh === _(b(da)) ||
                                    x(b(Wh)) === da
                                  ) {
                                    tn.push([Ct[Mo].seqIndex, Pr]),
                                      (Ct.length = Mo);
                                    break;
                                  }
                                }
                            }
                          tn.sort(function (nn, pr) {
                            return nn[0] - pr[0];
                          });
                          for (var jh = 0; jh < tn.length; jh++) {
                            for (
                              var Mg = tn[jh],
                                To = Mg[0],
                                nu = Mg[1],
                                Tg = !1,
                                Lr = 0,
                                Xh = To + 1;
                              Xh < nu;
                              Xh++
                            ) {
                              var qh = we[Xh];
                              if (H[qh] & zn) {
                                Tg = !0;
                                var Eg = H[qh] & Kr ? M : w;
                                if (Eg === Za(qh)) {
                                  Lr = Eg;
                                  break;
                                }
                              }
                            }
                            if (Tg && !Lr) {
                              Lr = sa;
                              for (var $h = To - 1; $h >= 0; $h--) {
                                var ru = we[$h];
                                if (H[ru] & zn) {
                                  var Cg = H[ru] & Kr ? M : w;
                                  Lr = Cg !== Za(ru) ? Cg : Za(ru);
                                  break;
                                }
                              }
                            }
                            if (Lr) {
                              if (
                                ((H[we[To]] = H[we[nu]] = Lr),
                                Lr !== Za(we[To]))
                              ) {
                                for (var Eo = To + 1; Eo < we.length; Eo++)
                                  if (!(H[we[Eo]] & l)) {
                                    h(ee[we[Eo]]) & P && (H[we[Eo]] = Lr);
                                    break;
                                  }
                              }
                              if (Lr !== Za(we[nu])) {
                                for (var Co = nu + 1; Co < we.length; Co++)
                                  if (!(H[we[Co]] & l)) {
                                    h(ee[we[Co]]) & P && (H[we[Co]] = Lr);
                                    break;
                                  }
                              }
                            }
                          }
                          for (var wi = 0; wi < we.length; wi++)
                            if (H[we[wi]] & o) {
                              for (
                                var Ag = wi, Yh = wi, Zh = sa, Ao = wi - 1;
                                Ao >= 0;
                                Ao--
                              ) {
                                if (!(H[we[Ao]] & l)) {
                                  Zh = H[we[Ao]] & Kr ? M : w;
                                  break;
                                }
                                Ag = Ao;
                              }
                              for (
                                var Rg = ja, Ro = wi + 1;
                                Ro < we.length;
                                Ro++
                              ) {
                                if (!(H[we[Ro]] & (o | l))) {
                                  Rg = H[we[Ro]] & Kr ? M : w;
                                  break;
                                }
                                Yh = Ro;
                              }
                              for (var iu = Ag; iu <= Yh; iu++)
                                H[we[iu]] = Zh === Rg ? Zh : Za(we[iu]);
                              wi = Yh;
                            }
                        }
                      }
                      for (var Nn = ce.start; Nn <= ce.end; Nn++) {
                        var ow = ne[Nn],
                          au = H[Nn];
                        if (
                          (1 & ow
                            ? au & (w | C | U) && ne[Nn]++
                            : au & M
                            ? ne[Nn]++
                            : au & (U | C) && (ne[Nn] += 2),
                          au & l && (ne[Nn] = Nn === 0 ? ce.level : ne[Nn - 1]),
                          Nn === ce.end || h(ee[Nn]) & (T | F))
                        )
                          for (var su = Nn; su >= 0 && h(ee[su]) & u; su--)
                            ne[su] = ce.level;
                      }
                    }
                    return { levels: ne, paragraphs: ue };
                    function Pg(nn, pr) {
                      for (var Tn = nn; Tn < ee.length; Tn++) {
                        var Si = H[Tn];
                        if (Si & (M | E)) return 1;
                        if (Si & (F | w) || (pr && Si === L)) return 0;
                        if (Si & a) {
                          var Lg = lw(Tn);
                          Tn = Lg === -1 ? ee.length : Lg;
                        }
                      }
                      return 0;
                    }
                    function lw(nn) {
                      for (var pr = 1, Tn = nn + 1; Tn < ee.length; Tn++) {
                        var Si = H[Tn];
                        if (Si & F) break;
                        if (Si & L) {
                          if (--pr == 0) return Tn;
                        } else Si & a && pr++;
                      }
                      return -1;
                    }
                    function Za(nn) {
                      return 1 & ne[nn] ? M : w;
                    }
                  }),
                  (e.getMirroredCharacter = re),
                  (e.getMirroredCharactersMap = function (ee, S, H, $) {
                    var J = ee.length;
                    (H = Math.max(0, H == null ? 0 : +H)),
                      ($ = Math.min(J - 1, $ == null ? J - 1 : +$));
                    for (var te = new Map(), ne = H; ne <= $; ne++)
                      if (1 & S[ne]) {
                        var de = re(ee[ne]);
                        de !== null && te.set(ne, de);
                      }
                    return te;
                  }),
                  (e.getReorderSegments = q),
                  (e.getReorderedIndices = Q),
                  (e.getReorderedString = function (ee, S, H, $) {
                    var J = Q(ee, S, H, $),
                      te = [].concat(ee);
                    return (
                      J.forEach(function (ne, de) {
                        te[de] =
                          (1 & S.levels[ne] ? re(ee[ne]) : null) || ee[ne];
                      }),
                      te.join("")
                    );
                  }),
                  (e.openingToClosingBracket = x),
                  Object.defineProperty(e, "__esModule", { value: !0 }),
                  e
                );
              })({});
              return n;
            },
          ],
          init(n, e, t, r) {
            const { defaultFontURL: i } = n;
            return t(e, r(), { defaultFontURL: i });
          },
        }),
        nC = ho({
          name: "Typesetter",
          dependencies: [tC, XE],
          init: (n, e) =>
            function (t) {
              const r = new e();
              return n.typeset(t, r.resolve), r;
            },
          getTransferables(n) {
            const e = [n.glyphPositions.buffer, n.glyphIds.buffer];
            return (
              n.caretPositions && e.push(n.caretPositions.buffer),
              n.glyphColors && e.push(n.glyphColors.buffer),
              e
            );
          },
        }),
        rC = (() => {
          const n = {},
            e = "aTroikaGlyphIndex";
          class t extends vT {
            constructor() {
              super(),
                (this.detail = 1),
                (this.curveRadius = 0),
                (this.groups = [
                  { start: 0, count: 1 / 0, materialIndex: 0 },
                  { start: 0, count: 1 / 0, materialIndex: 1 },
                ]),
                (this.boundingSphere = new lo()),
                (this.boundingBox = new oo());
            }
            computeBoundingSphere() {}
            computeBoundingBox() {}
            setSide(s) {
              const o = this.getIndex().count;
              this.setDrawRange(s === 1 ? o / 2 : 0, s === 2 ? o : o / 2);
            }
            set detail(s) {
              if (s !== this._detail) {
                (this._detail = s), (typeof s != "number" || s < 1) && (s = 1);
                let o = (function (l) {
                  let u = n[l];
                  if (!u) {
                    const c = new Rp(1, 1, l, l),
                      h = c.clone(),
                      d = c.attributes,
                      f = h.attributes,
                      g = new Lt(),
                      p = d.uv.count;
                    for (let y = 0; y < p; y++)
                      (f.position.array[3 * y] *= -1),
                        (f.normal.array[3 * y + 2] *= -1);
                    ["position", "normal", "uv"].forEach((y) => {
                      g.setAttribute(
                        y,
                        new yt([...d[y].array, ...f[y].array], d[y].itemSize)
                      );
                    }),
                      g.setIndex([
                        ...c.index.array,
                        ...h.index.array.map((y) => y + p),
                      ]),
                      g.translate(0.5, 0.5, 0),
                      (u = n[l] = g);
                  }
                  return u;
                })(s);
                ["position", "normal", "uv"].forEach((l) => {
                  this.attributes[l] = o.attributes[l].clone();
                }),
                  this.setIndex(o.getIndex().clone());
              }
            }
            get detail() {
              return this._detail;
            }
            set curveRadius(s) {
              s !== this._curveRadius &&
                ((this._curveRadius = s), this._updateBounds());
            }
            get curveRadius() {
              return this._curveRadius;
            }
            updateGlyphs(s, o, l, u, c) {
              r(this, "aTroikaGlyphBounds", s, 4),
                r(this, e, o, 1),
                r(this, "aTroikaGlyphColor", c, 3),
                (this._blockBounds = l),
                (this._chunkedBounds = u),
                i(this, o.length),
                this._updateBounds();
            }
            _updateBounds() {
              const s = this._blockBounds;
              if (s) {
                const { curveRadius: o, boundingBox: l } = this;
                if (o) {
                  const {
                      PI: u,
                      floor: c,
                      min: h,
                      max: d,
                      sin: f,
                      cos: g,
                    } = Math,
                    p = u / 2,
                    y = 2 * u,
                    v = Math.abs(o),
                    m = s[0] / v,
                    x = s[2] / v,
                    _ =
                      c((m + p) / y) !== c((x + p) / y)
                        ? -v
                        : h(f(m) * v, f(x) * v),
                    b =
                      c((m - p) / y) !== c((x - p) / y)
                        ? v
                        : d(f(m) * v, f(x) * v),
                    w =
                      c((m + u) / y) !== c((x + u) / y)
                        ? 2 * v
                        : d(v - g(m) * v, v - g(x) * v);
                  l.min.set(_, s[1], o < 0 ? -w : 0),
                    l.max.set(b, s[3], o < 0 ? 0 : w);
                } else l.min.set(s[0], s[1], 0), l.max.set(s[2], s[3], 0);
                l.getBoundingSphere(this.boundingSphere);
              }
            }
            applyClipRect(s) {
              let o = this.getAttribute(e).count,
                l = this._chunkedBounds;
              if (l)
                for (let u = l.length; u--; ) {
                  o = l[u].end;
                  let c = l[u].rect;
                  if (c[1] < s.w && c[3] > s.y && c[0] < s.z && c[2] > s.x)
                    break;
                }
              i(this, o);
            }
          }
          function r(a, s, o, l) {
            const u = a.getAttribute(s);
            o
              ? u && u.array.length === o.length
                ? (u.array.set(o), (u.needsUpdate = !0))
                : (a.setAttribute(s, new ZM(o, l)),
                  delete a._maxInstanceCount,
                  a.dispose())
              : u && a.deleteAttribute(s);
          }
          function i(a, s) {
            a[
              a.hasOwnProperty("instanceCount")
                ? "instanceCount"
                : "maxInstancedCount"
            ] = s;
          }
          return (
            t.prototype.setAttribute ||
              (t.prototype.setAttribute = function (a, s) {
                return (this.attributes[a] = s), this;
              }),
            t
          );
        })(),
        zl = (() => {
          const n = new Fa({ color: 16777215, side: 2, transparent: !0 }),
            e = 8421504,
            t = new Te(),
            r = new j(),
            i = new j(),
            a = [],
            s = new j(),
            o = "+x+y";
          function l(v) {
            return Array.isArray(v) ? v[0] : v;
          }
          let u = () => {
              const v = new xt(new Rp(1, 1), n);
              return (u = () => v), v;
            },
            c = () => {
              const v = new xt(new Rp(1, 1, 32, 1), n);
              return (c = () => v), v;
            };
          const h = { type: "syncstart" },
            d = { type: "synccomplete" },
            f = [
              "font",
              "fontSize",
              "letterSpacing",
              "lineHeight",
              "maxWidth",
              "overflowWrap",
              "text",
              "direction",
              "textAlign",
              "textIndent",
              "whiteSpace",
              "anchorX",
              "anchorY",
              "colorRanges",
              "sdfGlyphSize",
            ],
            g = f.concat(
              "material",
              "color",
              "depthOffset",
              "clipRect",
              "curveRadius",
              "orientation",
              "glyphGeometryDetail"
            );
          class p extends xt {
            constructor() {
              super(new rC(), null),
                (this.text = ""),
                (this.anchorX = 0),
                (this.anchorY = 0),
                (this.curveRadius = 0),
                (this.direction = "auto"),
                (this.font = null),
                (this.fontSize = 0.1),
                (this.letterSpacing = 0),
                (this.lineHeight = "normal"),
                (this.maxWidth = 1 / 0),
                (this.overflowWrap = "normal"),
                (this.textAlign = "left"),
                (this.textIndent = 0),
                (this.whiteSpace = "normal"),
                (this.material = null),
                (this.color = null),
                (this.colorRanges = null),
                (this.outlineWidth = 0),
                (this.outlineColor = 0),
                (this.outlineOpacity = 1),
                (this.outlineBlur = 0),
                (this.outlineOffsetX = 0),
                (this.outlineOffsetY = 0),
                (this.strokeWidth = 0),
                (this.strokeColor = e),
                (this.strokeOpacity = 1),
                (this.fillOpacity = 1),
                (this.depthOffset = 0),
                (this.clipRect = null),
                (this.orientation = o),
                (this.glyphGeometryDetail = 1),
                (this.sdfGlyphSize = null),
                (this.gpuAccelerateSDF = !0),
                (this.debugSDF = !1);
            }
            sync(m) {
              this._needsSync &&
                ((this._needsSync = !1),
                this._isSyncing
                  ? (this._queuedSyncs || (this._queuedSyncs = [])).push(m)
                  : ((this._isSyncing = !0),
                    this.dispatchEvent(h),
                    xb(
                      {
                        text: this.text,
                        font: this.font,
                        fontSize: this.fontSize || 0.1,
                        letterSpacing: this.letterSpacing || 0,
                        lineHeight: this.lineHeight || "normal",
                        maxWidth: this.maxWidth,
                        direction: this.direction || "auto",
                        textAlign: this.textAlign,
                        textIndent: this.textIndent,
                        whiteSpace: this.whiteSpace,
                        overflowWrap: this.overflowWrap,
                        anchorX: this.anchorX,
                        anchorY: this.anchorY,
                        colorRanges: this.colorRanges,
                        includeCaretPositions: !0,
                        sdfGlyphSize: this.sdfGlyphSize,
                        gpuAccelerateSDF: this.gpuAccelerateSDF,
                      },
                      (x) => {
                        (this._isSyncing = !1),
                          (this._textRenderInfo = x),
                          this.geometry.updateGlyphs(
                            x.glyphBounds,
                            x.glyphAtlasIndices,
                            x.blockBounds,
                            x.chunkedBounds,
                            x.glyphColors
                          );
                        const _ = this._queuedSyncs;
                        _ &&
                          ((this._queuedSyncs = null),
                          (this._needsSync = !0),
                          this.sync(() => {
                            _.forEach((b) => b && b());
                          })),
                          this.dispatchEvent(d),
                          m && m();
                      }
                    )));
            }
            onBeforeRender(m, x, _, b, w, M) {
              this.sync(),
                w.isTroikaTextMaterial && this._prepareForRender(w),
                (w._hadOwnSide = w.hasOwnProperty("side")),
                this.geometry.setSide((w._actualSide = w.side)),
                (w.side = 0);
            }
            onAfterRender(m, x, _, b, w, M) {
              w._hadOwnSide ? (w.side = w._actualSide) : delete w.side;
            }
            dispose() {
              this.geometry.dispose();
            }
            get textRenderInfo() {
              return this._textRenderInfo || null;
            }
            get material() {
              let m = this._derivedMaterial;
              const x =
                this._baseMaterial ||
                this._defaultMaterial ||
                (this._defaultMaterial = n.clone());
              if (
                ((m && m.baseMaterial === x) ||
                  ((m = this._derivedMaterial =
                    (function (_) {
                      const b = Xp(_, {
                        chained: !0,
                        extensions: { derivatives: !0 },
                        uniforms: {
                          uTroikaSDFTexture: { value: null },
                          uTroikaSDFTextureSize: { value: new ge() },
                          uTroikaSDFGlyphSize: { value: 0 },
                          uTroikaSDFExponent: { value: 0 },
                          uTroikaTotalBounds: { value: new Be(0, 0, 0, 0) },
                          uTroikaClipRect: { value: new Be(0, 0, 0, 0) },
                          uTroikaDistanceOffset: { value: 0 },
                          uTroikaOutlineOpacity: { value: 0 },
                          uTroikaFillOpacity: { value: 1 },
                          uTroikaPositionOffset: { value: new ge() },
                          uTroikaCurveRadius: { value: 0 },
                          uTroikaBlurRadius: { value: 0 },
                          uTroikaStrokeWidth: { value: 0 },
                          uTroikaStrokeColor: { value: new Ce() },
                          uTroikaStrokeOpacity: { value: 1 },
                          uTroikaOrient: { value: new Pn() },
                          uTroikaUseGlyphColors: { value: !0 },
                          uTroikaSDFDebug: { value: !1 },
                        },
                        vertexDefs: `
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,
                        vertexTransform: `
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,
                        fragmentDefs: `
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,
                        fragmentColorTransform: `
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`,
                        customRewriter({ vertexShader: w, fragmentShader: M }) {
                          let C = /\buniform\s+vec3\s+diffuse\b/;
                          return (
                            C.test(M) &&
                              ((M = M.replace(
                                C,
                                "varying vec3 vTroikaGlyphColor"
                              ).replace(/\bdiffuse\b/g, "vTroikaGlyphColor")),
                              C.test(w) ||
                                (w = w.replace(
                                  yb,
                                  `uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`
                                ))),
                            { vertexShader: w, fragmentShader: M }
                          );
                        },
                      });
                      return (
                        (b.transparent = !0),
                        Object.defineProperties(b, {
                          isTroikaTextMaterial: { value: !0 },
                          shadowSide: {
                            get() {
                              return this.side;
                            },
                            set() {},
                          },
                        }),
                        b
                      );
                    })(x)),
                  x.addEventListener("dispose", function _() {
                    x.removeEventListener("dispose", _), m.dispose();
                  })),
                this.outlineWidth ||
                  this.outlineBlur ||
                  this.outlineOffsetX ||
                  this.outlineOffsetY)
              ) {
                let _ = m._outlineMtl;
                return (
                  _ ||
                    ((_ = m._outlineMtl =
                      Object.create(m, { id: { value: m.id + 0.1 } })),
                    (_.isTextOutlineMaterial = !0),
                    (_.depthWrite = !1),
                    (_.map = null),
                    m.addEventListener("dispose", function b() {
                      m.removeEventListener("dispose", b), _.dispose();
                    })),
                  [_, m]
                );
              }
              return m;
            }
            set material(m) {
              m && m.isTroikaTextMaterial
                ? ((this._derivedMaterial = m),
                  (this._baseMaterial = m.baseMaterial))
                : (this._baseMaterial = m);
            }
            get glyphGeometryDetail() {
              return this.geometry.detail;
            }
            set glyphGeometryDetail(m) {
              this.geometry.detail = m;
            }
            get curveRadius() {
              return this.geometry.curveRadius;
            }
            set curveRadius(m) {
              this.geometry.curveRadius = m;
            }
            get customDepthMaterial() {
              return l(this.material).getDepthMaterial();
            }
            get customDistanceMaterial() {
              return l(this.material).getDistanceMaterial();
            }
            _prepareForRender(m) {
              const x = m.isTextOutlineMaterial,
                _ = m.uniforms,
                b = this.textRenderInfo;
              if (b) {
                const { sdfTexture: C, blockBounds: N } = b;
                (_.uTroikaSDFTexture.value = C),
                  _.uTroikaSDFTextureSize.value.set(
                    C.image.width,
                    C.image.height
                  ),
                  (_.uTroikaSDFGlyphSize.value = b.sdfGlyphSize),
                  (_.uTroikaSDFExponent.value = b.sdfExponent),
                  _.uTroikaTotalBounds.value.fromArray(N),
                  (_.uTroikaUseGlyphColors.value = !x && !!b.glyphColors);
                let G,
                  U,
                  I,
                  F = 0,
                  T = 0,
                  O = 0,
                  k = 0,
                  P = 0;
                if (x) {
                  let {
                    outlineWidth: z,
                    outlineOffsetX: A,
                    outlineOffsetY: D,
                    outlineBlur: V,
                    outlineOpacity: K,
                  } = this;
                  (F = this._parsePercent(z) || 0),
                    (T = Math.max(0, this._parsePercent(V) || 0)),
                    (G = K),
                    (k = this._parsePercent(A) || 0),
                    (P = this._parsePercent(D) || 0);
                } else
                  (O = Math.max(0, this._parsePercent(this.strokeWidth) || 0)),
                    O &&
                      ((I = this.strokeColor),
                      _.uTroikaStrokeColor.value.set(I == null ? e : I),
                      (U = this.strokeOpacity),
                      U == null && (U = 1)),
                    (G = this.fillOpacity);
                (_.uTroikaDistanceOffset.value = F),
                  _.uTroikaPositionOffset.value.set(k, P),
                  (_.uTroikaBlurRadius.value = T),
                  (_.uTroikaStrokeWidth.value = O),
                  (_.uTroikaStrokeOpacity.value = U),
                  (_.uTroikaFillOpacity.value = G == null ? 1 : G),
                  (_.uTroikaCurveRadius.value = this.curveRadius || 0);
                let E = this.clipRect;
                if (E && Array.isArray(E) && E.length === 4)
                  _.uTroikaClipRect.value.fromArray(E);
                else {
                  const z = 100 * (this.fontSize || 0.1);
                  _.uTroikaClipRect.value.set(
                    N[0] - z,
                    N[1] - z,
                    N[2] + z,
                    N[3] + z
                  );
                }
                this.geometry.applyClipRect(_.uTroikaClipRect.value);
              }
              (_.uTroikaSDFDebug.value = !!this.debugSDF),
                (m.polygonOffset = !!this.depthOffset),
                (m.polygonOffsetFactor = m.polygonOffsetUnits =
                  this.depthOffset || 0);
              const w = x ? this.outlineColor || 0 : this.color;
              if (w == null) delete m.color;
              else {
                const C = m.hasOwnProperty("color")
                  ? m.color
                  : (m.color = new Ce());
                (w === C._input && typeof w != "object") ||
                  C.set((C._input = w));
              }
              let M = this.orientation || o;
              if (M !== m._orientation) {
                let C = _.uTroikaOrient.value;
                M = M.replace(/[^-+xyz]/g, "");
                let N = M !== o && M.match(/^([-+])([xyz])([-+])([xyz])$/);
                if (N) {
                  let [, G, U, I, F] = N;
                  (r.set(0, 0, 0)[U] = G === "-" ? 1 : -1),
                    (i.set(0, 0, 0)[F] = I === "-" ? -1 : 1),
                    t.lookAt(s, r.cross(i), i),
                    C.setFromMatrix4(t);
                } else C.identity();
                m._orientation = M;
              }
            }
            _parsePercent(m) {
              if (typeof m == "string") {
                let x = m.match(/^(-?[\d.]+)%$/),
                  _ = x ? parseFloat(x[1]) : NaN;
                m = (isNaN(_) ? 0 : _ / 100) * this.fontSize;
              }
              return m;
            }
            localPositionToTextCoords(m, x = new ge()) {
              x.copy(m);
              const _ = this.curveRadius;
              return (
                _ &&
                  (x.x =
                    Math.atan2(m.x, Math.abs(_) - Math.abs(m.z)) * Math.abs(_)),
                x
              );
            }
            worldPositionToTextCoords(m, x = new ge()) {
              return (
                r.copy(m),
                this.localPositionToTextCoords(this.worldToLocal(r), x)
              );
            }
            raycast(m, x) {
              const { textRenderInfo: _, curveRadius: b } = this;
              if (_) {
                const w = _.blockBounds,
                  M = b ? c() : u(),
                  C = M.geometry,
                  { position: N, uv: G } = C.attributes;
                for (let U = 0; U < G.count; U++) {
                  let I = w[0] + G.getX(U) * (w[2] - w[0]);
                  const F = w[1] + G.getY(U) * (w[3] - w[1]);
                  let T = 0;
                  b &&
                    ((T = b - Math.cos(I / b) * b), (I = Math.sin(I / b) * b)),
                    N.setXYZ(U, I, F, T);
                }
                (C.boundingSphere = this.geometry.boundingSphere),
                  (C.boundingBox = this.geometry.boundingBox),
                  (M.matrixWorld = this.matrixWorld),
                  (M.material.side = this.material.side),
                  (a.length = 0),
                  M.raycast(m, a);
                for (let U = 0; U < a.length; U++)
                  (a[U].object = this), x.push(a[U]);
              }
            }
            copy(m) {
              const x = this.geometry;
              return (
                super.copy(m),
                (this.geometry = x),
                g.forEach((_) => {
                  this[_] = m[_];
                }),
                this
              );
            }
            clone() {
              return new this.constructor().copy(this);
            }
          }
          f.forEach((v) => {
            const m = "_private_" + v;
            Object.defineProperty(p.prototype, v, {
              get() {
                return this[m];
              },
              set(x) {
                x !== this[m] && ((this[m] = x), (this._needsSync = !0));
              },
            });
          });
          let y = !1;
          return (
            Object.defineProperty(p.prototype, "anchor", {
              get() {
                return this._deprecated_anchor;
              },
              set(v) {
                (this._deprecated_anchor = v),
                  y ||
                    (console.warn(
                      "TextMesh: `anchor` has been deprecated; use `anchorX` and `anchorY` instead."
                    ),
                    (y = !0)),
                  Array.isArray(v)
                    ? ((this.anchorX = 100 * (+v[0] || 0) + "%"),
                      (this.anchorY = 100 * (+v[1] || 0) + "%"))
                    : (this.anchorX = this.anchorY = 0);
              },
            }),
            p
          );
        })();
      var Ke = ((n) => (
          (n.THEME = "THEME"), (n.SPACE = "SPACE"), (n.TIME = "TIME"), n
        ))(Ke || {}),
        ea = ((n) => (
          (n.DROPLET = "DROPLET"),
          (n.FAKE_DROPLET = "FAKE_DROPLET"),
          (n.FAKE_DROPLET_INNER = "FAKE_DROPLET_INNER"),
          (n.RAY_CAST_TARGET = "RAY_CAST_TARGET"),
          n
        ))(ea || {}),
        Ki = ((n) => (
          (n[(n.THEME_ROOT = 0)] = "THEME_ROOT"),
          (n[(n.THEME_IDLE = 1)] = "THEME_IDLE"),
          (n[(n.THEME_SUB = 2)] = "THEME_SUB"),
          n
        ))(Ki || {}),
        Va = ((n) => (
          (n.SPACE_GLOBE = "SPACE_GLOBE"),
          (n.SITE_ANCHOR = "SITE_ANCHOR"),
          (n.SITE_ANCHOR_GLOW = "SITE_ANCHOR_GLOW"),
          (n.SPACE_GLOW = "SPACE_GLOW"),
          n
        ))(Va || {}),
        yi = ((n) => (
          (n.TUNNEL_SPHERE = "TUNNEL_SPHERE"),
          (n.TIME_SLICE = "TIME_SLICE"),
          (n.TIME_DOT = "TIME_SLICE_DOT"),
          (n.TIME_SLICE_SUB_DOT_TEXT = "TIME_SLICE_SUB_DOT_TEXT"),
          n
        ))(yi || {}),
        H1 = {},
        qp = function (n) {
          return URL.createObjectURL(
            new Blob([n], { type: "text/javascript" })
          );
        },
        _b = function (n) {
          return new Worker(n);
        };
      try {
        URL.revokeObjectURL(qp(""));
      } catch {
        (qp = function (e) {
          return "data:application/javascript;charset=UTF-8," + encodeURI(e);
        }),
          (_b = function (e) {
            return new Worker(e, { type: "module" });
          });
      }
      var Fe = Uint8Array,
        Vt = Uint16Array,
        xi = Uint32Array,
        fo = new Fe([
          0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4,
          4, 5, 5, 5, 5, 0, 0, 0, 0,
        ]),
        po = new Fe([
          0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10,
          10, 11, 11, 12, 12, 13, 13, 0, 0,
        ]),
        Nl = new Fe([
          16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15,
        ]),
        bb = function (n, e) {
          for (var t = new Vt(31), r = 0; r < 31; ++r)
            t[r] = e += 1 << n[r - 1];
          var i = new xi(t[30]);
          for (r = 1; r < 30; ++r)
            for (var a = t[r]; a < t[r + 1]; ++a) i[a] = ((a - t[r]) << 5) | r;
          return [t, i];
        },
        wb = bb(fo, 2),
        fg = wb[0],
        vh = wb[1];
      (fg[28] = 258), (vh[258] = 28);
      for (
        var V1 = bb(po, 0), Sb = V1[0], $p = V1[1], Fl = new Vt(32768), st = 0;
        st < 32768;
        ++st
      ) {
        var xa = ((43690 & st) >>> 1) | ((21845 & st) << 1);
        (xa =
          ((61680 & (xa = ((52428 & xa) >>> 2) | ((13107 & xa) << 2))) >>> 4) |
          ((3855 & xa) << 4)),
          (Fl[st] = (((65280 & xa) >>> 8) | ((255 & xa) << 8)) >>> 1);
      }
      var or = function (n, e, t) {
          for (var r = n.length, i = 0, a = new Vt(e); i < r; ++i)
            ++a[n[i] - 1];
          var s,
            o = new Vt(e);
          for (i = 0; i < e; ++i) o[i] = (o[i - 1] + a[i - 1]) << 1;
          if (t) {
            s = new Vt(1 << e);
            var l = 15 - e;
            for (i = 0; i < r; ++i)
              if (n[i])
                for (
                  var u = (i << 4) | n[i],
                    c = e - n[i],
                    h = o[n[i] - 1]++ << c,
                    d = h | ((1 << c) - 1);
                  h <= d;
                  ++h
                )
                  s[Fl[h] >>> l] = u;
          } else
            for (s = new Vt(r), i = 0; i < r; ++i)
              n[i] && (s[i] = Fl[o[n[i] - 1]++] >>> (15 - n[i]));
          return s;
        },
        _i = new Fe(288);
      for (st = 0; st < 144; ++st) _i[st] = 8;
      for (st = 144; st < 256; ++st) _i[st] = 9;
      for (st = 256; st < 280; ++st) _i[st] = 7;
      for (st = 280; st < 288; ++st) _i[st] = 8;
      var ro = new Fe(32);
      for (st = 0; st < 32; ++st) ro[st] = 5;
      var Mb = or(_i, 9, 0),
        Tb = or(_i, 9, 1),
        Eb = or(ro, 5, 0),
        Cb = or(ro, 5, 1),
        Nc = function (n) {
          for (var e = n[0], t = 1; t < n.length; ++t) n[t] > e && (e = n[t]);
          return e;
        },
        er = function (n, e, t) {
          var r = (e / 8) | 0;
          return ((n[r] | (n[r + 1] << 8)) >> (7 & e)) & t;
        },
        Fc = function (n, e) {
          var t = (e / 8) | 0;
          return (n[t] | (n[t + 1] << 8) | (n[t + 2] << 16)) >> (7 & e);
        },
        Kl = function (n) {
          return ((n / 8) | 0) + (7 & n && 1);
        },
        lr = function (n, e, t) {
          (e == null || e < 0) && (e = 0),
            (t == null || t > n.length) && (t = n.length);
          var r = new (n instanceof Vt ? Vt : n instanceof xi ? xi : Fe)(t - e);
          return r.set(n.subarray(e, t)), r;
        },
        Jl = function (n, e, t) {
          var r = n.length;
          if (!r || (t && !t.l && r < 5)) return e || new Fe(0);
          var i = !e || t,
            a = !t || t.i;
          t || (t = {}), e || (e = new Fe(3 * r));
          var s = function (R) {
              var L = e.length;
              if (R > L) {
                var Z = new Fe(Math.max(2 * L, R));
                Z.set(e), (e = Z);
              }
            },
            o = t.f || 0,
            l = t.p || 0,
            u = t.b || 0,
            c = t.l,
            h = t.d,
            d = t.m,
            f = t.n,
            g = 8 * r;
          do {
            if (!c) {
              t.f = o = er(n, l, 1);
              var p = er(n, l + 1, 3);
              if (((l += 3), !p)) {
                var y = n[(U = Kl(l) + 4) - 4] | (n[U - 3] << 8),
                  v = U + y;
                if (v > r) {
                  if (a) throw "unexpected EOF";
                  break;
                }
                i && s(u + y),
                  e.set(n.subarray(U, v), u),
                  (t.b = u += y),
                  (t.p = l = 8 * v);
                continue;
              }
              if (p == 1) (c = Tb), (h = Cb), (d = 9), (f = 5);
              else {
                if (p != 2) throw "invalid block type";
                var m = er(n, l, 31) + 257,
                  x = er(n, l + 10, 15) + 4,
                  _ = m + er(n, l + 5, 31) + 1;
                l += 14;
                for (var b = new Fe(_), w = new Fe(19), M = 0; M < x; ++M)
                  w[Nl[M]] = er(n, l + 3 * M, 7);
                l += 3 * x;
                var C = Nc(w),
                  N = (1 << C) - 1,
                  G = or(w, C, 1);
                for (M = 0; M < _; ) {
                  var U,
                    I = G[er(n, l, N)];
                  if (((l += 15 & I), (U = I >>> 4) < 16)) b[M++] = U;
                  else {
                    var F = 0,
                      T = 0;
                    for (
                      U == 16
                        ? ((T = 3 + er(n, l, 3)), (l += 2), (F = b[M - 1]))
                        : U == 17
                        ? ((T = 3 + er(n, l, 7)), (l += 3))
                        : U == 18 && ((T = 11 + er(n, l, 127)), (l += 7));
                      T--;

                    )
                      b[M++] = F;
                  }
                }
                var O = b.subarray(0, m),
                  k = b.subarray(m);
                (d = Nc(O)), (f = Nc(k)), (c = or(O, d, 1)), (h = or(k, f, 1));
              }
              if (l > g) {
                if (a) throw "unexpected EOF";
                break;
              }
            }
            i && s(u + 131072);
            for (var P = (1 << d) - 1, E = (1 << f) - 1, z = l; ; z = l) {
              var A = (F = c[Fc(n, l) & P]) >>> 4;
              if ((l += 15 & F) > g) {
                if (a) throw "unexpected EOF";
                break;
              }
              if (!F) throw "invalid length/literal";
              if (A < 256) e[u++] = A;
              else {
                if (A == 256) {
                  (z = l), (c = null);
                  break;
                }
                var D = A - 254;
                if (A > 264) {
                  var V = fo[(M = A - 257)];
                  (D = er(n, l, (1 << V) - 1) + fg[M]), (l += V);
                }
                var K = h[Fc(n, l) & E],
                  B = K >>> 4;
                if (!K) throw "invalid distance";
                if (
                  ((l += 15 & K),
                  (k = Sb[B]),
                  B > 3 &&
                    ((V = po[B]), (k += Fc(n, l) & ((1 << V) - 1)), (l += V)),
                  l > g)
                ) {
                  if (a) throw "unexpected EOF";
                  break;
                }
                i && s(u + 131072);
                for (var Y = u + D; u < Y; u += 4)
                  (e[u] = e[u - k]),
                    (e[u + 1] = e[u + 1 - k]),
                    (e[u + 2] = e[u + 2 - k]),
                    (e[u + 3] = e[u + 3 - k]);
                u = Y;
              }
            }
            (t.l = c),
              (t.p = z),
              (t.b = u),
              c && ((o = 1), (t.m = d), (t.d = h), (t.n = f));
          } while (!o);
          return u == e.length ? e : lr(e, 0, u);
        },
        kr = function (n, e, t) {
          t <<= 7 & e;
          var r = (e / 8) | 0;
          (n[r] |= t), (n[r + 1] |= t >>> 8);
        },
        _s = function (n, e, t) {
          t <<= 7 & e;
          var r = (e / 8) | 0;
          (n[r] |= t), (n[r + 1] |= t >>> 8), (n[r + 2] |= t >>> 16);
        },
        Bc = function (n, e) {
          for (var t = [], r = 0; r < n.length; ++r)
            n[r] && t.push({ s: r, f: n[r] });
          var i = t.length,
            a = t.slice();
          if (!i) return [hi, 0];
          if (i == 1) {
            var s = new Fe(t[0].s + 1);
            return (s[t[0].s] = 1), [s, 1];
          }
          t.sort(function (b, w) {
            return b.f - w.f;
          }),
            t.push({ s: -1, f: 25001 });
          var o = t[0],
            l = t[1],
            u = 0,
            c = 1,
            h = 2;
          for (t[0] = { s: -1, f: o.f + l.f, l: o, r: l }; c != i - 1; )
            (o = t[t[u].f < t[h].f ? u++ : h++]),
              (l = t[u != c && t[u].f < t[h].f ? u++ : h++]),
              (t[c++] = { s: -1, f: o.f + l.f, l: o, r: l });
          var d = a[0].s;
          for (r = 1; r < i; ++r) a[r].s > d && (d = a[r].s);
          var f = new Vt(d + 1),
            g = yh(t[c - 1], f, 0);
          if (g > e) {
            r = 0;
            var p = 0,
              y = g - e,
              v = 1 << y;
            for (
              a.sort(function (b, w) {
                return f[w.s] - f[b.s] || b.f - w.f;
              });
              r < i;
              ++r
            ) {
              var m = a[r].s;
              if (!(f[m] > e)) break;
              (p += v - (1 << (g - f[m]))), (f[m] = e);
            }
            for (p >>>= y; p > 0; ) {
              var x = a[r].s;
              f[x] < e ? (p -= 1 << (e - f[x]++ - 1)) : ++r;
            }
            for (; r >= 0 && p; --r) {
              var _ = a[r].s;
              f[_] == e && (--f[_], ++p);
            }
            g = e;
          }
          return [new Fe(f), g];
        },
        yh = function (n, e, t) {
          return n.s == -1
            ? Math.max(yh(n.l, e, t + 1), yh(n.r, e, t + 1))
            : (e[n.s] = t);
        },
        Yp = function (n) {
          for (var e = n.length; e && !n[--e]; );
          for (
            var t = new Vt(++e),
              r = 0,
              i = n[0],
              a = 1,
              s = function (l) {
                t[r++] = l;
              },
              o = 1;
            o <= e;
            ++o
          )
            if (n[o] == i && o != e) ++a;
            else {
              if (!i && a > 2) {
                for (; a > 138; a -= 138) s(32754);
                a > 2 &&
                  (s(a > 10 ? ((a - 11) << 5) | 28690 : ((a - 3) << 5) | 12305),
                  (a = 0));
              } else if (a > 3) {
                for (s(i), --a; a > 6; a -= 6) s(8304);
                a > 2 && (s(((a - 3) << 5) | 8208), (a = 0));
              }
              for (; a--; ) s(i);
              (a = 1), (i = n[o]);
            }
          return [t.subarray(0, r), e];
        },
        bs = function (n, e) {
          for (var t = 0, r = 0; r < e.length; ++r) t += n[r] * e[r];
          return t;
        },
        dl = function (n, e, t) {
          var r = t.length,
            i = Kl(e + 2);
          (n[i] = 255 & r),
            (n[i + 1] = r >>> 8),
            (n[i + 2] = 255 ^ n[i]),
            (n[i + 3] = 255 ^ n[i + 1]);
          for (var a = 0; a < r; ++a) n[i + a + 4] = t[a];
          return 8 * (i + 4 + r);
        },
        Zp = function (n, e, t, r, i, a, s, o, l, u, c) {
          kr(e, c++, t), ++i[256];
          for (
            var h = Bc(i, 15),
              d = h[0],
              f = h[1],
              g = Bc(a, 15),
              p = g[0],
              y = g[1],
              v = Yp(d),
              m = v[0],
              x = v[1],
              _ = Yp(p),
              b = _[0],
              w = _[1],
              M = new Vt(19),
              C = 0;
            C < m.length;
            ++C
          )
            M[31 & m[C]]++;
          for (C = 0; C < b.length; ++C) M[31 & b[C]]++;
          for (
            var N = Bc(M, 7), G = N[0], U = N[1], I = 19;
            I > 4 && !G[Nl[I - 1]];
            --I
          );
          var F,
            T,
            O,
            k,
            P = (u + 5) << 3,
            E = bs(i, _i) + bs(a, ro) + s,
            z =
              bs(i, d) +
              bs(a, p) +
              s +
              14 +
              3 * I +
              bs(M, G) +
              (2 * M[16] + 3 * M[17] + 7 * M[18]);
          if (P <= E && P <= z) return dl(e, c, n.subarray(l, l + u));
          if ((kr(e, c, 1 + (z < E)), (c += 2), z < E)) {
            (F = or(d, f, 0)), (T = d), (O = or(p, y, 0)), (k = p);
            var A = or(G, U, 0);
            for (
              kr(e, c, x - 257),
                kr(e, c + 5, w - 1),
                kr(e, c + 10, I - 4),
                c += 14,
                C = 0;
              C < I;
              ++C
            )
              kr(e, c + 3 * C, G[Nl[C]]);
            c += 3 * I;
            for (var D = [m, b], V = 0; V < 2; ++V) {
              var K = D[V];
              for (C = 0; C < K.length; ++C) {
                var B = 31 & K[C];
                kr(e, c, A[B]),
                  (c += G[B]),
                  B > 15 && (kr(e, c, (K[C] >>> 5) & 127), (c += K[C] >>> 12));
              }
            }
          } else (F = Mb), (T = _i), (O = Eb), (k = ro);
          for (C = 0; C < o; ++C)
            if (r[C] > 255) {
              (B = (r[C] >>> 18) & 31),
                _s(e, c, F[B + 257]),
                (c += T[B + 257]),
                B > 7 && (kr(e, c, (r[C] >>> 23) & 31), (c += fo[B]));
              var Y = 31 & r[C];
              _s(e, c, O[Y]),
                (c += k[Y]),
                Y > 3 && (_s(e, c, (r[C] >>> 5) & 8191), (c += po[Y]));
            } else _s(e, c, F[r[C]]), (c += T[r[C]]);
          return _s(e, c, F[256]), c + T[256];
        },
        Ab = new xi([
          65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560,
          2117632,
        ]),
        hi = new Fe(0),
        Rb = function (n, e, t, r, i, a) {
          var s = n.length,
            o = new Fe(r + s + 5 * (1 + Math.ceil(s / 7e3)) + i),
            l = o.subarray(r, o.length - i),
            u = 0;
          if (!e || s < 8)
            for (var c = 0; c <= s; c += 65535) {
              var h = c + 65535;
              h < s
                ? (u = dl(l, u, n.subarray(c, h)))
                : ((l[c] = a), (u = dl(l, u, n.subarray(c, s))));
            }
          else {
            for (
              var d = Ab[e - 1],
                f = d >>> 13,
                g = 8191 & d,
                p = (1 << t) - 1,
                y = new Vt(32768),
                v = new Vt(p + 1),
                m = Math.ceil(t / 3),
                x = 2 * m,
                _ = function (ee) {
                  return (n[ee] ^ (n[ee + 1] << m) ^ (n[ee + 2] << x)) & p;
                },
                b = new xi(25e3),
                w = new Vt(288),
                M = new Vt(32),
                C = 0,
                N = 0,
                G = ((c = 0), 0),
                U = 0,
                I = 0;
              c < s;
              ++c
            ) {
              var F = _(c),
                T = 32767 & c,
                O = v[F];
              if (((y[T] = O), (v[F] = T), U <= c)) {
                var k = s - c;
                if ((C > 7e3 || G > 24576) && k > 423) {
                  (u = Zp(n, l, 0, b, w, M, N, G, I, c - I, u)),
                    (G = C = N = 0),
                    (I = c);
                  for (var P = 0; P < 286; ++P) w[P] = 0;
                  for (P = 0; P < 30; ++P) M[P] = 0;
                }
                var E = 2,
                  z = 0,
                  A = g,
                  D = (T - O) & 32767;
                if (k > 2 && F == _(c - D))
                  for (
                    var V = Math.min(f, k) - 1,
                      K = Math.min(32767, c),
                      B = Math.min(258, k);
                    D <= K && --A && T != O;

                  ) {
                    if (n[c + E] == n[c + E - D]) {
                      for (var Y = 0; Y < B && n[c + Y] == n[c + Y - D]; ++Y);
                      if (Y > E) {
                        if (((E = Y), (z = D), Y > V)) break;
                        var R = Math.min(D, Y - 2),
                          L = 0;
                        for (P = 0; P < R; ++P) {
                          var Z = (c - D + P + 32768) & 32767,
                            re = (Z - y[Z] + 32768) & 32767;
                          re > L && ((L = re), (O = Z));
                        }
                      }
                    }
                    D += ((T = O) - (O = y[T]) + 32768) & 32767;
                  }
                if (z) {
                  b[G++] = 268435456 | (vh[E] << 18) | $p[z];
                  var q = 31 & vh[E],
                    Q = 31 & $p[z];
                  (N += fo[q] + po[Q]), ++w[257 + q], ++M[Q], (U = c + E), ++C;
                } else (b[G++] = n[c]), ++w[n[c]];
              }
            }
            (u = Zp(n, l, a, b, w, M, N, G, I, c - I, u)),
              !a && 7 & u && (u = dl(l, u + 1, hi));
          }
          return lr(o, 0, r + Kl(u) + i);
        },
        Pb = (function () {
          for (var n = new xi(256), e = 0; e < 256; ++e) {
            for (var t = e, r = 9; --r; ) t = (1 & t && 3988292384) ^ (t >>> 1);
            n[e] = t;
          }
          return n;
        })(),
        io = function () {
          var n = -1;
          return {
            p: function (e) {
              for (var t = n, r = 0; r < e.length; ++r)
                t = Pb[(255 & t) ^ e[r]] ^ (t >>> 8);
              n = t;
            },
            d: function () {
              return ~n;
            },
          };
        },
        pg = function () {
          var n = 1,
            e = 0;
          return {
            p: function (t) {
              for (var r = n, i = e, a = t.length, s = 0; s != a; ) {
                for (var o = Math.min(s + 2655, a); s < o; ++s) i += r += t[s];
                (r = (65535 & r) + 15 * (r >> 16)),
                  (i = (65535 & i) + 15 * (i >> 16));
              }
              (n = r), (e = i);
            },
            d: function () {
              return (
                ((255 & (n %= 65521)) << 24) |
                ((n >>> 8) << 16) |
                ((255 & (e %= 65521)) << 8) |
                (e >>> 8)
              );
            },
          };
        },
        Wa = function (n, e, t, r, i) {
          return Rb(
            n,
            e.level == null ? 6 : e.level,
            e.mem == null
              ? Math.ceil(1.5 * Math.max(8, Math.min(13, Math.log(n.length))))
              : 12 + e.mem,
            t,
            r,
            !i
          );
        },
        Bl = function (n, e) {
          var t = {};
          for (var r in n) t[r] = n[r];
          for (var r in e) t[r] = e[r];
          return t;
        },
        W1 = function (n, e, t) {
          for (
            var r = n(),
              i = n.toString(),
              a = i
                .slice(i.indexOf("[") + 1, i.lastIndexOf("]"))
                .replace(/ /g, "")
                .split(","),
              s = 0;
            s < r.length;
            ++s
          ) {
            var o = r[s],
              l = a[s];
            if (typeof o == "function") {
              e += ";" + l + "=";
              var u = o.toString();
              if (o.prototype)
                if (u.indexOf("[native code]") != -1) {
                  var c = u.indexOf(" ", 8) + 1;
                  e += u.slice(c, u.indexOf("(", c));
                } else
                  for (var h in ((e += u), o.prototype))
                    e +=
                      ";" +
                      l +
                      ".prototype." +
                      h +
                      "=" +
                      o.prototype[h].toString();
              else e += u;
            } else t[l] = o;
          }
          return [e, t];
        },
        nc = [],
        Lb = function (n, e, t, r) {
          var i;
          if (!nc[t]) {
            for (var a = "", s = {}, o = n.length - 1, l = 0; l < o; ++l)
              (a = (i = W1(n[l], a, s))[0]), (s = i[1]);
            nc[t] = W1(n[o], a, s);
          }
          var u = Bl({}, nc[t][1]);
          return (function (c, h, d, f, g) {
            var p = _b(H1[h] || (H1[h] = qp(c)));
            return (
              (p.onerror = function (y) {
                return g(y.error, null);
              }),
              (p.onmessage = function (y) {
                return g(null, y.data);
              }),
              p.postMessage(d, f),
              p
            );
          })(
            nc[t][0] +
              ";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage=" +
              e.toString() +
              "}",
            t,
            u,
            (function (c) {
              var h = [];
              for (var d in c)
                (c[d] instanceof Fe ||
                  c[d] instanceof Vt ||
                  c[d] instanceof xi) &&
                  h.push((c[d] = new c[d].constructor(c[d])).buffer);
              return h;
            })(u),
            r
          );
        },
        mo = function () {
          return [
            Fe,
            Vt,
            xi,
            fo,
            po,
            Nl,
            fg,
            Sb,
            Tb,
            Cb,
            Fl,
            or,
            Nc,
            er,
            Fc,
            Kl,
            lr,
            Jl,
            Bs,
            ra,
            mg,
          ];
        },
        go = function () {
          return [
            Fe,
            Vt,
            xi,
            fo,
            po,
            Nl,
            vh,
            $p,
            Mb,
            _i,
            Eb,
            ro,
            Fl,
            Ab,
            hi,
            or,
            kr,
            _s,
            Bc,
            yh,
            Yp,
            bs,
            dl,
            Zp,
            Kl,
            lr,
            Rb,
            Wa,
            fl,
            ra,
          ];
        },
        Db = function () {
          return [gg, yg, qe, io, Pb];
        },
        kb = function () {
          return [vg, Ob];
        },
        Ib = function () {
          return [xg, qe, pg];
        },
        Ub = function () {
          return [zb];
        },
        ra = function (n) {
          return postMessage(n, [n.buffer]);
        },
        mg = function (n) {
          return n && n.size && new Fe(n.size);
        },
        vo = function (n, e, t, r, i, a) {
          var s = Lb(t, r, i, function (o, l) {
            s.terminate(), a(o, l);
          });
          return (
            s.postMessage([n, e], e.consume ? [n.buffer] : []),
            function () {
              s.terminate();
            }
          );
        },
        hr = function (n) {
          return (
            (n.ondata = function (e, t) {
              return postMessage([e, t], [e.buffer]);
            }),
            function (e) {
              return n.push(e.data[0], e.data[1]);
            }
          );
        },
        yo = function (n, e, t, r, i) {
          var a,
            s = Lb(n, r, i, function (o, l) {
              o
                ? (s.terminate(), e.ondata.call(e, o))
                : (l[1] && s.terminate(), e.ondata.call(e, o, l[0], l[1]));
            });
          s.postMessage(t),
            (e.push = function (o, l) {
              if (a) throw "stream finished";
              if (!e.ondata) throw "no stream handler";
              s.postMessage([o, (a = l)], [o.buffer]);
            }),
            (e.terminate = function () {
              s.terminate();
            });
        },
        yn = function (n, e) {
          return n[e] | (n[e + 1] << 8);
        },
        St = function (n, e) {
          return (
            (n[e] | (n[e + 1] << 8) | (n[e + 2] << 16) | (n[e + 3] << 24)) >>> 0
          );
        },
        _f = function (n, e) {
          return St(n, e) + 4294967296 * St(n, e + 4);
        },
        qe = function (n, e, t) {
          for (; t; ++e) (n[e] = t), (t >>>= 8);
        },
        gg = function (n, e) {
          var t = e.filename;
          if (
            ((n[0] = 31),
            (n[1] = 139),
            (n[2] = 8),
            (n[8] = e.level < 2 ? 4 : e.level == 9 ? 2 : 0),
            (n[9] = 3),
            e.mtime != 0 &&
              qe(n, 4, Math.floor(new Date(e.mtime || Date.now()) / 1e3)),
            t)
          ) {
            n[3] = 8;
            for (var r = 0; r <= t.length; ++r) n[r + 10] = t.charCodeAt(r);
          }
        },
        vg = function (n) {
          if (n[0] != 31 || n[1] != 139 || n[2] != 8) throw "invalid gzip data";
          var e = n[3],
            t = 10;
          4 & e && (t += n[10] | (2 + (n[11] << 8)));
          for (var r = ((e >> 3) & 1) + ((e >> 4) & 1); r > 0; r -= !n[t++]);
          return t + (2 & e);
        },
        Ob = function (n) {
          var e = n.length;
          return (
            (n[e - 4] |
              (n[e - 3] << 8) |
              (n[e - 2] << 16) |
              (n[e - 1] << 24)) >>>
            0
          );
        },
        yg = function (n) {
          return 10 + ((n.filename && n.filename.length + 1) || 0);
        },
        xg = function (n, e) {
          var t = e.level,
            r = t == 0 ? 0 : t < 6 ? 1 : t == 9 ? 3 : 2;
          (n[0] = 120), (n[1] = (r << 6) | (r ? 32 - 2 * r : 1));
        },
        zb = function (n) {
          if ((15 & n[0]) != 8 || n[0] >>> 4 > 7 || ((n[0] << 8) | n[1]) % 31)
            throw "invalid zlib data";
          if (32 & n[1])
            throw "invalid zlib data: preset dictionaries not supported";
        };
      function _g(n, e) {
        return (
          e || typeof n != "function" || ((e = n), (n = {})),
          (this.ondata = e),
          n
        );
      }
      var $r = (function () {
          function n(e, t) {
            t || typeof e != "function" || ((t = e), (e = {})),
              (this.ondata = t),
              (this.o = e || {});
          }
          return (
            (n.prototype.p = function (e, t) {
              this.ondata(Wa(e, this.o, 0, 0, !t), t);
            }),
            (n.prototype.push = function (e, t) {
              if (this.d) throw "stream finished";
              if (!this.ondata) throw "no stream handler";
              (this.d = t), this.p(e, t || !1);
            }),
            n
          );
        })(),
        Nb = (function () {
          return function (n, e) {
            yo(
              [
                go,
                function () {
                  return [hr, $r];
                },
              ],
              this,
              _g.call(this, n, e),
              function (t) {
                var r = new $r(t.data);
                onmessage = hr(r);
              },
              6
            );
          };
        })();
      function j1(n, e, t) {
        if ((t || ((t = e), (e = {})), typeof t != "function"))
          throw "no callback";
        return vo(
          n,
          e,
          [go],
          function (r) {
            return ra(fl(r.data[0], r.data[1]));
          },
          0,
          t
        );
      }
      function fl(n, e) {
        return Wa(n, e || {}, 0, 0);
      }
      var In = (function () {
          function n(e) {
            (this.s = {}), (this.p = new Fe(0)), (this.ondata = e);
          }
          return (
            (n.prototype.e = function (e) {
              if (this.d) throw "stream finished";
              if (!this.ondata) throw "no stream handler";
              var t = this.p.length,
                r = new Fe(t + e.length);
              r.set(this.p), r.set(e, t), (this.p = r);
            }),
            (n.prototype.c = function (e) {
              this.d = this.s.i = e || !1;
              var t = this.s.b,
                r = Jl(this.p, this.o, this.s);
              this.ondata(lr(r, t, this.s.b), this.d),
                (this.o = lr(r, this.s.b - 32768)),
                (this.s.b = this.o.length),
                (this.p = lr(this.p, (this.s.p / 8) | 0)),
                (this.s.p &= 7);
            }),
            (n.prototype.push = function (e, t) {
              this.e(e), this.c(t);
            }),
            n
          );
        })(),
        bg = (function () {
          return function (n) {
            (this.ondata = n),
              yo(
                [
                  mo,
                  function () {
                    return [hr, In];
                  },
                ],
                this,
                0,
                function () {
                  var e = new In();
                  onmessage = hr(e);
                },
                7
              );
          };
        })();
      function bf(n, e, t) {
        if ((t || ((t = e), (e = {})), typeof t != "function"))
          throw "no callback";
        return vo(
          n,
          e,
          [mo],
          function (r) {
            return ra(Bs(r.data[0], mg(r.data[1])));
          },
          1,
          t
        );
      }
      function Bs(n, e) {
        return Jl(n, e);
      }
      var xh = (function () {
          function n(e, t) {
            (this.c = io()), (this.l = 0), (this.v = 1), $r.call(this, e, t);
          }
          return (
            (n.prototype.push = function (e, t) {
              $r.prototype.push.call(this, e, t);
            }),
            (n.prototype.p = function (e, t) {
              this.c.p(e), (this.l += e.length);
              var r = Wa(e, this.o, this.v && yg(this.o), t && 8, !t);
              this.v && (gg(r, this.o), (this.v = 0)),
                t &&
                  (qe(r, r.length - 8, this.c.d()),
                  qe(r, r.length - 4, this.l)),
                this.ondata(r, t);
            }),
            n
          );
        })(),
        X1 = (function () {
          return function (n, e) {
            yo(
              [
                go,
                Db,
                function () {
                  return [hr, $r, xh];
                },
              ],
              this,
              _g.call(this, n, e),
              function (t) {
                var r = new xh(t.data);
                onmessage = hr(r);
              },
              8
            );
          };
        })();
      function q1(n, e, t) {
        if ((t || ((t = e), (e = {})), typeof t != "function"))
          throw "no callback";
        return vo(
          n,
          e,
          [
            go,
            Db,
            function () {
              return [_h];
            },
          ],
          function (r) {
            return ra(_h(r.data[0], r.data[1]));
          },
          2,
          t
        );
      }
      function _h(n, e) {
        e || (e = {});
        var t = io(),
          r = n.length;
        t.p(n);
        var i = Wa(n, e, yg(e), 8),
          a = i.length;
        return gg(i, e), qe(i, a - 8, t.d()), qe(i, a - 4, r), i;
      }
      var bh = (function () {
          function n(e) {
            (this.v = 1), In.call(this, e);
          }
          return (
            (n.prototype.push = function (e, t) {
              if ((In.prototype.e.call(this, e), this.v)) {
                var r = this.p.length > 3 ? vg(this.p) : 4;
                if (r >= this.p.length && !t) return;
                (this.p = this.p.subarray(r)), (this.v = 0);
              }
              if (t) {
                if (this.p.length < 8) throw "invalid gzip stream";
                this.p = this.p.subarray(0, -8);
              }
              In.prototype.c.call(this, t);
            }),
            n
          );
        })(),
        Fb = (function () {
          return function (n) {
            (this.ondata = n),
              yo(
                [
                  mo,
                  kb,
                  function () {
                    return [hr, In, bh];
                  },
                ],
                this,
                0,
                function () {
                  var e = new bh();
                  onmessage = hr(e);
                },
                9
              );
          };
        })();
      function $1(n, e, t) {
        if ((t || ((t = e), (e = {})), typeof t != "function"))
          throw "no callback";
        return vo(
          n,
          e,
          [
            mo,
            kb,
            function () {
              return [wh];
            },
          ],
          function (r) {
            return ra(wh(r.data[0]));
          },
          3,
          t
        );
      }
      function wh(n, e) {
        return Jl(n.subarray(vg(n), -8), e || new Fe(Ob(n)));
      }
      var Kp = (function () {
          function n(e, t) {
            (this.c = pg()), (this.v = 1), $r.call(this, e, t);
          }
          return (
            (n.prototype.push = function (e, t) {
              $r.prototype.push.call(this, e, t);
            }),
            (n.prototype.p = function (e, t) {
              this.c.p(e);
              var r = Wa(e, this.o, this.v && 2, t && 4, !t);
              this.v && (xg(r, this.o), (this.v = 0)),
                t && qe(r, r.length - 4, this.c.d()),
                this.ondata(r, t);
            }),
            n
          );
        })(),
        iC = (function () {
          return function (n, e) {
            yo(
              [
                go,
                Ib,
                function () {
                  return [hr, $r, Kp];
                },
              ],
              this,
              _g.call(this, n, e),
              function (t) {
                var r = new Kp(t.data);
                onmessage = hr(r);
              },
              10
            );
          };
        })();
      function wf(n, e) {
        e || (e = {});
        var t = pg();
        t.p(n);
        var r = Wa(n, e, 2, 4);
        return xg(r, e), qe(r, r.length - 4, t.d()), r;
      }
      var Sh = (function () {
          function n(e) {
            (this.v = 1), In.call(this, e);
          }
          return (
            (n.prototype.push = function (e, t) {
              if ((In.prototype.e.call(this, e), this.v)) {
                if (this.p.length < 2 && !t) return;
                (this.p = this.p.subarray(2)), (this.v = 0);
              }
              if (t) {
                if (this.p.length < 4) throw "invalid zlib stream";
                this.p = this.p.subarray(0, -4);
              }
              In.prototype.c.call(this, t);
            }),
            n
          );
        })(),
        Bb = (function () {
          return function (n) {
            (this.ondata = n),
              yo(
                [
                  mo,
                  Ub,
                  function () {
                    return [hr, In, Sh];
                  },
                ],
                this,
                0,
                function () {
                  var e = new Sh();
                  onmessage = hr(e);
                },
                11
              );
          };
        })();
      function Y1(n, e, t) {
        if ((t || ((t = e), (e = {})), typeof t != "function"))
          throw "no callback";
        return vo(
          n,
          e,
          [
            mo,
            Ub,
            function () {
              return [Gl];
            },
          ],
          function (r) {
            return ra(Gl(r.data[0], mg(r.data[1])));
          },
          5,
          t
        );
      }
      function Gl(n, e) {
        return Jl((zb(n), n.subarray(2, -4)), e);
      }
      var Gb = (function () {
          function n(e) {
            (this.G = bh), (this.I = In), (this.Z = Sh), (this.ondata = e);
          }
          return (
            (n.prototype.push = function (e, t) {
              if (!this.ondata) throw "no stream handler";
              if (this.s) this.s.push(e, t);
              else {
                if (this.p && this.p.length) {
                  var r = new Fe(this.p.length + e.length);
                  r.set(this.p), r.set(e, this.p.length);
                } else this.p = e;
                if (this.p.length > 2) {
                  var i = this,
                    a = function () {
                      i.ondata.apply(i, arguments);
                    };
                  (this.s =
                    this.p[0] == 31 && this.p[1] == 139 && this.p[2] == 8
                      ? new this.G(a)
                      : (15 & this.p[0]) != 8 ||
                        this.p[0] >> 4 > 7 ||
                        ((this.p[0] << 8) | this.p[1]) % 31
                      ? new this.I(a)
                      : new this.Z(a)),
                    this.s.push(this.p, t),
                    (this.p = null);
                }
              }
            }),
            n
          );
        })(),
        aC = (function () {
          function n(e) {
            (this.G = Fb), (this.I = bg), (this.Z = Bb), (this.ondata = e);
          }
          return (
            (n.prototype.push = function (e, t) {
              Gb.prototype.push.call(this, e, t);
            }),
            n
          );
        })(),
        Jp = function (n, e, t, r) {
          for (var i in n) {
            var a = n[i],
              s = e + i;
            a instanceof Fe
              ? (t[s] = [a, r])
              : Array.isArray(a)
              ? (t[s] = [a[0], Bl(r, a[1])])
              : Jp(a, s + "/", t, r);
          }
        },
        Z1 = typeof TextEncoder < "u" && new TextEncoder(),
        Qp = typeof TextDecoder < "u" && new TextDecoder(),
        Hb = 0;
      try {
        Qp.decode(hi, { stream: !0 }), (Hb = 1);
      } catch {}
      var Vb = function (n) {
          for (var e = "", t = 0; ; ) {
            var r = n[t++],
              i = (r > 127) + (r > 223) + (r > 239);
            if (t + i > n.length) return [e, lr(n, t - 1)];
            i
              ? i == 3
                ? ((r =
                    (((15 & r) << 18) |
                      ((63 & n[t++]) << 12) |
                      ((63 & n[t++]) << 6) |
                      (63 & n[t++])) -
                    65536),
                  (e += String.fromCharCode(
                    55296 | (r >> 10),
                    56320 | (1023 & r)
                  )))
                : (e +=
                    1 & i
                      ? String.fromCharCode(((31 & r) << 6) | (63 & n[t++]))
                      : String.fromCharCode(
                          ((15 & r) << 12) |
                            ((63 & n[t++]) << 6) |
                            (63 & n[t++])
                        ))
              : (e += String.fromCharCode(r));
          }
        },
        sC = (function () {
          function n(e) {
            (this.ondata = e),
              Hb ? (this.t = new TextDecoder()) : (this.p = hi);
          }
          return (
            (n.prototype.push = function (e, t) {
              if (!this.ondata) throw "no callback";
              if (((t = !!t), this.t)) {
                if ((this.ondata(this.t.decode(e, { stream: !0 }), t), t)) {
                  if (this.t.decode().length) throw "invalid utf-8 data";
                  this.t = null;
                }
              } else {
                if (!this.p) throw "stream finished";
                var r = new Fe(this.p.length + e.length);
                r.set(this.p), r.set(e, this.p.length);
                var i = Vb(r),
                  a = i[0],
                  s = i[1];
                if (t) {
                  if (s.length) throw "invalid utf-8 data";
                  this.p = null;
                } else this.p = s;
                this.ondata(a, t);
              }
            }),
            n
          );
        })(),
        oC = (function () {
          function n(e) {
            this.ondata = e;
          }
          return (
            (n.prototype.push = function (e, t) {
              if (!this.ondata) throw "no callback";
              if (this.d) throw "stream finished";
              this.ondata(Fi(e), (this.d = t || !1));
            }),
            n
          );
        })();
      function Fi(n, e) {
        if (e) {
          for (var t = new Fe(n.length), r = 0; r < n.length; ++r)
            t[r] = n.charCodeAt(r);
          return t;
        }
        if (Z1) return Z1.encode(n);
        var i = n.length,
          a = new Fe(n.length + (n.length >> 1)),
          s = 0,
          o = function (c) {
            a[s++] = c;
          };
        for (r = 0; r < i; ++r) {
          if (s + 5 > a.length) {
            var l = new Fe(s + 8 + ((i - r) << 1));
            l.set(a), (a = l);
          }
          var u = n.charCodeAt(r);
          u < 128 || e
            ? o(u)
            : u < 2048
            ? (o(192 | (u >> 6)), o(128 | (63 & u)))
            : u > 55295 && u < 57344
            ? (o(
                240 |
                  ((u = (65536 + (1047552 & u)) | (1023 & n.charCodeAt(++r))) >>
                    18)
              ),
              o(128 | ((u >> 12) & 63)),
              o(128 | ((u >> 6) & 63)),
              o(128 | (63 & u)))
            : (o(224 | (u >> 12)), o(128 | ((u >> 6) & 63)), o(128 | (63 & u)));
        }
        return lr(a, 0, s);
      }
      function wg(n, e) {
        if (e) {
          for (var t = "", r = 0; r < n.length; r += 16384)
            t += String.fromCharCode.apply(null, n.subarray(r, r + 16384));
          return t;
        }
        if (Qp) return Qp.decode(n);
        var i = Vb(n),
          a = i[0];
        if (i[1].length) throw "invalid utf-8 data";
        return a;
      }
      var Wb = function (n) {
          return n == 1 ? 3 : n < 6 ? 2 : n == 9 ? 1 : 0;
        },
        K1 = function (n, e) {
          return e + 30 + yn(n, e + 26) + yn(n, e + 28);
        },
        J1 = function (n, e, t) {
          var r = yn(n, e + 28),
            i = wg(n.subarray(e + 46, e + 46 + r), !(2048 & yn(n, e + 8))),
            a = e + 46 + r,
            s = St(n, e + 20),
            o =
              t && s == 4294967295
                ? jb(n, a)
                : [s, St(n, e + 24), St(n, e + 42)],
            l = o[0],
            u = o[1],
            c = o[2];
          return [yn(n, e + 10), l, u, i, a + yn(n, e + 30) + yn(n, e + 32), c];
        },
        jb = function (n, e) {
          for (; yn(n, e) != 1; e += 4 + yn(n, e + 2));
          return [_f(n, e + 12), _f(n, e + 4), _f(n, e + 20)];
        },
        Gi = function (n) {
          var e = 0;
          if (n)
            for (var t in n) {
              var r = n[t].length;
              if (r > 65535) throw "extra field too long";
              e += r + 4;
            }
          return e;
        },
        Gs = function (n, e, t, r, i, a, s, o) {
          var l = r.length,
            u = t.extra,
            c = o && o.length,
            h = Gi(u);
          qe(n, e, s != null ? 33639248 : 67324752),
            (e += 4),
            s != null && ((n[e++] = 20), (n[e++] = t.os)),
            (n[e] = 20),
            (e += 2),
            (n[e++] = (t.flag << 1) | (a == null && 8)),
            (n[e++] = i && 8),
            (n[e++] = 255 & t.compression),
            (n[e++] = t.compression >> 8);
          var d = new Date(t.mtime == null ? Date.now() : t.mtime),
            f = d.getFullYear() - 1980;
          if (f < 0 || f > 119) throw "date not in range 1980-2099";
          if (
            (qe(
              n,
              e,
              (f << 25) |
                ((d.getMonth() + 1) << 21) |
                (d.getDate() << 16) |
                (d.getHours() << 11) |
                (d.getMinutes() << 5) |
                (d.getSeconds() >>> 1)
            ),
            (e += 4),
            a != null &&
              (qe(n, e, t.crc), qe(n, e + 4, a), qe(n, e + 8, t.size)),
            qe(n, e + 12, l),
            qe(n, e + 14, h),
            (e += 16),
            s != null &&
              (qe(n, e, c), qe(n, e + 6, t.attrs), qe(n, e + 10, s), (e += 14)),
            n.set(r, e),
            (e += l),
            h)
          )
            for (var g in u) {
              var p = u[g],
                y = p.length;
              qe(n, e, +g), qe(n, e + 2, y), n.set(p, e + 4), (e += 4 + y);
            }
          return c && (n.set(o, e), (e += c)), e;
        },
        em = function (n, e, t, r, i) {
          qe(n, e, 101010256),
            qe(n, e + 8, t),
            qe(n, e + 10, t),
            qe(n, e + 12, r),
            qe(n, e + 16, i);
        },
        Hl = (function () {
          function n(e) {
            (this.filename = e),
              (this.c = io()),
              (this.size = 0),
              (this.compression = 0);
          }
          return (
            (n.prototype.process = function (e, t) {
              this.ondata(null, e, t);
            }),
            (n.prototype.push = function (e, t) {
              if (!this.ondata)
                throw "no callback - add to ZIP archive before pushing";
              this.c.p(e),
                (this.size += e.length),
                t && (this.crc = this.c.d()),
                this.process(e, t || !1);
            }),
            n
          );
        })(),
        lC = (function () {
          function n(e, t) {
            var r = this;
            t || (t = {}),
              Hl.call(this, e),
              (this.d = new $r(t, function (i, a) {
                r.ondata(null, i, a);
              })),
              (this.compression = 8),
              (this.flag = Wb(t.level));
          }
          return (
            (n.prototype.process = function (e, t) {
              try {
                this.d.push(e, t);
              } catch (r) {
                this.ondata(r, null, t);
              }
            }),
            (n.prototype.push = function (e, t) {
              Hl.prototype.push.call(this, e, t);
            }),
            n
          );
        })(),
        uC = (function () {
          function n(e, t) {
            var r = this;
            t || (t = {}),
              Hl.call(this, e),
              (this.d = new Nb(t, function (i, a, s) {
                r.ondata(i, a, s);
              })),
              (this.compression = 8),
              (this.flag = Wb(t.level)),
              (this.terminate = this.d.terminate);
          }
          return (
            (n.prototype.process = function (e, t) {
              this.d.push(e, t);
            }),
            (n.prototype.push = function (e, t) {
              Hl.prototype.push.call(this, e, t);
            }),
            n
          );
        })(),
        cC = (function () {
          function n(e) {
            (this.ondata = e), (this.u = []), (this.d = 1);
          }
          return (
            (n.prototype.add = function (e) {
              var t = this;
              if (2 & this.d) throw "stream finished";
              var r = Fi(e.filename),
                i = r.length,
                a = e.comment,
                s = a && Fi(a),
                o = i != e.filename.length || (s && a.length != s.length),
                l = i + Gi(e.extra) + 30;
              if (i > 65535) throw "filename too long";
              var u = new Fe(l);
              Gs(u, 0, e, r, o);
              var c = [u],
                h = function () {
                  for (var y = 0, v = c; y < v.length; y++) {
                    var m = v[y];
                    t.ondata(null, m, !1);
                  }
                  c = [];
                },
                d = this.d;
              this.d = 0;
              var f = this.u.length,
                g = Bl(e, {
                  f: r,
                  u: o,
                  o: s,
                  t: function () {
                    e.terminate && e.terminate();
                  },
                  r: function () {
                    if ((h(), d)) {
                      var y = t.u[f + 1];
                      y ? y.r() : (t.d = 1);
                    }
                    d = 1;
                  },
                }),
                p = 0;
              (e.ondata = function (y, v, m) {
                if (y) t.ondata(y, v, m), t.terminate();
                else if (((p += v.length), c.push(v), m)) {
                  var x = new Fe(16);
                  qe(x, 0, 134695760),
                    qe(x, 4, e.crc),
                    qe(x, 8, p),
                    qe(x, 12, e.size),
                    c.push(x),
                    (g.c = p),
                    (g.b = l + p + 16),
                    (g.crc = e.crc),
                    (g.size = e.size),
                    d && g.r(),
                    (d = 1);
                } else d && h();
              }),
                this.u.push(g);
            }),
            (n.prototype.end = function () {
              var e = this;
              if (2 & this.d)
                throw 1 & this.d ? "stream finishing" : "stream finished";
              this.d
                ? this.e()
                : this.u.push({
                    r: function () {
                      1 & e.d && (e.u.splice(-1, 1), e.e());
                    },
                    t: function () {},
                  }),
                (this.d = 3);
            }),
            (n.prototype.e = function () {
              for (
                var e = 0, t = 0, r = 0, i = 0, a = this.u;
                i < a.length;
                i++
              )
                r +=
                  46 +
                  (u = a[i]).f.length +
                  Gi(u.extra) +
                  (u.o ? u.o.length : 0);
              for (
                var s = new Fe(r + 22), o = 0, l = this.u;
                o < l.length;
                o++
              ) {
                var u = l[o];
                Gs(s, e, u, u.f, u.u, u.c, t, u.o),
                  (e += 46 + u.f.length + Gi(u.extra) + (u.o ? u.o.length : 0)),
                  (t += u.b);
              }
              em(s, e, this.u.length, r, t),
                this.ondata(null, s, !0),
                (this.d = 2);
            }),
            (n.prototype.terminate = function () {
              for (var e = 0, t = this.u; e < t.length; e++) t[e].t();
              this.d = 2;
            }),
            n
          );
        })(),
        Xb = (function () {
          function n() {}
          return (
            (n.prototype.push = function (e, t) {
              this.ondata(null, e, t);
            }),
            (n.compression = 0),
            n
          );
        })(),
        hC = (function () {
          function n() {
            var e = this;
            this.i = new In(function (t, r) {
              e.ondata(null, t, r);
            });
          }
          return (
            (n.prototype.push = function (e, t) {
              try {
                this.i.push(e, t);
              } catch (r) {
                this.ondata(r, e, t);
              }
            }),
            (n.compression = 8),
            n
          );
        })(),
        dC = (function () {
          function n(e, t) {
            var r = this;
            t < 32e4
              ? (this.i = new In(function (i, a) {
                  r.ondata(null, i, a);
                }))
              : ((this.i = new bg(function (i, a, s) {
                  r.ondata(i, a, s);
                })),
                (this.terminate = this.i.terminate));
          }
          return (
            (n.prototype.push = function (e, t) {
              this.i.terminate && (e = lr(e, 0)), this.i.push(e, t);
            }),
            (n.compression = 8),
            n
          );
        })(),
        fC = (function () {
          function n(e) {
            (this.onfile = e),
              (this.k = []),
              (this.o = { 0: Xb }),
              (this.p = hi);
          }
          return (
            (n.prototype.push = function (e, t) {
              var r = this;
              if (!this.onfile) throw "no callback";
              if (!this.p) throw "stream finished";
              if (this.c > 0) {
                var i = Math.min(this.c, e.length),
                  a = e.subarray(0, i);
                if (
                  ((this.c -= i),
                  this.d ? this.d.push(a, !this.c) : this.k[0].push(a),
                  (e = e.subarray(i)).length)
                )
                  return this.push(e, t);
              } else {
                var s = 0,
                  o = 0,
                  l = void 0,
                  u = void 0;
                this.p.length
                  ? e.length
                    ? ((u = new Fe(this.p.length + e.length)).set(this.p),
                      u.set(e, this.p.length))
                    : (u = this.p)
                  : (u = e);
                for (
                  var c = u.length,
                    h = this.c,
                    d = h && this.d,
                    f = function () {
                      var y,
                        v = St(u, o);
                      if (v == 67324752) {
                        (s = 1), (l = o), (g.d = null), (g.c = 0);
                        var m = yn(u, o + 6),
                          x = yn(u, o + 8),
                          _ = 2048 & m,
                          b = 8 & m,
                          w = yn(u, o + 26),
                          M = yn(u, o + 28);
                        if (c > o + 30 + w + M) {
                          var C = [];
                          g.k.unshift(C), (s = 2);
                          var N,
                            G = St(u, o + 18),
                            U = St(u, o + 22),
                            I = wg(u.subarray(o + 30, (o += 30 + w)), !_);
                          G == 4294967295
                            ? ((y = b ? [-2] : jb(u, o)),
                              (G = y[0]),
                              (U = y[1]))
                            : b && (G = -1),
                            (o += M),
                            (g.c = G);
                          var F = {
                            name: I,
                            compression: x,
                            start: function () {
                              if (!F.ondata) throw "no callback";
                              if (G) {
                                var T = r.o[x];
                                if (!T) throw "unknown compression type " + x;
                                (N = G < 0 ? new T(I) : new T(I, G, U)).ondata =
                                  function (E, z, A) {
                                    F.ondata(E, z, A);
                                  };
                                for (var O = 0, k = C; O < k.length; O++) {
                                  var P = k[O];
                                  N.push(P, !1);
                                }
                                r.k[0] == C && r.c ? (r.d = N) : N.push(hi, !0);
                              } else F.ondata(null, hi, !0);
                            },
                            terminate: function () {
                              N && N.terminate && N.terminate();
                            },
                          };
                          G >= 0 && ((F.size = G), (F.originalSize = U)),
                            g.onfile(F);
                        }
                        return "break";
                      }
                      if (h) {
                        if (v == 134695760)
                          return (
                            (l = o += 12 + (h == -2 && 8)),
                            (s = 3),
                            (g.c = 0),
                            "break"
                          );
                        if (v == 33639248)
                          return (l = o -= 4), (s = 3), (g.c = 0), "break";
                      }
                    },
                    g = this;
                  o < c - 4 && f() !== "break";
                  ++o
                );
                if (((this.p = hi), h < 0)) {
                  var p = s
                    ? u.subarray(
                        0,
                        l -
                          12 -
                          (h == -2 && 8) -
                          (St(u, l - 16) == 134695760 && 4)
                      )
                    : u.subarray(0, o);
                  d ? d.push(p, !!s) : this.k[+(s == 2)].push(p);
                }
                if (2 & s) return this.push(u.subarray(o), t);
                this.p = u.subarray(o);
              }
              if (t) {
                if (this.c) throw "invalid zip file";
                this.p = null;
              }
            }),
            (n.prototype.register = function (e) {
              this.o[e.compression] = e;
            }),
            n
          );
        })();
      const pC = Object.freeze(
        Object.defineProperty(
          {
            __proto__: null,
            Deflate: $r,
            AsyncDeflate: Nb,
            deflate: j1,
            deflateSync: fl,
            Inflate: In,
            AsyncInflate: bg,
            inflate: bf,
            inflateSync: Bs,
            Gzip: xh,
            AsyncGzip: X1,
            gzip: q1,
            gzipSync: _h,
            Gunzip: bh,
            AsyncGunzip: Fb,
            gunzip: $1,
            gunzipSync: wh,
            Zlib: Kp,
            AsyncZlib: iC,
            zlib: function (n, e, t) {
              if ((t || ((t = e), (e = {})), typeof t != "function"))
                throw "no callback";
              return vo(
                n,
                e,
                [
                  go,
                  Ib,
                  function () {
                    return [wf];
                  },
                ],
                function (r) {
                  return ra(wf(r.data[0], r.data[1]));
                },
                4,
                t
              );
            },
            zlibSync: wf,
            Unzlib: Sh,
            AsyncUnzlib: Bb,
            unzlib: Y1,
            unzlibSync: Gl,
            compress: q1,
            AsyncCompress: X1,
            compressSync: _h,
            Compress: xh,
            Decompress: Gb,
            AsyncDecompress: aC,
            decompress: function (n, e, t) {
              if ((t || ((t = e), (e = {})), typeof t != "function"))
                throw "no callback";
              return n[0] == 31 && n[1] == 139 && n[2] == 8
                ? $1(n, e, t)
                : (15 & n[0]) != 8 || n[0] >> 4 > 7 || ((n[0] << 8) | n[1]) % 31
                ? bf(n, e, t)
                : Y1(n, e, t);
            },
            decompressSync: function (n, e) {
              return n[0] == 31 && n[1] == 139 && n[2] == 8
                ? wh(n, e)
                : (15 & n[0]) != 8 || n[0] >> 4 > 7 || ((n[0] << 8) | n[1]) % 31
                ? Bs(n, e)
                : Gl(n, e);
            },
            DecodeUTF8: sC,
            EncodeUTF8: oC,
            strToU8: Fi,
            strFromU8: wg,
            ZipPassThrough: Hl,
            ZipDeflate: lC,
            AsyncZipDeflate: uC,
            Zip: cC,
            zip: function (n, e, t) {
              if ((t || ((t = e), (e = {})), typeof t != "function"))
                throw "no callback";
              var r = {};
              Jp(n, "", r, e);
              var i = Object.keys(r),
                a = i.length,
                s = 0,
                o = 0,
                l = a,
                u = new Array(a),
                c = [],
                h = function () {
                  for (var p = 0; p < c.length; ++p) c[p]();
                },
                d = function () {
                  var p = new Fe(o + 22),
                    y = s,
                    v = o - s;
                  o = 0;
                  for (var m = 0; m < l; ++m) {
                    var x = u[m];
                    try {
                      var _ = x.c.length;
                      Gs(p, o, x, x.f, x.u, _);
                      var b = 30 + x.f.length + Gi(x.extra),
                        w = o + b;
                      p.set(x.c, w),
                        Gs(p, s, x, x.f, x.u, _, o, x.m),
                        (s += 16 + b + (x.m ? x.m.length : 0)),
                        (o = w + _);
                    } catch (M) {
                      return t(M, null);
                    }
                  }
                  em(p, s, u.length, v, y), t(null, p);
                };
              a || d();
              for (
                var f = function (p) {
                    var y = i[p],
                      v = r[y],
                      m = v[0],
                      x = v[1],
                      _ = io(),
                      b = m.length;
                    _.p(m);
                    var w = Fi(y),
                      M = w.length,
                      C = x.comment,
                      N = C && Fi(C),
                      G = N && N.length,
                      U = Gi(x.extra),
                      I = x.level == 0 ? 0 : 8,
                      F = function (T, O) {
                        if (T) h(), t(T, null);
                        else {
                          var k = O.length;
                          (u[p] = Bl(x, {
                            size: b,
                            crc: _.d(),
                            c: O,
                            f: w,
                            m: N,
                            u: M != y.length || (N && C.length != G),
                            compression: I,
                          })),
                            (s += 30 + M + U + k),
                            (o += 76 + 2 * (M + U) + (G || 0) + k),
                            --a || d();
                        }
                      };
                    if ((M > 65535 && F("filename too long", null), I))
                      if (b < 16e4)
                        try {
                          F(null, fl(m, x));
                        } catch (T) {
                          F(T, null);
                        }
                      else c.push(j1(m, x, F));
                    else F(null, m);
                  },
                  g = 0;
                g < l;
                ++g
              )
                f(g);
              return h;
            },
            zipSync: function (n, e) {
              e || (e = {});
              var t = {},
                r = [];
              Jp(n, "", t, e);
              var i = 0,
                a = 0;
              for (var s in t) {
                var o = t[s],
                  l = o[0],
                  u = o[1],
                  c = u.level == 0 ? 0 : 8,
                  h = (M = Fi(s)).length,
                  d = u.comment,
                  f = d && Fi(d),
                  g = f && f.length,
                  p = Gi(u.extra);
                if (h > 65535) throw "filename too long";
                var y = c ? fl(l, u) : l,
                  v = y.length,
                  m = io();
                m.p(l),
                  r.push(
                    Bl(u, {
                      size: l.length,
                      crc: m.d(),
                      c: y,
                      f: M,
                      m: f,
                      u: h != s.length || (f && d.length != g),
                      o: i,
                      compression: c,
                    })
                  ),
                  (i += 30 + h + p + v),
                  (a += 76 + 2 * (h + p) + (g || 0) + v);
              }
              for (
                var x = new Fe(a + 22), _ = i, b = a - i, w = 0;
                w < r.length;
                ++w
              ) {
                var M = r[w];
                Gs(x, M.o, M, M.f, M.u, M.c.length);
                var C = 30 + M.f.length + Gi(M.extra);
                x.set(M.c, M.o + C),
                  Gs(x, i, M, M.f, M.u, M.c.length, M.o, M.m),
                  (i += 16 + C + (M.m ? M.m.length : 0));
              }
              return em(x, i, r.length, b, _), x;
            },
            UnzipPassThrough: Xb,
            UnzipInflate: hC,
            AsyncUnzipInflate: dC,
            Unzip: fC,
            unzip: function (n, e) {
              if (typeof e != "function") throw "no callback";
              for (
                var t = [],
                  r = function () {
                    for (var d = 0; d < t.length; ++d) t[d]();
                  },
                  i = {},
                  a = n.length - 22;
                St(n, a) != 101010256;
                --a
              )
                if (!a || n.length - a > 65558)
                  return void e("invalid zip file", null);
              var s = yn(n, a + 8);
              s || e(null, {});
              var o = s,
                l = St(n, a + 16),
                u = l == 4294967295;
              if (u) {
                if (((a = St(n, a - 12)), St(n, a) != 101075792))
                  return void e("invalid zip file", null);
                (o = s = St(n, a + 32)), (l = St(n, a + 48));
              }
              for (
                var c = function (d) {
                    var f = J1(n, l, u),
                      g = f[0],
                      p = f[1],
                      y = f[2],
                      v = f[3],
                      m = f[4],
                      x = f[5],
                      _ = K1(n, x);
                    l = m;
                    var b = function (M, C) {
                      M ? (r(), e(M, null)) : ((i[v] = C), --s || e(null, i));
                    };
                    if (g)
                      if (g == 8) {
                        var w = n.subarray(_, _ + p);
                        if (p < 32e4)
                          try {
                            b(null, Bs(w, new Fe(y)));
                          } catch (M) {
                            b(M, null);
                          }
                        else t.push(bf(w, { size: y }, b));
                      } else b("unknown compression type " + g, null);
                    else b(null, lr(n, _, _ + p));
                  },
                  h = 0;
                h < o;
                ++h
              )
                c();
              return r;
            },
            unzipSync: function (n) {
              for (var e = {}, t = n.length - 22; St(n, t) != 101010256; --t)
                if (!t || n.length - t > 65558) throw "invalid zip file";
              var r = yn(n, t + 8);
              if (!r) return {};
              var i = St(n, t + 16),
                a = i == 4294967295;
              if (a) {
                if (((t = St(n, t - 12)), St(n, t) != 101075792))
                  throw "invalid zip file";
                (r = St(n, t + 32)), (i = St(n, t + 48));
              }
              for (var s = 0; s < r; ++s) {
                var o = J1(n, i, a),
                  l = o[0],
                  u = o[1],
                  c = o[2],
                  h = o[3],
                  d = o[4],
                  f = o[5],
                  g = K1(n, f);
                if (((i = d), l)) {
                  if (l != 8) throw "unknown compression type " + l;
                  e[h] = Bs(n.subarray(g, g + u), new Fe(c));
                } else e[h] = lr(n, g, g + u);
              }
              return e;
            },
          },
          Symbol.toStringTag,
          { value: "Module" }
        )
      );
      function qb(n, e, t) {
        const r = t.length - n - 1;
        if (e >= t[r]) return r - 1;
        if (e <= t[n]) return n;
        let i = n,
          a = r,
          s = Math.floor((i + a) / 2);
        for (; e < t[s] || e >= t[s + 1]; )
          e < t[s] ? (a = s) : (i = s), (s = Math.floor((i + a) / 2));
        return s;
      }
      function mC(n, e) {
        let t = 1;
        for (let i = 2; i <= n; ++i) t *= i;
        let r = 1;
        for (let i = 2; i <= e; ++i) r *= i;
        for (let i = 2; i <= n - e; ++i) r *= i;
        return t / r;
      }
      function gC(n, e, t, r, i) {
        const a = (function (s, o, l, u, c) {
          const h = c < s ? c : s,
            d = [],
            f = qb(s, u, o),
            g = (function (y, v, m, x, _) {
              const b = [];
              for (let U = 0; U <= m; ++U) b[U] = 0;
              const w = [];
              for (let U = 0; U <= x; ++U) w[U] = b.slice(0);
              const M = [];
              for (let U = 0; U <= m; ++U) M[U] = b.slice(0);
              M[0][0] = 1;
              const C = b.slice(0),
                N = b.slice(0);
              for (let U = 1; U <= m; ++U) {
                (C[U] = v - _[y + 1 - U]), (N[U] = _[y + U] - v);
                let I = 0;
                for (let F = 0; F < U; ++F) {
                  const T = N[F + 1],
                    O = C[U - F];
                  M[U][F] = T + O;
                  const k = M[F][U - 1] / M[U][F];
                  (M[F][U] = I + T * k), (I = O * k);
                }
                M[U][U] = I;
              }
              for (let U = 0; U <= m; ++U) w[0][U] = M[U][m];
              for (let U = 0; U <= m; ++U) {
                let I = 0,
                  F = 1;
                const T = [];
                for (let O = 0; O <= m; ++O) T[O] = b.slice(0);
                T[0][0] = 1;
                for (let O = 1; O <= x; ++O) {
                  let k = 0;
                  const P = U - O,
                    E = m - O;
                  U >= O &&
                    ((T[F][0] = T[I][0] / M[E + 1][P]),
                    (k = T[F][0] * M[P][E]));
                  const z = U - 1 <= E ? O - 1 : m - U;
                  for (let D = P >= -1 ? 1 : -P; D <= z; ++D)
                    (T[F][D] = (T[I][D] - T[I][D - 1]) / M[E + 1][P + D]),
                      (k += T[F][D] * M[P + D][E]);
                  U <= E &&
                    ((T[F][O] = -T[I][O - 1] / M[E + 1][U]),
                    (k += T[F][O] * M[U][E])),
                    (w[O][U] = k);
                  const A = I;
                  (I = F), (F = A);
                }
              }
              let G = m;
              for (let U = 1; U <= x; ++U) {
                for (let I = 0; I <= m; ++I) w[U][I] *= G;
                G *= m - U;
              }
              return w;
            })(f, u, s, h, o),
            p = [];
          for (let y = 0; y < l.length; ++y) {
            const v = l[y].clone(),
              m = v.w;
            (v.x *= m), (v.y *= m), (v.z *= m), (p[y] = v);
          }
          for (let y = 0; y <= h; ++y) {
            const v = p[f - s].clone().multiplyScalar(g[y][0]);
            for (let m = 1; m <= s; ++m)
              v.add(p[f - s + m].clone().multiplyScalar(g[y][m]));
            d[y] = v;
          }
          for (let y = h + 1; y <= c + 1; ++y) d[y] = new Be(0, 0, 0);
          return d;
        })(n, e, t, r, i);
        return (function (s) {
          const o = s.length,
            l = [],
            u = [];
          for (let h = 0; h < o; ++h) {
            const d = s[h];
            (l[h] = new j(d.x, d.y, d.z)), (u[h] = d.w);
          }
          const c = [];
          for (let h = 0; h < o; ++h) {
            const d = l[h].clone();
            for (let f = 1; f <= h; ++f)
              d.sub(c[h - f].clone().multiplyScalar(mC(h, f) * u[f]));
            c[h] = d.divideScalar(u[0]);
          }
          return c;
        })(a);
      }
      class Q1 extends QM {
        constructor(e, t, r, i, a) {
          super(),
            (this.degree = e),
            (this.knots = t),
            (this.controlPoints = []),
            (this.startKnot = i || 0),
            (this.endKnot = a || this.knots.length - 1);
          for (let s = 0; s < r.length; ++s) {
            const o = r[s];
            this.controlPoints[s] = new Be(o.x, o.y, o.z, o.w);
          }
        }
        getPoint(e, t = new j()) {
          const r = t,
            i =
              this.knots[this.startKnot] +
              e * (this.knots[this.endKnot] - this.knots[this.startKnot]),
            a = (function (s, o, l, u) {
              const c = qb(s, u, o),
                h = (function (f, g, p, y) {
                  const v = [],
                    m = [],
                    x = [];
                  v[0] = 1;
                  for (let _ = 1; _ <= p; ++_) {
                    (m[_] = g - y[f + 1 - _]), (x[_] = y[f + _] - g);
                    let b = 0;
                    for (let w = 0; w < _; ++w) {
                      const M = x[w + 1],
                        C = m[_ - w],
                        N = v[w] / (M + C);
                      (v[w] = b + M * N), (b = C * N);
                    }
                    v[_] = b;
                  }
                  return v;
                })(c, u, s, o),
                d = new Be(0, 0, 0, 0);
              for (let f = 0; f <= s; ++f) {
                const g = l[c - s + f],
                  p = h[f],
                  y = g.w * p;
                (d.x += g.x * y),
                  (d.y += g.y * y),
                  (d.z += g.z * y),
                  (d.w += g.w * p);
              }
              return d;
            })(this.degree, this.knots, this.controlPoints, i);
          return a.w !== 1 && a.divideScalar(a.w), r.set(a.x, a.y, a.z);
        }
        getTangent(e, t = new j()) {
          const r = t,
            i =
              this.knots[0] +
              e * (this.knots[this.knots.length - 1] - this.knots[0]),
            a = gC(this.degree, this.knots, this.controlPoints, i, 1);
          return r.copy(a[1]).normalize(), r;
        }
      }
      let Oe, Mt, En;
      class vC extends Nh {
        constructor(e) {
          super(e);
        }
        load(e, t, r, i) {
          const a = this,
            s = a.path === "" ? tg.extractUrlBase(e) : a.path,
            o = new hT(this.manager);
          o.setPath(a.path),
            o.setResponseType("arraybuffer"),
            o.setRequestHeader(a.requestHeader),
            o.setWithCredentials(a.withCredentials),
            o.load(
              e,
              function (l) {
                try {
                  t(a.parse(l, s));
                } catch (u) {
                  i ? i(u) : console.error(u), a.manager.itemError(e);
                }
              },
              r,
              i
            );
        }
        parse(e, t) {
          if (
            (function (i) {
              const a = "Kaydara FBX Binary  \0";
              return i.byteLength >= a.length && a === ny(i, 0, a.length);
            })(e)
          )
            Oe = new wC().parse(e);
          else {
            const i = ny(e);
            if (
              !(function (a) {
                const s = [
                  "K",
                  "a",
                  "y",
                  "d",
                  "a",
                  "r",
                  "a",
                  "\\",
                  "F",
                  "B",
                  "X",
                  "\\",
                  "B",
                  "i",
                  "n",
                  "a",
                  "r",
                  "y",
                  "\\",
                  "\\",
                ];
                let o = 0;
                function l(u) {
                  const c = a[u - 1];
                  return (a = a.slice(o + u)), o++, c;
                }
                for (let u = 0; u < s.length; ++u) if (l(1) === s[u]) return !1;
                return !0;
              })(i)
            )
              throw new Error("THREE.FBXLoader: Unknown format.");
            if (ty(i) < 7e3)
              throw new Error(
                "THREE.FBXLoader: FBX version not supported, FileVersion: " +
                  ty(i)
              );
            Oe = new bC().parse(i);
          }
          const r = new U_(this.manager)
            .setPath(this.resourcePath || t)
            .setCrossOrigin(this.crossOrigin);
          return new yC(r, this.manager).parse(Oe);
        }
      }
      class yC {
        constructor(e, t) {
          (this.textureLoader = e), (this.manager = t);
        }
        parse() {
          Mt = this.parseConnections();
          const e = this.parseImages(),
            t = this.parseTextures(e),
            r = this.parseMaterials(t),
            i = this.parseDeformers(),
            a = new xC().parse(i);
          return this.parseScene(i, a, r), En;
        }
        parseConnections() {
          const e = new Map();
          return (
            "Connections" in Oe &&
              Oe.Connections.connections.forEach(function (t) {
                const r = t[0],
                  i = t[1],
                  a = t[2];
                e.has(r) || e.set(r, { parents: [], children: [] });
                const s = { ID: i, relationship: a };
                e.get(r).parents.push(s),
                  e.has(i) || e.set(i, { parents: [], children: [] });
                const o = { ID: r, relationship: a };
                e.get(i).children.push(o);
              }),
            e
          );
        }
        parseImages() {
          const e = {},
            t = {};
          if ("Video" in Oe.Objects) {
            const r = Oe.Objects.Video;
            for (const i in r) {
              const a = r[i];
              if (
                ((e[parseInt(i)] = a.RelativeFilename || a.Filename),
                "Content" in a)
              ) {
                const s =
                    a.Content instanceof ArrayBuffer &&
                    a.Content.byteLength > 0,
                  o = typeof a.Content == "string" && a.Content !== "";
                if (s || o) {
                  const l = this.parseImage(r[i]);
                  t[a.RelativeFilename || a.Filename] = l;
                }
              }
            }
          }
          for (const r in e) {
            const i = e[r];
            t[i] !== void 0 ? (e[r] = t[i]) : (e[r] = e[r].split("\\").pop());
          }
          return e;
        }
        parseImage(e) {
          const t = e.Content,
            r = e.RelativeFilename || e.Filename,
            i = r.slice(r.lastIndexOf(".") + 1).toLowerCase();
          let a;
          switch (i) {
            case "bmp":
              a = "image/bmp";
              break;
            case "jpg":
            case "jpeg":
              a = "image/jpeg";
              break;
            case "png":
              a = "image/png";
              break;
            case "tif":
              a = "image/tiff";
              break;
            case "tga":
              this.manager.getHandler(".tga") === null &&
                console.warn("FBXLoader: TGA loader not found, skipping ", r),
                (a = "image/tga");
              break;
            default:
              return void console.warn(
                'FBXLoader: Image type "' + i + '" is not supported.'
              );
          }
          if (typeof t == "string") return "data:" + a + ";base64," + t;
          {
            const s = new Uint8Array(t);
            return window.URL.createObjectURL(new Blob([s], { type: a }));
          }
        }
        parseTextures(e) {
          const t = new Map();
          if ("Texture" in Oe.Objects) {
            const r = Oe.Objects.Texture;
            for (const i in r) {
              const a = this.parseTexture(r[i], e);
              t.set(parseInt(i), a);
            }
          }
          return t;
        }
        parseTexture(e, t) {
          const r = this.loadTexture(e, t);
          (r.ID = e.id), (r.name = e.attrName);
          const i = e.WrapModeU,
            a = e.WrapModeV,
            s = i !== void 0 ? i.value : 0,
            o = a !== void 0 ? a.value : 0;
          if (
            ((r.wrapS = s === 0 ? 1e3 : 1001),
            (r.wrapT = o === 0 ? 1e3 : 1001),
            "Scaling" in e)
          ) {
            const l = e.Scaling.value;
            (r.repeat.x = l[0]), (r.repeat.y = l[1]);
          }
          if ("Translation" in e) {
            const l = e.Translation.value;
            (r.offset.x = l[0]), (r.offset.y = l[1]);
          }
          return r;
        }
        loadTexture(e, t) {
          let r;
          const i = this.textureLoader.path,
            a = Mt.get(e.id).children;
          let s;
          a !== void 0 &&
            a.length > 0 &&
            t[a[0].ID] !== void 0 &&
            ((r = t[a[0].ID]),
            (r.indexOf("blob:") !== 0 && r.indexOf("data:") !== 0) ||
              this.textureLoader.setPath(void 0));
          const o = e.FileName.slice(-3).toLowerCase();
          if (o === "tga") {
            const l = this.manager.getHandler(".tga");
            l === null
              ? (console.warn(
                  "FBXLoader: TGA loader not found, creating placeholder texture for",
                  e.RelativeFilename
                ),
                (s = new jt()))
              : (l.setPath(this.textureLoader.path), (s = l.load(r)));
          } else
            o === "psd"
              ? (console.warn(
                  "FBXLoader: PSD textures are not supported, creating placeholder texture for",
                  e.RelativeFilename
                ),
                (s = new jt()))
              : (s = this.textureLoader.load(r));
          return this.textureLoader.setPath(i), s;
        }
        parseMaterials(e) {
          const t = new Map();
          if ("Material" in Oe.Objects) {
            const r = Oe.Objects.Material;
            for (const i in r) {
              const a = this.parseMaterial(r[i], e);
              a !== null && t.set(parseInt(i), a);
            }
          }
          return t;
        }
        parseMaterial(e, t) {
          const r = e.id,
            i = e.attrName;
          let a = e.ShadingModel;
          if ((typeof a == "object" && (a = a.value), !Mt.has(r))) return null;
          const s = this.parseParameters(e, t, r);
          let o;
          switch (a.toLowerCase()) {
            case "phong":
              o = new cf();
              break;
            case "lambert":
              o = new tT();
              break;
            default:
              console.warn(
                'THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',
                a
              ),
                (o = new cf());
          }
          return o.setValues(s), (o.name = i), o;
        }
        parseParameters(e, t, r) {
          const i = {};
          e.BumpFactor && (i.bumpScale = e.BumpFactor.value),
            e.Diffuse
              ? (i.color = new Ce().fromArray(e.Diffuse.value))
              : !e.DiffuseColor ||
                (e.DiffuseColor.type !== "Color" &&
                  e.DiffuseColor.type !== "ColorRGB") ||
                (i.color = new Ce().fromArray(e.DiffuseColor.value)),
            e.DisplacementFactor &&
              (i.displacementScale = e.DisplacementFactor.value),
            e.Emissive
              ? (i.emissive = new Ce().fromArray(e.Emissive.value))
              : !e.EmissiveColor ||
                (e.EmissiveColor.type !== "Color" &&
                  e.EmissiveColor.type !== "ColorRGB") ||
                (i.emissive = new Ce().fromArray(e.EmissiveColor.value)),
            e.EmissiveFactor &&
              (i.emissiveIntensity = parseFloat(e.EmissiveFactor.value)),
            e.Opacity && (i.opacity = parseFloat(e.Opacity.value)),
            i.opacity < 1 && (i.transparent = !0),
            e.ReflectionFactor && (i.reflectivity = e.ReflectionFactor.value),
            e.Shininess && (i.shininess = e.Shininess.value),
            e.Specular
              ? (i.specular = new Ce().fromArray(e.Specular.value))
              : e.SpecularColor &&
                e.SpecularColor.type === "Color" &&
                (i.specular = new Ce().fromArray(e.SpecularColor.value));
          const a = this;
          return (
            Mt.get(r).children.forEach(function (s) {
              const o = s.relationship;
              switch (o) {
                case "Bump":
                  i.bumpMap = a.getTexture(t, s.ID);
                  break;
                case "Maya|TEX_ao_map":
                  i.aoMap = a.getTexture(t, s.ID);
                  break;
                case "DiffuseColor":
                case "Maya|TEX_color_map":
                  (i.map = a.getTexture(t, s.ID)),
                    i.map !== void 0 && (i.map.encoding = 3001);
                  break;
                case "DisplacementColor":
                  i.displacementMap = a.getTexture(t, s.ID);
                  break;
                case "EmissiveColor":
                  (i.emissiveMap = a.getTexture(t, s.ID)),
                    i.emissiveMap !== void 0 && (i.emissiveMap.encoding = 3001);
                  break;
                case "NormalMap":
                case "Maya|TEX_normal_map":
                  i.normalMap = a.getTexture(t, s.ID);
                  break;
                case "ReflectionColor":
                  (i.envMap = a.getTexture(t, s.ID)),
                    i.envMap !== void 0 &&
                      ((i.envMap.mapping = 303), (i.envMap.encoding = 3001));
                  break;
                case "SpecularColor":
                  (i.specularMap = a.getTexture(t, s.ID)),
                    i.specularMap !== void 0 && (i.specularMap.encoding = 3001);
                  break;
                case "TransparentColor":
                case "TransparencyFactor":
                  (i.alphaMap = a.getTexture(t, s.ID)), (i.transparent = !0);
                  break;
                default:
                  console.warn(
                    "THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",
                    o
                  );
              }
            }),
            i
          );
        }
        getTexture(e, t) {
          return (
            "LayeredTexture" in Oe.Objects &&
              t in Oe.Objects.LayeredTexture &&
              (console.warn(
                "THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."
              ),
              (t = Mt.get(t).children[0].ID)),
            e.get(t)
          );
        }
        parseDeformers() {
          const e = {},
            t = {};
          if ("Deformer" in Oe.Objects) {
            const r = Oe.Objects.Deformer;
            for (const i in r) {
              const a = r[i],
                s = Mt.get(parseInt(i));
              if (a.attrType === "Skin") {
                const o = this.parseSkeleton(s, r);
                (o.ID = i),
                  s.parents.length > 1 &&
                    console.warn(
                      "THREE.FBXLoader: skeleton attached to more than one geometry is not supported."
                    ),
                  (o.geometryID = s.parents[0].ID),
                  (e[i] = o);
              } else if (a.attrType === "BlendShape") {
                const o = { id: i };
                (o.rawTargets = this.parseMorphTargets(s, r)),
                  (o.id = i),
                  s.parents.length > 1 &&
                    console.warn(
                      "THREE.FBXLoader: morph target attached to more than one geometry is not supported."
                    ),
                  (t[i] = o);
              }
            }
          }
          return { skeletons: e, morphTargets: t };
        }
        parseSkeleton(e, t) {
          const r = [];
          return (
            e.children.forEach(function (i) {
              const a = t[i.ID];
              if (a.attrType !== "Cluster") return;
              const s = {
                ID: i.ID,
                indices: [],
                weights: [],
                transformLink: new Te().fromArray(a.TransformLink.a),
              };
              "Indexes" in a &&
                ((s.indices = a.Indexes.a), (s.weights = a.Weights.a)),
                r.push(s);
            }),
            { rawBones: r, bones: [] }
          );
        }
        parseMorphTargets(e, t) {
          const r = [];
          for (let i = 0; i < e.children.length; i++) {
            const a = e.children[i],
              s = t[a.ID],
              o = {
                name: s.attrName,
                initialWeight: s.DeformPercent,
                id: s.id,
                fullWeights: s.FullWeights.a,
              };
            if (s.attrType !== "BlendShapeChannel") return;
            (o.geoID = Mt.get(parseInt(a.ID)).children.filter(function (l) {
              return l.relationship === void 0;
            })[0].ID),
              r.push(o);
          }
          return r;
        }
        parseScene(e, t, r) {
          En = new Ln();
          const i = this.parseModels(e.skeletons, t, r),
            a = Oe.Objects.Model,
            s = this;
          i.forEach(function (l) {
            const u = a[l.ID];
            s.setLookAtProperties(l, u),
              Mt.get(l.ID).parents.forEach(function (c) {
                const h = i.get(c.ID);
                h !== void 0 && h.add(l);
              }),
              l.parent === null && En.add(l);
          }),
            this.bindSkeleton(e.skeletons, t, i),
            this.createAmbientLight(),
            En.traverse(function (l) {
              if (l.userData.transformData) {
                l.parent &&
                  ((l.userData.transformData.parentMatrix = l.parent.matrix),
                  (l.userData.transformData.parentMatrixWorld =
                    l.parent.matrixWorld));
                const u = Yb(l.userData.transformData);
                l.applyMatrix4(u), l.updateWorldMatrix();
              }
            });
          const o = new _C().parse();
          En.children.length === 1 &&
            En.children[0].isGroup &&
            ((En.children[0].animations = o), (En = En.children[0])),
            (En.animations = o);
        }
        parseModels(e, t, r) {
          const i = new Map(),
            a = Oe.Objects.Model;
          for (const s in a) {
            const o = parseInt(s),
              l = a[s],
              u = Mt.get(o);
            let c = this.buildSkeleton(u, e, o, l.attrName);
            if (!c) {
              switch (l.attrType) {
                case "Camera":
                  c = this.createCamera(u);
                  break;
                case "Light":
                  c = this.createLight(u);
                  break;
                case "Mesh":
                  c = this.createMesh(u, t, r);
                  break;
                case "NurbsCurve":
                  c = this.createCurve(u, t);
                  break;
                case "LimbNode":
                case "Root":
                  c = new Tp();
                  break;
                default:
                  c = new Ln();
              }
              (c.name = l.attrName ? He.sanitizeNodeName(l.attrName) : ""),
                (c.ID = o);
            }
            this.getTransformData(c, l), i.set(o, c);
          }
          return i;
        }
        buildSkeleton(e, t, r, i) {
          let a = null;
          return (
            e.parents.forEach(function (s) {
              for (const o in t) {
                const l = t[o];
                l.rawBones.forEach(function (u, c) {
                  if (u.ID === s.ID) {
                    const h = a;
                    (a = new Tp()),
                      a.matrixWorld.copy(u.transformLink),
                      (a.name = i ? He.sanitizeNodeName(i) : ""),
                      (a.ID = r),
                      (l.bones[c] = a),
                      h !== null && a.add(h);
                  }
                });
              }
            }),
            a
          );
        }
        createCamera(e) {
          let t, r;
          if (
            (e.children.forEach(function (i) {
              const a = Oe.Objects.NodeAttribute[i.ID];
              a !== void 0 && (r = a);
            }),
            r === void 0)
          )
            t = new ot();
          else {
            let i = 0;
            r.CameraProjectionType !== void 0 &&
              r.CameraProjectionType.value === 1 &&
              (i = 1);
            let a = 1;
            r.NearPlane !== void 0 && (a = r.NearPlane.value / 1e3);
            let s = 1e3;
            r.FarPlane !== void 0 && (s = r.FarPlane.value / 1e3);
            let o = window.innerWidth,
              l = window.innerHeight;
            r.AspectWidth !== void 0 &&
              r.AspectHeight !== void 0 &&
              ((o = r.AspectWidth.value), (l = r.AspectHeight.value));
            const u = o / l;
            let c = 45;
            r.FieldOfView !== void 0 && (c = r.FieldOfView.value);
            const h = r.FocalLength ? r.FocalLength.value : null;
            switch (i) {
              case 0:
                (t = new ln(c, u, a, s)), h !== null && t.setFocalLength(h);
                break;
              case 1:
                t = new Ym(-o / 2, o / 2, l / 2, -l / 2, a, s);
                break;
              default:
                console.warn("THREE.FBXLoader: Unknown camera type " + i + "."),
                  (t = new ot());
            }
          }
          return t;
        }
        createLight(e) {
          let t, r;
          if (
            (e.children.forEach(function (i) {
              const a = Oe.Objects.NodeAttribute[i.ID];
              a !== void 0 && (r = a);
            }),
            r === void 0)
          )
            t = new ot();
          else {
            let i;
            i = r.LightType === void 0 ? 0 : r.LightType.value;
            let a = 16777215;
            r.Color !== void 0 && (a = new Ce().fromArray(r.Color.value));
            let s = r.Intensity === void 0 ? 1 : r.Intensity.value / 100;
            r.CastLightOnObject !== void 0 &&
              r.CastLightOnObject.value === 0 &&
              (s = 0);
            let o = 0;
            r.FarAttenuationEnd !== void 0 &&
              (o =
                r.EnableFarAttenuation !== void 0 &&
                r.EnableFarAttenuation.value === 0
                  ? 0
                  : r.FarAttenuationEnd.value);
            const l = 1;
            switch (i) {
              case 0:
                t = new Os(a, s, o, l);
                break;
              case 1:
                t = new O_(a, s);
                break;
              case 2:
                let u = Math.PI / 3;
                r.InnerAngle !== void 0 &&
                  (u = Nr.degToRad(r.InnerAngle.value));
                let c = 0;
                r.OuterAngle !== void 0 &&
                  ((c = Nr.degToRad(r.OuterAngle.value)), (c = Math.max(c, 1))),
                  (t = new pT(a, s, o, u, c, l));
                break;
              default:
                console.warn(
                  "THREE.FBXLoader: Unknown light type " +
                    r.LightType.value +
                    ", defaulting to a PointLight."
                ),
                  (t = new Os(a, s));
            }
            r.CastShadows !== void 0 &&
              r.CastShadows.value === 1 &&
              (t.castShadow = !0);
          }
          return t;
        }
        createMesh(e, t, r) {
          let i,
            a = null,
            s = null;
          const o = [];
          return (
            e.children.forEach(function (l) {
              t.has(l.ID) && (a = t.get(l.ID)),
                r.has(l.ID) && o.push(r.get(l.ID));
            }),
            o.length > 1
              ? (s = o)
              : o.length > 0
              ? (s = o[0])
              : ((s = new cf({ color: 13421772 })), o.push(s)),
            "color" in a.attributes &&
              o.forEach(function (l) {
                l.vertexColors = !0;
              }),
            a.FBX_Deformer
              ? ((i = new qM(a, s)), i.normalizeSkinWeights())
              : (i = new xt(a, s)),
            i
          );
        }
        createCurve(e, t) {
          const r = e.children.reduce(function (a, s) {
              return t.has(s.ID) && (a = t.get(s.ID)), a;
            }, null),
            i = new Qm({ color: 3342591, linewidth: 1 });
          return new P_(r, i);
        }
        getTransformData(e, t) {
          const r = {};
          "InheritType" in t && (r.inheritType = parseInt(t.InheritType.value)),
            (r.eulerOrder =
              "RotationOrder" in t ? Zb(t.RotationOrder.value) : "ZYX"),
            "Lcl_Translation" in t && (r.translation = t.Lcl_Translation.value),
            "PreRotation" in t && (r.preRotation = t.PreRotation.value),
            "Lcl_Rotation" in t && (r.rotation = t.Lcl_Rotation.value),
            "PostRotation" in t && (r.postRotation = t.PostRotation.value),
            "Lcl_Scaling" in t && (r.scale = t.Lcl_Scaling.value),
            "ScalingOffset" in t && (r.scalingOffset = t.ScalingOffset.value),
            "ScalingPivot" in t && (r.scalingPivot = t.ScalingPivot.value),
            "RotationOffset" in t &&
              (r.rotationOffset = t.RotationOffset.value),
            "RotationPivot" in t && (r.rotationPivot = t.RotationPivot.value),
            (e.userData.transformData = r);
        }
        setLookAtProperties(e, t) {
          "LookAtProperty" in t &&
            Mt.get(e.ID).children.forEach(function (r) {
              if (r.relationship === "LookAtProperty") {
                const i = Oe.Objects.Model[r.ID];
                if ("Lcl_Translation" in i) {
                  const a = i.Lcl_Translation.value;
                  e.target !== void 0
                    ? (e.target.position.fromArray(a), En.add(e.target))
                    : e.lookAt(new j().fromArray(a));
                }
              }
            });
        }
        bindSkeleton(e, t, r) {
          const i = this.parsePoseNodes();
          for (const a in e) {
            const s = e[a];
            Mt.get(parseInt(s.ID)).parents.forEach(function (o) {
              if (t.has(o.ID)) {
                const l = o.ID;
                Mt.get(l).parents.forEach(function (u) {
                  r.has(u.ID) && r.get(u.ID).bind(new Jm(s.bones), i[u.ID]);
                });
              }
            });
          }
        }
        parsePoseNodes() {
          const e = {};
          if ("Pose" in Oe.Objects) {
            const t = Oe.Objects.Pose;
            for (const r in t)
              if (t[r].attrType === "BindPose" && t[r].NbPoseNodes > 0) {
                const i = t[r].PoseNode;
                Array.isArray(i)
                  ? i.forEach(function (a) {
                      e[a.Node] = new Te().fromArray(a.Matrix.a);
                    })
                  : (e[i.Node] = new Te().fromArray(i.Matrix.a));
              }
          }
          return e;
        }
        createAmbientLight() {
          if ("GlobalSettings" in Oe && "AmbientColor" in Oe.GlobalSettings) {
            const e = Oe.GlobalSettings.AmbientColor.value,
              t = e[0],
              r = e[1],
              i = e[2];
            if (t !== 0 || r !== 0 || i !== 0) {
              const a = new Ce(t, r, i);
              En.add(new z_(a, 1));
            }
          }
        }
      }
      class xC {
        parse(e) {
          const t = new Map();
          if ("Geometry" in Oe.Objects) {
            const r = Oe.Objects.Geometry;
            for (const i in r) {
              const a = Mt.get(parseInt(i)),
                s = this.parseGeometry(a, r[i], e);
              t.set(parseInt(i), s);
            }
          }
          return t;
        }
        parseGeometry(e, t, r) {
          switch (t.attrType) {
            case "Mesh":
              return this.parseMeshGeometry(e, t, r);
            case "NurbsCurve":
              return this.parseNurbsGeometry(t);
          }
        }
        parseMeshGeometry(e, t, r) {
          const i = r.skeletons,
            a = [],
            s = e.parents.map(function (h) {
              return Oe.Objects.Model[h.ID];
            });
          if (s.length === 0) return;
          const o = e.children.reduce(function (h, d) {
            return i[d.ID] !== void 0 && (h = i[d.ID]), h;
          }, null);
          e.children.forEach(function (h) {
            r.morphTargets[h.ID] !== void 0 && a.push(r.morphTargets[h.ID]);
          });
          const l = s[0],
            u = {};
          "RotationOrder" in l && (u.eulerOrder = Zb(l.RotationOrder.value)),
            "InheritType" in l &&
              (u.inheritType = parseInt(l.InheritType.value)),
            "GeometricTranslation" in l &&
              (u.translation = l.GeometricTranslation.value),
            "GeometricRotation" in l &&
              (u.rotation = l.GeometricRotation.value),
            "GeometricScaling" in l && (u.scale = l.GeometricScaling.value);
          const c = Yb(u);
          return this.genGeometry(t, o, a, c);
        }
        genGeometry(e, t, r, i) {
          const a = new Lt();
          e.attrName && (a.name = e.attrName);
          const s = this.parseGeoNode(e, t),
            o = this.genBuffers(s),
            l = new yt(o.vertex, 3);
          if (
            (l.applyMatrix4(i),
            a.setAttribute("position", l),
            o.colors.length > 0 && a.setAttribute("color", new yt(o.colors, 3)),
            t &&
              (a.setAttribute("skinIndex", new Xm(o.weightsIndices, 4)),
              a.setAttribute("skinWeight", new yt(o.vertexWeights, 4)),
              (a.FBX_Deformer = t)),
            o.normal.length > 0)
          ) {
            const u = new Pn().getNormalMatrix(i),
              c = new yt(o.normal, 3);
            c.applyNormalMatrix(u), a.setAttribute("normal", c);
          }
          if (
            (o.uvs.forEach(function (u, c) {
              let h = "uv" + (c + 1).toString();
              c === 0 && (h = "uv"), a.setAttribute(h, new yt(o.uvs[c], 2));
            }),
            s.material && s.material.mappingType !== "AllSame")
          ) {
            let u = o.materialIndex[0],
              c = 0;
            if (
              (o.materialIndex.forEach(function (h, d) {
                h !== u && (a.addGroup(c, d - c, u), (u = h), (c = d));
              }),
              a.groups.length > 0)
            ) {
              const h = a.groups[a.groups.length - 1],
                d = h.start + h.count;
              d !== o.materialIndex.length &&
                a.addGroup(d, o.materialIndex.length - d, u);
            }
            a.groups.length === 0 &&
              a.addGroup(0, o.materialIndex.length, o.materialIndex[0]);
          }
          return this.addMorphTargets(a, e, r, i), a;
        }
        parseGeoNode(e, t) {
          const r = {};
          if (
            ((r.vertexPositions = e.Vertices !== void 0 ? e.Vertices.a : []),
            (r.vertexIndices =
              e.PolygonVertexIndex !== void 0 ? e.PolygonVertexIndex.a : []),
            e.LayerElementColor &&
              (r.color = this.parseVertexColors(e.LayerElementColor[0])),
            e.LayerElementMaterial &&
              (r.material = this.parseMaterialIndices(
                e.LayerElementMaterial[0]
              )),
            e.LayerElementNormal &&
              (r.normal = this.parseNormals(e.LayerElementNormal[0])),
            e.LayerElementUV)
          ) {
            r.uv = [];
            let i = 0;
            for (; e.LayerElementUV[i]; )
              e.LayerElementUV[i].UV &&
                r.uv.push(this.parseUVs(e.LayerElementUV[i])),
                i++;
          }
          return (
            (r.weightTable = {}),
            t !== null &&
              ((r.skeleton = t),
              t.rawBones.forEach(function (i, a) {
                i.indices.forEach(function (s, o) {
                  r.weightTable[s] === void 0 && (r.weightTable[s] = []),
                    r.weightTable[s].push({ id: a, weight: i.weights[o] });
                });
              })),
            r
          );
        }
        genBuffers(e) {
          const t = {
            vertex: [],
            normal: [],
            colors: [],
            uvs: [],
            materialIndex: [],
            vertexWeights: [],
            weightsIndices: [],
          };
          let r = 0,
            i = 0,
            a = !1,
            s = [],
            o = [],
            l = [],
            u = [],
            c = [],
            h = [];
          const d = this;
          return (
            e.vertexIndices.forEach(function (f, g) {
              let p,
                y = !1;
              f < 0 && ((f ^= -1), (y = !0));
              let v = [],
                m = [];
              if ((s.push(3 * f, 3 * f + 1, 3 * f + 2), e.color)) {
                const x = rc(g, r, f, e.color);
                l.push(x[0], x[1], x[2]);
              }
              if (e.skeleton) {
                if (
                  (e.weightTable[f] !== void 0 &&
                    e.weightTable[f].forEach(function (x) {
                      m.push(x.weight), v.push(x.id);
                    }),
                  m.length > 4)
                ) {
                  a ||
                    (console.warn(
                      "THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."
                    ),
                    (a = !0));
                  const x = [0, 0, 0, 0],
                    _ = [0, 0, 0, 0];
                  m.forEach(function (b, w) {
                    let M = b,
                      C = v[w];
                    _.forEach(function (N, G, U) {
                      if (M > N) {
                        (U[G] = M), (M = N);
                        const I = x[G];
                        (x[G] = C), (C = I);
                      }
                    });
                  }),
                    (v = x),
                    (m = _);
                }
                for (; m.length < 4; ) m.push(0), v.push(0);
                for (let x = 0; x < 4; ++x) c.push(m[x]), h.push(v[x]);
              }
              if (e.normal) {
                const x = rc(g, r, f, e.normal);
                o.push(x[0], x[1], x[2]);
              }
              e.material &&
                e.material.mappingType !== "AllSame" &&
                ((p = rc(g, r, f, e.material)[0]),
                p < 0 &&
                  (console.warn("THREE.FBXLoader: Invalid material index:", p),
                  (p = 0))),
                e.uv &&
                  e.uv.forEach(function (x, _) {
                    const b = rc(g, r, f, x);
                    u[_] === void 0 && (u[_] = []),
                      u[_].push(b[0]),
                      u[_].push(b[1]);
                  }),
                i++,
                y &&
                  (d.genFace(t, e, s, p, o, l, u, c, h, i),
                  r++,
                  (i = 0),
                  (s = []),
                  (o = []),
                  (l = []),
                  (u = []),
                  (c = []),
                  (h = []));
            }),
            t
          );
        }
        genFace(e, t, r, i, a, s, o, l, u, c) {
          for (let h = 2; h < c; h++)
            e.vertex.push(t.vertexPositions[r[0]]),
              e.vertex.push(t.vertexPositions[r[1]]),
              e.vertex.push(t.vertexPositions[r[2]]),
              e.vertex.push(t.vertexPositions[r[3 * (h - 1)]]),
              e.vertex.push(t.vertexPositions[r[3 * (h - 1) + 1]]),
              e.vertex.push(t.vertexPositions[r[3 * (h - 1) + 2]]),
              e.vertex.push(t.vertexPositions[r[3 * h]]),
              e.vertex.push(t.vertexPositions[r[3 * h + 1]]),
              e.vertex.push(t.vertexPositions[r[3 * h + 2]]),
              t.skeleton &&
                (e.vertexWeights.push(l[0]),
                e.vertexWeights.push(l[1]),
                e.vertexWeights.push(l[2]),
                e.vertexWeights.push(l[3]),
                e.vertexWeights.push(l[4 * (h - 1)]),
                e.vertexWeights.push(l[4 * (h - 1) + 1]),
                e.vertexWeights.push(l[4 * (h - 1) + 2]),
                e.vertexWeights.push(l[4 * (h - 1) + 3]),
                e.vertexWeights.push(l[4 * h]),
                e.vertexWeights.push(l[4 * h + 1]),
                e.vertexWeights.push(l[4 * h + 2]),
                e.vertexWeights.push(l[4 * h + 3]),
                e.weightsIndices.push(u[0]),
                e.weightsIndices.push(u[1]),
                e.weightsIndices.push(u[2]),
                e.weightsIndices.push(u[3]),
                e.weightsIndices.push(u[4 * (h - 1)]),
                e.weightsIndices.push(u[4 * (h - 1) + 1]),
                e.weightsIndices.push(u[4 * (h - 1) + 2]),
                e.weightsIndices.push(u[4 * (h - 1) + 3]),
                e.weightsIndices.push(u[4 * h]),
                e.weightsIndices.push(u[4 * h + 1]),
                e.weightsIndices.push(u[4 * h + 2]),
                e.weightsIndices.push(u[4 * h + 3])),
              t.color &&
                (e.colors.push(s[0]),
                e.colors.push(s[1]),
                e.colors.push(s[2]),
                e.colors.push(s[3 * (h - 1)]),
                e.colors.push(s[3 * (h - 1) + 1]),
                e.colors.push(s[3 * (h - 1) + 2]),
                e.colors.push(s[3 * h]),
                e.colors.push(s[3 * h + 1]),
                e.colors.push(s[3 * h + 2])),
              t.material &&
                t.material.mappingType !== "AllSame" &&
                (e.materialIndex.push(i),
                e.materialIndex.push(i),
                e.materialIndex.push(i)),
              t.normal &&
                (e.normal.push(a[0]),
                e.normal.push(a[1]),
                e.normal.push(a[2]),
                e.normal.push(a[3 * (h - 1)]),
                e.normal.push(a[3 * (h - 1) + 1]),
                e.normal.push(a[3 * (h - 1) + 2]),
                e.normal.push(a[3 * h]),
                e.normal.push(a[3 * h + 1]),
                e.normal.push(a[3 * h + 2])),
              t.uv &&
                t.uv.forEach(function (d, f) {
                  e.uvs[f] === void 0 && (e.uvs[f] = []),
                    e.uvs[f].push(o[f][0]),
                    e.uvs[f].push(o[f][1]),
                    e.uvs[f].push(o[f][2 * (h - 1)]),
                    e.uvs[f].push(o[f][2 * (h - 1) + 1]),
                    e.uvs[f].push(o[f][2 * h]),
                    e.uvs[f].push(o[f][2 * h + 1]);
                });
        }
        addMorphTargets(e, t, r, i) {
          if (r.length === 0) return;
          (e.morphTargetsRelative = !0), (e.morphAttributes.position = []);
          const a = this;
          r.forEach(function (s) {
            s.rawTargets.forEach(function (o) {
              const l = Oe.Objects.Geometry[o.geoID];
              l !== void 0 && a.genMorphGeometry(e, t, l, i, o.name);
            });
          });
        }
        genMorphGeometry(e, t, r, i, a) {
          const s =
              t.PolygonVertexIndex !== void 0 ? t.PolygonVertexIndex.a : [],
            o = r.Vertices !== void 0 ? r.Vertices.a : [],
            l = r.Indexes !== void 0 ? r.Indexes.a : [],
            u = 3 * e.attributes.position.count,
            c = new Float32Array(u);
          for (let g = 0; g < l.length; g++) {
            const p = 3 * l[g];
            (c[p] = o[3 * g]),
              (c[p + 1] = o[3 * g + 1]),
              (c[p + 2] = o[3 * g + 2]);
          }
          const h = { vertexIndices: s, vertexPositions: c },
            d = this.genBuffers(h),
            f = new yt(d.vertex, 3);
          (f.name = a || r.attrName),
            f.applyMatrix4(i),
            e.morphAttributes.position.push(f);
        }
        parseNormals(e) {
          const t = e.MappingInformationType,
            r = e.ReferenceInformationType,
            i = e.Normals.a;
          let a = [];
          return (
            r === "IndexToDirect" &&
              ("NormalIndex" in e
                ? (a = e.NormalIndex.a)
                : "NormalsIndex" in e && (a = e.NormalsIndex.a)),
            {
              dataSize: 3,
              buffer: i,
              indices: a,
              mappingType: t,
              referenceType: r,
            }
          );
        }
        parseUVs(e) {
          const t = e.MappingInformationType,
            r = e.ReferenceInformationType,
            i = e.UV.a;
          let a = [];
          return (
            r === "IndexToDirect" && (a = e.UVIndex.a),
            {
              dataSize: 2,
              buffer: i,
              indices: a,
              mappingType: t,
              referenceType: r,
            }
          );
        }
        parseVertexColors(e) {
          const t = e.MappingInformationType,
            r = e.ReferenceInformationType,
            i = e.Colors.a;
          let a = [];
          return (
            r === "IndexToDirect" && (a = e.ColorIndex.a),
            {
              dataSize: 4,
              buffer: i,
              indices: a,
              mappingType: t,
              referenceType: r,
            }
          );
        }
        parseMaterialIndices(e) {
          const t = e.MappingInformationType,
            r = e.ReferenceInformationType;
          if (t === "NoMappingInformation")
            return {
              dataSize: 1,
              buffer: [0],
              indices: [0],
              mappingType: "AllSame",
              referenceType: r,
            };
          const i = e.Materials.a,
            a = [];
          for (let s = 0; s < i.length; ++s) a.push(s);
          return {
            dataSize: 1,
            buffer: i,
            indices: a,
            mappingType: t,
            referenceType: r,
          };
        }
        parseNurbsGeometry(e) {
          if (Q1 === void 0)
            return (
              console.error(
                "THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."
              ),
              new Lt()
            );
          const t = parseInt(e.Order);
          if (isNaN(t))
            return (
              console.error(
                "THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",
                e.Order,
                e.id
              ),
              new Lt()
            );
          const r = t - 1,
            i = e.KnotVector.a,
            a = [],
            s = e.Points.a;
          for (let c = 0, h = s.length; c < h; c += 4)
            a.push(new Be().fromArray(s, c));
          let o, l;
          if (e.Form === "Closed") a.push(a[0]);
          else if (e.Form === "Periodic") {
            (o = r), (l = i.length - 1 - o);
            for (let c = 0; c < r; ++c) a.push(a[c]);
          }
          const u = new Q1(r, i, a, o, l).getPoints(12 * a.length);
          return new Lt().setFromPoints(u);
        }
      }
      class _C {
        parse() {
          const e = [],
            t = this.parseClips();
          if (t !== void 0)
            for (const r in t) {
              const i = t[r],
                a = this.addClip(i);
              e.push(a);
            }
          return e;
        }
        parseClips() {
          if (Oe.Objects.AnimationCurve === void 0) return;
          const e = this.parseAnimationCurveNodes();
          this.parseAnimationCurves(e);
          const t = this.parseAnimationLayers(e);
          return this.parseAnimStacks(t);
        }
        parseAnimationCurveNodes() {
          const e = Oe.Objects.AnimationCurveNode,
            t = new Map();
          for (const r in e) {
            const i = e[r];
            if (i.attrName.match(/S|R|T|DeformPercent/) !== null) {
              const a = { id: i.id, attr: i.attrName, curves: {} };
              t.set(a.id, a);
            }
          }
          return t;
        }
        parseAnimationCurves(e) {
          const t = Oe.Objects.AnimationCurve;
          for (const r in t) {
            const i = {
                id: t[r].id,
                times: t[r].KeyTime.a.map(SC),
                values: t[r].KeyValueFloat.a,
              },
              a = Mt.get(i.id);
            if (a !== void 0) {
              const s = a.parents[0].ID,
                o = a.parents[0].relationship;
              o.match(/X/)
                ? (e.get(s).curves.x = i)
                : o.match(/Y/)
                ? (e.get(s).curves.y = i)
                : o.match(/Z/)
                ? (e.get(s).curves.z = i)
                : o.match(/d|DeformPercent/) &&
                  e.has(s) &&
                  (e.get(s).curves.morph = i);
            }
          }
        }
        parseAnimationLayers(e) {
          const t = Oe.Objects.AnimationLayer,
            r = new Map();
          for (const i in t) {
            const a = [],
              s = Mt.get(parseInt(i));
            s !== void 0 &&
              (s.children.forEach(function (o, l) {
                if (e.has(o.ID)) {
                  const u = e.get(o.ID);
                  if (
                    u.curves.x !== void 0 ||
                    u.curves.y !== void 0 ||
                    u.curves.z !== void 0
                  ) {
                    if (a[l] === void 0) {
                      const c = Mt.get(o.ID).parents.filter(function (h) {
                        return h.relationship !== void 0;
                      })[0].ID;
                      if (c !== void 0) {
                        const h = Oe.Objects.Model[c.toString()];
                        if (h === void 0)
                          return void console.warn(
                            "THREE.FBXLoader: Encountered a unused curve.",
                            o
                          );
                        const d = {
                          modelName: h.attrName
                            ? He.sanitizeNodeName(h.attrName)
                            : "",
                          ID: h.id,
                          initialPosition: [0, 0, 0],
                          initialRotation: [0, 0, 0],
                          initialScale: [1, 1, 1],
                        };
                        En.traverse(function (f) {
                          f.ID === h.id &&
                            ((d.transform = f.matrix),
                            f.userData.transformData &&
                              (d.eulerOrder =
                                f.userData.transformData.eulerOrder));
                        }),
                          d.transform || (d.transform = new Te()),
                          "PreRotation" in h &&
                            (d.preRotation = h.PreRotation.value),
                          "PostRotation" in h &&
                            (d.postRotation = h.PostRotation.value),
                          (a[l] = d);
                      }
                    }
                    a[l] && (a[l][u.attr] = u);
                  } else if (u.curves.morph !== void 0) {
                    if (a[l] === void 0) {
                      const c = Mt.get(o.ID).parents.filter(function (y) {
                          return y.relationship !== void 0;
                        })[0].ID,
                        h = Mt.get(c).parents[0].ID,
                        d = Mt.get(h).parents[0].ID,
                        f = Mt.get(d).parents[0].ID,
                        g = Oe.Objects.Model[f],
                        p = {
                          modelName: g.attrName
                            ? He.sanitizeNodeName(g.attrName)
                            : "",
                          morphName: Oe.Objects.Deformer[c].attrName,
                        };
                      a[l] = p;
                    }
                    a[l][u.attr] = u;
                  }
                }
              }),
              r.set(parseInt(i), a));
          }
          return r;
        }
        parseAnimStacks(e) {
          const t = Oe.Objects.AnimationStack,
            r = {};
          for (const i in t) {
            const a = Mt.get(parseInt(i)).children;
            a.length > 1 &&
              console.warn(
                "THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers."
              );
            const s = e.get(a[0].ID);
            r[i] = { name: t[i].attrName, layer: s };
          }
          return r;
        }
        addClip(e) {
          let t = [];
          const r = this;
          return (
            e.layer.forEach(function (i) {
              t = t.concat(r.generateTracks(i));
            }),
            new oT(e.name, -1, t)
          );
        }
        generateTracks(e) {
          const t = [];
          let r = new j(),
            i = new ar(),
            a = new j();
          if (
            (e.transform && e.transform.decompose(r, i, a),
            (r = r.toArray()),
            (i = new xn().setFromQuaternion(i, e.eulerOrder).toArray()),
            (a = a.toArray()),
            e.T !== void 0 && Object.keys(e.T.curves).length > 0)
          ) {
            const s = this.generateVectorTrack(
              e.modelName,
              e.T.curves,
              r,
              "position"
            );
            s !== void 0 && t.push(s);
          }
          if (e.R !== void 0 && Object.keys(e.R.curves).length > 0) {
            const s = this.generateRotationTrack(
              e.modelName,
              e.R.curves,
              i,
              e.preRotation,
              e.postRotation,
              e.eulerOrder
            );
            s !== void 0 && t.push(s);
          }
          if (e.S !== void 0 && Object.keys(e.S.curves).length > 0) {
            const s = this.generateVectorTrack(
              e.modelName,
              e.S.curves,
              a,
              "scale"
            );
            s !== void 0 && t.push(s);
          }
          if (e.DeformPercent !== void 0) {
            const s = this.generateMorphTrack(e);
            s !== void 0 && t.push(s);
          }
          return t;
        }
        generateVectorTrack(e, t, r, i) {
          const a = this.getTimesForAllAxes(t),
            s = this.getKeyframeTrackValues(a, t, r);
          return new Ul(e + "." + i, a, s);
        }
        generateRotationTrack(e, t, r, i, a, s) {
          t.x !== void 0 &&
            (this.interpolateRotations(t.x),
            (t.x.values = t.x.values.map(Nr.degToRad))),
            t.y !== void 0 &&
              (this.interpolateRotations(t.y),
              (t.y.values = t.y.values.map(Nr.degToRad))),
            t.z !== void 0 &&
              (this.interpolateRotations(t.z),
              (t.z.values = t.z.values.map(Nr.degToRad)));
          const o = this.getTimesForAllAxes(t),
            l = this.getKeyframeTrackValues(o, t, r);
          i !== void 0 &&
            ((i = i.map(Nr.degToRad)).push(s),
            (i = new xn().fromArray(i)),
            (i = new ar().setFromEuler(i))),
            a !== void 0 &&
              ((a = a.map(Nr.degToRad)).push(s),
              (a = new xn().fromArray(a)),
              (a = new ar().setFromEuler(a).invert()));
          const u = new ar(),
            c = new xn(),
            h = [];
          for (let d = 0; d < l.length; d += 3)
            c.set(l[d], l[d + 1], l[d + 2], s),
              u.setFromEuler(c),
              i !== void 0 && u.premultiply(i),
              a !== void 0 && u.multiply(a),
              u.toArray(h, (d / 3) * 4);
          return new $s(e + ".quaternion", o, h);
        }
        generateMorphTrack(e) {
          const t = e.DeformPercent.curves.morph,
            r = t.values.map(function (a) {
              return a / 100;
            }),
            i = En.getObjectByName(e.modelName).morphTargetDictionary[
              e.morphName
            ];
          return new Il(
            e.modelName + ".morphTargetInfluences[" + i + "]",
            t.times,
            r
          );
        }
        getTimesForAllAxes(e) {
          let t = [];
          if (
            (e.x !== void 0 && (t = t.concat(e.x.times)),
            e.y !== void 0 && (t = t.concat(e.y.times)),
            e.z !== void 0 && (t = t.concat(e.z.times)),
            (t = t.sort(function (r, i) {
              return r - i;
            })),
            t.length > 1)
          ) {
            let r = 1,
              i = t[0];
            for (let a = 1; a < t.length; a++) {
              const s = t[a];
              s !== i && ((t[r] = s), (i = s), r++);
            }
            t = t.slice(0, r);
          }
          return t;
        }
        getKeyframeTrackValues(e, t, r) {
          const i = r,
            a = [];
          let s = -1,
            o = -1,
            l = -1;
          return (
            e.forEach(function (u) {
              if (
                (t.x && (s = t.x.times.indexOf(u)),
                t.y && (o = t.y.times.indexOf(u)),
                t.z && (l = t.z.times.indexOf(u)),
                s !== -1)
              ) {
                const c = t.x.values[s];
                a.push(c), (i[0] = c);
              } else a.push(i[0]);
              if (o !== -1) {
                const c = t.y.values[o];
                a.push(c), (i[1] = c);
              } else a.push(i[1]);
              if (l !== -1) {
                const c = t.z.values[l];
                a.push(c), (i[2] = c);
              } else a.push(i[2]);
            }),
            a
          );
        }
        interpolateRotations(e) {
          for (let t = 1; t < e.values.length; t++) {
            const r = e.values[t - 1],
              i = e.values[t] - r,
              a = Math.abs(i);
            if (a >= 180) {
              const s = a / 180,
                o = i / s;
              let l = r + o;
              const u = e.times[t - 1],
                c = (e.times[t] - u) / s;
              let h = u + c;
              const d = [],
                f = [];
              for (; h < e.times[t]; ) d.push(h), (h += c), f.push(l), (l += o);
              (e.times = ry(e.times, t, d)), (e.values = ry(e.values, t, f));
            }
          }
        }
      }
      class bC {
        getPrevNode() {
          return this.nodeStack[this.currentIndent - 2];
        }
        getCurrentNode() {
          return this.nodeStack[this.currentIndent - 1];
        }
        getCurrentProp() {
          return this.currentProp;
        }
        pushStack(e) {
          this.nodeStack.push(e), (this.currentIndent += 1);
        }
        popStack() {
          this.nodeStack.pop(), (this.currentIndent -= 1);
        }
        setCurrentProp(e, t) {
          (this.currentProp = e), (this.currentPropName = t);
        }
        parse(e) {
          (this.currentIndent = 0),
            (this.allNodes = new $b()),
            (this.nodeStack = []),
            (this.currentProp = []),
            (this.currentPropName = "");
          const t = this,
            r = e.split(/[\r\n]+/);
          return (
            r.forEach(function (i, a) {
              const s = i.match(/^[\s\t]*;/),
                o = i.match(/^[\s\t]*$/);
              if (s || o) return;
              const l = i.match(
                  "^\\t{" + t.currentIndent + "}(\\w+):(.*){",
                  ""
                ),
                u = i.match(
                  "^\\t{" + t.currentIndent + "}(\\w+):[\\s\\t\\r\\n](.*)"
                ),
                c = i.match("^\\t{" + (t.currentIndent - 1) + "}}");
              l
                ? t.parseNodeBegin(i, l)
                : u
                ? t.parseNodeProperty(i, u, r[++a])
                : c
                ? t.popStack()
                : i.match(/^[^\s\t}]/) && t.parseNodePropertyContinued(i);
            }),
            this.allNodes
          );
        }
        parseNodeBegin(e, t) {
          const r = t[1].trim().replace(/^"/, "").replace(/"$/, ""),
            i = t[2].split(",").map(function (l) {
              return l.trim().replace(/^"/, "").replace(/"$/, "");
            }),
            a = { name: r },
            s = this.parseNodeAttr(i),
            o = this.getCurrentNode();
          this.currentIndent === 0
            ? this.allNodes.add(r, a)
            : r in o
            ? (r === "PoseNode"
                ? o.PoseNode.push(a)
                : o[r].id !== void 0 && ((o[r] = {}), (o[r][o[r].id] = o[r])),
              s.id !== "" && (o[r][s.id] = a))
            : typeof s.id == "number"
            ? ((o[r] = {}), (o[r][s.id] = a))
            : r !== "Properties70" && (o[r] = r === "PoseNode" ? [a] : a),
            typeof s.id == "number" && (a.id = s.id),
            s.name !== "" && (a.attrName = s.name),
            s.type !== "" && (a.attrType = s.type),
            this.pushStack(a);
        }
        parseNodeAttr(e) {
          let t = e[0];
          e[0] !== "" && ((t = parseInt(e[0])), isNaN(t) && (t = e[0]));
          let r = "",
            i = "";
          return (
            e.length > 1 && ((r = e[1].replace(/^(\w+)::/, "")), (i = e[2])),
            { id: t, name: r, type: i }
          );
        }
        parseNodeProperty(e, t, r) {
          let i = t[1].replace(/^"/, "").replace(/"$/, "").trim(),
            a = t[2].replace(/^"/, "").replace(/"$/, "").trim();
          i === "Content" &&
            a === "," &&
            (a = r.replace(/"/g, "").replace(/,$/, "").trim());
          const s = this.getCurrentNode();
          if (s.name !== "Properties70") {
            if (i === "C") {
              const o = a.split(",").slice(1),
                l = parseInt(o[0]),
                u = parseInt(o[1]);
              let c = a.split(",").slice(3);
              (c = c.map(function (h) {
                return h.trim().replace(/^"/, "");
              })),
                (i = "connections"),
                (a = [l, u]),
                (function (h, d) {
                  for (let f = 0, g = h.length, p = d.length; f < p; f++, g++)
                    h[g] = d[f];
                })(a, c),
                s[i] === void 0 && (s[i] = []);
            }
            i === "Node" && (s.id = a),
              i in s && Array.isArray(s[i])
                ? s[i].push(a)
                : i !== "a"
                ? (s[i] = a)
                : (s.a = a),
              this.setCurrentProp(s, i),
              i === "a" && a.slice(-1) !== "," && (s.a = Mf(a));
          } else this.parseNodeSpecialProperty(e, i, a);
        }
        parseNodePropertyContinued(e) {
          const t = this.getCurrentNode();
          (t.a += e), e.slice(-1) !== "," && (t.a = Mf(t.a));
        }
        parseNodeSpecialProperty(e, t, r) {
          const i = r.split('",').map(function (c) {
              return c.trim().replace(/^\"/, "").replace(/\s/, "_");
            }),
            a = i[0],
            s = i[1],
            o = i[2],
            l = i[3];
          let u = i[4];
          switch (s) {
            case "int":
            case "enum":
            case "bool":
            case "ULongLong":
            case "double":
            case "Number":
            case "FieldOfView":
              u = parseFloat(u);
              break;
            case "Color":
            case "ColorRGB":
            case "Vector3D":
            case "Lcl_Translation":
            case "Lcl_Rotation":
            case "Lcl_Scaling":
              u = Mf(u);
          }
          (this.getPrevNode()[a] = { type: s, type2: o, flag: l, value: u }),
            this.setCurrentProp(this.getPrevNode(), a);
        }
      }
      class wC {
        parse(e) {
          const t = new ey(e);
          t.skip(23);
          const r = t.getUint32();
          if (r < 6400)
            throw new Error(
              "THREE.FBXLoader: FBX version not supported, FileVersion: " + r
            );
          const i = new $b();
          for (; !this.endOfContent(t); ) {
            const a = this.parseNode(t, r);
            a !== null && i.add(a.name, a);
          }
          return i;
        }
        endOfContent(e) {
          return e.size() % 16 == 0
            ? ((e.getOffset() + 160 + 16) & -16) >= e.size()
            : e.getOffset() + 160 + 16 >= e.size();
        }
        parseNode(e, t) {
          const r = {},
            i = t >= 7500 ? e.getUint64() : e.getUint32(),
            a = t >= 7500 ? e.getUint64() : e.getUint32();
          t >= 7500 ? e.getUint64() : e.getUint32();
          const s = e.getUint8(),
            o = e.getString(s);
          if (i === 0) return null;
          const l = [];
          for (let d = 0; d < a; d++) l.push(this.parseProperty(e));
          const u = l.length > 0 ? l[0] : "",
            c = l.length > 1 ? l[1] : "",
            h = l.length > 2 ? l[2] : "";
          for (
            r.singleProperty = a === 1 && e.getOffset() === i;
            i > e.getOffset();

          ) {
            const d = this.parseNode(e, t);
            d !== null && this.parseSubNode(o, r, d);
          }
          return (
            (r.propertyList = l),
            typeof u == "number" && (r.id = u),
            c !== "" && (r.attrName = c),
            h !== "" && (r.attrType = h),
            o !== "" && (r.name = o),
            r
          );
        }
        parseSubNode(e, t, r) {
          if (r.singleProperty === !0) {
            const i = r.propertyList[0];
            Array.isArray(i) ? ((t[r.name] = r), (r.a = i)) : (t[r.name] = i);
          } else if (e === "Connections" && r.name === "C") {
            const i = [];
            r.propertyList.forEach(function (a, s) {
              s !== 0 && i.push(a);
            }),
              t.connections === void 0 && (t.connections = []),
              t.connections.push(i);
          } else if (r.name === "Properties70")
            Object.keys(r).forEach(function (i) {
              t[i] = r[i];
            });
          else if (e === "Properties70" && r.name === "P") {
            let i = r.propertyList[0],
              a = r.propertyList[1];
            const s = r.propertyList[2],
              o = r.propertyList[3];
            let l;
            i.indexOf("Lcl ") === 0 && (i = i.replace("Lcl ", "Lcl_")),
              a.indexOf("Lcl ") === 0 && (a = a.replace("Lcl ", "Lcl_")),
              (l =
                a === "Color" ||
                a === "ColorRGB" ||
                a === "Vector" ||
                a === "Vector3D" ||
                a.indexOf("Lcl_") === 0
                  ? [r.propertyList[4], r.propertyList[5], r.propertyList[6]]
                  : r.propertyList[4]),
              (t[i] = { type: a, type2: s, flag: o, value: l });
          } else
            t[r.name] === void 0
              ? typeof r.id == "number"
                ? ((t[r.name] = {}), (t[r.name][r.id] = r))
                : (t[r.name] = r)
              : r.name === "PoseNode"
              ? (Array.isArray(t[r.name]) || (t[r.name] = [t[r.name]]),
                t[r.name].push(r))
              : t[r.name][r.id] === void 0 && (t[r.name][r.id] = r);
        }
        parseProperty(e) {
          const t = e.getString(1);
          let r;
          switch (t) {
            case "C":
              return e.getBoolean();
            case "D":
              return e.getFloat64();
            case "F":
              return e.getFloat32();
            case "I":
              return e.getInt32();
            case "L":
              return e.getInt64();
            case "R":
              return (r = e.getUint32()), e.getArrayBuffer(r);
            case "S":
              return (r = e.getUint32()), e.getString(r);
            case "Y":
              return e.getInt16();
            case "b":
            case "c":
            case "d":
            case "f":
            case "i":
            case "l":
              const i = e.getUint32(),
                a = e.getUint32(),
                s = e.getUint32();
              if (a === 0)
                switch (t) {
                  case "b":
                  case "c":
                    return e.getBooleanArray(i);
                  case "d":
                    return e.getFloat64Array(i);
                  case "f":
                    return e.getFloat32Array(i);
                  case "i":
                    return e.getInt32Array(i);
                  case "l":
                    return e.getInt64Array(i);
                }
              pC === void 0 &&
                console.error(
                  "THREE.FBXLoader: External library fflate.min.js required."
                );
              const o = Gl(new Uint8Array(e.getArrayBuffer(s))),
                l = new ey(o.buffer);
              switch (t) {
                case "b":
                case "c":
                  return l.getBooleanArray(i);
                case "d":
                  return l.getFloat64Array(i);
                case "f":
                  return l.getFloat32Array(i);
                case "i":
                  return l.getInt32Array(i);
                case "l":
                  return l.getInt64Array(i);
              }
              break;
            default:
              throw new Error("THREE.FBXLoader: Unknown property type " + t);
          }
        }
      }
      class ey {
        constructor(e, t) {
          (this.dv = new DataView(e)),
            (this.offset = 0),
            (this.littleEndian = t === void 0 || t);
        }
        getOffset() {
          return this.offset;
        }
        size() {
          return this.dv.buffer.byteLength;
        }
        skip(e) {
          this.offset += e;
        }
        getBoolean() {
          return (1 & this.getUint8()) == 1;
        }
        getBooleanArray(e) {
          const t = [];
          for (let r = 0; r < e; r++) t.push(this.getBoolean());
          return t;
        }
        getUint8() {
          const e = this.dv.getUint8(this.offset);
          return (this.offset += 1), e;
        }
        getInt16() {
          const e = this.dv.getInt16(this.offset, this.littleEndian);
          return (this.offset += 2), e;
        }
        getInt32() {
          const e = this.dv.getInt32(this.offset, this.littleEndian);
          return (this.offset += 4), e;
        }
        getInt32Array(e) {
          const t = [];
          for (let r = 0; r < e; r++) t.push(this.getInt32());
          return t;
        }
        getUint32() {
          const e = this.dv.getUint32(this.offset, this.littleEndian);
          return (this.offset += 4), e;
        }
        getInt64() {
          let e, t;
          return (
            this.littleEndian
              ? ((e = this.getUint32()), (t = this.getUint32()))
              : ((t = this.getUint32()), (e = this.getUint32())),
            2147483648 & t
              ? ((t = 4294967295 & ~t),
                (e = 4294967295 & ~e),
                e === 4294967295 && (t = (t + 1) & 4294967295),
                (e = (e + 1) & 4294967295),
                -(4294967296 * t + e))
              : 4294967296 * t + e
          );
        }
        getInt64Array(e) {
          const t = [];
          for (let r = 0; r < e; r++) t.push(this.getInt64());
          return t;
        }
        getUint64() {
          let e, t;
          return (
            this.littleEndian
              ? ((e = this.getUint32()), (t = this.getUint32()))
              : ((t = this.getUint32()), (e = this.getUint32())),
            4294967296 * t + e
          );
        }
        getFloat32() {
          const e = this.dv.getFloat32(this.offset, this.littleEndian);
          return (this.offset += 4), e;
        }
        getFloat32Array(e) {
          const t = [];
          for (let r = 0; r < e; r++) t.push(this.getFloat32());
          return t;
        }
        getFloat64() {
          const e = this.dv.getFloat64(this.offset, this.littleEndian);
          return (this.offset += 8), e;
        }
        getFloat64Array(e) {
          const t = [];
          for (let r = 0; r < e; r++) t.push(this.getFloat64());
          return t;
        }
        getArrayBuffer(e) {
          const t = this.dv.buffer.slice(this.offset, this.offset + e);
          return (this.offset += e), t;
        }
        getString(e) {
          let t = [];
          for (let i = 0; i < e; i++) t[i] = this.getUint8();
          const r = t.indexOf(0);
          return (
            r >= 0 && (t = t.slice(0, r)), tg.decodeText(new Uint8Array(t))
          );
        }
      }
      class $b {
        add(e, t) {
          this[e] = t;
        }
      }
      function ty(n) {
        const e = n.match(/FBXVersion: (\d+)/);
        if (e) return parseInt(e[1]);
        throw new Error(
          "THREE.FBXLoader: Cannot find the version number for the file given."
        );
      }
      function SC(n) {
        return n / 46186158e3;
      }
      const MC = [];
      function rc(n, e, t, r) {
        let i;
        switch (r.mappingType) {
          case "ByPolygonVertex":
            i = n;
            break;
          case "ByPolygon":
            i = e;
            break;
          case "ByVertice":
            i = t;
            break;
          case "AllSame":
            i = r.indices[0];
            break;
          default:
            console.warn(
              "THREE.FBXLoader: unknown attribute mapping type " + r.mappingType
            );
        }
        r.referenceType === "IndexToDirect" && (i = r.indices[i]);
        const a = i * r.dataSize,
          s = a + r.dataSize;
        return (function (o, l, u, c) {
          for (let h = u, d = 0; h < c; h++, d++) o[d] = l[h];
          return o;
        })(MC, r.buffer, a, s);
      }
      const Sf = new xn(),
        gs = new j();
      function Yb(n) {
        const e = new Te(),
          t = new Te(),
          r = new Te(),
          i = new Te(),
          a = new Te(),
          s = new Te(),
          o = new Te(),
          l = new Te(),
          u = new Te(),
          c = new Te(),
          h = new Te(),
          d = new Te(),
          f = n.inheritType ? n.inheritType : 0;
        if (
          (n.translation && e.setPosition(gs.fromArray(n.translation)),
          n.preRotation)
        ) {
          const G = n.preRotation.map(Nr.degToRad);
          G.push(n.eulerOrder || xn.DefaultOrder),
            t.makeRotationFromEuler(Sf.fromArray(G));
        }
        if (n.rotation) {
          const G = n.rotation.map(Nr.degToRad);
          G.push(n.eulerOrder || xn.DefaultOrder),
            r.makeRotationFromEuler(Sf.fromArray(G));
        }
        if (n.postRotation) {
          const G = n.postRotation.map(Nr.degToRad);
          G.push(n.eulerOrder || xn.DefaultOrder),
            i.makeRotationFromEuler(Sf.fromArray(G)),
            i.invert();
        }
        n.scale && a.scale(gs.fromArray(n.scale)),
          n.scalingOffset && o.setPosition(gs.fromArray(n.scalingOffset)),
          n.scalingPivot && s.setPosition(gs.fromArray(n.scalingPivot)),
          n.rotationOffset && l.setPosition(gs.fromArray(n.rotationOffset)),
          n.rotationPivot && u.setPosition(gs.fromArray(n.rotationPivot)),
          n.parentMatrixWorld &&
            (h.copy(n.parentMatrix), c.copy(n.parentMatrixWorld));
        const g = t.clone().multiply(r).multiply(i),
          p = new Te();
        p.extractRotation(c);
        const y = new Te();
        y.copyPosition(c);
        const v = y.clone().invert().multiply(c),
          m = p.clone().invert().multiply(v),
          x = a,
          _ = new Te();
        if (f === 0) _.copy(p).multiply(g).multiply(m).multiply(x);
        else if (f === 1) _.copy(p).multiply(m).multiply(g).multiply(x);
        else {
          const G = new Te()
              .scale(new j().setFromMatrixScale(h))
              .clone()
              .invert(),
            U = m.clone().multiply(G);
          _.copy(p).multiply(g).multiply(U).multiply(x);
        }
        const b = u.clone().invert(),
          w = s.clone().invert();
        let M = e
          .clone()
          .multiply(l)
          .multiply(u)
          .multiply(t)
          .multiply(r)
          .multiply(i)
          .multiply(b)
          .multiply(o)
          .multiply(s)
          .multiply(a)
          .multiply(w);
        const C = new Te().copyPosition(M),
          N = c.clone().multiply(C);
        return (
          d.copyPosition(N),
          (M = d.clone().multiply(_)),
          M.premultiply(c.invert()),
          M
        );
      }
      function Zb(n) {
        const e = ["ZYX", "YZX", "XZY", "ZXY", "YXZ", "XYZ"];
        return (n = n || 0) === 6
          ? (console.warn(
              "THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."
            ),
            e[0])
          : e[n];
      }
      function Mf(n) {
        return n.split(",").map(function (e) {
          return parseFloat(e);
        });
      }
      function ny(n, e, t) {
        return (
          e === void 0 && (e = 0),
          t === void 0 && (t = n.byteLength),
          tg.decodeText(new Uint8Array(n, e, t))
        );
      }
      function ry(n, e, t) {
        return n.slice(0, e).concat(t).concat(n.slice(e));
      }
      const TC = async (n, e) => {
          const t = new vC(e);
          try {
            return await t.loadAsync(n);
          } catch (r) {
            throw (console.error(r), new Error(`FBX load failed with ${n}`));
          }
        },
        iy = async (n, e, t) => {
          const r = new U_(t);
          try {
            const i = await r.loadAsync(n);
            return (i.uuid = e || i.uuid), i;
          } catch (i) {
            throw (
              (console.error(i), new Error(`Texture load failed with ${n}`))
            );
          }
        },
        Kb = (n) => {
          const e = new j();
          return (
            n.getWorldPosition(e),
            X.camera.updateMatrixWorld(),
            e.clone().project(X.camera)
          );
        },
        Jb = `#ifdef GL_ES
precision mediump float;
#endif

varying vec2 v_uv;

void main() {
  v_uv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}`,
        Qb = `#ifdef GL_ES
precision mediump float;
#endif

uniform sampler2D u_diffuse;
uniform float u_alpha;
uniform float u_diffuse_ratio;
uniform float u_mask_radius;
varying vec2 v_uv;

float circleMask() {
  return ( distance(v_uv,vec2(0.5,0.5)) > u_mask_radius ) ? 0.0 : 1.0;
}

void main() {
  if(circleMask() < 1.0) { discard; }
  vec3 diffuseTex = texture2D(u_diffuse, (vec2(v_uv.x / u_diffuse_ratio, v_uv.y) - vec2(0.5 / u_diffuse_ratio, 0.5)) * (1.0 / (u_mask_radius * 2.0)) + vec2(0.5, 0.5) ).rgb;
  gl_FragColor = vec4(diffuseTex, u_alpha);
}`,
        ai = {
          models: {
            tunnel_tube_model:
              "" +
              new URL("assets/tunnel_tube_model.08938d8b.fbx", import.meta.url)
                .href,
          },
          model_tex: {
            time_pattern:
              "" +
              new URL("assets/time_pattern.8c7e04ad.jpg", import.meta.url).href,
            studio_env:
              "" +
              new URL("assets/studio_env.bd28c471.jpg", import.meta.url).href,
            droplet_dispersive_sprite:
              "" +
              new URL(
                "assets/droplet_dispersive_sprite.8e12f1c2.png",
                import.meta.url
              ).href,
            droplet_diffuse:
              "" +
              new URL("assets/droplet_diffuse.87e9c45c.jpg", import.meta.url)
                .href,
            droplet_frost:
              "" +
              new URL("assets/droplet_frost.e5a61f90.jpg", import.meta.url)
                .href,
            fake_droplet_diffuse:
              "" +
              new URL("assets/fake_droplet.d8afb207.png", import.meta.url).href,
            fake_droplet_diffuse_blur:
              "" +
              new URL("assets/fake_droplet_blur.3f8ae495.png", import.meta.url)
                .href,
            earth_day:
              "" +
              new URL("assets/earth_day.80cc5fc1.jpg", import.meta.url).href,
            earth_night:
              "" +
              new URL("assets/earth_night.4164a935.jpg", import.meta.url).href,
            earth_cloud:
              "" +
              new URL("assets/earth_cloud.d702f93e.jpg", import.meta.url).href,
            site_anchor_dot:
              "" +
              new URL("assets/site_anchor_dot.0f543b88.png", import.meta.url)
                .href,
            site_anchor_dot_glow:
              "" +
              new URL(
                "assets/site_anchor_dot_glow.cded0e40.png",
                import.meta.url
              ).href,
            globe_glow:
              "" +
              new URL("assets/globe_glow.c506143f.png", import.meta.url).href,
          },
          exhibition_texes: {},
          shaders: {
            globe_vert: `#ifdef GL_ES
precision mediump float;
#endif

varying vec2 v_uv;
varying vec3 v_normal;

void main() {
  v_uv = uv;
  v_normal = (modelViewMatrix * vec4(normal, 0.0)).xyz;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}`,
            globe_frag: `#ifdef GL_ES
precision mediump float;
#endif

varying vec2 v_uv;
varying vec3 v_normal;
uniform float u_cloud_drift;
uniform sampler2D u_day_tex;
uniform sampler2D u_night_tex;
uniform sampler2D u_cloud_tex;

void main() {
  vec3 diffuseTex = texture2D(u_day_tex, v_uv).rgb;
  diffuseTex -= vec3(0.075, 0.058, 0.04);
  diffuseTex += texture2D(u_night_tex, v_uv).rgb * 1.25;
  float biasCam = dot(vec3(0.0, -0.2, 1.0), v_normal);
  diffuseTex += vec3(1.0) - vec3(1.0) * clamp(pow((biasCam * 1.5),0.25), 0.0, 1.0);
  float biasSun = dot(vec3(-1.0, 0.8, -0.02), v_normal);
  diffuseTex += vec3(0.7, 0.8, 0.96) * pow(clamp(biasSun, 0.0, 1.0), 3.6);

  // dynamic?
  float driftUvX = fract(v_uv.x + u_cloud_drift * 0.000005);
  diffuseTex += texture2D(u_cloud_tex, vec2(driftUvX, v_uv.y)).rgb * 0.1;

  gl_FragColor = vec4(diffuseTex, 1.0);
}`,
            time_slice_vert: Jb,
            time_slice_frag: Qb,
          },
        },
        ct = { models: {}, model_tex: {}, exhibition_texes: {}, shaders: {} },
        EC = (n, e, t) => {
          ((u) => {
            for (const c of u) ai.exhibition_texes[`${c.uuid}`] = c.cover_img;
          })(n.projects);
          const r = new I_();
          (r.onProgress = (u, c, h) => {
            var f;
            const d = parseFloat((((c - 1) / h) * 100).toPrecision(3));
            console.log(`[CamLab WebGL] Preload: ${d}`),
              (f = window.loading3d) == null || f.call(window, d),
              e(d);
          }),
            (r.onLoad = () => {
              (function ({ font: u, characters: c, sdfGlyphSize: h }, d) {
                xb(
                  {
                    font: u,
                    sdfGlyphSize: h,
                    text: Array.isArray(c)
                      ? c.join(`
`)
                      : "" + c,
                  },
                  d
                );
              })(
                { font: ug, characters: "abcdefghijklmnopqrstuvwxyz" },
                (u) => {
                  var c;
                  (c = window.loading3d) == null || c.call(window, 100),
                    e(100),
                    console.log("[CamLab WebGL] Preload: 100"),
                    console.log("[CamLab WebGL] Preload finished:", ct),
                    t == null || t();
                }
              );
            });
          const i = Object.keys(ai.models);
          for (const u of i)
            TC(ai.models[u], r).then((c) => {
              ct.models[u] = c;
            });
          const a = Object.keys(ai.model_tex);
          for (const u of a)
            iy(ai.model_tex[u], void 0, r).then((c) => {
              ct.model_tex[u] = c;
            });
          const s = Object.keys(ai.exhibition_texes),
            o =
              window.location.host.startsWith("localhost") ||
              window.location.host.startsWith("127.0.0.1");
          for (const u of s)
            iy(
              o
                ? "" +
                    new URL(
                      "assets/cave_dance_cover.15ecc8c5.jpg",
                      import.meta.url
                    ).href
                : ai.exhibition_texes[u],
              `time_sub_dot_tex_${u}`,
              r
            ).then((c) => {
              ct.exhibition_texes[u] = c;
            });
          const l = Object.keys(ai.shaders);
          for (const u of l) ct.shaders[u] = ai.shaders[u];
        },
        CC = async () => {
          const n = new Ba(0.25, 32, 32),
            e = await (async () => {
              const s = ct.model_tex.droplet_diffuse,
                o = ct.model_tex.studio_env,
                l = ct.model_tex.droplet_frost;
              return (
                (o.mapping = 303),
                (o.encoding = 3001),
                new eT({
                  transparent: !0,
                  opacity: 0.85,
                  bumpMap: s,
                  bumpScale: 0.05,
                  envMap: o,
                  metalness: 0.1,
                  roughness: 0.12,
                  roughnessMap: l,
                  color: 1581624,
                  clearcoat: 1,
                  clearcoatRoughness: 0.02,
                  side: 0,
                })
              );
            })(),
            t = new uo(1, 1, 1),
            r = new Fa({
              color: 16777215,
              map: ct.model_tex.droplet_dispersive_sprite,
              depthTest: !1,
              depthWrite: !1,
              transparent: !0,
            }),
            i = new xt(n, e),
            a = new xt(t, r);
          return (
            a.scale.set(0.5, 0.5, 0.5),
            i.add(a),
            (i.name = ea.DROPLET),
            (i.userData.rayCastLevel = Ki.THEME_SUB),
            i
          );
        },
        AC = async () => {
          const n = new Ba(1, 16, 16),
            e = new Fa({
              transparent: !0,
              opacity: 0.1,
              color: 1046928,
              depthTest: !1,
              visible: !1,
            }),
            t = new xt(n, e),
            r = Hh + 0.1;
          return (
            t.scale.set(r, r, r),
            (t.name = ea.RAY_CAST_TARGET),
            (t.userData.rayCastLevel = Ki.THEME_ROOT),
            t
          );
        },
        sr = {
          dispersiveSprites: [],
          dispersiveCloud: void 0,
          dispersiveCloudPrtCnt: 0,
          cameraTween: void 0,
          cntRootDroplet: void 0,
          cntSubDroplet: void 0,
          rayCastGroup: new Ln(),
          rootDroplets: [],
          rootDropletGroups: [],
          subDroplets: [],
          sectionGroup: new Ln(),
          initialized: !1,
          initializer: () => {},
        },
        Xo = new Lt(),
        ew = [],
        tw = [],
        nw = [],
        tm = [];
      sr.initializer = async (n) => {
        const e = n.theme.length - 1,
          t = (2 * Ht) / e,
          r = await (async () => {
            const a = {},
              s = [CC(), AC()],
              o = await Promise.all(s);
            for (const l of o) a[l.name] = l;
            return a;
          })();
        for (const [a, s] of n.theme.entries()) {
          if (s.primary) {
            ay(s, UE, r);
            continue;
          }
          const o = new j(
            14 * Math.sin(t * (a - 2)),
            0,
            14 * Math.cos(t * (a - 2))
          );
          ay(s, o, r);
        }
        PC();
        const i = new O_(7842559, 0.5);
        sr.sectionGroup.add(sr.rayCastGroup, i),
          X.scene.add(X.themeManager.sectionGroup),
          (sr.initialized = !0);
      };
      const ay = async (n, e, t) => {
          const r = new Ln();
          if (
            ((r.name = `cluster_group_${n.name}`),
            (r.userData.themeId = n.uuid),
            !n.primary)
          ) {
            const i = LC(t, n, e);
            DC(r, n), kC(t, n, i, e);
          }
          r.position.copy(e), X.themeManager.sectionGroup.add(r), RC(390, e);
        },
        RC = (n, e) => {
          for (let t = 0; t < n; t++) {
            const r = 1.65 * Math.random(),
              i = 0.9 * r,
              a = 6.8 * (1.7 - r),
              s = 2 * Math.random() * Math.PI,
              o = new j().addVectors(
                new j(
                  Math.sin(s) * a,
                  r * Math.sin(1.4 - 2.8 * Math.random()),
                  Math.cos(s) * a
                ),
                e.clone()
              );
            nw.push(i), ew.push(o.x, o.y, o.z), tw.push(o.y), tm.push(0.85);
          }
        },
        PC = () => {
          Xo.setAttribute("position", new yt(ew, 3)),
            Xo.setAttribute("offset", new yt(tw, 1)),
            Xo.setAttribute("scale", new yt(nw, 1)),
            Xo.setAttribute("alpha", new yt(tm, 1));
          const n = (() => {
              const t = ct.model_tex.fake_droplet_diffuse,
                r = ct.model_tex.fake_droplet_diffuse_blur;
              return new hn({
                vertexShader: `attribute float scale;
attribute float alpha;
varying float v_alpha;

void main() {
  v_alpha = alpha;
  vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
  gl_PointSize = scale * ( 300.0 / - mvPosition.z );
  gl_Position = projectionMatrix * mvPosition;
}`,
                fragmentShader: `uniform sampler2D u_diffuse;
uniform sampler2D u_blur;
varying float v_alpha;

void main() {
  vec2 uv = vec2(gl_PointCoord.x, 1.0 - gl_PointCoord.y);
  vec4 diffuseTex = texture2D(u_diffuse, uv);
  vec4 blurTex = texture2D(u_blur, uv);

  vec4 mixTex = mix(diffuseTex, blurTex, 1.0-v_alpha);
  
  gl_FragColor = vec4(mixTex.rgb, mixTex.a * (1.0-distance(gl_PointCoord, vec2(0.5, 0.5))) * v_alpha);
}`,
                transparent: !0,
                uniforms: { u_diffuse: { value: t }, u_blur: { value: r } },
                lights: !1,
                vertexColors: !1,
                depthTest: !1,
                alphaTest: 0.01,
              });
            })(),
            e = new JM(Xo, n);
          (e.renderOrder = -1),
            (sr.dispersiveCloudPrtCnt = tm.length),
            (sr.dispersiveCloud = e),
            sr.sectionGroup.add(e);
        },
        LC = (n, e, t) => {
          const r = new Ln();
          r.position.copy(t);
          const i = n.DROPLET.clone();
          (i.name += `_${e.name}`),
            (i.uuid = `${ea.DROPLET}_${e.uuid}`),
            (i.userData = {
              themeId: e.uuid,
              isSubTheme: !1,
              themeData: e,
              rayCastLevel: Ki.THEME_IDLE,
              dropletGroup: r,
            }),
            i.position.copy(t),
            X.themeManager.dispersiveSprites.push(i.children[0]),
            ((s, o, l, u) => {
              const c = s.userData.themeData;
              for (const h of c.subThemes || []) {
                const d = l.DROPLET.clone();
                (d.uuid = `SUB_${ea.DROPLET}_${h.uuid}`),
                  (d.userData = {
                    themeId: h.uuid,
                    themeData: h,
                    isSubTheme: !0,
                    rayCastLevel: Ki.THEME_SUB,
                    parentThemeDroplet: s,
                  }),
                  (d.name += `_${c.name}_${h.name}`),
                  d.scale.set(0.01, 0.01, 0.01),
                  d.position.copy(u),
                  X.themeManager.dispersiveSprites.push(d.children[0]);
                const f = new zl();
                (f.text = h.name), (f.fontSize = NE);
                for (const p of Object.keys(Vr)) f[p] = Vr[p];
                (f.textAlign = "center"),
                  (f.maxWidth = FE),
                  (f.anchorX = f.anchorY = "50%"),
                  (f.material.depthTest = !1),
                  f.position.set(0, OE, 0);
                const g = Math.PI * Math.random();
                (d.rotation.y = g),
                  (f.rotation.y = -1 * g),
                  f.sync(),
                  d.add(f),
                  X.themeManager.subDroplets.push(d),
                  o.attach(d);
              }
            })(i, r, n, t);
          const a = new zl();
          (a.text = `${e.name}`.toUpperCase()), (a.fontSize = zE);
          for (const s of Object.keys(Vr)) a[s] = Vr[s];
          return (
            (a.textAlign = "center"),
            (a.anchorX = a.anchorY = "50%"),
            a.position.set(0, 0, 0),
            (a.material.depthTest = !1),
            a.sync(),
            r.add(a),
            r.lookAt(new j(0, 0, 0)),
            X.themeManager.rayCastGroup.add(i),
            X.themeManager.rootDroplets.push(i),
            X.themeManager.rootDropletGroups.push(r),
            X.themeManager.sectionGroup.add(r),
            i
          );
        },
        DC = (n, e) => {
          if (!e.primary && e.name) {
            const t = new zl();
            (t.text = `${e.name}`.toUpperCase().replaceAll(
              " ",
              `
`
            )),
              (t.fontSize = 0.6);
            for (const r of Object.keys(Vr)) t[r] = Vr[r];
            (t.textAlign = "center"),
              (t.maxWidth = 0.2),
              (t.anchorX = t.anchorY = "50%"),
              t.position.set(0, 3, 0),
              t.lookAt(X.camera.position),
              t.sync(),
              n.add(t),
              X.themeManager.dispersiveSprites.push(t);
          }
        },
        kC = (n, e, t, r) => {
          const i = n.RAY_CAST_TARGET.clone();
          (i.uuid = `${ea.RAY_CAST_TARGET}_${e.uuid}`),
            (i.name += `_${e.name}`),
            (i.userData = {
              themeId: e.uuid,
              themeData: e,
              isRayCastTarget: !0,
              rootDroplet: t,
            }),
            i.position.copy(r),
            X.themeManager.rayCastGroup.add(i);
        },
        IC = async () => {
          const n = ct.model_tex.earth_day,
            e = ct.model_tex.earth_night,
            t = ct.model_tex.earth_cloud,
            r = new hn({
              lights: !1,
              uniforms: {
                u_day_tex: { value: n },
                u_night_tex: { value: e },
                u_cloud_tex: { value: t },
                u_cloud_drift: { value: 0 },
              },
              vertexShader: ct.shaders.globe_vert,
              fragmentShader: ct.shaders.globe_frag,
            }),
            i = new xt(new Ba(8, 32, 32), r);
          return (
            (i.rotation.y = -0.5 * Ht),
            (An.spaceGlobeMat = r),
            (i.name = Va.SPACE_GLOBE),
            i
          );
        },
        UC = async () => {
          const n = new Km(new Oh({ map: ct.model_tex.site_anchor_dot }));
          return n.scale.set(0.3, 0.3, 0.3), (n.name = Va.SITE_ANCHOR), n;
        },
        OC = async () => {
          const n = new Km(new Oh({ map: ct.model_tex.site_anchor_dot_glow }));
          return (n.name = Va.SITE_ANCHOR_GLOW), n;
        },
        zC = async () => {
          const n = new Km(
            new Oh({
              map: ct.model_tex.globe_glow,
              transparent: !0,
              opacity: 0.5,
            })
          );
          return n.scale.set(44, 44, 44), (n.name = Va.SPACE_GLOW), n;
        },
        rw = (n, e) => {
          const t = { lati: (n.lati / 180) * Ht, long: (n.long / 180) * Ht };
          return new j(
            Math.cos(t.lati) * Math.sin(t.long) * e,
            Math.sin(t.lati) * e,
            Math.cos(t.lati) * Math.cos(t.long) * e
          );
        },
        di = (n, e, t) => n * (1 - t) + e * t,
        An = {
          cntSite: void 0,
          spaceGlobeMat: void 0,
          cameraTween: void 0,
          siteAnchorGlow: void 0,
          sectionGroup: new Ln(),
          rayCastGroup: new Ln(),
          initialized: !1,
          initializer: () => {},
        };
      An.initializer = async (n) => {
        const e = await (async () => {
          const t = {},
            r = [UC(), OC(), IC(), zC()],
            i = await Promise.all(r);
          for (const a of i) t[a.name] = a;
          return t;
        })();
        (An.siteAnchorGlow = e.SITE_ANCHOR_GLOW),
          An.sectionGroup.add(e.SPACE_GLOBE),
          An.sectionGroup.add(e.SPACE_GLOW),
          NC(e, n.projects, n.space),
          An.sectionGroup.add(An.rayCastGroup),
          X.scene.add(An.sectionGroup),
          (An.initialized = !0);
      };
      const NC = (n, e, t) => {
        const r = n.SITE_ANCHOR;
        for (const i of t) {
          const a = rw(i.location, 8.108),
            s = r.clone();
          (s.uuid = `${Va.SITE_ANCHOR}_${i.uuid}`),
            (s.name += `_${i.uuid}`),
            (s.userData = {
              siteId: i.uuid,
              exhibitIds: i.exhibitIds,
              siteData: i,
              exhibitDataList: e.filter((o) => i.exhibitIds.includes(o.uuid)),
            }),
            s.position.copy(a),
            s.lookAt(new j(0, 0, 0)),
            An.rayCastGroup.add(s);
        }
      };
      let ic;
      const FC = new Uint8Array(16);
      function BC() {
        if (
          !ic &&
          ((ic =
            typeof crypto < "u" &&
            crypto.getRandomValues &&
            crypto.getRandomValues.bind(crypto)),
          !ic)
        )
          throw new Error(
            "crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported"
          );
        return ic(FC);
      }
      const $t = [];
      for (let n = 0; n < 256; ++n) $t.push((n + 256).toString(16).slice(1));
      const sy = {
        randomUUID:
          typeof crypto < "u" &&
          crypto.randomUUID &&
          crypto.randomUUID.bind(crypto),
      };
      function Tf(n, e, t) {
        if (sy.randomUUID && !e && !n) return sy.randomUUID();
        const r = (n = n || {}).random || (n.rng || BC)();
        if (((r[6] = (15 & r[6]) | 64), (r[8] = (63 & r[8]) | 128), e)) {
          t = t || 0;
          for (let i = 0; i < 16; ++i) e[t + i] = r[i];
          return e;
        }
        return (function (i, a = 0) {
          return (
            $t[i[a + 0]] +
            $t[i[a + 1]] +
            $t[i[a + 2]] +
            $t[i[a + 3]] +
            "-" +
            $t[i[a + 4]] +
            $t[i[a + 5]] +
            "-" +
            $t[i[a + 6]] +
            $t[i[a + 7]] +
            "-" +
            $t[i[a + 8]] +
            $t[i[a + 9]] +
            "-" +
            $t[i[a + 10]] +
            $t[i[a + 11]] +
            $t[i[a + 12]] +
            $t[i[a + 13]] +
            $t[i[a + 14]] +
            $t[i[a + 15]]
          ).toLowerCase();
        })(r);
      }
      Zn.exports();
      const oy = () => {
          if (X.controls) {
            switch (X.cntSection) {
              case Ke.THEME:
                X.controls.object.position.copy(hg),
                  X.camera.lookAt(Vp),
                  X.controls.target.copy(Vp);
                break;
              case Ke.SPACE:
                X.camera.position.copy(db),
                  X.camera.lookAt(P1),
                  X.controls.target.copy(P1);
                break;
              case Ke.TIME:
                X.camera.position.copy(Wp), X.camera.rotation.copy(pb);
            }
            X.camera.updateProjectionMatrix(), X.camera.updateMatrix(), Vl(!0);
          }
        },
        Vl = (n) => {
          if (X.controls) {
            switch (X.cntSection) {
              case Ke.THEME:
                (X.controls.minDistance = n ? 28 : 3),
                  (X.controls.maxDistance = BE),
                  (X.controls.minPolarAngle = 0.25 * Ht),
                  (X.controls.maxPolarAngle = 0.45 * Ht);
                break;
              case Ke.SPACE:
                (X.controls.minDistance = n ? 14.2 : 3),
                  (X.controls.maxDistance = 40),
                  (X.controls.minPolarAngle = 0.3 * Ht),
                  (X.controls.maxPolarAngle = 0.6 * Ht);
                break;
              case Ke.TIME:
                return (X.controlUpdate = !1), void (X.controls.enabled = !1);
            }
            (X.controlUpdate = !0),
              (X.controls.enabled = n),
              (X.controls.enablePan = !1),
              X.controls.update();
          }
        };
      Zn.exports();
      const Ef = (n, e, t) => {
          var N, G, U, I, F, T;
          if (!X.controls || X.themeManager.cameraTween) return;
          const r = n.position
              .clone()
              .normalize()
              .multiplyScalar(-1 * Hh),
            i = X.camera.position.clone(),
            a = e ? hg.clone() : n.position.clone().add(r),
            s = X.controls.target.clone(),
            o = e ? Vp.clone() : n.position.clone(),
            l = sr.dispersiveCloud.geometry,
            u = l.attributes.alpha.array,
            c = u[0] || 0,
            h = e ? 0.85 : 0.25,
            d = X.camera.fov,
            f = e ? Gh : hb;
          (N = X.camera.view) == null || N.offsetX,
            (G = X.containerRect) == null || G.width;
          const g = new ci.Tween({ value: 0 })
            .to({ value: 1 }, 1400)
            .easing(ci.Easing.Sinusoidal.Out)
            .onUpdate((O) => {
              if (X.controls) {
                if (
                  (X.controls.target.copy(new j().lerpVectors(s, o, O.value)),
                  X.camera.position.copy(new j().lerpVectors(i, a, O.value)),
                  X.camera.lookAt(X.controls.target),
                  (X.camera.fov = di(d, f, O.value)),
                  X.themeManager.dispersiveCloud)
                ) {
                  for (let k = 0; k < u.length; k++) u[k] = di(c, h, O.value);
                  l.attributes.alpha.needsUpdate = !0;
                }
                X.camera.updateProjectionMatrix(),
                  X.camera.updateMatrixWorld(),
                  X.controls.update();
              }
            })
            .onComplete(() => {
              t == null || t(), e && (X.themeManager.cameraTween = void 0);
            });
          if (e && !X.themeManager.cntRootDroplet) return void g.start();
          const p = {},
            y = {},
            v = X.themeManager.rootDropletGroups,
            m = {},
            x = {},
            _ = {},
            b = {},
            w = {},
            M = {};
          for (const O of X.themeManager.rootDroplets) {
            const k = (n == null ? void 0 : n.uuid) === O.uuid,
              P = O.uuid;
            (p[P] = O.scale.x), (y[P] = k ? 0 : 1);
          }
          for (const O of v) {
            const k =
                ((I = (U = n.userData) == null ? void 0 : U.dropletGroup) ==
                null
                  ? void 0
                  : I.uuid) === O.uuid,
              P = O.children.filter((z) =>
                z.uuid.startsWith(`SUB_${ea.DROPLET}_`)
              ),
              E = O.uuid;
            (m[E] = P),
              (x[E] = (2 * Ht) / (P.length || 1)),
              (_[E] = ((F = P[0]) == null ? void 0 : F.position.length()) || 0),
              (b[E] = e ? 0 : k ? 0.8 : 0),
              (w[E] = ((T = P[0]) == null ? void 0 : T.scale) || 0),
              (M[E] = e
                ? new j(0, 0, 0)
                : k
                ? new j(0.9, 0.9, 0.9)
                : new j(0, 0, 0));
          }
          const C = new ci.Tween({ value: 0 })
            .to({ value: 1 }, 750)
            .easing(ci.Easing.Cubic.InOut)
            .onUpdate((O) => {
              for (const k of X.themeManager.rootDroplets) {
                const P = k.uuid,
                  E = p[P],
                  z = y[P],
                  A = di(E, z, O.value);
                k.scale.set(A, A, A);
              }
              for (const k of v) {
                const P = k.uuid,
                  E = m[P],
                  z = x[P],
                  A = _[P],
                  D = b[P],
                  V = w[P],
                  K = M[P],
                  B = di(A, D, O.value),
                  Y = new j().lerpVectors(V, K, O.value);
                for (const [R, L] of E.entries()) {
                  const Z = new j(Math.sin(z * R) * B, Math.cos(z * R) * B, 0);
                  L.position.copy(Z), L.scale.copy(Y);
                }
              }
            })
            .onComplete(() => {
              e || (X.themeManager.cameraTween = void 0);
            });
          X.themeManager.cameraTween = e
            ? C.chain(g).start()
            : g.chain(C).start();
        },
        GC = (n, e) => {
          const t = e.current.getBoundingClientRect(),
            r = Kb(n),
            i = new ge(r.x * t.width * 0.5, (1 - r.y) * t.height * 0.5),
            a = 0.33 * window.innerHeight + 100;
          return Math.abs(i.y - a);
        },
        ly = (n, e, t, r) => {
          if (!X.controls || X.spaceManager.cameraTween) return;
          const i = X.camera.position.clone(),
            a = db.distanceTo(new j(0, 0, 0)),
            s = 8 + 2.5 * Hh,
            o = i.distanceTo(new j(0, 0, 0)),
            l = n ? a : s,
            u = X.controls.target.clone();
          X.controls.target.copy(new j(0, 0, 0)), X.controls.update();
          let c = X.controls.getPolarAngle();
          c = c > 0.5 * Ht ? 0 - c : 0.5 * Ht - c;
          const h = X.controls.getAzimuthalAngle(),
            d = { lati: (c / Ht) * 180, long: ((h / Ht) * 180) % 360 };
          X.controls.target.copy(u), X.controls.update();
          const f = n ? d : e.inspectPosCoord,
            g = X.controls.target.clone(),
            p = n ? new j() : e.inspectTarget,
            y = X.camera.fov,
            v = n ? Gh : hb;
          X.spaceManager.cameraTween = new ci.Tween({ value: 0 })
            .to({ value: 1 }, 950)
            .easing(ci.Easing.Sinusoidal.Out)
            .onUpdate((m) => {
              if (!X.controls) return;
              const x = di(o, l, m.value),
                _ = {
                  lati: di(d.lati, f.lati, m.value),
                  long: di(d.long, f.long, m.value),
                },
                b = rw(_, x),
                w = new j().lerpVectors(g, p, m.value),
                M = di(y, v, m.value);
              X.controls.target.copy(w),
                X.camera.position.copy(b),
                X.camera.lookAt(w),
                (X.camera.fov = M),
                X.camera.updateProjectionMatrix(),
                X.camera.updateMatrixWorld(),
                X.controls.update();
            })
            .onStart(() => {
              t == null || t();
            })
            .onComplete(() => {
              r == null || r(), (X.spaceManager.cameraTween = void 0);
            })
            .start();
        },
        nm = (n, e, t) => {
          var o, l, u, c;
          if (!n)
            return (
              (o = X.spaceManager.cntSite) == null ||
                o.remove(X.spaceManager.siteAnchorGlow),
              void ly(
                !0,
                void 0,
                () => {
                  e == null || e(void 0), t == null || t(!1);
                },
                () => {
                  Vl(!0);
                }
              )
            );
          (l = X.spaceManager.cntSite) == null ||
            l.add(X.spaceManager.siteAnchorGlow),
            (u = X.spaceManager.siteAnchorGlow) == null ||
              u.position.set(0, 0, 0.001),
            (c = X.spaceManager.siteAnchorGlow) == null ||
              c.scale.set(0.825, 0.825, 0.825);
          const r = n.position.clone().normalize(),
            i = n.position.clone().add(r.clone().multiplyScalar(0.75 * Hh)),
            a = n.userData.siteData.location,
            s = { lati: a.lati + 20 * (a.lati > 0 ? -1 : 1), long: a.long };
          ly(
            !1,
            { inspectPosCoord: s, inspectTarget: i },
            () => {
              e == null || e(n), t == null || t(!1), Vl(!1);
            },
            () => {
              t == null || t(!0);
            }
          );
        };
      var Sg = { exports: {} },
        Gc = {},
        HC = rt.exports,
        VC = Symbol.for("react.element"),
        WC = Symbol.for("react.fragment"),
        jC = Object.prototype.hasOwnProperty,
        XC =
          HC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED
            .ReactCurrentOwner,
        qC = { key: !0, ref: !0, __self: !0, __source: !0 };
      function uy(n, e, t) {
        var r,
          i = {},
          a = null,
          s = null;
        for (r in (t !== void 0 && (a = "" + t),
        e.key !== void 0 && (a = "" + e.key),
        e.ref !== void 0 && (s = e.ref),
        e))
          jC.call(e, r) && !qC.hasOwnProperty(r) && (i[r] = e[r]);
        if (n && n.defaultProps)
          for (r in (e = n.defaultProps)) i[r] === void 0 && (i[r] = e[r]);
        return {
          $$typeof: VC,
          type: n,
          key: a,
          ref: s,
          props: i,
          _owner: XC.current,
        };
      }
      (Gc.Fragment = WC), (Gc.jsx = uy), (Gc.jsxs = uy);
      const ac = (Sg.exports = Gc).Fragment,
        Rt = Sg.exports.jsx,
        ws = Sg.exports.jsxs,
        $C = (n) => {
          const { exhibitConfigs: e, siteConfigs: t } = n,
            r = n.cntSite.userData.exhibitIds,
            [i, a] = rt.exports.useState();
          return (
            rt.exports.useEffect(() => {
              var s, o;
              if (r.includes((i == null ? void 0 : i.uuid) || ""))
                return void ((s = document.getElementById(
                  `exhibit_item_${(i == null ? void 0 : i.uuid) || ""}`
                )) == null
                  ? void 0
                  : s.scrollIntoView({ behavior: "smooth", inline: "center" }));
              (o = document.getElementById(`exhibit_item_${r[0]}`)) == null ||
                o.scrollIntoView({ behavior: "smooth", inline: "center" });
            }, [n.cntSite]),
            Rt(AE, {
              id: "exhibit-slider-wrap",
              children: Rt(RE, {
                children: e.map((s) => {
                  const o = r.includes(s.uuid);
                  return ws(
                    PE,
                    {
                      id: `exhibit_item_${s.uuid}`,
                      style: {
                        backgroundImage: `url(${s.cover_img || ""})`,
                        ...(o
                          ? { cursor: "pointer" }
                          : { filter: "brightness(0.5)" }),
                      },
                      onClick: () => {
                        if (o) return void window.open(s.contentURL, "_blank");
                        const l = t.find((c) => c.exhibitIds.includes(s.uuid)),
                          u = l
                            ? An.rayCastGroup.getObjectByName(
                                `${Va.SITE_ANCHOR}_${l.uuid}`
                              )
                            : void 0;
                        a(s), nm(u, n.setCntSite, n.setShowSiteAnchorPin);
                      },
                      children: [
                        Rt("div", { className: "exhibit-item-fill" }),
                        Rt("p", {
                          className: "exhibit-name",
                          children: s.title,
                        }),
                        Rt("p", {
                          className: "exhibit-theme",
                          children: s.theme,
                        }),
                        Rt("div", { className: "exhibit-item-fill" }),
                      ],
                    },
                    `exhibit_item_${s.uuid}`
                  );
                }),
              }),
            })
          );
        },
        YC = async () => {
          const n = new zl();
          for (const e of Object.keys(Vr)) n[e] = Vr[e];
          return (
            (n.material.depthTest = !1),
            (n.material.transparent = !0),
            (n.name = yi.TIME_SLICE_SUB_DOT_TEXT),
            (n.text = ""),
            (n.fontSize = 0.5),
            n.sync(),
            n
          );
        },
        cy = Zn.exports(),
        ZC = async () => {
          const n = Object.keys(ct.exhibition_texes);
          X.timeManager.timeSliceTex = n.map((r) => ct.exhibition_texes[r]);
          const e = new uo(20.8, 20.8, 20.8, 1),
            t = new hn({
              uniforms: {
                u_diffuse: { value: void 0 },
                u_alpha: { value: cy ? 0 : 0.75 },
                u_diffuse_ratio: { value: 1 },
                u_mask_radius: { value: 0.5 },
              },
              vertexShader: Jb,
              fragmentShader: Qb,
              lights: !1,
              transparent: !0,
            });
          if (cy)
            return X.timeManager.timeSliceTex.map((i) => {
              const a = t.clone();
              a.uniforms.u_diffuse.value = i;
              const s =
                ((i == null ? void 0 : i.source.data.naturalWidth) || 1) /
                ((i == null ? void 0 : i.source.data.naturalHeight) || 1);
              a.uniforms.u_diffuse_ratio.value = s;
              const o = new xt(e, a);
              return (
                (o.name = `${yi.TIME_SLICE}_${i.uuid.replace(
                  "time_sub_dot_tex_",
                  ""
                )}`),
                o
              );
            });
          {
            const r = new xt(e, t);
            return (r.name = yi.TIME_SLICE), r;
          }
        },
        sc = Zn.exports(),
        KC = async (n) => {
          var _;
          const e = ct.model_tex.studio_env,
            t = ct.model_tex.time_pattern,
            r = ct.models.tunnel_tube_model;
          (t.repeat = new ge(1, 9)), (t.wrapS = 1e3), (t.wrapT = 1e3);
          const i = t.clone();
          i.repeat = new ge(1, 4);
          const a = {
              transparent: !0,
              opacity: 1,
              envMap: e,
              envMapIntensity: 0.25,
              color: 2310221,
            },
            s = {
              ball: new Cp({
                ...a,
                side: 0,
                bumpMap: t,
                metalness: 0.24,
                bumpScale: 0.15,
                roughness: 0.55,
              }),
              pipe: new Cp({
                ...a,
                side: 1,
                bumpMap: i,
                metalness: 0.5,
                bumpScale: 0.015,
                roughness: 0.55,
              }),
            },
            o = new Fa({
              color: 16777215,
              transparent: !0,
              opacity: 0.75,
              blending: 2,
            });
          r.name = yi.TUNNEL_SPHERE;
          const l = [],
            u = [];
          r.traverse((b) => {
            var w;
            if (b.name.startsWith("ring_")) {
              if (b.name === "ring_0_intersect") {
                if (sc) {
                  const G = r.getObjectByName("ring_0"),
                    U = (G.position.clone() || new j()).distanceTo(b.position);
                  l[1] = new j(G.position.x, -U, G.position.z);
                } else l[1] = b.position;
                return;
              }
              const M = b;
              (M.material = o.clone()), (M.material.color = Oc);
              const C = parseInt(
                  (w = M.name) == null ? void 0 : w.replace("ring_", "")
                ),
                N = n.find((G) => G.depth === C);
              return (
                (M.userData.uuid = `time_slice_ring_${N.uuid}`),
                (M.userData = {
                  timeSliceId: N.uuid,
                  timeSliceConfig: N,
                  ringRadius: 0,
                  ringDotGroup: new Ln(),
                }),
                void u.push(M)
              );
            }
            b.name !== "ball" && b.name !== "pipe"
              ? b.name !== "tube_focal_point" || (l[0] = b.position)
              : (b.material = s[b.name]);
          });
          const c = l[0].clone(),
            h = l[1].clone(),
            d = h.clone().add(c.clone().multiplyScalar(-1)).normalize(),
            f = c.distanceTo(h),
            g = f + 12;
          l[1] = c.clone().add(d.clone().multiplyScalar(g));
          const p = d.angleTo(new j(0, 0, 1)),
            y = (u[0].position.z - u[1].position.z) / Math.cos(p),
            v = [],
            m = new Ba(0.24, 12, 12),
            x = new Ba(0.2, 12, 12);
          for (const [b, w] of u.entries()) {
            const M = new Fa({ transparent: !0, opacity: 1, depthTest: !1 }),
              C = w.userData.ringDotGroup,
              N = new xt(m, M);
            (N.name = yi.TIME_DOT), N.scale.set(1, 1, 1), (N.renderOrder = 998);
            const G = parseInt(
                (_ = w.name) == null ? void 0 : _.replace("ring_", "")
              ),
              U = n.find((k) => k.depth === G),
              I = c.clone().add(d.clone().multiplyScalar(f - y * b)),
              F = I.clone();
            (F.z = 0),
              N.position.copy(F),
              (N.userData.nestRing = w),
              sc || ((b <= 0 || b >= u.length - 1) && v.push(I.clone()));
            const T = new zl();
            (T.uuid = `TIME_SLICE_DOT_TEXT_${U.uuid}`),
              (T.text = U.name),
              (T.fontSize = 0.5);
            for (const k of Object.keys(Vr)) T[k] = Vr[k];
            (T.material.depthTest = !1),
              (T.material.transparent = !0),
              T.sync(),
              T.position.copy(I.clone().add(fb)),
              T.lookAt(X.camera.position),
              X.timeManager.sectionGroup.add(T),
              (N.renderOrder = 999),
              w.add(N);
            const O = new j(0, 0, F.z).distanceTo(F);
            w.userData.ringRadius = O;
            for (const [k, P] of U.timeDots.entries()) {
              const E = new xt(x, M);
              E.userData = { timeSubDotConfig: P };
              const z = sc ? L1 * k : L1 * -k + 0.63 * Ht,
                A = new j(Math.sin(z) * O, Math.cos(z) * O, F.z);
              (A.z = 0), E.position.copy(A), (E.renderOrder = 999), C.add(E);
            }
            w.uuid = `time_slice_ring_${U.uuid}`;
          }
          if (!sc) {
            v[0] = l[1].clone();
            const b = new Lt().setFromPoints(v),
              w = new P_(b, new Qm({ color: 16777215, linewidth: 0.1 }));
            r.add(w);
          }
          return (xr.rings = u), r;
        },
        JC = Zn.exports(),
        hy = Zn.exports(),
        xr = {
          cameraTween: void 0,
          timeSlice: void 0,
          timeSliceList: [],
          rings: [],
          timeSliceTex: [],
          sectionGroup: new Ln(),
          initialized: !1,
          initializer: () => {},
        };
      xr.initializer = async (n) => {
        const e = await (async (s) => {
          const o = {},
            l = [ZC(), KC(s), YC()],
            u = await Promise.all(l);
          for (const c of u)
            JC && c.length ? (o[yi.TIME_SLICE] = c) : (o[c.name] = c);
          return o;
        })(n.time);
        if (
          (hy
            ? (xr.timeSliceList = e.TIME_SLICE)
            : (xr.timeSlice = e.TIME_SLICE),
          (xr.subDotText = e.TIME_SLICE_SUB_DOT_TEXT),
          hy)
        )
          for (const [s, o] of xr.rings.entries()) {
            const l = xr.timeSliceList[s];
            e.TUNNEL_SPHERE.add(l);
            const u = o.userData.ringRadius;
            (l.material.uniforms.u_mask_radius.value = (u / 10.4) * 0.5),
              l.position.copy(o.position);
          }
        const t = new Os(13434862, 0.15, 60);
        t.position.set(1.25, -2.5, -32);
        const r = new Os(13430527, 0.16, 22);
        r.position.set(3.15, 2.6, -37);
        const i = new Os(13430527, 3, 30);
        i.position.set(12, 16, -3.5);
        const a = new Os(13430527, 0.68, 45);
        a.position.set(-14, -14, 3.5),
          xr.sectionGroup.add(e.TUNNEL_SPHERE, t, r, i, a),
          X.scene.add(xr.sectionGroup),
          (xr.initialized = !0);
      };
      const QC = Zn.exports();
      function iw(n, e, t) {
        return Math.max(e, Math.min(t, n));
      }
      function aw(n, e, t, r, i) {
        return r + ((n - e) * (i - r)) / (t - e);
      }
      const sw = Zn.exports();
      let oc = 0;
      const rm = (n) => {
          const e = new j().lerpVectors(ul[0], ul[1], n);
          X.camera.position.copy(e), X.camera.rotation.copy(pb), sw && tA(e);
        },
        dy = (n) => {
          (oc += n * GE), (oc = iw(oc, 0, 1)), rm(oc);
        },
        eA = (n, e) => {
          const t = X.timeManager.rings,
            r = Math.abs(t[0].position.z - t[t.length - 1].position.z),
            i = aw(Math.abs(n - t[0].position.z), 0, r, 0, 1);
          if (!e) return void rm(i);
          const a = ul[0].distanceTo(ul[1]);
          ((s, o, l) => {
            if (X.timeManager.cameraTween) return;
            const u = s,
              c = o,
              h = new ci.Tween({ value: 0 })
                .to({ value: 1 }, 1400)
                .easing(ci.Easing.Sinusoidal.Out)
                .onUpdate((d) => {
                  const f = di(u, c, d.value);
                  rm(f);
                })
                .onComplete(() => {
                  l == null || l(), (X.timeManager.cameraTween = void 0);
                });
            (X.timeManager.cameraTween = h), h.start();
          })(X.camera.position.distanceTo(ul[0]) / a, i);
        },
        tA = (n) => {
          if (!sw) return;
          let e,
            t = 1 / 0;
          for (const [r, i] of X.timeManager.timeSliceList.entries()) {
            const a = n.z - 14 - i.position.z,
              s = aw(3.5 - iw(Math.abs(a), 0, 3.5), 0, 3.5, 0, 1);
            (i.material.uniforms.u_alpha.value = s),
              a < 0 || (t > a && ((t = a), (e = r)));
          }
          (X.timeManager.cntTimeSliceRing = e
            ? X.timeManager.rings[e]
            : void 0),
            im(X.timeManager.cntTimeSliceRing);
        },
        Cf = Zn.exports(),
        im = (n) => {
          if (!X.timeManager.timeSlice && !Cf) return;
          if (!n) {
            X.timeManager.timeSlice &&
              !Cf &&
              X.timeManager.sectionGroup.remove(X.timeManager.timeSlice);
            for (const r of X.timeManager.rings) {
              (r.material.color = Oc), r.parent.remove(r.userData.ringDotGroup);
              const i = r.getObjectByName(yi.TIME_DOT);
              i.scale.set(1, 1, 1), (i.material.color = ec);
            }
            return void (
              X.timeManager.subDotText && (X.timeManager.subDotText.text = "")
            );
          }
          const e = n.userData;
          if (X.timeManager.timeSlice && !Cf) {
            const r = n.position.z;
            X.timeManager.sectionGroup.add(X.timeManager.timeSlice),
              (X.timeManager.timeSlice.position.z = r);
            const i = e.ringRadius;
            X.timeManager.timeSlice.material.uniforms.u_mask_radius.value =
              (i / 10.4) * 0.5;
          }
          const t = n.userData.timeSliceConfig.depth;
          for (const r of X.timeManager.rings) {
            const i = r.userData.ringDotGroup,
              a = r.getObjectByName(yi.TIME_DOT),
              s = r.material;
            r.uuid !== n.uuid
              ? (r.parent.remove(i),
                a.scale.set(1, 1, 1),
                r.userData.timeSliceConfig.depth > t
                  ? (a.material.color = Oc)
                  : (a.material.color = ec),
                (s.color = Oc))
              : (r.parent.add(i),
                i.position.copy(r.position),
                a.scale.set(1.25, 1.25, 1.25),
                (a.material.color = ec),
                (s.color = ec));
          }
        },
        fy = (n) => {
          if (!X.timeManager.timeSlice) return;
          const e = X.timeManager.subDotText,
            t = X.timeManager.timeSlice.material;
          if (!n) {
            if (X.timeManager.cntTimeSliceRing) {
              const o = X.timeManager.timeSliceTex.find(
                (u) =>
                  u.uuid ===
                  `time_sub_dot_tex_${X.timeManager.cntTimeSliceRing.userData.timeSliceConfig.timeDots[0].uuid}`
              );
              t.uniforms.u_diffuse.value = o;
              const l =
                ((o == null ? void 0 : o.source.data.naturalWidth) || 1) /
                ((o == null ? void 0 : o.source.data.naturalHeight) || 1);
              t.uniforms.u_diffuse_ratio.value = l;
            }
            return (e.text = ""), void X.timeManager.sectionGroup.remove(e);
          }
          if (!X.timeManager.cntTimeSliceRing) return;
          const r = X.timeManager.timeSliceTex.find(
              (o) =>
                o.uuid ===
                `time_sub_dot_tex_${n.userData.timeSubDotConfig.uuid}`
            ),
            i =
              ((r == null ? void 0 : r.source.data.naturalWidth) || 1) /
              ((r == null ? void 0 : r.source.data.naturalHeight) || 1);
          (t.uniforms.u_diffuse.value = r),
            (t.uniforms.u_diffuse_ratio.value = i);
          const a = n.userData.timeSubDotConfig;
          e.text = `${a.name}
${a.exact_era}`;
          const s = X.timeManager.cntTimeSliceRing.position
            .clone()
            .add(n.position)
            .add(fb);
          e.position.copy(s),
            e.lookAt(X.camera.position),
            X.timeManager.sectionGroup.add(e);
        },
        nA = Zn.exports(),
        X = {
          initialized: !1,
          renderer: void 0,
          scene: new Mp(),
          camera: new ln(Gh, 1, 0.01, 64),
          composer: void 0,
          controls: void 0,
          controlUpdate: !0,
          rayCaster: new (class {
            constructor(n, e, t = 0, r = 1 / 0) {
              (this.ray = new Ih(n, e)),
                (this.near = t),
                (this.far = r),
                (this.camera = null),
                (this.layers = new jm()),
                (this.params = {
                  Mesh: {},
                  Line: { threshold: 1 },
                  LOD: {},
                  Points: { threshold: 1 },
                  Sprite: {},
                });
            }
            set(n, e) {
              this.ray.set(n, e);
            }
            setFromCamera(n, e) {
              e.isPerspectiveCamera
                ? (this.ray.origin.setFromMatrixPosition(e.matrixWorld),
                  this.ray.direction
                    .set(n.x, n.y, 0.5)
                    .unproject(e)
                    .sub(this.ray.origin)
                    .normalize(),
                  (this.camera = e))
                : e.isOrthographicCamera
                ? (this.ray.origin
                    .set(n.x, n.y, (e.near + e.far) / (e.near - e.far))
                    .unproject(e),
                  this.ray.direction
                    .set(0, 0, -1)
                    .transformDirection(e.matrixWorld),
                  (this.camera = e))
                : console.error(
                    "THREE.Raycaster: Unsupported camera type: " + e.type
                  );
            }
            intersectObject(n, e = !0, t = []) {
              return Ap(n, this, t, e), t.sort(i1), t;
            }
            intersectObjects(n, e = !0, t = []) {
              for (let r = 0, i = n.length; r < i; r++) Ap(n[r], this, t, e);
              return t.sort(i1), t;
            }
          })(),
          themeManager: sr,
          spaceManager: An,
          timeManager: xr,
          cntSection: Ke.THEME,
          containerRect: void 0,
        },
        _a = {
          [Ke.THEME]: X.themeManager,
          [Ke.SPACE]: X.spaceManager,
          [Ke.TIME]: X.timeManager,
        },
        rA = (n) => {
          const e = rt.exports.useRef(),
            t = rt.exports.useRef();
          n.defaultSection && (X.cntSection = n.defaultSection || X.cntSection);
          const [r, i] = rt.exports.useState(X.cntSection);
          window.loadSection = (T) => {
            const O = T.toString().toUpperCase();
            (X.cntSection = O), i(O);
          };
          const [a, s] = rt.exports.useState(void 0),
            [o, l] = rt.exports.useState(),
            [u, c] = rt.exports.useState(),
            [h, d] = rt.exports.useState({
              centerScreenPos: new ge(),
              droplet2DDia: 0,
            }),
            [f, g] = rt.exports.useState(),
            [p, y] = rt.exports.useState(!1);
          rt.exports.useEffect(() => {
            console.time("[Performance: WebGL Init]"), v();
          }, []),
            rt.exports.useEffect(() => {
              e.current &&
                t.current &&
                a &&
                ((X.initialized && X.renderer) ||
                  EC(
                    a,
                    () => {},
                    () => {
                      m(e.current, t.current);
                    }
                  ));
            }, [e.current, t.current, a]),
            rt.exports.useEffect(() => {
              e.current &&
                t.current &&
                a &&
                (X.scene.remove(
                  _a[Ke.THEME].sectionGroup,
                  _a[Ke.SPACE].sectionGroup,
                  _a[Ke.TIME].sectionGroup
                ),
                oy(),
                _a[r].initialized
                  ? (X.scene.add(_a[r].sectionGroup),
                    l(void 0),
                    c(void 0),
                    d({ centerScreenPos: new ge(), droplet2DDia: 0 }),
                    g(void 0),
                    y(!1))
                  : _a[r].initializer(a));
            }, [r]);
          const v = async () => {
              const T = ((O) => {
                console.log("[CamLab WebGL] Receive data:", O);
                const k = O.projects.map((A) => ({
                    uuid: `${A.id}`,
                    title: A.name,
                    theme: A.theme,
                    exact_era: A.exact_era,
                    cover_img: A.img,
                    contentURL: A.url,
                  })),
                  P = [
                    {
                      primary: !0,
                      uuid: "$CENTER_EMPTY_CLUSTER",
                      onClick: (A, D) => {
                        Ef(A, !1, D);
                      },
                      name: "",
                    },
                    ...O.theme.map((A) => {
                      return {
                        primary: !1,
                        name: A.name,
                        uuid: Tf(),
                        onClick: (V, K) => {
                          Ef(V, !1, K);
                        },
                        subThemes:
                          ((D = A.item),
                          D.map((V) => {
                            const K = k.find((B) => B.uuid === `${V.id}`);
                            return {
                              name: (K == null ? void 0 : K.title) || "",
                              uuid: `${(K == null ? void 0 : K.uuid) || ""}`,
                              subThemeBgImg: K == null ? void 0 : K.cover_img,
                              onClick: () => {
                                window.open(
                                  K == null ? void 0 : K.contentURL,
                                  "_blank"
                                );
                              },
                            };
                          })),
                      };
                      var D;
                    }),
                  ],
                  E = O.space.map((A) => ({
                    uuid: Tf(),
                    name: A.name,
                    exhibitIds: A.item.map((D) => `${D.id}`),
                    location: { lati: A.lati, long: A.long },
                  })),
                  z = O.time.map((A, D) => ({
                    uuid: Tf(),
                    name: A.name,
                    depth: D,
                    timeDots: A.item.map((V) => {
                      const K = `${V.id}`,
                        B = k.find((Y) => Y.uuid === K);
                      return {
                        uuid: K,
                        name: B.title,
                        img: B.cover_img,
                        exact_era: B.exact_era,
                        contentURL: B == null ? void 0 : B.contentURL,
                      };
                    }),
                  }));
                return { projects: k, theme: P, space: E, time: z };
              })(
                await (async () => {
                  try {
                    const O ={
    "projects": [
        {
            "id": 659,
            "name": "Fire Dream",
            "url": "https://camlab.fas.harvard.edu/project/fire-dream/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-5.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-5.jpg",
            "theme": ",",
            "exact_era": [
                "20th Century"
            ]
        },
        {
            "id": 651,
            "name": "Mindscape",
            "url": "https://camlab.fas.harvard.edu/project/mindscape/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-1.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-1.jpg",
            "theme": ",",
            "exact_era": [
                "10th - 16th centuries"
            ]
        },
        {
            "id": 649,
            "name": "Luoyang Soundscape",
            "url": "https://camlab.fas.harvard.edu/project/luoyang-soundscape/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-2.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-2.jpg",
            "theme": ",",
            "exact_era": [
                "6th Century"
            ]
        },
        {
            "id": 643,
            "name": "China Builders",
            "url": "https://camlab.fas.harvard.edu/project/china-builders/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-4.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-4.jpg",
            "theme": ",",
            "exact_era": [
                "20th Century"
            ]
        },
        {
            "id": 636,
            "name": "Cave Dance",
            "url": "https://camlab.fas.harvard.edu/project/cave-dance/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image_-c0-copy.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image_-c0-copy.jpg",
            "theme": ",",
            "exact_era": [
                "7th -10th centuries"
            ]
        },
        {
            "id": 634,
            "name": "Illusory Courtyard",
            "url": "https://camlab.fas.harvard.edu/project/illusory-courtyard/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/is3.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/is3.jpg",
            "theme": ",",
            "exact_era": [
                "16th - 19th centuries"
            ]
        },
        {
            "id": 633,
            "name": "Indra’s Net",
            "url": "https://camlab.fas.harvard.edu/project/indras-net/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image2-5.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image2-5.jpg",
            "theme": ",",
            "exact_era": [
                "7th -12th centuries"
            ]
        },
        {
            "id": 630,
            "name": "The Art of Life: Mawangdui Han Tombs",
            "url": "https://camlab.fas.harvard.edu/project/the-art-of-life-mawangdui-han-tombs/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/mawangdui-2.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/mawangdui-2.jpg",
            "theme": ",",
            "exact_era": [
                "3rd century BCE"
            ]
        },
        {
            "id": 628,
            "name": "Study of Laughter",
            "url": "https://camlab.fas.harvard.edu/project/study-of-laughter/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image_-The-Second-State130x196cm1987-2000x1331.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image_-The-Second-State130x196cm1987-2000x1331.jpg",
            "theme": ",",
            "exact_era": [
                "1980s"
            ]
        },
        {
            "id": 622,
            "name": "Digital Gandhara",
            "url": "https://camlab.fas.harvard.edu/project/digital-gandhara/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-3.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-3.jpg",
            "theme": ",",
            "exact_era": [
                "1st - 6th centuries"
            ]
        },
        {
            "id": 615,
            "name": "Digital Luoyang",
            "url": "https://camlab.fas.harvard.edu/project/digital-luoyang/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image.jpg",
            "theme": ",",
            "exact_era": [
                "6th Century"
            ]
        },
        {
            "id": 608,
            "name": "Embodied Architecture",
            "url": "https://camlab.fas.harvard.edu/project/embodied-architecture/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/EA-horizontal-4-2000x1125.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/EA-horizontal-4-2000x1125.jpg",
            "theme": ",",
            "exact_era": [
                "2nd century BC - 12th Century CE"
            ]
        },
        {
            "id": 605,
            "name": "Romance of the Western Chamber",
            "url": "https://camlab.fas.harvard.edu/project/romance-of-the-western-chamber/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/image的副本.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/image的副本.jpg",
            "theme": ",",
            "exact_era": [
                "13th - 18th centuries"
            ]
        },
        {
            "id": 598,
            "name": "Peony Pavilion",
            "url": "https://camlab.fas.harvard.edu/project/peony-pavilion/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1.jpg",
            "theme": ",",
            "exact_era": [
                "16th Century"
            ]
        },
        {
            "id": 539,
            "name": "To the Moon",
            "url": "https://camlab.fas.harvard.edu/project/to-the-moon/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image-1-e1665849790550-2000x1186.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image-1-e1665849790550-2000x1186.jpg",
            "theme": ",",
            "exact_era": [
                "20th Century"
            ]
        },
        {
            "id": 538,
            "name": "Digital Temple",
            "url": "https://camlab.fas.harvard.edu/project/digital-temple/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image2_-6-18x24-DT-1.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image2_-6-18x24-DT-1.jpg",
            "theme": ",",
            "exact_era": [
                "9th - 16th centuries"
            ]
        },
        {
            "id": 515,
            "name": "Shadow Cave",
            "url": "https://camlab.fas.harvard.edu/project/shadow-cave/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/sc7.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/sc7.jpg",
            "theme": ",",
            "exact_era": [
                "4th - 13th centuries"
            ]
        }
    ],
    "theme": [
        {
            "name": "Biocentric Art",
            "item": [
                {
                    "id": 659,
                    "name": "Fire Dream",
                    "url": "https://camlab.fas.harvard.edu/project/fire-dream/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-5.jpg"
                },
                {
                    "id": 636,
                    "name": "Cave Dance",
                    "url": "https://camlab.fas.harvard.edu/project/cave-dance/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image_-c0-copy.jpg"
                },
                {
                    "id": 630,
                    "name": "The Art of Life: Mawangdui Han Tombs",
                    "url": "https://camlab.fas.harvard.edu/project/the-art-of-life-mawangdui-han-tombs/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/mawangdui-2.jpg"
                }
            ]
        },
        {
            "name": "Cognitive Mapping",
            "item": [
                {
                    "id": 643,
                    "name": "China Builders",
                    "url": "https://camlab.fas.harvard.edu/project/china-builders/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-4.jpg"
                },
                {
                    "id": 622,
                    "name": "Digital Gandhara",
                    "url": "https://camlab.fas.harvard.edu/project/digital-gandhara/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-3.jpg"
                },
                {
                    "id": 615,
                    "name": "Digital Luoyang",
                    "url": "https://camlab.fas.harvard.edu/project/digital-luoyang/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image.jpg"
                },
                {
                    "id": 538,
                    "name": "Digital Temple",
                    "url": "https://camlab.fas.harvard.edu/project/digital-temple/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image2_-6-18x24-DT-1.jpg"
                }
            ]
        },
        {
            "name": "Experiential Heritage",
            "item": [
                {
                    "id": 649,
                    "name": "Luoyang Soundscape",
                    "url": "https://camlab.fas.harvard.edu/project/luoyang-soundscape/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-2.jpg"
                },
                {
                    "id": 622,
                    "name": "Digital Gandhara",
                    "url": "https://camlab.fas.harvard.edu/project/digital-gandhara/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-3.jpg"
                },
                {
                    "id": 608,
                    "name": "Embodied Architecture",
                    "url": "https://camlab.fas.harvard.edu/project/embodied-architecture/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/EA-horizontal-4-2000x1125.jpg"
                },
                {
                    "id": 538,
                    "name": "Digital Temple",
                    "url": "https://camlab.fas.harvard.edu/project/digital-temple/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image2_-6-18x24-DT-1.jpg"
                },
                {
                    "id": 515,
                    "name": "Shadow Cave",
                    "url": "https://camlab.fas.harvard.edu/project/shadow-cave/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/sc7.jpg"
                }
            ]
        },
        {
            "name": "Generative Art",
            "item": [
                {
                    "id": 636,
                    "name": "Cave Dance",
                    "url": "https://camlab.fas.harvard.edu/project/cave-dance/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image_-c0-copy.jpg"
                },
                {
                    "id": 628,
                    "name": "Study of Laughter",
                    "url": "https://camlab.fas.harvard.edu/project/study-of-laughter/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image_-The-Second-State130x196cm1987-2000x1331.jpg"
                }
            ]
        },
        {
            "name": "Mental Theater",
            "item": [
                {
                    "id": 651,
                    "name": "Mindscape",
                    "url": "https://camlab.fas.harvard.edu/project/mindscape/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-1.jpg"
                },
                {
                    "id": 633,
                    "name": "Indra’s Net",
                    "url": "https://camlab.fas.harvard.edu/project/indras-net/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image2-5.jpg"
                },
                {
                    "id": 539,
                    "name": "To the Moon",
                    "url": "https://camlab.fas.harvard.edu/project/to-the-moon/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image-1-e1665849790550-2000x1186.jpg"
                },
                {
                    "id": 515,
                    "name": "Shadow Cave",
                    "url": "https://camlab.fas.harvard.edu/project/shadow-cave/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/sc7.jpg"
                }
            ]
        },
        {
            "name": "Object Play",
            "item": [
                {
                    "id": 634,
                    "name": "Illusory Courtyard",
                    "url": "https://camlab.fas.harvard.edu/project/illusory-courtyard/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/is3.jpg"
                },
                {
                    "id": 605,
                    "name": "Romance of the Western Chamber",
                    "url": "https://camlab.fas.harvard.edu/project/romance-of-the-western-chamber/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/image的副本.jpg"
                },
                {
                    "id": 598,
                    "name": "Peony Pavilion",
                    "url": "https://camlab.fas.harvard.edu/project/peony-pavilion/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1.jpg"
                }
            ]
        }
    ],
    "time": [
        {
            "name": "20th",
            "item": [
                {
                    "id": 659
                },
                {
                    "id": 643
                },
                {
                    "id": 628
                },
                {
                    "id": 539
                }
            ]
        },
        {
            "name": "16th",
            "item": [
                {
                    "id": 634
                },
                {
                    "id": 598
                }
            ]
        },
        {
            "name": "13th",
            "item": [
                {
                    "id": 605
                }
            ]
        },
        {
            "name": "10th",
            "item": [
                {
                    "id": 651
                }
            ]
        },
        {
            "name": "9th",
            "item": [
                {
                    "id": 538
                }
            ]
        },
        {
            "name": "7th",
            "item": [
                {
                    "id": 636
                },
                {
                    "id": 633
                }
            ]
        },
        {
            "name": "6th",
            "item": [
                {
                    "id": 649
                },
                {
                    "id": 615
                }
            ]
        },
        {
            "name": "4th",
            "item": [
                {
                    "id": 515
                }
            ]
        },
        {
            "name": "1st",
            "item": [
                {
                    "id": 622
                }
            ]
        },
        {
            "name": "2nd BC",
            "item": [
                {
                    "id": 608
                }
            ]
        },
        {
            "name": "3rd BCE",
            "item": [
                {
                    "id": 630
                }
            ]
        }
    ],
    "space": [
        {
            "name": "AFGHANISTAN",
            "item": [
                {
                    "id": 622
                },
                {
                    "id": 515
                }
            ],
            "lati": 34,
            "long": 69
        },
        {
            "name": "ANHUI PROVINCE, CHINA",
            "item": [
                {
                    "id": 634
                }
            ],
            "lati": 32,
            "long": 117
        },
        {
            "name": "CHINA",
            "item": [
                {
                    "id": 659
                }
            ],
            "lati": 32,
            "long": 117
        },
        {
            "name": "CHINA",
            "item": [
                {
                    "id": 628
                }
            ],
            "lati": 35.5,
            "long": 112.2
        },
        {
            "name": "CHINA",
            "item": [
                {
                    "id": 633
                }
            ],
            "lati": 40,
            "long": 108.34
        },
        {
            "name": "CHINA",
            "item": [
                {
                    "id": 598
                }
            ],
            "lati": 28,
            "long": 116.4
        },
        {
            "name": "GANSU,CHINA",
            "item": [
                {
                    "id": 636
                }
            ],
            "lati": 40.14,
            "long": 94.6
        },
        {
            "name": "HUNAN PROVINCE, CHINA",
            "item": [
                {
                    "id": 630
                }
            ],
            "lati": 28.19,
            "long": 112.98
        },
        {
            "name": "JIANGSU PROVINCE, CHINA",
            "item": [
                {
                    "id": 651
                }
            ],
            "lati": 31.5,
            "long": 118.5
        },
        {
            "name": "CHINA",
            "item": [
                {
                    "id": 605
                }
            ],
            "lati": 31.5,
            "long": 118.5
        },
        {
            "name": "LUOYANG, CHINA",
            "item": [
                {
                    "id": 649
                },
                {
                    "id": 615
                }
            ],
            "lati": 35.5,
            "long": 112.2
        },
        {
            "name": "MAINLAND CHINA, TAIWAN, US, JAPAN",
            "item": [
                {
                    "id": 539
                }
            ],
            "lati": 25,
            "long": 121.5
        },
        {
            "name": "CHINA",
            "item": [
                {
                    "id": 643
                }
            ],
            "lati": 31,
            "long": 121.2
        },
        {
            "name": "SHANXI, CHINA",
            "item": [
                {
                    "id": 538
                }
            ],
            "lati": 31.5,
            "long": 118.5
        },
        {
            "name": "CHINA",
            "item": [
                {
                    "id": 608
                }
            ],
            "lati": 39.5,
            "long": 113.2
        }
    ]
},
                      k = O;
                    return console.log("raw data loaded ===> ", k), k;
                  } catch (O) {
                    return (
                      console.error(O),
                      console.info(
                        "[CamLab WebGL] Error loading content API, will use raw mocked data."
                      ),
                      JSON.parse(`{
    "projects": [
        {
            "id": 659,
            "name": "Fire Dream",
            "url": "https://camlab.fas.harvard.edu/project/fire-dream/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-5.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-5.jpg",
            "theme": "Biocentric Art ",
            "exact_era": [
                "20th Century"
            ]
        },
        {
            "id": 651,
            "name": "Mindscape",
            "url": "https://camlab.fas.harvard.edu/project/mindscape/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-1.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-1.jpg",
            "theme": "Mental Theater ",
            "exact_era": [
                "10th - 16th centuries"
            ]
        },
        {
            "id": 649,
            "name": "Luoyang Soundscape",
            "url": "https://camlab.fas.harvard.edu/project/luoyang-soundscape/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-2.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-2.jpg",
            "theme": "Experiential Heritage ",
            "exact_era": [
                "6th Century"
            ]
        },
        {
            "id": 643,
            "name": "China Builders",
            "url": "https://camlab.fas.harvard.edu/project/china-builders/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-4.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-4.jpg",
            "theme": "Cognitive Mapping ",
            "exact_era": [
                "20th Century"
            ]
        },
        {
            "id": 636,
            "name": "Cave Dance",
            "url": "https://camlab.fas.harvard.edu/project/cave-dance/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image_-c0-copy.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image_-c0-copy.jpg",
            "theme": "Biocentric Art Generative Art ",
            "exact_era": [
                "7th -10th centuries"
            ]
        },
        {
            "id": 634,
            "name": "Illusory Courtyard",
            "url": "https://camlab.fas.harvard.edu/project/illusory-courtyard/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/is3.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/is3.jpg",
            "theme": "Object Play ",
            "exact_era": [
                "16th - 19th centuries"
            ]
        },
        {
            "id": 633,
            "name": "Indra\u2019s Net",
            "url": "https://camlab.fas.harvard.edu/project/indras-net/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image2-5.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image2-5.jpg",
            "theme": "Mental Theater ",
            "exact_era": [
                "7th -12th centuries"
            ]
        },
        {
            "id": 630,
            "name": "The Art of Life: Mawangdui Han Tombs",
            "url": "https://camlab.fas.harvard.edu/project/the-art-of-life-mawangdui-han-tombs/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/mawangdui-2.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/mawangdui-2.jpg",
            "theme": "Biocentric Art ",
            "exact_era": [
                "3rd century BCE"
            ]
        },
        {
            "id": 628,
            "name": "Study of Laughter",
            "url": "https://camlab.fas.harvard.edu/project/study-of-laughter/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image_-The-Second-State130x196cm1987-2000x1331.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image_-The-Second-State130x196cm1987-2000x1331.jpg",
            "theme": "Generative Art ",
            "exact_era": [
                "1980s"
            ]
        },
        {
            "id": 622,
            "name": "Digital Gandhara",
            "url": "https://camlab.fas.harvard.edu/project/digital-gandhara/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-3.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-3.jpg",
            "theme": "Cognitive Mapping Experiential Heritage ",
            "exact_era": [
                "1st - 6th centuries"
            ]
        },
        {
            "id": 615,
            "name": "Digital Luoyang",
            "url": "https://camlab.fas.harvard.edu/project/digital-luoyang/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image.jpg",
            "theme": "Cognitive Mapping ",
            "exact_era": [
                "6th Century"
            ]
        },
        {
            "id": 608,
            "name": "Embodied Architecture",
            "url": "https://camlab.fas.harvard.edu/project/embodied-architecture/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/EA-horizontal-4-2000x1125.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/EA-horizontal-4-2000x1125.jpg",
            "theme": "Experiential Heritage ",
            "exact_era": [
                "2nd century BC - 12th Century"
            ]
        },
        {
            "id": 605,
            "name": "Romance of the Western Chamber",
            "url": "https://camlab.fas.harvard.edu/project/romance-of-the-western-chamber/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/image\u7684\u526F\u672C.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/image\u7684\u526F\u672C.jpg",
            "theme": "Object Play ",
            "exact_era": [
                "13th - 18th centuries"
            ]
        },
        {
            "id": 598,
            "name": "Peony Pavilion",
            "url": "https://camlab.fas.harvard.edu/project/peony-pavilion/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1.jpg",
            "theme": "Object Play ",
            "exact_era": [
                "16th Century"
            ]
        },
        {
            "id": 539,
            "name": "To the Moon",
            "url": "https://camlab.fas.harvard.edu/project/to-the-moon/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image-1-e1665849790550-2000x1186.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image-1-e1665849790550-2000x1186.jpg",
            "theme": "Mental Theater ",
            "exact_era": [
                "20th Century"
            ]
        },
        {
            "id": 538,
            "name": "Digital Temple",
            "url": "https://camlab.fas.harvard.edu/project/digital-temple/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image2_-6-18x24-DT-1.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image2_-6-18x24-DT-1.jpg",
            "theme": "Cognitive Mapping Experiential Heritage ",
            "exact_era": [
                "9th - 16th centuries"
            ]
        },
        {
            "id": 515,
            "name": "Shadow Cave",
            "url": "https://camlab.fas.harvard.edu/project/shadow-cave/",
            "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/sc7.jpg",
            "space_img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/sc7.jpg",
            "theme": "Experiential Heritage Mental Theater ",
            "exact_era": [
                "4th - 13th centuries"
            ]
        }
    ],
    "theme": [
        {
            "name": "Biocentric Art",
            "item": [
                {
                    "id": 659,
                    "name": "Fire Dream",
                    "url": "https://camlab.fas.harvard.edu/project/fire-dream/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-5.jpg"
                },
                {
                    "id": 636,
                    "name": "Cave Dance",
                    "url": "https://camlab.fas.harvard.edu/project/cave-dance/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image_-c0-copy.jpg"
                },
                {
                    "id": 630,
                    "name": "The Art of Life: Mawangdui Han Tombs",
                    "url": "https://camlab.fas.harvard.edu/project/the-art-of-life-mawangdui-han-tombs/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/mawangdui-2.jpg"
                }
            ]
        },
        {
            "name": "Cognitive Mapping",
            "item": [
                {
                    "id": 643,
                    "name": "China Builders",
                    "url": "https://camlab.fas.harvard.edu/project/china-builders/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-4.jpg"
                },
                {
                    "id": 622,
                    "name": "Digital Gandhara",
                    "url": "https://camlab.fas.harvard.edu/project/digital-gandhara/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-3.jpg"
                },
                {
                    "id": 615,
                    "name": "Digital Luoyang",
                    "url": "https://camlab.fas.harvard.edu/project/digital-luoyang/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image.jpg"
                },
                {
                    "id": 538,
                    "name": "Digital Temple",
                    "url": "https://camlab.fas.harvard.edu/project/digital-temple/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image2_-6-18x24-DT-1.jpg"
                }
            ]
        },
        {
            "name": "Experiential Heritage",
            "item": [
                {
                    "id": 649,
                    "name": "Luoyang Soundscape",
                    "url": "https://camlab.fas.harvard.edu/project/luoyang-soundscape/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-2.jpg"
                },
                {
                    "id": 622,
                    "name": "Digital Gandhara",
                    "url": "https://camlab.fas.harvard.edu/project/digital-gandhara/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-3.jpg"
                },
                {
                    "id": 608,
                    "name": "Embodied Architecture",
                    "url": "https://camlab.fas.harvard.edu/project/embodied-architecture/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/EA-horizontal-4-2000x1125.jpg"
                },
                {
                    "id": 538,
                    "name": "Digital Temple",
                    "url": "https://camlab.fas.harvard.edu/project/digital-temple/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image2_-6-18x24-DT-1.jpg"
                },
                {
                    "id": 515,
                    "name": "Shadow Cave",
                    "url": "https://camlab.fas.harvard.edu/project/shadow-cave/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/sc7.jpg"
                }
            ]
        },
        {
            "name": "Generative Art",
            "item": [
                {
                    "id": 636,
                    "name": "Cave Dance",
                    "url": "https://camlab.fas.harvard.edu/project/cave-dance/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image_-c0-copy.jpg"
                },
                {
                    "id": 628,
                    "name": "Study of Laughter",
                    "url": "https://camlab.fas.harvard.edu/project/study-of-laughter/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image_-The-Second-State130x196cm1987-2000x1331.jpg"
                }
            ]
        },
        {
            "name": "Mental Theater",
            "item": [
                {
                    "id": 651,
                    "name": "Mindscape",
                    "url": "https://camlab.fas.harvard.edu/project/mindscape/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1-1.jpg"
                },
                {
                    "id": 633,
                    "name": "Indra\u2019s Net",
                    "url": "https://camlab.fas.harvard.edu/project/indras-net/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image2-5.jpg"
                },
                {
                    "id": 539,
                    "name": "To the Moon",
                    "url": "https://camlab.fas.harvard.edu/project/to-the-moon/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image-1-e1665849790550-2000x1186.jpg"
                },
                {
                    "id": 515,
                    "name": "Shadow Cave",
                    "url": "https://camlab.fas.harvard.edu/project/shadow-cave/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/sc7.jpg"
                }
            ]
        },
        {
            "name": "Object Play",
            "item": [
                {
                    "id": 634,
                    "name": "Illusory Courtyard",
                    "url": "https://camlab.fas.harvard.edu/project/illusory-courtyard/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/is3.jpg"
                },
                {
                    "id": 605,
                    "name": "Romance of the Western Chamber",
                    "url": "https://camlab.fas.harvard.edu/project/romance-of-the-western-chamber/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/image\u7684\u526F\u672C.jpg"
                },
                {
                    "id": 598,
                    "name": "Peony Pavilion",
                    "url": "https://camlab.fas.harvard.edu/project/peony-pavilion/",
                    "img": "https://camlab.fas.harvard.edu/wp-content/uploads/2022/09/cover-image1.jpg"
                }
            ]
        }
    ],
    "time": [
        {
            "name": "20th",
            "item": [
                {
                    "id": 659
                },
                {
                    "id": 628
                },
                {
                    "id": 539
                }
            ]
        },
        {
            "name": "16th",
            "item": [
                {
                    "id": 634
                },
                {
                    "id": 598
                }
            ]
        },
        {
            "name": "13th",
            "item": [
                {
                    "id": 605
                }
            ]
        },
        {
            "name": "10th",
            "item": [
                {
                    "id": 651
                }
            ]
        },
        {
            "name": "9th",
            "item": [
                {
                    "id": 538
                }
            ]
        },
        {
            "name": "7th",
            "item": [
                {
                    "id": 636
                },
                {
                    "id": 633
                }
            ]
        },
        {
            "name": "6th",
            "item": [
                {
                    "id": 649
                },
                {
                    "id": 615
                }
            ]
        },
        {
            "name": "4th",
            "item": [
                {
                    "id": 515
                }
            ]
        },
        {
            "name": "1st",
            "item": [
                {
                    "id": 622
                }
            ]
        },
        {
            "name": "2nd BC",
            "item": [
                {
                    "id": 643
                },
                {
                    "id": 608
                }
            ]
        },
        {
            "name": "3rd BCE",
            "item": [
                {
                    "id": 630
                }
            ]
        }
    ],
    "space": [
        {
            "name": "AFGHANISTAN",
            "item": [
                {
                    "id": 622
                },
                {
                    "id": 515
                }
            ],
            "lati": 34,
            "long": 69
        },
        {
            "name": "ANHUI PROVINCE, CHINA",
            "item": [
                {
                    "id": 634
                }
            ],
            "lati": 32,
            "long": 117
        },
        {
            "name": "CHINA",
            "item": [
                {
                    "id": 659
                }
            ],
            "lati": 32,
            "long": 117
        },
        {
            "name": "CHINA",
            "item": [
                {
                    "id": 628
                }
            ],
            "lati": 35.5,
            "long": 112.2
        },
        {
            "name": "BURMA",
            "item": [
                {
                    "id": 515
                }
            ],
            "lati": 16.7,
            "long": 96.1
        },
        {
            "name": "CHINA",
            "item": [
                {
                    "id": 633
                }
            ],
            "lati": 40,
            "long": 108.34
        },
        {
            "name": "CHINA",
            "item": [
                {
                    "id": 598
                }
            ],
            "lati": 28,
            "long": 116.4
        },
        {
            "name": "GANSU,CHINA",
            "item": [
                {
                    "id": 636
                }
            ],
            "lati": 40.14,
            "long": 94.6
        },
        {
            "name": "HUNAN PROVINCE, CHINA",
            "item": [
                {
                    "id": 630
                }
            ],
            "lati": 28.19,
            "long": 112.98
        },
        {
            "name": "INDIA",
            "item": [
                {
                    "id": 622
                }
            ],
            "lati": 28.5,
            "long": 77.2
        },
        {
            "name": "JIANGSU PROVINCE, CHINA",
            "item": [
                {
                    "id": 651
                }
            ],
            "lati": 31.5,
            "long": 118.5
        },
        {
            "name": "CHINA",
            "item": [
                {
                    "id": 605
                }
            ],
            "lati": 31.5,
            "long": 118.5
        },
        {
            "name": "KOREA",
            "item": [
                {
                    "id": 515
                }
            ],
            "lati": 37.5,
            "long": 126.8
        },
        {
            "name": "LUOYANG, CHINA",
            "item": [
                {
                    "id": 649
                },
                {
                    "id": 615
                }
            ],
            "lati": 35.5,
            "long": 112.2
        },
        {
            "name": "PAKISTAN",
            "item": [
                {
                    "id": 622
                }
            ],
            "lati": 33.43,
            "long": 73.03
        },
        {
            "name": "CHINA",
            "item": [
                {
                    "id": 643
                }
            ],
            "lati": 31,
            "long": 121.2
        },
        {
            "name": "SHANXI, CHINA",
            "item": [
                {
                    "id": 538
                }
            ],
            "lati": 31.5,
            "long": 118.5
        },
        {
            "name": "CHINA",
            "item": [
                {
                    "id": 539
                }
            ],
            "lati": 25,
            "long": 121.5
        },
        {
            "name": "CHINA",
            "item": [
                {
                    "id": 608
                }
            ],
            "lati": 39.5,
            "long": 113.2
        }
    ]
}`)
                    );
                  }
                })()
              );
              s({
                projects: T.projects,
                theme: T.theme,
                space: T.space,
                time: T.time,
              });
            },
            m = (T, O) => {
              const k = T.getBoundingClientRect();
              (X.containerRect = k),
                (X.renderer = new A_({ alpha: !0, antialias: !0 })),
                X.renderer.setClearColor(0, 0),
                X.renderer.setPixelRatio(window.devicePixelRatio),
                X.renderer.setSize(k.width, k.height),
                T.appendChild(X.renderer.domElement),
                (X.camera.aspect = k.width / k.height),
                (X.camera.near = 0.1),
                (X.camera.far = 1e3),
                (X.camera.fov = Gh),
                (X.controls = new ST(X.camera, O)),
                (X.controls.enablePan = !1),
                (X.composer = _(k));
              const P = new z_(16777215, 0.26);
              X.scene.add(P),
                console.timeEnd("[Performance: WebGL Init]"),
                setTimeout(() => {
                  requestAnimationFrame((E) => x(E)),
                    (X.initialized = !0),
                    oy(),
                    _a[r].initializer(a);
                }, 200);
            },
            x = (T) => {
              var O;
              ci.update(T),
                X.controlUpdate && ((O = X.controls) == null || O.update());
              for (const k of X.themeManager.dispersiveSprites)
                k.lookAt(X.camera.position);
              if (
                (An.spaceGlobeMat &&
                  (An.spaceGlobeMat.uniforms.u_cloud_drift.value = 0.6 * T),
                sr.dispersiveCloud)
              ) {
                const k = sr.dispersiveCloud.geometry,
                  P = k.attributes.position.array,
                  E = k.attributes.offset.array,
                  z = 0.001 * T;
                for (let A = 0; A < sr.dispersiveCloudPrtCnt; A++) {
                  const D = 3 * A,
                    V = P[D + 0],
                    K = P[D + 2],
                    B = Math.sqrt(Math.pow(V, 2) + Math.pow(K, 2));
                  P[D + 1] = 0.02 * Math.sin(0.3 * B + z) * (20.8 - B) + E[A];
                }
                k.attributes.position.needsUpdate = !0;
              }
              X.composer.render(T), requestAnimationFrame(x);
            },
            _ = (T) => {
              if (!X.renderer) return;
              const O = new (class {
                constructor(
                  k = null,
                  {
                    depthBuffer: P = !0,
                    stencilBuffer: E = !1,
                    multisampling: z = 0,
                    frameBufferType: A,
                  } = {}
                ) {
                  (this.renderer = null),
                    (this.inputBuffer = this.createBuffer(P, E, A, z)),
                    (this.outputBuffer = this.inputBuffer.clone()),
                    (this.copyPass = new h3()),
                    (this.depthTexture = null),
                    (this.passes = []),
                    (this.timer = new (class {
                      constructor() {
                        (this.previousTime = 0),
                          (this.currentTime = 0),
                          (this.delta = 0),
                          (this.fixedDelta = 1e3 / 60),
                          (this.elapsed = 0),
                          (this.timescale = 1),
                          (this.fixedDeltaEnabled = !1),
                          (this.autoReset = !1);
                      }
                      setFixedDeltaEnabled(D) {
                        return (this.fixedDeltaEnabled = D), this;
                      }
                      isAutoResetEnabled(D) {
                        return this.autoReset;
                      }
                      setAutoResetEnabled(D) {
                        return (
                          typeof document < "u" &&
                            document.hidden !== void 0 &&
                            (D
                              ? document.addEventListener(
                                  "visibilitychange",
                                  this
                                )
                              : document.removeEventListener(
                                  "visibilitychange",
                                  this
                                ),
                            (this.autoReset = D)),
                          this
                        );
                      }
                      getDelta() {
                        return 0.001 * this.delta;
                      }
                      getFixedDelta() {
                        return 0.001 * this.fixedDelta;
                      }
                      setFixedDelta(D) {
                        return (this.fixedDelta = 1e3 * D), this;
                      }
                      getElapsed() {
                        return 0.001 * this.elapsed;
                      }
                      getTimescale() {
                        return this.timescale;
                      }
                      setTimescale(D) {
                        return (this.timescale = D), this;
                      }
                      update(D) {
                        return (
                          this.fixedDeltaEnabled
                            ? (this.delta = this.fixedDelta)
                            : ((this.previousTime = this.currentTime),
                              (this.currentTime =
                                D !== void 0 ? D : performance.now()),
                              (this.delta =
                                this.currentTime - this.previousTime)),
                          (this.delta *= this.timescale),
                          (this.elapsed += this.delta),
                          this
                        );
                      }
                      reset() {
                        return (
                          (this.delta = 0),
                          (this.elapsed = 0),
                          (this.currentTime = performance.now()),
                          this
                        );
                      }
                      handleEvent(D) {
                        document.hidden ||
                          (this.currentTime = performance.now());
                      }
                      dispose() {
                        this.setAutoResetEnabled(!1);
                      }
                    })()),
                    (this.autoRenderToScreen = !0),
                    this.setRenderer(k);
                }
                get multisampling() {
                  return this.inputBuffer.samples || 0;
                }
                set multisampling(k) {
                  const P = this.inputBuffer,
                    E = this.multisampling;
                  E > 0 && k > 0
                    ? ((this.inputBuffer.samples = k),
                      (this.outputBuffer.samples = k),
                      this.inputBuffer.dispose(),
                      this.outputBuffer.dispose())
                    : E !== k &&
                      (this.inputBuffer.dispose(),
                      this.outputBuffer.dispose(),
                      (this.inputBuffer = this.createBuffer(
                        P.depthBuffer,
                        P.stencilBuffer,
                        P.texture.type,
                        k
                      )),
                      (this.inputBuffer.depthTexture = this.depthTexture),
                      (this.outputBuffer = this.inputBuffer.clone()));
                }
                getTimer() {
                  return this.timer;
                }
                getRenderer() {
                  return this.renderer;
                }
                setRenderer(k) {
                  if (((this.renderer = k), k !== null)) {
                    const P = k.getSize(new ge()),
                      E = k.getContext().getContextAttributes().alpha,
                      z = this.inputBuffer.texture.type;
                    z === 1009 &&
                      k.outputEncoding === 3001 &&
                      ((this.inputBuffer.texture.encoding = 3001),
                      (this.outputBuffer.texture.encoding = 3001),
                      this.inputBuffer.dispose(),
                      this.outputBuffer.dispose()),
                      (k.autoClear = !1),
                      this.setSize(P.width, P.height);
                    for (const A of this.passes) A.initialize(k, E, z);
                  }
                }
                replaceRenderer(k, P = !0) {
                  const E = this.renderer,
                    z = E.domElement.parentNode;
                  return (
                    this.setRenderer(k),
                    P &&
                      z !== null &&
                      (z.removeChild(E.domElement),
                      z.appendChild(k.domElement)),
                    E
                  );
                }
                createDepthTexture() {
                  const k = (this.depthTexture = new C_());
                  return (
                    (this.inputBuffer.depthTexture = k),
                    this.inputBuffer.dispose(),
                    this.inputBuffer.stencilBuffer
                      ? ((k.format = 1027), (k.type = 1020))
                      : (k.type = 1014),
                    k
                  );
                }
                deleteDepthTexture() {
                  if (this.depthTexture !== null) {
                    this.depthTexture.dispose(),
                      (this.depthTexture = null),
                      (this.inputBuffer.depthTexture = null),
                      this.inputBuffer.dispose();
                    for (const k of this.passes) k.setDepthTexture(null);
                  }
                }
                createBuffer(k, P, E, z) {
                  const A = this.renderer,
                    D =
                      A === null ? new ge() : A.getDrawingBufferSize(new ge()),
                    V = {
                      minFilter: 1006,
                      magFilter: 1006,
                      stencilBuffer: P,
                      depthBuffer: k,
                      type: E,
                    };
                  let K;
                  return (
                    z > 0
                      ? ((K =
                          Number("144".replace(/\D+/g, "")) < 138
                            ? new wT(D.width, D.height, V)
                            : new Jt(D.width, D.height, V)),
                        (K.ignoreDepthForMultisampleCopy = !1),
                        (K.samples = z))
                      : (K = new Jt(D.width, D.height, V)),
                    E === 1009 &&
                      A !== null &&
                      A.outputEncoding === 3001 &&
                      (K.texture.encoding = 3001),
                    (K.texture.name = "EffectComposer.Buffer"),
                    (K.texture.generateMipmaps = !1),
                    K
                  );
                }
                addPass(k, P) {
                  const E = this.passes,
                    z = this.renderer,
                    A = z.getDrawingBufferSize(new ge()),
                    D = z.getContext().getContextAttributes().alpha,
                    V = this.inputBuffer.texture.type;
                  if (
                    (k.setRenderer(z),
                    k.setSize(A.width, A.height),
                    k.initialize(z, D, V),
                    this.autoRenderToScreen &&
                      (E.length > 0 && (E[E.length - 1].renderToScreen = !1),
                      k.renderToScreen && (this.autoRenderToScreen = !1)),
                    P !== void 0 ? E.splice(P, 0, k) : E.push(k),
                    this.autoRenderToScreen &&
                      (E[E.length - 1].renderToScreen = !0),
                    k.needsDepthTexture || this.depthTexture !== null)
                  )
                    if (this.depthTexture === null) {
                      const K = this.createDepthTexture();
                      for (k of E) k.setDepthTexture(K);
                    } else k.setDepthTexture(this.depthTexture);
                }
                removePass(k) {
                  const P = this.passes,
                    E = P.indexOf(k);
                  if (E !== -1 && P.splice(E, 1).length > 0) {
                    if (this.depthTexture !== null) {
                      const z = (A, D) => A || D.needsDepthTexture;
                      P.reduce(z, !1) ||
                        (k.getDepthTexture() === this.depthTexture &&
                          k.setDepthTexture(null),
                        this.deleteDepthTexture());
                    }
                    this.autoRenderToScreen &&
                      E === P.length &&
                      ((k.renderToScreen = !1),
                      P.length > 0 && (P[P.length - 1].renderToScreen = !0));
                  }
                }
                removeAllPasses() {
                  const k = this.passes;
                  this.deleteDepthTexture(),
                    k.length > 0 &&
                      (this.autoRenderToScreen &&
                        (k[k.length - 1].renderToScreen = !1),
                      (this.passes = []));
                }
                render(k) {
                  const P = this.renderer,
                    E = this.copyPass;
                  let z,
                    A,
                    D,
                    V = this.inputBuffer,
                    K = this.outputBuffer,
                    B = !1;
                  k === void 0 && (k = this.timer.update().getDelta());
                  for (const Y of this.passes)
                    Y.enabled &&
                      (Y.render(P, V, K, k, B),
                      Y.needsSwap &&
                        (B &&
                          ((E.renderToScreen = Y.renderToScreen),
                          (z = P.getContext()),
                          (A = P.state.buffers.stencil),
                          A.setFunc(z.NOTEQUAL, 1, 4294967295),
                          E.render(P, V, K, k, B),
                          A.setFunc(z.EQUAL, 1, 4294967295)),
                        (D = V),
                        (V = K),
                        (K = D)),
                      Y instanceof y3 ? (B = !0) : Y instanceof d3 && (B = !1));
                }
                setSize(k, P, E) {
                  const z = this.renderer;
                  if (k === void 0 || P === void 0) {
                    const D = z.getSize(new ge());
                    (k = D.width), (P = D.height);
                  }
                  z.setSize(k, P, E);
                  const A = z.getDrawingBufferSize(new ge());
                  this.inputBuffer.setSize(A.width, A.height),
                    this.outputBuffer.setSize(A.width, A.height);
                  for (const D of this.passes) D.setSize(A.width, A.height);
                }
                reset() {
                  const k = this.timer.isAutoResetEnabled();
                  this.dispose(),
                    (this.autoRenderToScreen = !0),
                    this.timer.setAutoResetEnabled(k);
                }
                dispose() {
                  for (const k of this.passes) k.dispose();
                  (this.passes = []),
                    this.inputBuffer !== null && this.inputBuffer.dispose(),
                    this.outputBuffer !== null && this.outputBuffer.dispose(),
                    this.deleteDepthTexture(),
                    this.copyPass.dispose(),
                    this.timer.dispose();
                }
              })(X.renderer);
              return (
                O.setSize(T.width, T.height),
                O.addPass(new f3(X.scene, X.camera)),
                O.addPass(
                  new m3(
                    X.camera,
                    new M3({
                      intensity: 1.2,
                      luminanceThreshold: 0.55,
                      mipmapBlur: !0,
                      resolutionScale: 1.2,
                    })
                  )
                ),
                O
              );
            },
            b = (T) => {
              X.renderer &&
                ((X.camera.aspect = T.width / T.height),
                X.camera.updateProjectionMatrix(),
                X.renderer.setSize(T.width, T.height),
                (X.containerRect = T));
            },
            w = (T) => {
              switch (X.cntSection) {
                case Ke.THEME:
                  ((O, k, P, E) => {
                    var B, Y, R, L, Z, re;
                    if (X.themeManager.cameraTween) return;
                    const z = new ge(),
                      A = k.current.getBoundingClientRect();
                    (z.x = (O.clientX / A.width) * 2 - 1),
                      (z.y = (-O.clientY / A.height) * 2 + 1),
                      X.rayCaster.setFromCamera(z, X.camera);
                    const D = X.rayCaster.intersectObjects(
                      X.themeManager.rayCastGroup.children,
                      !1
                    );
                    if (D.length <= 0)
                      return X.themeManager.cntRootDroplet ? void P() : void 0;
                    const V = D[0].object;
                    if (X.themeManager.cntRootDroplet)
                      switch (V.userData.rayCastLevel) {
                        case Ki.THEME_IDLE:
                        case Ki.THEME_SUB:
                          return;
                        case Ki.THEME_ROOT:
                        default:
                          if (QC) {
                            const q = X.rayCaster.intersectObjects(
                              V.userData.rootDroplet.children,
                              !1
                            );
                            if (q.length <= 0) return void P();
                            (L =
                              (R =
                                (Y =
                                  (B = q[0].object) == null
                                    ? void 0
                                    : B.userData) == null
                                  ? void 0
                                  : Y.themeData) == null
                                ? void 0
                                : R.onClick) == null || L.call(R);
                          }
                          return void P();
                      }
                    const K = V.userData;
                    Vl(!1),
                      (re = (Z = K.themeData).onClick) == null ||
                        re.call(Z, K.rootDroplet, () => {
                          (X.themeManager.cntRootDroplet = K.rootDroplet),
                            E(K.rootDroplet);
                        });
                  })(T, e, I, l);
                  break;
                case Ke.SPACE:
                  ((O, k, P, E) => {
                    const z = new ge(),
                      A = k.current.getBoundingClientRect();
                    (z.x = (O.clientX / A.width) * 2 - 1),
                      (z.y = (-O.clientY / A.height) * 2 + 1),
                      X.rayCaster.setFromCamera(z, X.camera);
                    const D = X.rayCaster.intersectObjects(
                      X.spaceManager.rayCastGroup.children,
                      !1
                    );
                    if (D.length <= 0)
                      return X.spaceManager.cntSite
                        ? ((X.spaceManager.cntSite = void 0),
                          void nm(X.spaceManager.cntSite, P, E))
                        : void 0;
                    const V = D[0].object;
                    (X.spaceManager.cntSite = V),
                      nm(X.spaceManager.cntSite, P, E);
                  })(T, e, g, y);
                  break;
                case Ke.TIME:
                  ((O, k) => {
                    var D, V;
                    const P = new ge(),
                      E = k.current.getBoundingClientRect();
                    (P.x = (O.clientX / E.width) * 2 - 1),
                      (P.y = (-O.clientY / E.height) * 2 + 1),
                      X.rayCaster.setFromCamera(P, X.camera);
                    const z = X.rayCaster.intersectObjects(
                      ((V =
                        (D = X.timeManager.cntTimeSliceRing) == null
                          ? void 0
                          : D.userData) == null
                        ? void 0
                        : V.ringDotGroup.children) || [],
                      !1
                    );
                    if (z.length > 0) {
                      const K = z[0].object.userData.timeSubDotConfig;
                      window.open(K.contentURL, "_blank");
                    }
                    const A = X.rayCaster.intersectObjects(
                      X.timeManager.rings,
                      !0
                    );
                    if (A.length > 0) {
                      const K = A[0].object.userData.nestedRing || A[0].object,
                        B = new j();
                      K.getWorldPosition(B);
                      const Y = B.z;
                      eA(Y, !0);
                    }
                  })(T, e);
              }
            },
            M = (T) => {
              switch (X.cntSection) {
                case Ke.THEME:
                  if (!o) return;
                  ((O, k, P, E) => {
                    if (X.themeManager.cameraTween) return;
                    const z = new ge(),
                      A = k.current.getBoundingClientRect();
                    (z.x = (O.clientX / A.width) * 2 - 1),
                      (z.y = (-O.clientY / A.height) * 2 + 1),
                      X.rayCaster.setFromCamera(z, X.camera);
                    const D = X.rayCaster.intersectObjects(
                      X.themeManager.subDroplets,
                      !1
                    );
                    if (D.length <= 0)
                      return (
                        (X.themeManager.cntSubDroplet = void 0), void P(void 0)
                      );
                    const V = D[0].object;
                    (X.themeManager.cntSubDroplet = V), P(V);
                    const K = new j();
                    V.getWorldPosition(K), X.camera.updateMatrixWorld();
                    const B = new j(K.x, K.y + 0.9, K.z).project(X.camera),
                      Y = Kb(V),
                      R = new ge(B.x * A.width * 0.5, B.y * A.height * -0.5),
                      L = new ge(Y.x * A.width * 0.5, Y.y * A.height * -0.5);
                    E({
                      centerScreenPos: L,
                      droplet2DDia: 0.5 * R.distanceTo(L),
                    });
                  })(T, e, c, d);
                  break;
                case Ke.SPACE:
                  break;
                case Ke.TIME:
                  ((O, k) => {
                    var D, V, K, B, Y;
                    if (!X.timeManager.timeSlice) return;
                    const P = new ge(),
                      E = k.current.getBoundingClientRect();
                    (P.x = (O.clientX / E.width) * 2 - 1),
                      (P.y = (-O.clientY / E.height) * 2 + 1),
                      X.rayCaster.setFromCamera(P, X.camera);
                    const z = X.rayCaster.intersectObjects(
                      X.timeManager.rings,
                      !0
                    );
                    if (X.timeManager.cntTimeSliceRing) {
                      const R = X.rayCaster.intersectObjects(
                        ((V =
                          (D = X.timeManager.cntTimeSliceRing) == null
                            ? void 0
                            : D.userData) == null
                          ? void 0
                          : V.ringDotGroup.children) || [],
                        !1
                      );
                      if (R.length > 0) {
                        const L = R[0].object;
                        fy(L);
                      } else fy(void 0);
                    }
                    if (z.length <= 0) {
                      const R = X.rayCaster.intersectObjects(
                          X.timeManager.cntTimeSliceRing
                            ? [X.timeManager.timeSlice]
                            : [],
                          !1
                        ),
                        L = (K = R[0]) == null ? void 0 : K.point,
                        Z =
                          (L ? new j(L.x, L.y, 0).length() : 1 / 0) >
                          ((Y =
                            (B = X.timeManager.cntTimeSliceRing) == null
                              ? void 0
                              : B.userData) == null
                            ? void 0
                            : Y.ringRadius);
                      return R.length <= 0 || (R.length > 0 && Z)
                        ? ((X.timeManager.cntTimeSliceRing = void 0),
                          void im(X.timeManager.cntTimeSliceRing))
                        : void 0;
                    }
                    const A = z[0].object.userData.nestRing || z[0].object;
                    (X.timeManager.cntTimeSliceRing = A),
                      im(X.timeManager.cntTimeSliceRing);
                  })(T, e);
              }
            },
            C = (T) => {
              X.cntSection === Ke.TIME && dy(T.deltaY);
            };
          let N = 0;
          const G = (T) => {
              X.cntSection === Ke.TIME && (N = T.touches[0].clientY);
            },
            U = (T) => {
              if (X.cntSection !== Ke.TIME) return;
              const O = T.touches[0].clientY,
                k = O - N;
              (N = O), dy(k);
            },
            I = () => {
              X.themeManager.cameraTween ||
                (l(void 0),
                c(void 0),
                Ef({ position: hg }, !0, () => {
                  (X.themeManager.cntRootDroplet = void 0), Vl(!0);
                }));
            },
            F = (T) => {
              var A;
              if (
                !a ||
                X.themeManager.cameraTween ||
                !X.themeManager.cntRootDroplet
              )
                return;
              const O = [...a.theme].filter((D) => !D.primary),
                k = X.themeManager.cntRootDroplet.userData.themeId;
              let P = O.findIndex((D) => D.uuid === k) + T;
              P >= O.length && (P = 0), P < 0 && (P = O.length - 1);
              const E = O[P],
                z = X.themeManager.rayCastGroup.children.find(
                  (D) => D.uuid === `${ea.DROPLET}_${E.uuid}`
                );
              E &&
                z &&
                ((A = E.onClick) == null ||
                  A.call(E, z, () => {
                    (X.themeManager.cntRootDroplet = z), l(z);
                  }));
            };
          return ws(ac, {
            children: [
              Rt(wE, {}),
              Rt(SE, {
                ref: (T) => {
                  e.current = T;
                },
                style: {
                  backgroundSize: "cover",
                  backgroundImage: (() => {
                    switch (X.cntSection) {
                      case Ke.THEME:
                        return "linear-gradient(160deg, rgba(45,54,66,1) 0%, rgba(16,18,22,1) 28%, rgba(16,18,22,1) 100%)";
                      case Ke.SPACE:
                      case Ke.TIME:
                        return (
                          "url(" +
                          new URL(
                            "assets/universe.b21c0b33.jpg",
                            import.meta.url
                          ).href +
                          ")"
                        );
                    }
                  })(),
                },
                children: Rt(N_, { onResize: b, onPosition: b }),
              }),
              Rt(ME, {
                ...(nA
                  ? { onClick: w, onTouchStart: G, onTouchMove: U }
                  : { onClick: w, onMouseMove: M, onWheel: C }),
                ref: (T) => {
                  t.current = T;
                },
              }),
              (() => {
                var T, O, k;
                switch (r) {
                  case Ke.THEME:
                    return ws(ac, {
                      children: [
                        o
                          ? ws(ac, {
                              children: [
                                Rt(
                                  C1,
                                  { side: "L", onClick: () => F(1) },
                                  "switcher-l"
                                ),
                                Rt(
                                  C1,
                                  { side: "R", onClick: () => F(-1) },
                                  "switcher-r"
                                ),
                                Rt(TE, { onClick: I }),
                              ],
                            })
                          : null,
                        Rt(EE, {
                          style: {
                            opacity: u ? "1.0" : "0.0",
                            backgroundImage: `url(${
                              (O =
                                (T = u == null ? void 0 : u.userData) == null
                                  ? void 0
                                  : T.themeData) == null
                                ? void 0
                                : O.subThemeBgImg
                            })`,
                          },
                          children: Rt(CE, {
                            style: {
                              transform: `translate(${h.centerScreenPos.x}px, ${h.centerScreenPos.y}px)`,
                              pointerEvents: u ? "auto" : "none",
                              width: `${h.droplet2DDia}px`,
                              height: `${h.droplet2DDia}px`,
                              borderRadius: 0.5 * h.droplet2DDia + "px",
                            },
                            onClick: () => {
                              var P, E, z;
                              (z =
                                (P = u == null ? void 0 : u.userData) == null
                                  ? void 0
                                  : (E = P.themeData).onClick) == null ||
                                z.call(E),
                                c(void 0);
                            },
                            children: Rt("span", {
                              id: "sub-droplet-label",
                              children:
                                ((k = u == null ? void 0 : u.userData) == null
                                  ? void 0
                                  : k.themeData.name) || "",
                            }),
                          }),
                        }),
                      ],
                    });
                  case Ke.SPACE:
                    return f && a
                      ? ws(ac, {
                          children: [
                            Rt($C, {
                              cntSite: f,
                              exhibitConfigs: a.projects,
                              siteConfigs: a.space,
                              setCntSite: g,
                              setShowSiteAnchorPin: y,
                            }),
                            p &&
                              ws(DE, {
                                style: { height: `${GC(f, e)}px` },
                                children: [
                                  Rt(kE, {
                                    children: f.userData.siteData.name,
                                  }),
                                  Rt(IE, {}),
                                ],
                              }),
                          ],
                        })
                      : null;
                  default:
                    return null;
                }
              })(),
            ],
          });
        };
      window.initCamLabWebGL = (n) => {
        const e = "camlab-webgl-root",
          t = Af.createRoot(document.getElementById(e));
        t
          ? t.render(Rt(rA, { defaultSection: n }))
          : console.error(
              `[CamLab WebGL] Content requires a root DOM element with id: ${e}`
            );
      };
    </script>
  </body>
</html>
